var vL=Object.defineProperty;var Xb=e=>{throw TypeError(e)};var yL=(e,t,r)=>t in e?vL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ar=(e,t,r)=>yL(e,typeof t!="symbol"?t+"":t,r),Xx=(e,t,r)=>t.has(e)||Xb("Cannot "+r);var Ie=(e,t,r)=>(Xx(e,t,"read from private field"),r?r.call(e):t.get(e)),_r=(e,t,r)=>t.has(e)?Xb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),er=(e,t,r,s)=>(Xx(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),xs=(e,t,r)=>(Xx(e,t,"access private method"),r);var Im=(e,t,r,s)=>({set _(a){er(e,t,a,r)},get _(){return Ie(e,t,s)}});function bL(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var v3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function tS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rS={exports:{}},Dg={},nS={exports:{}},ur={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf=Symbol.for("react.element"),wL=Symbol.for("react.portal"),NL=Symbol.for("react.fragment"),jL=Symbol.for("react.strict_mode"),SL=Symbol.for("react.profiler"),_L=Symbol.for("react.provider"),CL=Symbol.for("react.context"),kL=Symbol.for("react.forward_ref"),PL=Symbol.for("react.suspense"),AL=Symbol.for("react.memo"),EL=Symbol.for("react.lazy"),Jb=Symbol.iterator;function LL(e){return e===null||typeof e!="object"?null:(e=Jb&&e[Jb]||e["@@iterator"],typeof e=="function"?e:null)}var sS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aS=Object.assign,iS={};function Bu(e,t,r){this.props=e,this.context=t,this.refs=iS,this.updater=r||sS}Bu.prototype.isReactComponent={};Bu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oS(){}oS.prototype=Bu.prototype;function uy(e,t,r){this.props=e,this.context=t,this.refs=iS,this.updater=r||sS}var hy=uy.prototype=new oS;hy.constructor=uy;aS(hy,Bu.prototype);hy.isPureReactComponent=!0;var Zb=Array.isArray,lS=Object.prototype.hasOwnProperty,fy={current:null},cS={key:!0,ref:!0,__self:!0,__source:!0};function dS(e,t,r){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)lS.call(t,s)&&!cS.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Kf,type:e,key:i,ref:l,props:a,_owner:fy.current}}function TL(e,t){return{$$typeof:Kf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function my(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kf}function DL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ew=/\/+/g;function Jx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DL(""+e.key):t.toString(36)}function vp(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Kf:case wL:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+Jx(l,0):s,Zb(a)?(r="",e!=null&&(r=e.replace(ew,"$&/")+"/"),vp(a,t,r,"",function(d){return d})):a!=null&&(my(a)&&(a=TL(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(ew,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",Zb(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+Jx(i,o);l+=vp(i,t,r,c,a)}else if(c=LL(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+Jx(i,o++),l+=vp(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Mm(e,t,r){if(e==null)return e;var s=[],a=0;return vp(e,s,"","",function(i){return t.call(r,i,a++)}),s}function RL(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Us={current:null},yp={transition:null},IL={ReactCurrentDispatcher:Us,ReactCurrentBatchConfig:yp,ReactCurrentOwner:fy};function uS(){throw Error("act(...) is not supported in production builds of React.")}ur.Children={map:Mm,forEach:function(e,t,r){Mm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mm(e,function(){t++}),t},toArray:function(e){return Mm(e,function(t){return t})||[]},only:function(e){if(!my(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ur.Component=Bu;ur.Fragment=NL;ur.Profiler=SL;ur.PureComponent=uy;ur.StrictMode=jL;ur.Suspense=PL;ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IL;ur.act=uS;ur.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=aS({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=fy.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)lS.call(t,c)&&!cS.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:Kf,type:e.type,key:a,ref:i,props:s,_owner:l}};ur.createContext=function(e){return e={$$typeof:CL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_L,_context:e},e.Consumer=e};ur.createElement=dS;ur.createFactory=function(e){var t=dS.bind(null,e);return t.type=e,t};ur.createRef=function(){return{current:null}};ur.forwardRef=function(e){return{$$typeof:kL,render:e}};ur.isValidElement=my;ur.lazy=function(e){return{$$typeof:EL,_payload:{_status:-1,_result:e},_init:RL}};ur.memo=function(e,t){return{$$typeof:AL,type:e,compare:t===void 0?null:t}};ur.startTransition=function(e){var t=yp.transition;yp.transition={};try{e()}finally{yp.transition=t}};ur.unstable_act=uS;ur.useCallback=function(e,t){return Us.current.useCallback(e,t)};ur.useContext=function(e){return Us.current.useContext(e)};ur.useDebugValue=function(){};ur.useDeferredValue=function(e){return Us.current.useDeferredValue(e)};ur.useEffect=function(e,t){return Us.current.useEffect(e,t)};ur.useId=function(){return Us.current.useId()};ur.useImperativeHandle=function(e,t,r){return Us.current.useImperativeHandle(e,t,r)};ur.useInsertionEffect=function(e,t){return Us.current.useInsertionEffect(e,t)};ur.useLayoutEffect=function(e,t){return Us.current.useLayoutEffect(e,t)};ur.useMemo=function(e,t){return Us.current.useMemo(e,t)};ur.useReducer=function(e,t,r){return Us.current.useReducer(e,t,r)};ur.useRef=function(e){return Us.current.useRef(e)};ur.useState=function(e){return Us.current.useState(e)};ur.useSyncExternalStore=function(e,t,r){return Us.current.useSyncExternalStore(e,t,r)};ur.useTransition=function(){return Us.current.useTransition()};ur.version="18.3.1";nS.exports=ur;var p=nS.exports;const Ze=tS(p),py=bL({__proto__:null,default:Ze},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML=p,FL=Symbol.for("react.element"),OL=Symbol.for("react.fragment"),BL=Object.prototype.hasOwnProperty,UL=ML.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$L={key:!0,ref:!0,__self:!0,__source:!0};function hS(e,t,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)BL.call(t,s)&&!$L.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:FL,type:e,key:i,ref:l,props:a,_owner:UL.current}}Dg.Fragment=OL;Dg.jsx=hS;Dg.jsxs=hS;rS.exports=Dg;var n=rS.exports,fS={exports:{}},Pa={},mS={exports:{}},pS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,V){var re=T.length;T.push(V);e:for(;0<re;){var he=re-1>>>1,C=T[he];if(0<a(C,V))T[he]=V,T[re]=C,re=he;else break e}}function r(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var V=T[0],re=T.pop();if(re!==V){T[0]=re;e:for(var he=0,C=T.length,F=C>>>1;he<F;){var L=2*(he+1)-1,$=T[L],K=L+1,I=T[K];if(0>a($,re))K<C&&0>a(I,$)?(T[he]=I,T[K]=re,he=K):(T[he]=$,T[L]=re,he=L);else if(K<C&&0>a(I,re))T[he]=I,T[K]=re,he=K;else break e}}return V}function a(T,V){var re=T.sortIndex-V.sortIndex;return re!==0?re:T.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,x=3,f=!1,y=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var V=r(d);V!==null;){if(V.callback===null)s(d);else if(V.startTime<=T)s(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(d)}}function k(T){if(v=!1,w(T),!y)if(r(c)!==null)y=!0,Y(R);else{var V=r(d);V!==null&&de(k,V.startTime-T)}}function R(T,V){y=!1,v&&(v=!1,b(q),q=-1),f=!0;var re=x;try{for(w(V),m=r(c);m!==null&&(!(m.expirationTime>V)||T&&!A());){var he=m.callback;if(typeof he=="function"){m.callback=null,x=m.priorityLevel;var C=he(m.expirationTime<=V);V=e.unstable_now(),typeof C=="function"?m.callback=C:m===r(c)&&s(c),w(V)}else s(c);m=r(c)}if(m!==null)var F=!0;else{var L=r(d);L!==null&&de(k,L.startTime-V),F=!1}return F}finally{m=null,x=re,f=!1}}var W=!1,O=null,q=-1,D=5,J=-1;function A(){return!(e.unstable_now()-J<D)}function M(){if(O!==null){var T=e.unstable_now();J=T;var V=!0;try{V=O(!0,T)}finally{V?ee():(W=!1,O=null)}}else W=!1}var ee;if(typeof j=="function")ee=function(){j(M)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,ae=E.port2;E.port1.onmessage=M,ee=function(){ae.postMessage(null)}}else ee=function(){S(M,0)};function Y(T){O=T,W||(W=!0,ee())}function de(T,V){q=S(function(){T(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,Y(R))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var re=x;x=V;try{return T()}finally{x=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,V){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var re=x;x=T;try{return V()}finally{x=re}},e.unstable_scheduleCallback=function(T,V,re){var he=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?he+re:he):re=he,T){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=re+C,T={id:u++,callback:V,priorityLevel:T,startTime:re,expirationTime:C,sortIndex:-1},re>he?(T.sortIndex=re,t(d,T),r(c)===null&&T===r(d)&&(v?(b(q),q=-1):v=!0,de(k,re-he))):(T.sortIndex=C,t(c,T),y||f||(y=!0,Y(R))),T},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(T){var V=x;return function(){var re=x;x=V;try{return T.apply(this,arguments)}finally{x=re}}}})(pS);mS.exports=pS;var zL=mS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qL=p,ka=zL;function Qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gS=new Set,ff={};function od(e,t){ju(e,t),ju(e+"Capture",t)}function ju(e,t){for(ff[e]=t,e=0;e<t.length;e++)gS.add(t[e])}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j0=Object.prototype.hasOwnProperty,VL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tw={},rw={};function HL(e){return j0.call(rw,e)?!0:j0.call(tw,e)?!1:VL.test(e)?rw[e]=!0:(tw[e]=!0,!1)}function WL(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GL(e,t,r,s){if(t===null||typeof t>"u"||WL(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $s(e,t,r,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var ps={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ps[e]=new $s(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ps[t]=new $s(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ps[e]=new $s(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ps[e]=new $s(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ps[e]=new $s(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ps[e]=new $s(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ps[e]=new $s(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ps[e]=new $s(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ps[e]=new $s(e,5,!1,e.toLowerCase(),null,!1,!1)});var gy=/[\-:]([a-z])/g;function xy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gy,xy);ps[t]=new $s(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gy,xy);ps[t]=new $s(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gy,xy);ps[t]=new $s(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ps[e]=new $s(e,1,!1,e.toLowerCase(),null,!1,!1)});ps.xlinkHref=new $s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ps[e]=new $s(e,1,!1,e.toLowerCase(),null,!0,!0)});function vy(e,t,r,s){var a=ps.hasOwnProperty(t)?ps[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GL(t,r,a,s)&&(r=null),s||a===null?HL(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var $o=qL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fm=Symbol.for("react.element"),Bd=Symbol.for("react.portal"),Ud=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),S0=Symbol.for("react.profiler"),xS=Symbol.for("react.provider"),vS=Symbol.for("react.context"),by=Symbol.for("react.forward_ref"),_0=Symbol.for("react.suspense"),C0=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),pl=Symbol.for("react.lazy"),yS=Symbol.for("react.offscreen"),nw=Symbol.iterator;function Sh(e){return e===null||typeof e!="object"?null:(e=nw&&e[nw]||e["@@iterator"],typeof e=="function"?e:null)}var mn=Object.assign,Zx;function zh(e){if(Zx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zx=t&&t[1]||""}return`
`+Zx+e}var ev=!1;function tv(e,t){if(!e||ev)return"";ev=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{ev=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zh(e):""}function YL(e){switch(e.tag){case 5:return zh(e.type);case 16:return zh("Lazy");case 13:return zh("Suspense");case 19:return zh("SuspenseList");case 0:case 2:case 15:return e=tv(e.type,!1),e;case 11:return e=tv(e.type.render,!1),e;case 1:return e=tv(e.type,!0),e;default:return""}}function k0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ud:return"Fragment";case Bd:return"Portal";case S0:return"Profiler";case yy:return"StrictMode";case _0:return"Suspense";case C0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vS:return(e.displayName||"Context")+".Consumer";case xS:return(e._context.displayName||"Context")+".Provider";case by:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wy:return t=e.displayName||null,t!==null?t:k0(e.type)||"Memo";case pl:t=e._payload,e=e._init;try{return k0(e(t))}catch{}}return null}function KL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k0(t);case 8:return t===yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QL(e){var t=bS(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Om(e){e._valueTracker||(e._valueTracker=QL(e))}function wS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=bS(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function qp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function P0(e,t){var r=t.checked;return mn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function sw(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Wl(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function NS(e,t){t=t.checked,t!=null&&vy(e,"checked",t,!1)}function A0(e,t){NS(e,t);var r=Wl(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?E0(e,t.type,r):t.hasOwnProperty("defaultValue")&&E0(e,t.type,Wl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function aw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function E0(e,t,r){(t!=="number"||qp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var qh=Array.isArray;function Zd(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Wl(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function L0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return mn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Qe(92));if(qh(r)){if(1<r.length)throw Error(Qe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wl(r)}}function jS(e,t){var r=Wl(t.value),s=Wl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ow(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function T0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bm,_S=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bm=Bm||document.createElement("div"),Bm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XL=["Webkit","ms","Moz","O"];Object.keys(Xh).forEach(function(e){XL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xh[t]=Xh[e]})});function CS(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xh.hasOwnProperty(e)&&Xh[e]?(""+t).trim():t+"px"}function kS(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=CS(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var JL=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D0(e,t){if(t){if(JL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Qe(62))}}function R0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I0=null;function Ny(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var M0=null,eu=null,tu=null;function lw(e){if(e=Jf(e)){if(typeof M0!="function")throw Error(Qe(280));var t=e.stateNode;t&&(t=Og(t),M0(e.stateNode,e.type,t))}}function PS(e){eu?tu?tu.push(e):tu=[e]:eu=e}function AS(){if(eu){var e=eu,t=tu;if(tu=eu=null,lw(e),t)for(e=0;e<t.length;e++)lw(t[e])}}function ES(e,t){return e(t)}function LS(){}var rv=!1;function TS(e,t,r){if(rv)return e(t,r);rv=!0;try{return ES(e,t,r)}finally{rv=!1,(eu!==null||tu!==null)&&(LS(),AS())}}function pf(e,t){var r=e.stateNode;if(r===null)return null;var s=Og(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Qe(231,t,typeof r));return r}var F0=!1;if(Do)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){F0=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{F0=!1}function ZL(e,t,r,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Jh=!1,Vp=null,Hp=!1,O0=null,e4={onError:function(e){Jh=!0,Vp=e}};function t4(e,t,r,s,a,i,l,o,c){Jh=!1,Vp=null,ZL.apply(e4,arguments)}function r4(e,t,r,s,a,i,l,o,c){if(t4.apply(this,arguments),Jh){if(Jh){var d=Vp;Jh=!1,Vp=null}else throw Error(Qe(198));Hp||(Hp=!0,O0=d)}}function ld(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function DS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cw(e){if(ld(e)!==e)throw Error(Qe(188))}function n4(e){var t=e.alternate;if(!t){if(t=ld(e),t===null)throw Error(Qe(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return cw(a),e;if(i===s)return cw(a),t;i=i.sibling}throw Error(Qe(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l)throw Error(Qe(189))}}if(r.alternate!==s)throw Error(Qe(190))}if(r.tag!==3)throw Error(Qe(188));return r.stateNode.current===r?e:t}function RS(e){return e=n4(e),e!==null?IS(e):null}function IS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=IS(e);if(t!==null)return t;e=e.sibling}return null}var MS=ka.unstable_scheduleCallback,dw=ka.unstable_cancelCallback,s4=ka.unstable_shouldYield,a4=ka.unstable_requestPaint,En=ka.unstable_now,i4=ka.unstable_getCurrentPriorityLevel,jy=ka.unstable_ImmediatePriority,FS=ka.unstable_UserBlockingPriority,Wp=ka.unstable_NormalPriority,o4=ka.unstable_LowPriority,OS=ka.unstable_IdlePriority,Rg=null,Ki=null;function l4(e){if(Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(Rg,e,void 0,(e.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:u4,c4=Math.log,d4=Math.LN2;function u4(e){return e>>>=0,e===0?32:31-(c4(e)/d4|0)|0}var Um=64,$m=4194304;function Vh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gp(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?s=Vh(o):(i&=l,i!==0&&(s=Vh(i)))}else l=r&~a,l!==0?s=Vh(l):i!==0&&(s=Vh(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-wi(t),a=1<<r,s|=e[r],t&=~a;return s}function h4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f4(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-wi(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&s)&&(a[l]=h4(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function B0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BS(){var e=Um;return Um<<=1,!(Um&4194240)&&(Um=64),e}function nv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wi(t),e[t]=r}function m4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-wi(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function Sy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-wi(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Rr=0;function US(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $S,_y,zS,qS,VS,U0=!1,zm=[],Tl=null,Dl=null,Rl=null,gf=new Map,xf=new Map,vl=[],p4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uw(e,t){switch(e){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Rl=null;break;case"pointerover":case"pointerout":gf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xf.delete(t.pointerId)}}function Ch(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Jf(t),t!==null&&_y(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function g4(e,t,r,s,a){switch(t){case"focusin":return Tl=Ch(Tl,e,t,r,s,a),!0;case"dragenter":return Dl=Ch(Dl,e,t,r,s,a),!0;case"mouseover":return Rl=Ch(Rl,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return gf.set(i,Ch(gf.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,xf.set(i,Ch(xf.get(i)||null,e,t,r,s,a)),!0}return!1}function HS(e){var t=Ec(e.target);if(t!==null){var r=ld(t);if(r!==null){if(t=r.tag,t===13){if(t=DS(r),t!==null){e.blockedOn=t,VS(e.priority,function(){zS(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=$0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);I0=s,r.target.dispatchEvent(s),I0=null}else return t=Jf(r),t!==null&&_y(t),e.blockedOn=r,!1;t.shift()}return!0}function hw(e,t,r){bp(e)&&r.delete(t)}function x4(){U0=!1,Tl!==null&&bp(Tl)&&(Tl=null),Dl!==null&&bp(Dl)&&(Dl=null),Rl!==null&&bp(Rl)&&(Rl=null),gf.forEach(hw),xf.forEach(hw)}function kh(e,t){e.blockedOn===t&&(e.blockedOn=null,U0||(U0=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,x4)))}function vf(e){function t(a){return kh(a,e)}if(0<zm.length){kh(zm[0],e);for(var r=1;r<zm.length;r++){var s=zm[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Tl!==null&&kh(Tl,e),Dl!==null&&kh(Dl,e),Rl!==null&&kh(Rl,e),gf.forEach(t),xf.forEach(t),r=0;r<vl.length;r++)s=vl[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<vl.length&&(r=vl[0],r.blockedOn===null);)HS(r),r.blockedOn===null&&vl.shift()}var ru=$o.ReactCurrentBatchConfig,Yp=!0;function v4(e,t,r,s){var a=Rr,i=ru.transition;ru.transition=null;try{Rr=1,Cy(e,t,r,s)}finally{Rr=a,ru.transition=i}}function y4(e,t,r,s){var a=Rr,i=ru.transition;ru.transition=null;try{Rr=4,Cy(e,t,r,s)}finally{Rr=a,ru.transition=i}}function Cy(e,t,r,s){if(Yp){var a=$0(e,t,r,s);if(a===null)fv(e,t,s,Kp,r),uw(e,s);else if(g4(a,e,t,r,s))s.stopPropagation();else if(uw(e,s),t&4&&-1<p4.indexOf(e)){for(;a!==null;){var i=Jf(a);if(i!==null&&$S(i),i=$0(e,t,r,s),i===null&&fv(e,t,s,Kp,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else fv(e,t,s,null,r)}}var Kp=null;function $0(e,t,r,s){if(Kp=null,e=Ny(s),e=Ec(e),e!==null)if(t=ld(e),t===null)e=null;else if(r=t.tag,r===13){if(e=DS(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kp=e,null}function WS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i4()){case jy:return 1;case FS:return 4;case Wp:case o4:return 16;case OS:return 536870912;default:return 16}default:return 16}}var Cl=null,ky=null,wp=null;function GS(){if(wp)return wp;var e,t=ky,r=t.length,s,a="value"in Cl?Cl.value:Cl.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===a[i-s];s++);return wp=a.slice(e,1<s?1-s:void 0)}function Np(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qm(){return!0}function fw(){return!1}function Aa(e){function t(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qm:fw,this.isPropagationStopped=fw,this}return mn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qm)},persist:function(){},isPersistent:qm}),t}var Uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Py=Aa(Uu),Xf=mn({},Uu,{view:0,detail:0}),b4=Aa(Xf),sv,av,Ph,Ig=mn({},Xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ph&&(Ph&&e.type==="mousemove"?(sv=e.screenX-Ph.screenX,av=e.screenY-Ph.screenY):av=sv=0,Ph=e),sv)},movementY:function(e){return"movementY"in e?e.movementY:av}}),mw=Aa(Ig),w4=mn({},Ig,{dataTransfer:0}),N4=Aa(w4),j4=mn({},Xf,{relatedTarget:0}),iv=Aa(j4),S4=mn({},Uu,{animationName:0,elapsedTime:0,pseudoElement:0}),_4=Aa(S4),C4=mn({},Uu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),k4=Aa(C4),P4=mn({},Uu,{data:0}),pw=Aa(P4),A4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=L4[e])?!!t[e]:!1}function Ay(){return T4}var D4=mn({},Xf,{key:function(e){if(e.key){var t=A4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Np(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(e){return e.type==="keypress"?Np(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Np(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),R4=Aa(D4),I4=mn({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gw=Aa(I4),M4=mn({},Xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),F4=Aa(M4),O4=mn({},Uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),B4=Aa(O4),U4=mn({},Ig,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$4=Aa(U4),z4=[9,13,27,32],Ey=Do&&"CompositionEvent"in window,Zh=null;Do&&"documentMode"in document&&(Zh=document.documentMode);var q4=Do&&"TextEvent"in window&&!Zh,YS=Do&&(!Ey||Zh&&8<Zh&&11>=Zh),xw=" ",vw=!1;function KS(e,t){switch(e){case"keyup":return z4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $d=!1;function V4(e,t){switch(e){case"compositionend":return QS(t);case"keypress":return t.which!==32?null:(vw=!0,xw);case"textInput":return e=t.data,e===xw&&vw?null:e;default:return null}}function H4(e,t){if($d)return e==="compositionend"||!Ey&&KS(e,t)?(e=GS(),wp=ky=Cl=null,$d=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return YS&&t.locale!=="ko"?null:t.data;default:return null}}var W4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!W4[e.type]:t==="textarea"}function XS(e,t,r,s){PS(s),t=Qp(t,"onChange"),0<t.length&&(r=new Py("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var ef=null,yf=null;function G4(e){l_(e,0)}function Mg(e){var t=Vd(e);if(wS(t))return e}function Y4(e,t){if(e==="change")return t}var JS=!1;if(Do){var ov;if(Do){var lv="oninput"in document;if(!lv){var bw=document.createElement("div");bw.setAttribute("oninput","return;"),lv=typeof bw.oninput=="function"}ov=lv}else ov=!1;JS=ov&&(!document.documentMode||9<document.documentMode)}function ww(){ef&&(ef.detachEvent("onpropertychange",ZS),yf=ef=null)}function ZS(e){if(e.propertyName==="value"&&Mg(yf)){var t=[];XS(t,yf,e,Ny(e)),TS(G4,t)}}function K4(e,t,r){e==="focusin"?(ww(),ef=t,yf=r,ef.attachEvent("onpropertychange",ZS)):e==="focusout"&&ww()}function Q4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mg(yf)}function X4(e,t){if(e==="click")return Mg(t)}function J4(e,t){if(e==="input"||e==="change")return Mg(t)}function Z4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Si=typeof Object.is=="function"?Object.is:Z4;function bf(e,t){if(Si(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!j0.call(t,a)||!Si(e[a],t[a]))return!1}return!0}function Nw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jw(e,t){var r=Nw(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nw(r)}}function e_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?e_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function t_(){for(var e=window,t=qp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=qp(e.document)}return t}function Ly(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eT(e){var t=t_(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&e_(r.ownerDocument.documentElement,r)){if(s!==null&&Ly(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=jw(r,i);var l=jw(r,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tT=Do&&"documentMode"in document&&11>=document.documentMode,zd=null,z0=null,tf=null,q0=!1;function Sw(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;q0||zd==null||zd!==qp(s)||(s=zd,"selectionStart"in s&&Ly(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tf&&bf(tf,s)||(tf=s,s=Qp(z0,"onSelect"),0<s.length&&(t=new Py("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=zd)))}function Vm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qd={animationend:Vm("Animation","AnimationEnd"),animationiteration:Vm("Animation","AnimationIteration"),animationstart:Vm("Animation","AnimationStart"),transitionend:Vm("Transition","TransitionEnd")},cv={},r_={};Do&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete qd.animationend.animation,delete qd.animationiteration.animation,delete qd.animationstart.animation),"TransitionEvent"in window||delete qd.transitionend.transition);function Fg(e){if(cv[e])return cv[e];if(!qd[e])return e;var t=qd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in r_)return cv[e]=t[r];return e}var n_=Fg("animationend"),s_=Fg("animationiteration"),a_=Fg("animationstart"),i_=Fg("transitionend"),o_=new Map,_w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ec(e,t){o_.set(e,t),od(t,[e])}for(var dv=0;dv<_w.length;dv++){var uv=_w[dv],rT=uv.toLowerCase(),nT=uv[0].toUpperCase()+uv.slice(1);ec(rT,"on"+nT)}ec(n_,"onAnimationEnd");ec(s_,"onAnimationIteration");ec(a_,"onAnimationStart");ec("dblclick","onDoubleClick");ec("focusin","onFocus");ec("focusout","onBlur");ec(i_,"onTransitionEnd");ju("onMouseEnter",["mouseout","mouseover"]);ju("onMouseLeave",["mouseout","mouseover"]);ju("onPointerEnter",["pointerout","pointerover"]);ju("onPointerLeave",["pointerout","pointerover"]);od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));od("onBeforeInput",["compositionend","keypress","textInput","paste"]);od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hh));function Cw(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,r4(s,t,void 0,e),e.currentTarget=null}function l_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Cw(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Cw(a,o,d),i=c}}}if(Hp)throw e=O0,Hp=!1,O0=null,e}function Zr(e,t){var r=t[Y0];r===void 0&&(r=t[Y0]=new Set);var s=e+"__bubble";r.has(s)||(c_(t,e,2,!1),r.add(s))}function hv(e,t,r){var s=0;t&&(s|=4),c_(r,e,s,t)}var Hm="_reactListening"+Math.random().toString(36).slice(2);function wf(e){if(!e[Hm]){e[Hm]=!0,gS.forEach(function(r){r!=="selectionchange"&&(sT.has(r)||hv(r,!1,e),hv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hm]||(t[Hm]=!0,hv("selectionchange",!1,t))}}function c_(e,t,r,s){switch(WS(t)){case 1:var a=v4;break;case 4:a=y4;break;default:a=Cy}r=a.bind(null,t,r,e),a=void 0,!F0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function fv(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Ec(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}TS(function(){var d=i,u=Ny(r),m=[];e:{var x=o_.get(e);if(x!==void 0){var f=Py,y=e;switch(e){case"keypress":if(Np(r)===0)break e;case"keydown":case"keyup":f=R4;break;case"focusin":y="focus",f=iv;break;case"focusout":y="blur",f=iv;break;case"beforeblur":case"afterblur":f=iv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=N4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=F4;break;case n_:case s_:case a_:f=_4;break;case i_:f=B4;break;case"scroll":f=b4;break;case"wheel":f=$4;break;case"copy":case"cut":case"paste":f=k4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=gw}var v=(t&4)!==0,S=!v&&e==="scroll",b=v?x!==null?x+"Capture":null:x;v=[];for(var j=d,w;j!==null;){w=j;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,b!==null&&(k=pf(j,b),k!=null&&v.push(Nf(j,k,w)))),S)break;j=j.return}0<v.length&&(x=new f(x,y,null,r,u),m.push({event:x,listeners:v}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",x&&r!==I0&&(y=r.relatedTarget||r.fromElement)&&(Ec(y)||y[Ro]))break e;if((f||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,f?(y=r.relatedTarget||r.toElement,f=d,y=y?Ec(y):null,y!==null&&(S=ld(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(v=mw,k="onMouseLeave",b="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(v=gw,k="onPointerLeave",b="onPointerEnter",j="pointer"),S=f==null?x:Vd(f),w=y==null?x:Vd(y),x=new v(k,j+"leave",f,r,u),x.target=S,x.relatedTarget=w,k=null,Ec(u)===d&&(v=new v(b,j+"enter",y,r,u),v.target=w,v.relatedTarget=S,k=v),S=k,f&&y)t:{for(v=f,b=y,j=0,w=v;w;w=Cd(w))j++;for(w=0,k=b;k;k=Cd(k))w++;for(;0<j-w;)v=Cd(v),j--;for(;0<w-j;)b=Cd(b),w--;for(;j--;){if(v===b||b!==null&&v===b.alternate)break t;v=Cd(v),b=Cd(b)}v=null}else v=null;f!==null&&kw(m,x,f,v,!1),y!==null&&S!==null&&kw(m,S,y,v,!0)}}e:{if(x=d?Vd(d):window,f=x.nodeName&&x.nodeName.toLowerCase(),f==="select"||f==="input"&&x.type==="file")var R=Y4;else if(yw(x))if(JS)R=J4;else{R=Q4;var W=K4}else(f=x.nodeName)&&f.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(R=X4);if(R&&(R=R(e,d))){XS(m,R,r,u);break e}W&&W(e,x,d),e==="focusout"&&(W=x._wrapperState)&&W.controlled&&x.type==="number"&&E0(x,"number",x.value)}switch(W=d?Vd(d):window,e){case"focusin":(yw(W)||W.contentEditable==="true")&&(zd=W,z0=d,tf=null);break;case"focusout":tf=z0=zd=null;break;case"mousedown":q0=!0;break;case"contextmenu":case"mouseup":case"dragend":q0=!1,Sw(m,r,u);break;case"selectionchange":if(tT)break;case"keydown":case"keyup":Sw(m,r,u)}var O;if(Ey)e:{switch(e){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else $d?KS(e,r)&&(q="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(q="onCompositionStart");q&&(YS&&r.locale!=="ko"&&($d||q!=="onCompositionStart"?q==="onCompositionEnd"&&$d&&(O=GS()):(Cl=u,ky="value"in Cl?Cl.value:Cl.textContent,$d=!0)),W=Qp(d,q),0<W.length&&(q=new pw(q,e,null,r,u),m.push({event:q,listeners:W}),O?q.data=O:(O=QS(r),O!==null&&(q.data=O)))),(O=q4?V4(e,r):H4(e,r))&&(d=Qp(d,"onBeforeInput"),0<d.length&&(u=new pw("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=O))}l_(m,t)})}function Nf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qp(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=pf(e,r),i!=null&&s.unshift(Nf(e,i,a)),i=pf(e,t),i!=null&&s.push(Nf(e,i,a))),e=e.return}return s}function Cd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kw(e,t,r,s,a){for(var i=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=pf(r,i),c!=null&&l.unshift(Nf(r,c,o))):a||(c=pf(r,i),c!=null&&l.push(Nf(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var aT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function Pw(e){return(typeof e=="string"?e:""+e).replace(aT,`
`).replace(iT,"")}function Wm(e,t,r){if(t=Pw(t),Pw(e)!==t&&r)throw Error(Qe(425))}function Xp(){}var V0=null,H0=null;function W0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,oT=typeof clearTimeout=="function"?clearTimeout:void 0,Aw=typeof Promise=="function"?Promise:void 0,lT=typeof queueMicrotask=="function"?queueMicrotask:typeof Aw<"u"?function(e){return Aw.resolve(null).then(e).catch(cT)}:G0;function cT(e){setTimeout(function(){throw e})}function mv(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),vf(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);vf(t)}function Il(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ew(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $u=Math.random().toString(36).slice(2),Vi="__reactFiber$"+$u,jf="__reactProps$"+$u,Ro="__reactContainer$"+$u,Y0="__reactEvents$"+$u,dT="__reactListeners$"+$u,uT="__reactHandles$"+$u;function Ec(e){var t=e[Vi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ro]||r[Vi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ew(e);e!==null;){if(r=e[Vi])return r;e=Ew(e)}return t}e=r,r=e.parentNode}return null}function Jf(e){return e=e[Vi]||e[Ro],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Qe(33))}function Og(e){return e[jf]||null}var K0=[],Hd=-1;function tc(e){return{current:e}}function nn(e){0>Hd||(e.current=K0[Hd],K0[Hd]=null,Hd--)}function Yr(e,t){Hd++,K0[Hd]=e.current,e.current=t}var Gl={},ks=tc(Gl),Zs=tc(!1),Gc=Gl;function Su(e,t){var r=e.type.contextTypes;if(!r)return Gl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ea(e){return e=e.childContextTypes,e!=null}function Jp(){nn(Zs),nn(ks)}function Lw(e,t,r){if(ks.current!==Gl)throw Error(Qe(168));Yr(ks,t),Yr(Zs,r)}function d_(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Qe(108,KL(e)||"Unknown",a));return mn({},r,s)}function Zp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gl,Gc=ks.current,Yr(ks,e),Yr(Zs,Zs.current),!0}function Tw(e,t,r){var s=e.stateNode;if(!s)throw Error(Qe(169));r?(e=d_(e,t,Gc),s.__reactInternalMemoizedMergedChildContext=e,nn(Zs),nn(ks),Yr(ks,e)):nn(Zs),Yr(Zs,r)}var So=null,Bg=!1,pv=!1;function u_(e){So===null?So=[e]:So.push(e)}function hT(e){Bg=!0,u_(e)}function rc(){if(!pv&&So!==null){pv=!0;var e=0,t=Rr;try{var r=So;for(Rr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}So=null,Bg=!1}catch(a){throw So!==null&&(So=So.slice(e+1)),MS(jy,rc),a}finally{Rr=t,pv=!1}}return null}var Wd=[],Gd=0,eg=null,tg=0,$a=[],za=0,Yc=null,Po=1,Ao="";function _c(e,t){Wd[Gd++]=tg,Wd[Gd++]=eg,eg=e,tg=t}function h_(e,t,r){$a[za++]=Po,$a[za++]=Ao,$a[za++]=Yc,Yc=e;var s=Po;e=Ao;var a=32-wi(s)-1;s&=~(1<<a),r+=1;var i=32-wi(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,Po=1<<32-wi(t)+a|r<<a|s,Ao=i+e}else Po=1<<i|r<<a|s,Ao=e}function Ty(e){e.return!==null&&(_c(e,1),h_(e,1,0))}function Dy(e){for(;e===eg;)eg=Wd[--Gd],Wd[Gd]=null,tg=Wd[--Gd],Wd[Gd]=null;for(;e===Yc;)Yc=$a[--za],$a[za]=null,Ao=$a[--za],$a[za]=null,Po=$a[--za],$a[za]=null}var Sa=null,wa=null,cn=!1,vi=null;function f_(e,t){var r=Ga(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Dw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sa=e,wa=Il(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sa=e,wa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yc!==null?{id:Po,overflow:Ao}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ga(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Sa=e,wa=null,!0):!1;default:return!1}}function Q0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function X0(e){if(cn){var t=wa;if(t){var r=t;if(!Dw(e,t)){if(Q0(e))throw Error(Qe(418));t=Il(r.nextSibling);var s=Sa;t&&Dw(e,t)?f_(s,r):(e.flags=e.flags&-4097|2,cn=!1,Sa=e)}}else{if(Q0(e))throw Error(Qe(418));e.flags=e.flags&-4097|2,cn=!1,Sa=e}}}function Rw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sa=e}function Gm(e){if(e!==Sa)return!1;if(!cn)return Rw(e),cn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!W0(e.type,e.memoizedProps)),t&&(t=wa)){if(Q0(e))throw m_(),Error(Qe(418));for(;t;)f_(e,t),t=Il(t.nextSibling)}if(Rw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){wa=Il(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}wa=null}}else wa=Sa?Il(e.stateNode.nextSibling):null;return!0}function m_(){for(var e=wa;e;)e=Il(e.nextSibling)}function _u(){wa=Sa=null,cn=!1}function Ry(e){vi===null?vi=[e]:vi.push(e)}var fT=$o.ReactCurrentBatchConfig;function Ah(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Qe(309));var s=r.stateNode}if(!s)throw Error(Qe(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Qe(284));if(!r._owner)throw Error(Qe(290,e))}return e}function Ym(e,t){throw e=Object.prototype.toString.call(t),Error(Qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iw(e){var t=e._init;return t(e._payload)}function p_(e){function t(b,j){if(e){var w=b.deletions;w===null?(b.deletions=[j],b.flags|=16):w.push(j)}}function r(b,j){if(!e)return null;for(;j!==null;)t(b,j),j=j.sibling;return null}function s(b,j){for(b=new Map;j!==null;)j.key!==null?b.set(j.key,j):b.set(j.index,j),j=j.sibling;return b}function a(b,j){return b=Bl(b,j),b.index=0,b.sibling=null,b}function i(b,j,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<j?(b.flags|=2,j):w):(b.flags|=2,j)):(b.flags|=1048576,j)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function o(b,j,w,k){return j===null||j.tag!==6?(j=Nv(w,b.mode,k),j.return=b,j):(j=a(j,w),j.return=b,j)}function c(b,j,w,k){var R=w.type;return R===Ud?u(b,j,w.props.children,k,w.key):j!==null&&(j.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===pl&&Iw(R)===j.type)?(k=a(j,w.props),k.ref=Ah(b,j,w),k.return=b,k):(k=Ap(w.type,w.key,w.props,null,b.mode,k),k.ref=Ah(b,j,w),k.return=b,k)}function d(b,j,w,k){return j===null||j.tag!==4||j.stateNode.containerInfo!==w.containerInfo||j.stateNode.implementation!==w.implementation?(j=jv(w,b.mode,k),j.return=b,j):(j=a(j,w.children||[]),j.return=b,j)}function u(b,j,w,k,R){return j===null||j.tag!==7?(j=Vc(w,b.mode,k,R),j.return=b,j):(j=a(j,w),j.return=b,j)}function m(b,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Nv(""+j,b.mode,w),j.return=b,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Fm:return w=Ap(j.type,j.key,j.props,null,b.mode,w),w.ref=Ah(b,null,j),w.return=b,w;case Bd:return j=jv(j,b.mode,w),j.return=b,j;case pl:var k=j._init;return m(b,k(j._payload),w)}if(qh(j)||Sh(j))return j=Vc(j,b.mode,w,null),j.return=b,j;Ym(b,j)}return null}function x(b,j,w,k){var R=j!==null?j.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:o(b,j,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fm:return w.key===R?c(b,j,w,k):null;case Bd:return w.key===R?d(b,j,w,k):null;case pl:return R=w._init,x(b,j,R(w._payload),k)}if(qh(w)||Sh(w))return R!==null?null:u(b,j,w,k,null);Ym(b,w)}return null}function f(b,j,w,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(w)||null,o(j,b,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Fm:return b=b.get(k.key===null?w:k.key)||null,c(j,b,k,R);case Bd:return b=b.get(k.key===null?w:k.key)||null,d(j,b,k,R);case pl:var W=k._init;return f(b,j,w,W(k._payload),R)}if(qh(k)||Sh(k))return b=b.get(w)||null,u(j,b,k,R,null);Ym(j,k)}return null}function y(b,j,w,k){for(var R=null,W=null,O=j,q=j=0,D=null;O!==null&&q<w.length;q++){O.index>q?(D=O,O=null):D=O.sibling;var J=x(b,O,w[q],k);if(J===null){O===null&&(O=D);break}e&&O&&J.alternate===null&&t(b,O),j=i(J,j,q),W===null?R=J:W.sibling=J,W=J,O=D}if(q===w.length)return r(b,O),cn&&_c(b,q),R;if(O===null){for(;q<w.length;q++)O=m(b,w[q],k),O!==null&&(j=i(O,j,q),W===null?R=O:W.sibling=O,W=O);return cn&&_c(b,q),R}for(O=s(b,O);q<w.length;q++)D=f(O,b,q,w[q],k),D!==null&&(e&&D.alternate!==null&&O.delete(D.key===null?q:D.key),j=i(D,j,q),W===null?R=D:W.sibling=D,W=D);return e&&O.forEach(function(A){return t(b,A)}),cn&&_c(b,q),R}function v(b,j,w,k){var R=Sh(w);if(typeof R!="function")throw Error(Qe(150));if(w=R.call(w),w==null)throw Error(Qe(151));for(var W=R=null,O=j,q=j=0,D=null,J=w.next();O!==null&&!J.done;q++,J=w.next()){O.index>q?(D=O,O=null):D=O.sibling;var A=x(b,O,J.value,k);if(A===null){O===null&&(O=D);break}e&&O&&A.alternate===null&&t(b,O),j=i(A,j,q),W===null?R=A:W.sibling=A,W=A,O=D}if(J.done)return r(b,O),cn&&_c(b,q),R;if(O===null){for(;!J.done;q++,J=w.next())J=m(b,J.value,k),J!==null&&(j=i(J,j,q),W===null?R=J:W.sibling=J,W=J);return cn&&_c(b,q),R}for(O=s(b,O);!J.done;q++,J=w.next())J=f(O,b,q,J.value,k),J!==null&&(e&&J.alternate!==null&&O.delete(J.key===null?q:J.key),j=i(J,j,q),W===null?R=J:W.sibling=J,W=J);return e&&O.forEach(function(M){return t(b,M)}),cn&&_c(b,q),R}function S(b,j,w,k){if(typeof w=="object"&&w!==null&&w.type===Ud&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Fm:e:{for(var R=w.key,W=j;W!==null;){if(W.key===R){if(R=w.type,R===Ud){if(W.tag===7){r(b,W.sibling),j=a(W,w.props.children),j.return=b,b=j;break e}}else if(W.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===pl&&Iw(R)===W.type){r(b,W.sibling),j=a(W,w.props),j.ref=Ah(b,W,w),j.return=b,b=j;break e}r(b,W);break}else t(b,W);W=W.sibling}w.type===Ud?(j=Vc(w.props.children,b.mode,k,w.key),j.return=b,b=j):(k=Ap(w.type,w.key,w.props,null,b.mode,k),k.ref=Ah(b,j,w),k.return=b,b=k)}return l(b);case Bd:e:{for(W=w.key;j!==null;){if(j.key===W)if(j.tag===4&&j.stateNode.containerInfo===w.containerInfo&&j.stateNode.implementation===w.implementation){r(b,j.sibling),j=a(j,w.children||[]),j.return=b,b=j;break e}else{r(b,j);break}else t(b,j);j=j.sibling}j=jv(w,b.mode,k),j.return=b,b=j}return l(b);case pl:return W=w._init,S(b,j,W(w._payload),k)}if(qh(w))return y(b,j,w,k);if(Sh(w))return v(b,j,w,k);Ym(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,j!==null&&j.tag===6?(r(b,j.sibling),j=a(j,w),j.return=b,b=j):(r(b,j),j=Nv(w,b.mode,k),j.return=b,b=j),l(b)):r(b,j)}return S}var Cu=p_(!0),g_=p_(!1),rg=tc(null),ng=null,Yd=null,Iy=null;function My(){Iy=Yd=ng=null}function Fy(e){var t=rg.current;nn(rg),e._currentValue=t}function J0(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function nu(e,t){ng=e,Iy=Yd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xs=!0),e.firstContext=null)}function Qa(e){var t=e._currentValue;if(Iy!==e)if(e={context:e,memoizedValue:t,next:null},Yd===null){if(ng===null)throw Error(Qe(308));Yd=e,ng.dependencies={lanes:0,firstContext:e}}else Yd=Yd.next=e;return t}var Lc=null;function Oy(e){Lc===null?Lc=[e]:Lc.push(e)}function x_(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Oy(t)):(r.next=a.next,a.next=r),t.interleaved=r,Io(e,s)}function Io(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var gl=!1;function By(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ml(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,jr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Io(e,r)}return a=s.interleaved,a===null?(t.next=t,Oy(s)):(t.next=a.next,a.next=t),s.interleaved=t,Io(e,r)}function jp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Sy(e,r)}}function Mw(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function sg(e,t,r,s){var a=e.updateQueue;gl=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var x=o.lane,f=o.eventTime;if((s&x)===x){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,v=o;switch(x=t,f=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){m=y.call(f,m,x);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,x=typeof y=="function"?y.call(f,m,x):y,x==null)break e;m=mn({},m,x);break e;case 2:gl=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[o]:x.push(o))}else f={eventTime:f,lane:x,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=f,c=m):u=u.next=f,l|=x;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;x=o,o=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Qc|=l,e.lanes=l,e.memoizedState=m}}function Fw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Qe(191,a));a.call(s)}}}var Zf={},Qi=tc(Zf),Sf=tc(Zf),_f=tc(Zf);function Tc(e){if(e===Zf)throw Error(Qe(174));return e}function Uy(e,t){switch(Yr(_f,t),Yr(Sf,e),Yr(Qi,Zf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:T0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=T0(t,e)}nn(Qi),Yr(Qi,t)}function ku(){nn(Qi),nn(Sf),nn(_f)}function y_(e){Tc(_f.current);var t=Tc(Qi.current),r=T0(t,e.type);t!==r&&(Yr(Sf,e),Yr(Qi,r))}function $y(e){Sf.current===e&&(nn(Qi),nn(Sf))}var un=tc(0);function ag(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gv=[];function zy(){for(var e=0;e<gv.length;e++)gv[e]._workInProgressVersionPrimary=null;gv.length=0}var Sp=$o.ReactCurrentDispatcher,xv=$o.ReactCurrentBatchConfig,Kc=0,fn=null,Kn=null,es=null,ig=!1,rf=!1,Cf=0,mT=0;function vs(){throw Error(Qe(321))}function qy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Si(e[r],t[r]))return!1;return!0}function Vy(e,t,r,s,a,i){if(Kc=i,fn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sp.current=e===null||e.memoizedState===null?vT:yT,e=r(s,a),rf){i=0;do{if(rf=!1,Cf=0,25<=i)throw Error(Qe(301));i+=1,es=Kn=null,t.updateQueue=null,Sp.current=bT,e=r(s,a)}while(rf)}if(Sp.current=og,t=Kn!==null&&Kn.next!==null,Kc=0,es=Kn=fn=null,ig=!1,t)throw Error(Qe(300));return e}function Hy(){var e=Cf!==0;return Cf=0,e}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?fn.memoizedState=es=e:es=es.next=e,es}function Xa(){if(Kn===null){var e=fn.alternate;e=e!==null?e.memoizedState:null}else e=Kn.next;var t=es===null?fn.memoizedState:es.next;if(t!==null)es=t,Kn=e;else{if(e===null)throw Error(Qe(310));Kn=e,e={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},es===null?fn.memoizedState=es=e:es=es.next=e}return es}function kf(e,t){return typeof t=="function"?t(e):t}function vv(e){var t=Xa(),r=t.queue;if(r===null)throw Error(Qe(311));r.lastRenderedReducer=e;var s=Kn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Kc&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=s):c=c.next=m,fn.lanes|=u,Qc|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,Si(s,t.memoizedState)||(Xs=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,fn.lanes|=i,Qc|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yv(e){var t=Xa(),r=t.queue;if(r===null)throw Error(Qe(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Si(i,t.memoizedState)||(Xs=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function b_(){}function w_(e,t){var r=fn,s=Xa(),a=t(),i=!Si(s.memoizedState,a);if(i&&(s.memoizedState=a,Xs=!0),s=s.queue,Wy(S_.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||es!==null&&es.memoizedState.tag&1){if(r.flags|=2048,Pf(9,j_.bind(null,r,s,a,t),void 0,null),rs===null)throw Error(Qe(349));Kc&30||N_(r,t,a)}return a}function N_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fn.updateQueue,t===null?(t={lastEffect:null,stores:null},fn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function j_(e,t,r,s){t.value=r,t.getSnapshot=s,__(t)&&C_(e)}function S_(e,t,r){return r(function(){__(t)&&C_(e)})}function __(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Si(e,r)}catch{return!0}}function C_(e){var t=Io(e,1);t!==null&&Ni(t,e,1,-1)}function Ow(e){var t=Ui();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:e},t.queue=e,e=e.dispatch=xT.bind(null,fn,e),[t.memoizedState,e]}function Pf(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=fn.updateQueue,t===null?(t={lastEffect:null,stores:null},fn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function k_(){return Xa().memoizedState}function _p(e,t,r,s){var a=Ui();fn.flags|=e,a.memoizedState=Pf(1|t,r,void 0,s===void 0?null:s)}function Ug(e,t,r,s){var a=Xa();s=s===void 0?null:s;var i=void 0;if(Kn!==null){var l=Kn.memoizedState;if(i=l.destroy,s!==null&&qy(s,l.deps)){a.memoizedState=Pf(t,r,i,s);return}}fn.flags|=e,a.memoizedState=Pf(1|t,r,i,s)}function Bw(e,t){return _p(8390656,8,e,t)}function Wy(e,t){return Ug(2048,8,e,t)}function P_(e,t){return Ug(4,2,e,t)}function A_(e,t){return Ug(4,4,e,t)}function E_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function L_(e,t,r){return r=r!=null?r.concat([e]):null,Ug(4,4,E_.bind(null,t,e),r)}function Gy(){}function T_(e,t){var r=Xa();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&qy(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function D_(e,t){var r=Xa();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&qy(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function R_(e,t,r){return Kc&21?(Si(r,t)||(r=BS(),fn.lanes|=r,Qc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xs=!0),e.memoizedState=r)}function pT(e,t){var r=Rr;Rr=r!==0&&4>r?r:4,e(!0);var s=xv.transition;xv.transition={};try{e(!1),t()}finally{Rr=r,xv.transition=s}}function I_(){return Xa().memoizedState}function gT(e,t,r){var s=Ol(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},M_(e))F_(t,r);else if(r=x_(e,t,r,s),r!==null){var a=Bs();Ni(r,e,s,a),O_(r,t,s)}}function xT(e,t,r){var s=Ol(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(M_(e))F_(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,Si(o,l)){var c=t.interleaved;c===null?(a.next=a,Oy(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=x_(e,t,a,s),r!==null&&(a=Bs(),Ni(r,e,s,a),O_(r,t,s))}}function M_(e){var t=e.alternate;return e===fn||t!==null&&t===fn}function F_(e,t){rf=ig=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function O_(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Sy(e,r)}}var og={readContext:Qa,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},vT={readContext:Qa,useCallback:function(e,t){return Ui().memoizedState=[e,t===void 0?null:t],e},useContext:Qa,useEffect:Bw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_p(4194308,4,E_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _p(4194308,4,e,t)},useInsertionEffect:function(e,t){return _p(4,2,e,t)},useMemo:function(e,t){var r=Ui();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Ui();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=gT.bind(null,fn,e),[s.memoizedState,e]},useRef:function(e){var t=Ui();return e={current:e},t.memoizedState=e},useState:Ow,useDebugValue:Gy,useDeferredValue:function(e){return Ui().memoizedState=e},useTransition:function(){var e=Ow(!1),t=e[0];return e=pT.bind(null,e[1]),Ui().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=fn,a=Ui();if(cn){if(r===void 0)throw Error(Qe(407));r=r()}else{if(r=t(),rs===null)throw Error(Qe(349));Kc&30||N_(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Bw(S_.bind(null,s,i,e),[e]),s.flags|=2048,Pf(9,j_.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Ui(),t=rs.identifierPrefix;if(cn){var r=Ao,s=Po;r=(s&~(1<<32-wi(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yT={readContext:Qa,useCallback:T_,useContext:Qa,useEffect:Wy,useImperativeHandle:L_,useInsertionEffect:P_,useLayoutEffect:A_,useMemo:D_,useReducer:vv,useRef:k_,useState:function(){return vv(kf)},useDebugValue:Gy,useDeferredValue:function(e){var t=Xa();return R_(t,Kn.memoizedState,e)},useTransition:function(){var e=vv(kf)[0],t=Xa().memoizedState;return[e,t]},useMutableSource:b_,useSyncExternalStore:w_,useId:I_,unstable_isNewReconciler:!1},bT={readContext:Qa,useCallback:T_,useContext:Qa,useEffect:Wy,useImperativeHandle:L_,useInsertionEffect:P_,useLayoutEffect:A_,useMemo:D_,useReducer:yv,useRef:k_,useState:function(){return yv(kf)},useDebugValue:Gy,useDeferredValue:function(e){var t=Xa();return Kn===null?t.memoizedState=e:R_(t,Kn.memoizedState,e)},useTransition:function(){var e=yv(kf)[0],t=Xa().memoizedState;return[e,t]},useMutableSource:b_,useSyncExternalStore:w_,useId:I_,unstable_isNewReconciler:!1};function fi(e,t){if(e&&e.defaultProps){t=mn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Z0(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:mn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $g={isMounted:function(e){return(e=e._reactInternals)?ld(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Bs(),a=Ol(e),i=Lo(s,a);i.payload=t,r!=null&&(i.callback=r),t=Ml(e,i,a),t!==null&&(Ni(t,e,a,s),jp(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Bs(),a=Ol(e),i=Lo(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ml(e,i,a),t!==null&&(Ni(t,e,a,s),jp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Bs(),s=Ol(e),a=Lo(r,s);a.tag=2,t!=null&&(a.callback=t),t=Ml(e,a,s),t!==null&&(Ni(t,e,s,r),jp(t,e,s))}};function Uw(e,t,r,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!bf(r,s)||!bf(a,i):!0}function B_(e,t,r){var s=!1,a=Gl,i=t.contextType;return typeof i=="object"&&i!==null?i=Qa(i):(a=ea(t)?Gc:ks.current,s=t.contextTypes,i=(s=s!=null)?Su(e,a):Gl),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$g,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function $w(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&$g.enqueueReplaceState(t,t.state,null)}function e1(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},By(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Qa(i):(i=ea(t)?Gc:ks.current,a.context=Su(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Z0(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&$g.enqueueReplaceState(a,a.state,null),sg(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Pu(e,t){try{var r="",s=t;do r+=YL(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function bv(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function t1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wT=typeof WeakMap=="function"?WeakMap:Map;function U_(e,t,r){r=Lo(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){cg||(cg=!0,u1=s),t1(e,t)},r}function $_(e,t,r){r=Lo(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){t1(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){t1(e,t),typeof s!="function"&&(Fl===null?Fl=new Set([this]):Fl.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function zw(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new wT;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=IT.bind(null,e,t,r),t.then(e,e))}function qw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vw(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Lo(-1,1),t.tag=2,Ml(r,t,1))),r.lanes|=1),e)}var NT=$o.ReactCurrentOwner,Xs=!1;function Ms(e,t,r,s){t.child=e===null?g_(t,null,r,s):Cu(t,e.child,r,s)}function Hw(e,t,r,s,a){r=r.render;var i=t.ref;return nu(t,a),s=Vy(e,t,r,s,i,a),r=Hy(),e!==null&&!Xs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mo(e,t,a)):(cn&&r&&Ty(t),t.flags|=1,Ms(e,t,s,a),t.child)}function Ww(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!t2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,z_(e,t,i,s,a)):(e=Ap(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:bf,r(l,s)&&e.ref===t.ref)return Mo(e,t,a)}return t.flags|=1,e=Bl(i,s),e.ref=t.ref,e.return=t,t.child=e}function z_(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(bf(i,s)&&e.ref===t.ref)if(Xs=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Xs=!0);else return t.lanes=e.lanes,Mo(e,t,a)}return r1(e,t,r,s,a)}function q_(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr(Qd,va),va|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Yr(Qd,va),va|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Yr(Qd,va),va|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Yr(Qd,va),va|=s;return Ms(e,t,a,r),t.child}function V_(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function r1(e,t,r,s,a){var i=ea(r)?Gc:ks.current;return i=Su(t,i),nu(t,a),r=Vy(e,t,r,s,i,a),s=Hy(),e!==null&&!Xs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mo(e,t,a)):(cn&&s&&Ty(t),t.flags|=1,Ms(e,t,r,a),t.child)}function Gw(e,t,r,s,a){if(ea(r)){var i=!0;Zp(t)}else i=!1;if(nu(t,a),t.stateNode===null)Cp(e,t),B_(t,r,s),e1(t,r,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Qa(d):(d=ea(r)?Gc:ks.current,d=Su(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&$w(t,l,s,d),gl=!1;var x=t.memoizedState;l.state=x,sg(t,s,l,a),c=t.memoizedState,o!==s||x!==c||Zs.current||gl?(typeof u=="function"&&(Z0(t,r,u,s),c=t.memoizedState),(o=gl||Uw(t,r,o,s,x,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,v_(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:fi(t.type,o),l.props=d,m=t.pendingProps,x=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qa(c):(c=ea(r)?Gc:ks.current,c=Su(t,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||x!==c)&&$w(t,l,s,c),gl=!1,x=t.memoizedState,l.state=x,sg(t,s,l,a);var y=t.memoizedState;o!==m||x!==y||Zs.current||gl?(typeof f=="function"&&(Z0(t,r,f,s),y=t.memoizedState),(d=gl||Uw(t,r,d,s,x,y,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=y),l.props=s,l.state=y,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return n1(e,t,r,s,i,a)}function n1(e,t,r,s,a,i){V_(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&Tw(t,r,!1),Mo(e,t,i);s=t.stateNode,NT.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Cu(t,e.child,null,i),t.child=Cu(t,null,o,i)):Ms(e,t,o,i),t.memoizedState=s.state,a&&Tw(t,r,!0),t.child}function H_(e){var t=e.stateNode;t.pendingContext?Lw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lw(e,t.context,!1),Uy(e,t.containerInfo)}function Yw(e,t,r,s,a){return _u(),Ry(a),t.flags|=256,Ms(e,t,r,s),t.child}var s1={dehydrated:null,treeContext:null,retryLane:0};function a1(e){return{baseLanes:e,cachePool:null,transitions:null}}function W_(e,t,r){var s=t.pendingProps,a=un.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Yr(un,a&1),e===null)return X0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Vg(l,s,0,null),e=Vc(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=a1(r),t.memoizedState=s1,e):Yy(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return jT(e,t,l,s,o,a,r);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Bl(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Bl(o,i):(i=Vc(i,l,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?a1(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=s1,s}return i=e.child,e=i.sibling,s=Bl(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Yy(e,t){return t=Vg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Km(e,t,r,s){return s!==null&&Ry(s),Cu(t,e.child,null,r),e=Yy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jT(e,t,r,s,a,i,l){if(r)return t.flags&256?(t.flags&=-257,s=bv(Error(Qe(422))),Km(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Vg({mode:"visible",children:s.children},a,0,null),i=Vc(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Cu(t,e.child,null,l),t.child.memoizedState=a1(l),t.memoizedState=s1,i);if(!(t.mode&1))return Km(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(Qe(419)),s=bv(i,s,void 0),Km(e,t,l,s)}if(o=(l&e.childLanes)!==0,Xs||o){if(s=rs,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Io(e,a),Ni(s,e,a,-1))}return e2(),s=bv(Error(Qe(421))),Km(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=MT.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,wa=Il(a.nextSibling),Sa=t,cn=!0,vi=null,e!==null&&($a[za++]=Po,$a[za++]=Ao,$a[za++]=Yc,Po=e.id,Ao=e.overflow,Yc=t),t=Yy(t,s.children),t.flags|=4096,t)}function Kw(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),J0(e.return,t,r)}function wv(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function G_(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(Ms(e,t,s.children,r),s=un.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kw(e,r,t);else if(e.tag===19)Kw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Yr(un,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ag(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),wv(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ag(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}wv(t,!0,r,null,i);break;case"together":wv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Qe(153));if(t.child!==null){for(e=t.child,r=Bl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ST(e,t,r){switch(t.tag){case 3:H_(t),_u();break;case 5:y_(t);break;case 1:ea(t.type)&&Zp(t);break;case 4:Uy(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Yr(rg,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Yr(un,un.current&1),t.flags|=128,null):r&t.child.childLanes?W_(e,t,r):(Yr(un,un.current&1),e=Mo(e,t,r),e!==null?e.sibling:null);Yr(un,un.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return G_(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Yr(un,un.current),s)break;return null;case 22:case 23:return t.lanes=0,q_(e,t,r)}return Mo(e,t,r)}var Y_,i1,K_,Q_;Y_=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};i1=function(){};K_=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Tc(Qi.current);var i=null;switch(r){case"input":a=P0(e,a),s=P0(e,s),i=[];break;case"select":a=mn({},a,{value:void 0}),s=mn({},s,{value:void 0}),i=[];break;case"textarea":a=L0(e,a),s=L0(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Xp)}D0(r,s);var l;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ff.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ff.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Zr("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Q_=function(e,t,r,s){r!==s&&(t.flags|=4)};function Eh(e,t){if(!cn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ys(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function _T(e,t,r){var s=t.pendingProps;switch(Dy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:return ea(t.type)&&Jp(),ys(t),null;case 3:return s=t.stateNode,ku(),nn(Zs),nn(ks),zy(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Gm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vi!==null&&(m1(vi),vi=null))),i1(e,t),ys(t),null;case 5:$y(t);var a=Tc(_f.current);if(r=t.type,e!==null&&t.stateNode!=null)K_(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Qe(166));return ys(t),null}if(e=Tc(Qi.current),Gm(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Vi]=t,s[jf]=i,e=(t.mode&1)!==0,r){case"dialog":Zr("cancel",s),Zr("close",s);break;case"iframe":case"object":case"embed":Zr("load",s);break;case"video":case"audio":for(a=0;a<Hh.length;a++)Zr(Hh[a],s);break;case"source":Zr("error",s);break;case"img":case"image":case"link":Zr("error",s),Zr("load",s);break;case"details":Zr("toggle",s);break;case"input":sw(s,i),Zr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Zr("invalid",s);break;case"textarea":iw(s,i),Zr("invalid",s)}D0(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&Wm(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Wm(s.textContent,o,e),a=["children",""+o]):ff.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Zr("scroll",s)}switch(r){case"input":Om(s),aw(s,i,!0);break;case"textarea":Om(s),ow(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Xp)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SS(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[Vi]=t,e[jf]=s,Y_(e,t,!1,!1),t.stateNode=e;e:{switch(l=R0(r,s),r){case"dialog":Zr("cancel",e),Zr("close",e),a=s;break;case"iframe":case"object":case"embed":Zr("load",e),a=s;break;case"video":case"audio":for(a=0;a<Hh.length;a++)Zr(Hh[a],e);a=s;break;case"source":Zr("error",e),a=s;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),a=s;break;case"details":Zr("toggle",e),a=s;break;case"input":sw(e,s),a=P0(e,s),Zr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=mn({},s,{value:void 0}),Zr("invalid",e);break;case"textarea":iw(e,s),a=L0(e,s),Zr("invalid",e);break;default:a=s}D0(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?kS(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_S(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&mf(e,c):typeof c=="number"&&mf(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ff.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Zr("scroll",e):c!=null&&vy(e,i,c,l))}switch(r){case"input":Om(e),aw(e,s,!1);break;case"textarea":Om(e),ow(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Wl(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Zd(e,!!s.multiple,i,!1):s.defaultValue!=null&&Zd(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Xp)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&t.stateNode!=null)Q_(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Qe(166));if(r=Tc(_f.current),Tc(Qi.current),Gm(t)){if(s=t.stateNode,r=t.memoizedProps,s[Vi]=t,(i=s.nodeValue!==r)&&(e=Sa,e!==null))switch(e.tag){case 3:Wm(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wm(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Vi]=t,t.stateNode=s}return ys(t),null;case 13:if(nn(un),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cn&&wa!==null&&t.mode&1&&!(t.flags&128))m_(),_u(),t.flags|=98560,i=!1;else if(i=Gm(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Qe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Qe(317));i[Vi]=t}else _u(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ys(t),i=!1}else vi!==null&&(m1(vi),vi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||un.current&1?Qn===0&&(Qn=3):e2())),t.updateQueue!==null&&(t.flags|=4),ys(t),null);case 4:return ku(),i1(e,t),e===null&&wf(t.stateNode.containerInfo),ys(t),null;case 10:return Fy(t.type._context),ys(t),null;case 17:return ea(t.type)&&Jp(),ys(t),null;case 19:if(nn(un),i=t.memoizedState,i===null)return ys(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)Eh(i,!1);else{if(Qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ag(e),l!==null){for(t.flags|=128,Eh(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Yr(un,un.current&1|2),t.child}e=e.sibling}i.tail!==null&&En()>Au&&(t.flags|=128,s=!0,Eh(i,!1),t.lanes=4194304)}else{if(!s)if(e=ag(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Eh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!cn)return ys(t),null}else 2*En()-i.renderingStartTime>Au&&r!==1073741824&&(t.flags|=128,s=!0,Eh(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=En(),t.sibling=null,r=un.current,Yr(un,s?r&1|2:r&1),t):(ys(t),null);case 22:case 23:return Zy(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?va&1073741824&&(ys(t),t.subtreeFlags&6&&(t.flags|=8192)):ys(t),null;case 24:return null;case 25:return null}throw Error(Qe(156,t.tag))}function CT(e,t){switch(Dy(t),t.tag){case 1:return ea(t.type)&&Jp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ku(),nn(Zs),nn(ks),zy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $y(t),null;case 13:if(nn(un),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Qe(340));_u()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return nn(un),null;case 4:return ku(),null;case 10:return Fy(t.type._context),null;case 22:case 23:return Zy(),null;case 24:return null;default:return null}}var Qm=!1,Cs=!1,kT=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Kd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){wn(e,t,s)}else r.current=null}function o1(e,t,r){try{r()}catch(s){wn(e,t,s)}}var Qw=!1;function PT(e,t){if(V0=Yp,e=t_(),Ly(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,x=null;t:for(;;){for(var f;m!==r||a!==0&&m.nodeType!==3||(o=l+a),m!==i||s!==0&&m.nodeType!==3||(c=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(f=m.firstChild)!==null;)x=m,m=f;for(;;){if(m===e)break t;if(x===r&&++d===a&&(o=l),x===i&&++u===s&&(c=l),(f=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=f}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(H0={focusedElem:e,selectionRange:r},Yp=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,b=t.stateNode,j=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:fi(t.type,v),S);b.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(k){wn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return y=Qw,Qw=!1,y}function nf(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&o1(t,r,i)}a=a.next}while(a!==s)}}function zg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function l1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function X_(e){var t=e.alternate;t!==null&&(e.alternate=null,X_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vi],delete t[jf],delete t[Y0],delete t[dT],delete t[uT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function J_(e){return e.tag===5||e.tag===3||e.tag===4}function Xw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||J_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function c1(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Xp));else if(s!==4&&(e=e.child,e!==null))for(c1(e,t,r),e=e.sibling;e!==null;)c1(e,t,r),e=e.sibling}function d1(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(d1(e,t,r),e=e.sibling;e!==null;)d1(e,t,r),e=e.sibling}var us=null,xi=!1;function ol(e,t,r){for(r=r.child;r!==null;)Z_(e,t,r),r=r.sibling}function Z_(e,t,r){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(Rg,r)}catch{}switch(r.tag){case 5:Cs||Kd(r,t);case 6:var s=us,a=xi;us=null,ol(e,t,r),us=s,xi=a,us!==null&&(xi?(e=us,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):us.removeChild(r.stateNode));break;case 18:us!==null&&(xi?(e=us,r=r.stateNode,e.nodeType===8?mv(e.parentNode,r):e.nodeType===1&&mv(e,r),vf(e)):mv(us,r.stateNode));break;case 4:s=us,a=xi,us=r.stateNode.containerInfo,xi=!0,ol(e,t,r),us=s,xi=a;break;case 0:case 11:case 14:case 15:if(!Cs&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&o1(r,t,l),a=a.next}while(a!==s)}ol(e,t,r);break;case 1:if(!Cs&&(Kd(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){wn(r,t,o)}ol(e,t,r);break;case 21:ol(e,t,r);break;case 22:r.mode&1?(Cs=(s=Cs)||r.memoizedState!==null,ol(e,t,r),Cs=s):ol(e,t,r);break;default:ol(e,t,r)}}function Jw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kT),t.forEach(function(s){var a=FT.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function ci(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:us=o.stateNode,xi=!1;break e;case 3:us=o.stateNode.containerInfo,xi=!0;break e;case 4:us=o.stateNode.containerInfo,xi=!0;break e}o=o.return}if(us===null)throw Error(Qe(160));Z_(i,l,a),us=null,xi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){wn(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eC(t,e),t=t.sibling}function eC(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ci(t,e),Fi(e),s&4){try{nf(3,e,e.return),zg(3,e)}catch(v){wn(e,e.return,v)}try{nf(5,e,e.return)}catch(v){wn(e,e.return,v)}}break;case 1:ci(t,e),Fi(e),s&512&&r!==null&&Kd(r,r.return);break;case 5:if(ci(t,e),Fi(e),s&512&&r!==null&&Kd(r,r.return),e.flags&32){var a=e.stateNode;try{mf(a,"")}catch(v){wn(e,e.return,v)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&NS(a,i),R0(o,l);var d=R0(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?kS(a,m):u==="dangerouslySetInnerHTML"?_S(a,m):u==="children"?mf(a,m):vy(a,u,m,d)}switch(o){case"input":A0(a,i);break;case"textarea":jS(a,i);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Zd(a,!!i.multiple,f,!1):x!==!!i.multiple&&(i.defaultValue!=null?Zd(a,!!i.multiple,i.defaultValue,!0):Zd(a,!!i.multiple,i.multiple?[]:"",!1))}a[jf]=i}catch(v){wn(e,e.return,v)}}break;case 6:if(ci(t,e),Fi(e),s&4){if(e.stateNode===null)throw Error(Qe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){wn(e,e.return,v)}}break;case 3:if(ci(t,e),Fi(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{vf(t.containerInfo)}catch(v){wn(e,e.return,v)}break;case 4:ci(t,e),Fi(e);break;case 13:ci(t,e),Fi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Xy=En())),s&4&&Jw(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Cs=(d=Cs)||u,ci(t,e),Cs=d):ci(t,e),Fi(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(gt=e,u=e.child;u!==null;){for(m=gt=u;gt!==null;){switch(x=gt,f=x.child,x.tag){case 0:case 11:case 14:case 15:nf(4,x,x.return);break;case 1:Kd(x,x.return);var y=x.stateNode;if(typeof y.componentWillUnmount=="function"){s=x,r=x.return;try{t=s,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){wn(s,r,v)}}break;case 5:Kd(x,x.return);break;case 22:if(x.memoizedState!==null){eN(m);continue}}f!==null?(f.return=x,gt=f):eN(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=CS("display",l))}catch(v){wn(e,e.return,v)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(v){wn(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ci(t,e),Fi(e),s&4&&Jw(e);break;case 21:break;default:ci(t,e),Fi(e)}}function Fi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(J_(r)){var s=r;break e}r=r.return}throw Error(Qe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(mf(a,""),s.flags&=-33);var i=Xw(e);d1(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=Xw(e);c1(e,o,l);break;default:throw Error(Qe(161))}}catch(c){wn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AT(e,t,r){gt=e,tC(e)}function tC(e,t,r){for(var s=(e.mode&1)!==0;gt!==null;){var a=gt,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Qm;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Cs;o=Qm;var d=Cs;if(Qm=l,(Cs=c)&&!d)for(gt=a;gt!==null;)l=gt,c=l.child,l.tag===22&&l.memoizedState!==null?tN(a):c!==null?(c.return=l,gt=c):tN(a);for(;i!==null;)gt=i,tC(i),i=i.sibling;gt=a,Qm=o,Cs=d}Zw(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,gt=i):Zw(e)}}function Zw(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Cs||zg(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Cs)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:fi(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Fw(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Fw(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&vf(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}Cs||t.flags&512&&l1(t)}catch(x){wn(t,t.return,x)}}if(t===e){gt=null;break}if(r=t.sibling,r!==null){r.return=t.return,gt=r;break}gt=t.return}}function eN(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,gt=r;break}gt=t.return}}function tN(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zg(4,t)}catch(c){wn(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){wn(t,a,c)}}var i=t.return;try{l1(t)}catch(c){wn(t,i,c)}break;case 5:var l=t.return;try{l1(t)}catch(c){wn(t,l,c)}}}catch(c){wn(t,t.return,c)}if(t===e){gt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,gt=o;break}gt=t.return}}var ET=Math.ceil,lg=$o.ReactCurrentDispatcher,Ky=$o.ReactCurrentOwner,Ya=$o.ReactCurrentBatchConfig,jr=0,rs=null,zn=null,fs=0,va=0,Qd=tc(0),Qn=0,Af=null,Qc=0,qg=0,Qy=0,sf=null,Qs=null,Xy=0,Au=1/0,No=null,cg=!1,u1=null,Fl=null,Xm=!1,kl=null,dg=0,af=0,h1=null,kp=-1,Pp=0;function Bs(){return jr&6?En():kp!==-1?kp:kp=En()}function Ol(e){return e.mode&1?jr&2&&fs!==0?fs&-fs:fT.transition!==null?(Pp===0&&(Pp=BS()),Pp):(e=Rr,e!==0||(e=window.event,e=e===void 0?16:WS(e.type)),e):1}function Ni(e,t,r,s){if(50<af)throw af=0,h1=null,Error(Qe(185));Qf(e,r,s),(!(jr&2)||e!==rs)&&(e===rs&&(!(jr&2)&&(qg|=r),Qn===4&&yl(e,fs)),ta(e,s),r===1&&jr===0&&!(t.mode&1)&&(Au=En()+500,Bg&&rc()))}function ta(e,t){var r=e.callbackNode;f4(e,t);var s=Gp(e,e===rs?fs:0);if(s===0)r!==null&&dw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&dw(r),t===1)e.tag===0?hT(rN.bind(null,e)):u_(rN.bind(null,e)),lT(function(){!(jr&6)&&rc()}),r=null;else{switch(US(s)){case 1:r=jy;break;case 4:r=FS;break;case 16:r=Wp;break;case 536870912:r=OS;break;default:r=Wp}r=cC(r,rC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rC(e,t){if(kp=-1,Pp=0,jr&6)throw Error(Qe(327));var r=e.callbackNode;if(su()&&e.callbackNode!==r)return null;var s=Gp(e,e===rs?fs:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ug(e,s);else{t=s;var a=jr;jr|=2;var i=sC();(rs!==e||fs!==t)&&(No=null,Au=En()+500,qc(e,t));do try{DT();break}catch(o){nC(e,o)}while(!0);My(),lg.current=i,jr=a,zn!==null?t=0:(rs=null,fs=0,t=Qn)}if(t!==0){if(t===2&&(a=B0(e),a!==0&&(s=a,t=f1(e,a))),t===1)throw r=Af,qc(e,0),yl(e,s),ta(e,En()),r;if(t===6)yl(e,s);else{if(a=e.current.alternate,!(s&30)&&!LT(a)&&(t=ug(e,s),t===2&&(i=B0(e),i!==0&&(s=i,t=f1(e,i))),t===1))throw r=Af,qc(e,0),yl(e,s),ta(e,En()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Qe(345));case 2:Cc(e,Qs,No);break;case 3:if(yl(e,s),(s&130023424)===s&&(t=Xy+500-En(),10<t)){if(Gp(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Bs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=G0(Cc.bind(null,e,Qs,No),t);break}Cc(e,Qs,No);break;case 4:if(yl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-wi(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=En()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ET(s/1960))-s,10<s){e.timeoutHandle=G0(Cc.bind(null,e,Qs,No),s);break}Cc(e,Qs,No);break;case 5:Cc(e,Qs,No);break;default:throw Error(Qe(329))}}}return ta(e,En()),e.callbackNode===r?rC.bind(null,e):null}function f1(e,t){var r=sf;return e.current.memoizedState.isDehydrated&&(qc(e,t).flags|=256),e=ug(e,t),e!==2&&(t=Qs,Qs=r,t!==null&&m1(t)),e}function m1(e){Qs===null?Qs=e:Qs.push.apply(Qs,e)}function LT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Si(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yl(e,t){for(t&=~Qy,t&=~qg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wi(t),s=1<<r;e[r]=-1,t&=~s}}function rN(e){if(jr&6)throw Error(Qe(327));su();var t=Gp(e,0);if(!(t&1))return ta(e,En()),null;var r=ug(e,t);if(e.tag!==0&&r===2){var s=B0(e);s!==0&&(t=s,r=f1(e,s))}if(r===1)throw r=Af,qc(e,0),yl(e,t),ta(e,En()),r;if(r===6)throw Error(Qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cc(e,Qs,No),ta(e,En()),null}function Jy(e,t){var r=jr;jr|=1;try{return e(t)}finally{jr=r,jr===0&&(Au=En()+500,Bg&&rc())}}function Xc(e){kl!==null&&kl.tag===0&&!(jr&6)&&su();var t=jr;jr|=1;var r=Ya.transition,s=Rr;try{if(Ya.transition=null,Rr=1,e)return e()}finally{Rr=s,Ya.transition=r,jr=t,!(jr&6)&&rc()}}function Zy(){va=Qd.current,nn(Qd)}function qc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,oT(r)),zn!==null)for(r=zn.return;r!==null;){var s=r;switch(Dy(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Jp();break;case 3:ku(),nn(Zs),nn(ks),zy();break;case 5:$y(s);break;case 4:ku();break;case 13:nn(un);break;case 19:nn(un);break;case 10:Fy(s.type._context);break;case 22:case 23:Zy()}r=r.return}if(rs=e,zn=e=Bl(e.current,null),fs=va=t,Qn=0,Af=null,Qy=qg=Qc=0,Qs=sf=null,Lc!==null){for(t=0;t<Lc.length;t++)if(r=Lc[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}Lc=null}return e}function nC(e,t){do{var r=zn;try{if(My(),Sp.current=og,ig){for(var s=fn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ig=!1}if(Kc=0,es=Kn=fn=null,rf=!1,Cf=0,Ky.current=null,r===null||r.return===null){Qn=1,Af=t,zn=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=fs,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=qw(l);if(f!==null){f.flags&=-257,Vw(f,l,o,i,t),f.mode&1&&zw(i,d,t),t=f,c=d;var y=t.updateQueue;if(y===null){var v=new Set;v.add(c),t.updateQueue=v}else y.add(c);break e}else{if(!(t&1)){zw(i,d,t),e2();break e}c=Error(Qe(426))}}else if(cn&&o.mode&1){var S=qw(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Vw(S,l,o,i,t),Ry(Pu(c,o));break e}}i=c=Pu(c,o),Qn!==4&&(Qn=2),sf===null?sf=[i]:sf.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=U_(i,c,t);Mw(i,b);break e;case 1:o=c;var j=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fl===null||!Fl.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=$_(i,o,t);Mw(i,k);break e}}i=i.return}while(i!==null)}iC(r)}catch(R){t=R,zn===r&&r!==null&&(zn=r=r.return);continue}break}while(!0)}function sC(){var e=lg.current;return lg.current=og,e===null?og:e}function e2(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),rs===null||!(Qc&268435455)&&!(qg&268435455)||yl(rs,fs)}function ug(e,t){var r=jr;jr|=2;var s=sC();(rs!==e||fs!==t)&&(No=null,qc(e,t));do try{TT();break}catch(a){nC(e,a)}while(!0);if(My(),jr=r,lg.current=s,zn!==null)throw Error(Qe(261));return rs=null,fs=0,Qn}function TT(){for(;zn!==null;)aC(zn)}function DT(){for(;zn!==null&&!s4();)aC(zn)}function aC(e){var t=lC(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?iC(e):zn=t,Ky.current=null}function iC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=CT(r,t),r!==null){r.flags&=32767,zn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qn=6,zn=null;return}}else if(r=_T(r,t,va),r!==null){zn=r;return}if(t=t.sibling,t!==null){zn=t;return}zn=t=e}while(t!==null);Qn===0&&(Qn=5)}function Cc(e,t,r){var s=Rr,a=Ya.transition;try{Ya.transition=null,Rr=1,RT(e,t,r,s)}finally{Ya.transition=a,Rr=s}return null}function RT(e,t,r,s){do su();while(kl!==null);if(jr&6)throw Error(Qe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Qe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(m4(e,i),e===rs&&(zn=rs=null,fs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xm||(Xm=!0,cC(Wp,function(){return su(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ya.transition,Ya.transition=null;var l=Rr;Rr=1;var o=jr;jr|=4,Ky.current=null,PT(e,r),eC(r,e),eT(H0),Yp=!!V0,H0=V0=null,e.current=r,AT(r),a4(),jr=o,Rr=l,Ya.transition=i}else e.current=r;if(Xm&&(Xm=!1,kl=e,dg=a),i=e.pendingLanes,i===0&&(Fl=null),l4(r.stateNode),ta(e,En()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(cg)throw cg=!1,e=u1,u1=null,e;return dg&1&&e.tag!==0&&su(),i=e.pendingLanes,i&1?e===h1?af++:(af=0,h1=e):af=0,rc(),null}function su(){if(kl!==null){var e=US(dg),t=Ya.transition,r=Rr;try{if(Ya.transition=null,Rr=16>e?16:e,kl===null)var s=!1;else{if(e=kl,kl=null,dg=0,jr&6)throw Error(Qe(331));var a=jr;for(jr|=4,gt=e.current;gt!==null;){var i=gt,l=i.child;if(gt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(gt=d;gt!==null;){var u=gt;switch(u.tag){case 0:case 11:case 15:nf(8,u,i)}var m=u.child;if(m!==null)m.return=u,gt=m;else for(;gt!==null;){u=gt;var x=u.sibling,f=u.return;if(X_(u),u===d){gt=null;break}if(x!==null){x.return=f,gt=x;break}gt=f}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}gt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,gt=l;else e:for(;gt!==null;){if(i=gt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,gt=b;break e}gt=i.return}}var j=e.current;for(gt=j;gt!==null;){l=gt;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,gt=w;else e:for(l=j;gt!==null;){if(o=gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zg(9,o)}}catch(R){wn(o,o.return,R)}if(o===l){gt=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,gt=k;break e}gt=o.return}}if(jr=a,rc(),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(Rg,e)}catch{}s=!0}return s}finally{Rr=r,Ya.transition=t}}return!1}function nN(e,t,r){t=Pu(r,t),t=U_(e,t,1),e=Ml(e,t,1),t=Bs(),e!==null&&(Qf(e,1,t),ta(e,t))}function wn(e,t,r){if(e.tag===3)nN(e,e,r);else for(;t!==null;){if(t.tag===3){nN(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fl===null||!Fl.has(s))){e=Pu(r,e),e=$_(t,e,1),t=Ml(t,e,1),e=Bs(),t!==null&&(Qf(t,1,e),ta(t,e));break}}t=t.return}}function IT(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Bs(),e.pingedLanes|=e.suspendedLanes&r,rs===e&&(fs&r)===r&&(Qn===4||Qn===3&&(fs&130023424)===fs&&500>En()-Xy?qc(e,0):Qy|=r),ta(e,t)}function oC(e,t){t===0&&(e.mode&1?(t=$m,$m<<=1,!($m&130023424)&&($m=4194304)):t=1);var r=Bs();e=Io(e,t),e!==null&&(Qf(e,t,r),ta(e,r))}function MT(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oC(e,r)}function FT(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Qe(314))}s!==null&&s.delete(t),oC(e,r)}var lC;lC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zs.current)Xs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xs=!1,ST(e,t,r);Xs=!!(e.flags&131072)}else Xs=!1,cn&&t.flags&1048576&&h_(t,tg,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Cp(e,t),e=t.pendingProps;var a=Su(t,ks.current);nu(t,r),a=Vy(null,t,s,e,a,r);var i=Hy();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ea(s)?(i=!0,Zp(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,By(t),a.updater=$g,t.stateNode=a,a._reactInternals=t,e1(t,s,e,r),t=n1(null,t,s,!0,i,r)):(t.tag=0,cn&&i&&Ty(t),Ms(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Cp(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=BT(s),e=fi(s,e),a){case 0:t=r1(null,t,s,e,r);break e;case 1:t=Gw(null,t,s,e,r);break e;case 11:t=Hw(null,t,s,e,r);break e;case 14:t=Ww(null,t,s,fi(s.type,e),r);break e}throw Error(Qe(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fi(s,a),r1(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fi(s,a),Gw(e,t,s,a,r);case 3:e:{if(H_(t),e===null)throw Error(Qe(387));s=t.pendingProps,i=t.memoizedState,a=i.element,v_(e,t),sg(t,s,null,r);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Pu(Error(Qe(423)),t),t=Yw(e,t,s,r,a);break e}else if(s!==a){a=Pu(Error(Qe(424)),t),t=Yw(e,t,s,r,a);break e}else for(wa=Il(t.stateNode.containerInfo.firstChild),Sa=t,cn=!0,vi=null,r=g_(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_u(),s===a){t=Mo(e,t,r);break e}Ms(e,t,s,r)}t=t.child}return t;case 5:return y_(t),e===null&&X0(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,W0(s,a)?l=null:i!==null&&W0(s,i)&&(t.flags|=32),V_(e,t),Ms(e,t,l,r),t.child;case 6:return e===null&&X0(t),null;case 13:return W_(e,t,r);case 4:return Uy(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Cu(t,null,s,r):Ms(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fi(s,a),Hw(e,t,s,a,r);case 7:return Ms(e,t,t.pendingProps,r),t.child;case 8:return Ms(e,t,t.pendingProps.children,r),t.child;case 12:return Ms(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Yr(rg,s._currentValue),s._currentValue=l,i!==null)if(Si(i.value,l)){if(i.children===a.children&&!Zs.current){t=Mo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Lo(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),J0(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Qe(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),J0(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ms(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,nu(t,r),a=Qa(a),s=s(a),t.flags|=1,Ms(e,t,s,r),t.child;case 14:return s=t.type,a=fi(s,t.pendingProps),a=fi(s.type,a),Ww(e,t,s,a,r);case 15:return z_(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fi(s,a),Cp(e,t),t.tag=1,ea(s)?(e=!0,Zp(t)):e=!1,nu(t,r),B_(t,s,a),e1(t,s,a,r),n1(null,t,s,!0,e,r);case 19:return G_(e,t,r);case 22:return q_(e,t,r)}throw Error(Qe(156,t.tag))};function cC(e,t){return MS(e,t)}function OT(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(e,t,r,s){return new OT(e,t,r,s)}function t2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BT(e){if(typeof e=="function")return t2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===by)return 11;if(e===wy)return 14}return 2}function Bl(e,t){var r=e.alternate;return r===null?(r=Ga(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ap(e,t,r,s,a,i){var l=2;if(s=e,typeof e=="function")t2(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ud:return Vc(r.children,a,i,t);case yy:l=8,a|=8;break;case S0:return e=Ga(12,r,t,a|2),e.elementType=S0,e.lanes=i,e;case _0:return e=Ga(13,r,t,a),e.elementType=_0,e.lanes=i,e;case C0:return e=Ga(19,r,t,a),e.elementType=C0,e.lanes=i,e;case yS:return Vg(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xS:l=10;break e;case vS:l=9;break e;case by:l=11;break e;case wy:l=14;break e;case pl:l=16,s=null;break e}throw Error(Qe(130,e==null?e:typeof e,""))}return t=Ga(l,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Vc(e,t,r,s){return e=Ga(7,e,s,t),e.lanes=r,e}function Vg(e,t,r,s){return e=Ga(22,e,s,t),e.elementType=yS,e.lanes=r,e.stateNode={isHidden:!1},e}function Nv(e,t,r){return e=Ga(6,e,null,t),e.lanes=r,e}function jv(e,t,r){return t=Ga(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function UT(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nv(0),this.expirationTimes=nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nv(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function r2(e,t,r,s,a,i,l,o,c){return e=new UT(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ga(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},By(i),e}function $T(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function dC(e){if(!e)return Gl;e=e._reactInternals;e:{if(ld(e)!==e||e.tag!==1)throw Error(Qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ea(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Qe(171))}if(e.tag===1){var r=e.type;if(ea(r))return d_(e,r,t)}return t}function uC(e,t,r,s,a,i,l,o,c){return e=r2(r,s,!0,e,a,i,l,o,c),e.context=dC(null),r=e.current,s=Bs(),a=Ol(r),i=Lo(s,a),i.callback=t??null,Ml(r,i,a),e.current.lanes=a,Qf(e,a,s),ta(e,s),e}function Hg(e,t,r,s){var a=t.current,i=Bs(),l=Ol(a);return r=dC(r),t.context===null?t.context=r:t.pendingContext=r,t=Lo(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Ml(a,t,l),e!==null&&(Ni(e,a,l,i),jp(e,a,l)),l}function hg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function n2(e,t){sN(e,t),(e=e.alternate)&&sN(e,t)}function zT(){return null}var hC=typeof reportError=="function"?reportError:function(e){console.error(e)};function s2(e){this._internalRoot=e}Wg.prototype.render=s2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Qe(409));Hg(e,t,null,null)};Wg.prototype.unmount=s2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xc(function(){Hg(null,e,null,null)}),t[Ro]=null}};function Wg(e){this._internalRoot=e}Wg.prototype.unstable_scheduleHydration=function(e){if(e){var t=qS();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vl.length&&t!==0&&t<vl[r].priority;r++);vl.splice(r,0,e),r===0&&HS(e)}};function a2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function aN(){}function qT(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=hg(l);i.call(d)}}var l=uC(t,s,e,0,null,!1,!1,"",aN);return e._reactRootContainer=l,e[Ro]=l.current,wf(e.nodeType===8?e.parentNode:e),Xc(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=hg(c);o.call(d)}}var c=r2(e,0,!1,null,null,!1,!1,"",aN);return e._reactRootContainer=c,e[Ro]=c.current,wf(e.nodeType===8?e.parentNode:e),Xc(function(){Hg(t,c,r,s)}),c}function Yg(e,t,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=hg(l);o.call(c)}}Hg(t,l,e,a)}else l=qT(r,t,e,a,s);return hg(l)}$S=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vh(t.pendingLanes);r!==0&&(Sy(t,r|1),ta(t,En()),!(jr&6)&&(Au=En()+500,rc()))}break;case 13:Xc(function(){var s=Io(e,1);if(s!==null){var a=Bs();Ni(s,e,1,a)}}),n2(e,1)}};_y=function(e){if(e.tag===13){var t=Io(e,134217728);if(t!==null){var r=Bs();Ni(t,e,134217728,r)}n2(e,134217728)}};zS=function(e){if(e.tag===13){var t=Ol(e),r=Io(e,t);if(r!==null){var s=Bs();Ni(r,e,t,s)}n2(e,t)}};qS=function(){return Rr};VS=function(e,t){var r=Rr;try{return Rr=e,t()}finally{Rr=r}};M0=function(e,t,r){switch(t){case"input":if(A0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Og(s);if(!a)throw Error(Qe(90));wS(s),A0(s,a)}}}break;case"textarea":jS(e,r);break;case"select":t=r.value,t!=null&&Zd(e,!!r.multiple,t,!1)}};ES=Jy;LS=Xc;var VT={usingClientEntryPoint:!1,Events:[Jf,Vd,Og,PS,AS,Jy]},Lh={findFiberByHostInstance:Ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HT={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$o.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RS(e),e===null?null:e.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||zT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{Rg=Jm.inject(HT),Ki=Jm}catch{}}Pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VT;Pa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(t))throw Error(Qe(200));return $T(e,t,null,r)};Pa.createRoot=function(e,t){if(!a2(e))throw Error(Qe(299));var r=!1,s="",a=hC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=r2(e,1,!1,null,null,r,!1,s,a),e[Ro]=t.current,wf(e.nodeType===8?e.parentNode:e),new s2(t)};Pa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Qe(188)):(e=Object.keys(e).join(","),Error(Qe(268,e)));return e=RS(t),e=e===null?null:e.stateNode,e};Pa.flushSync=function(e){return Xc(e)};Pa.hydrate=function(e,t,r){if(!Gg(t))throw Error(Qe(200));return Yg(null,e,t,!0,r)};Pa.hydrateRoot=function(e,t,r){if(!a2(e))throw Error(Qe(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=hC;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=uC(t,null,e,1,r??null,a,!1,i,l),e[Ro]=t.current,wf(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Wg(t)};Pa.render=function(e,t,r){if(!Gg(t))throw Error(Qe(200));return Yg(null,e,t,!1,r)};Pa.unmountComponentAtNode=function(e){if(!Gg(e))throw Error(Qe(40));return e._reactRootContainer?(Xc(function(){Yg(null,null,e,!1,function(){e._reactRootContainer=null,e[Ro]=null})}),!0):!1};Pa.unstable_batchedUpdates=Jy;Pa.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Gg(r))throw Error(Qe(200));if(e==null||e._reactInternals===void 0)throw Error(Qe(38));return Yg(e,t,r,!1,s)};Pa.version="18.3.1-next-f1338f8080-20240426";function fC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fC)}catch(e){console.error(e)}}fC(),fS.exports=Pa;var cd=fS.exports;const mC=tS(cd);var pC,iN=cd;pC=iN.createRoot,iN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ef(){return Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ef.apply(this,arguments)}var Pl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pl||(Pl={}));const oN="popstate";function WT(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:l,hash:o}=s.location;return p1("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:fg(a)}return YT(t,r,null,e)}function On(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function GT(){return Math.random().toString(36).substr(2,8)}function lN(e,t){return{usr:e.state,key:e.key,idx:t}}function p1(e,t,r,s){return r===void 0&&(r=null),Ef({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zu(t):t,{state:r,key:t&&t.key||s||GT()})}function fg(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function zu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function YT(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,o=Pl.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Ef({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=Pl.Pop;let S=u(),b=S==null?null:S-d;d=S,c&&c({action:o,location:v.location,delta:b})}function x(S,b){o=Pl.Push;let j=p1(v.location,S,b);d=u()+1;let w=lN(j,d),k=v.createHref(j);try{l.pushState(w,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(k)}i&&c&&c({action:o,location:v.location,delta:1})}function f(S,b){o=Pl.Replace;let j=p1(v.location,S,b);d=u();let w=lN(j,d),k=v.createHref(j);l.replaceState(w,"",k),i&&c&&c({action:o,location:v.location,delta:0})}function y(S){let b=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof S=="string"?S:fg(S);return j=j.replace(/ $/,"%20"),On(b,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,b)}let v={get action(){return o},get location(){return e(a,l)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(oN,m),c=S,()=>{a.removeEventListener(oN,m),c=null}},createHref(S){return t(a,S)},createURL:y,encodeLocation(S){let b=y(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:x,replace:f,go(S){return l.go(S)}};return v}var cN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cN||(cN={}));function KT(e,t,r){return r===void 0&&(r="/"),QT(e,t,r,!1)}function QT(e,t,r,s){let a=typeof t=="string"?zu(t):t,i=i2(a.pathname||"/",r);if(i==null)return null;let l=xC(e);XT(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=lD(i);o=iD(l[c],d,s)}return o}function xC(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(On(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Ul([s,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(On(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),xC(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:sD(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of vC(i.path))a(i,l,c)}),t}function vC(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=vC(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function XT(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:aD(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const JT=/^:[\w-]+$/,ZT=3,eD=2,tD=1,rD=10,nD=-2,dN=e=>e==="*";function sD(e,t){let r=e.split("/"),s=r.length;return r.some(dN)&&(s+=nD),t&&(s+=eD),r.filter(a=>!dN(a)).reduce((a,i)=>a+(JT.test(i)?ZT:i===""?tD:rD),s)}function aD(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function iD(e,t,r){let{routesMeta:s}=e,a={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=uN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),x=c.route;if(!m&&d&&r&&!s[s.length-1].route.index&&(m=uN({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:Ul([i,m.pathname]),pathnameBase:hD(Ul([i,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(i=Ul([i,m.pathnameBase]))}return l}function uN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=oD(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:x,isOptional:f}=u;if(x==="*"){let v=o[m]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=o[m];return f&&!y?d[x]=void 0:d[x]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function oD(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),gC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function lD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function i2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function cD(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?zu(e):e;return{pathname:r?r.startsWith("/")?r:dD(r,t):t,search:fD(s),hash:mD(a)}}function dD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Sv(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function o2(e,t){let r=uD(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function l2(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=zu(e):(a=Ef({},e),On(!a.pathname||!a.pathname.includes("?"),Sv("?","pathname","search",a)),On(!a.pathname||!a.pathname.includes("#"),Sv("#","pathname","hash",a)),On(!a.search||!a.search.includes("#"),Sv("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let m=t.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;a.pathname=x.join("/")}o=m>=0?t[m]:"/"}let c=cD(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Ul=e=>e.join("/").replace(/\/\/+/g,"/"),hD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yC=["post","put","patch","delete"];new Set(yC);const gD=["get",...yC];new Set(gD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lf.apply(this,arguments)}const c2=p.createContext(null),xD=p.createContext(null),nc=p.createContext(null),Kg=p.createContext(null),sc=p.createContext({outlet:null,matches:[],isDataRoute:!1}),bC=p.createContext(null);function vD(e,t){let{relative:r}=t===void 0?{}:t;qu()||On(!1);let{basename:s,navigator:a}=p.useContext(nc),{hash:i,pathname:l,search:o}=NC(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:Ul([s,l])),a.createHref({pathname:c,search:o,hash:i})}function qu(){return p.useContext(Kg)!=null}function ac(){return qu()||On(!1),p.useContext(Kg).location}function wC(e){p.useContext(nc).static||p.useLayoutEffect(e)}function Vu(){let{isDataRoute:e}=p.useContext(sc);return e?LD():yD()}function yD(){qu()||On(!1);let e=p.useContext(c2),{basename:t,future:r,navigator:s}=p.useContext(nc),{matches:a}=p.useContext(sc),{pathname:i}=ac(),l=JSON.stringify(o2(a,r.v7_relativeSplatPath)),o=p.useRef(!1);return wC(()=>{o.current=!0}),p.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let m=l2(d,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ul([t,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[t,s,l,i,e])}function NC(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=p.useContext(nc),{matches:a}=p.useContext(sc),{pathname:i}=ac(),l=JSON.stringify(o2(a,s.v7_relativeSplatPath));return p.useMemo(()=>l2(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function bD(e,t){return wD(e,t)}function wD(e,t,r,s){qu()||On(!1);let{navigator:a}=p.useContext(nc),{matches:i}=p.useContext(sc),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=ac(),u;if(t){var m;let S=typeof t=="string"?zu(t):t;c==="/"||(m=S.pathname)!=null&&m.startsWith(c)||On(!1),u=S}else u=d;let x=u.pathname||"/",f=x;if(c!=="/"){let S=c.replace(/^\//,"").split("/");f="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=KT(e,{pathname:f}),v=CD(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},o,S.params),pathname:Ul([c,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Ul([c,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,r,s);return t&&v?p.createElement(Kg.Provider,{value:{location:Lf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Pl.Pop}},v):v}function ND(){let e=ED(),t=pD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,null)}const jD=p.createElement(ND,null);class SD extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(sc.Provider,{value:this.props.routeContext},p.createElement(bC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _D(e){let{routeContext:t,match:r,children:s}=e,a=p.useContext(c2);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(sc.Provider,{value:t},s)}function CD(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||On(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:x,errors:f}=r,y=m.route.loader&&x[m.route.id]===void 0&&(!f||f[m.route.id]===void 0);if(m.route.lazy||y){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,x)=>{let f,y=!1,v=null,S=null;r&&(f=o&&m.route.id?o[m.route.id]:void 0,v=m.route.errorElement||jD,c&&(d<0&&x===0?(y=!0,S=null):d===x&&(y=!0,S=m.route.hydrateFallbackElement||null)));let b=t.concat(l.slice(0,x+1)),j=()=>{let w;return f?w=v:y?w=S:m.route.Component?w=p.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=u,p.createElement(_D,{match:m,routeContext:{outlet:u,matches:b,isDataRoute:r!=null},children:w})};return r&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?p.createElement(SD,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:j(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):j()},null)}var jC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jC||{}),mg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mg||{});function kD(e){let t=p.useContext(c2);return t||On(!1),t}function PD(e){let t=p.useContext(xD);return t||On(!1),t}function AD(e){let t=p.useContext(sc);return t||On(!1),t}function SC(e){let t=AD(),r=t.matches[t.matches.length-1];return r.route.id||On(!1),r.route.id}function ED(){var e;let t=p.useContext(bC),r=PD(mg.UseRouteError),s=SC(mg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function LD(){let{router:e}=kD(jC.UseNavigateStable),t=SC(mg.UseNavigateStable),r=p.useRef(!1);return wC(()=>{r.current=!0}),p.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Lf({fromRouteId:t},i)))},[e,t])}function TD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function of(e){let{to:t,replace:r,state:s,relative:a}=e;qu()||On(!1);let{future:i,static:l}=p.useContext(nc),{matches:o}=p.useContext(sc),{pathname:c}=ac(),d=Vu(),u=l2(t,o2(o,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return p.useEffect(()=>d(JSON.parse(m),{replace:r,state:s,relative:a}),[d,m,a,r,s]),null}function $n(e){On(!1)}function DD(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Pl.Pop,navigator:i,static:l=!1,future:o}=e;qu()&&On(!1);let c=t.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:i,static:l,future:Lf({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof s=="string"&&(s=zu(s));let{pathname:u="/",search:m="",hash:x="",state:f=null,key:y="default"}=s,v=p.useMemo(()=>{let S=i2(u,c);return S==null?null:{location:{pathname:S,search:m,hash:x,state:f,key:y},navigationType:a}},[c,u,m,x,f,y,a]);return v==null?null:p.createElement(nc.Provider,{value:d},p.createElement(Kg.Provider,{children:r,value:v}))}function RD(e){let{children:t,location:r}=e;return bD(g1(t),r)}new Promise(()=>{});function g1(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(s,a)=>{if(!p.isValidElement(s))return;let i=[...t,a];if(s.type===p.Fragment){r.push.apply(r,g1(s.props.children,i));return}s.type!==$n&&On(!1),!s.props.index||!s.props.children||On(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=g1(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function x1(){return x1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},x1.apply(this,arguments)}function ID(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function MD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function FD(e,t){return e.button===0&&(!t||t==="_self")&&!MD(e)}function v1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function OD(e,t){let r=v1(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const BD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UD="6";try{window.__reactRouterVersion=UD}catch{}const $D="startTransition",hN=py[$D];function zD(e){let{basename:t,children:r,future:s,window:a}=e,i=p.useRef();i.current==null&&(i.current=WT({window:a,v5Compat:!0}));let l=i.current,[o,c]=p.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},u=p.useCallback(m=>{d&&hN?hN(()=>c(m)):c(m)},[c,d]);return p.useLayoutEffect(()=>l.listen(u),[l,u]),p.useEffect(()=>TD(s),[s]),p.createElement(DD,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const qD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jo=p.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,x=ID(t,BD),{basename:f}=p.useContext(nc),y,v=!1;if(typeof d=="string"&&VD.test(d)&&(y=d,qD))try{let w=new URL(window.location.href),k=d.startsWith("//")?new URL(w.protocol+d):new URL(d),R=i2(k.pathname,f);k.origin===w.origin&&R!=null?d=R+k.search+k.hash:v=!0}catch{}let S=vD(d,{relative:a}),b=HD(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});function j(w){s&&s(w),w.defaultPrevented||b(w)}return p.createElement("a",x1({},x,{href:y||S,onClick:v||i?s:j,ref:r,target:c}))});var fN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(fN||(fN={}));var mN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mN||(mN={}));function HD(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Vu(),d=ac(),u=NC(e,{relative:l});return p.useCallback(m=>{if(FD(m,r)){m.preventDefault();let x=s!==void 0?s:fg(d)===fg(u);c(e,{replace:x,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,a,r,e,i,l,o])}function WD(e){let t=p.useRef(v1(e)),r=p.useRef(!1),s=ac(),a=p.useMemo(()=>OD(s.search,r.current?null:t.current),[s.search]),i=Vu(),l=p.useCallback((o,c)=>{const d=v1(typeof o=="function"?o(a):o);r.current=!0,i("?"+d,c)},[i,a]);return[a,l]}var pN=["light","dark"],GD="(prefers-color-scheme: dark)",YD=p.createContext(void 0),KD={setTheme:e=>{},themes:[]},QD=()=>{var e;return(e=p.useContext(YD))!=null?e:KD};p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:i,value:l,attrs:o,nonce:c})=>{let d=i==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=a?pN.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(y,v=!1,S=!0)=>{let b=l?l[y]:y,j=v?y+"|| ''":`'${b}'`,w="";return a&&S&&!v&&pN.includes(y)&&(w+=`d.style.colorScheme = '${y}';`),r==="class"?v||b?w+=`c.add(${j})`:w+="null":b&&(w+=`d[s](n,${j})`),w},f=e?`!function(){${u}${x(e)}}()`:s?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${GD}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${x(l?"x[e]":"e",!0)}}${d?"":"else{"+x(i,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${x(l?"x[e]":"e",!0)}}else{${x(i,!1,!1)};}${m}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var XD=e=>{switch(e){case"success":return eR;case"info":return rR;case"warning":return tR;case"error":return nR;default:return null}},JD=Array(12).fill(0),ZD=({visible:e,className:t})=>Ze.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ze.createElement("div",{className:"sonner-spinner"},JD.map((r,s)=>Ze.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),eR=Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ze.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tR=Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ze.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rR=Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nR=Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sR=Ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ze.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ze.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aR=()=>{let[e,t]=Ze.useState(document.hidden);return Ze.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},y1=1,iR=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:s,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:y1++,l=this.toasts.find(c=>c.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:s}),{...c,...t,id:i,dismissible:o,title:s}):c):this.addToast({title:s,...a,dismissible:o,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let a=t instanceof Promise?t:t(),i=s!==void 0,l,o=a.then(async d=>{if(l=["resolve",d],Ze.isValidElement(d))i=!1,this.create({id:s,type:"default",message:d});else if(lR(d)&&!d.ok){i=!1;let u=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,m=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description;this.create({id:s,type:"error",message:u,description:m})}else if(r.success!==void 0){i=!1;let u=typeof r.success=="function"?await r.success(d):r.success,m=typeof r.description=="function"?await r.description(d):r.description;this.create({id:s,type:"success",message:u,description:m})}}).catch(async d=>{if(l=["reject",d],r.error!==void 0){i=!1;let u=typeof r.error=="function"?await r.error(d):r.error,m=typeof r.description=="function"?await r.description(d):r.description;this.create({id:s,type:"error",message:u,description:m})}}).finally(()=>{var d;i&&(this.dismiss(s),s=void 0),(d=r.finally)==null||d.call(r)}),c=()=>new Promise((d,u)=>o.then(()=>l[0]==="reject"?u(l[1]):d(l[1])).catch(u));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(t,r)=>{let s=(r==null?void 0:r.id)||y1++;return this.create({jsx:t(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ks=new iR,oR=(e,t)=>{let r=(t==null?void 0:t.id)||y1++;return Ks.addToast({title:e,...t,id:r}),r},lR=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cR=oR,dR=()=>Ks.toasts,uR=()=>Ks.getActiveToasts(),ye=Object.assign(cR,{success:Ks.success,info:Ks.info,warning:Ks.warning,error:Ks.error,custom:Ks.custom,message:Ks.message,promise:Ks.promise,dismiss:Ks.dismiss,loading:Ks.loading},{getHistory:dR,getToasts:uR});function hR(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}hR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zm(e){return e.label!==void 0}var fR=3,mR="32px",pR="16px",gN=4e3,gR=356,xR=14,vR=20,yR=200;function di(...e){return e.filter(Boolean).join(" ")}function bR(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var wR=e=>{var t,r,s,a,i,l,o,c,d,u,m;let{invert:x,toast:f,unstyled:y,interacting:v,setHeights:S,visibleToasts:b,heights:j,index:w,toasts:k,expanded:R,removeToast:W,defaultRichColors:O,closeButton:q,style:D,cancelButtonStyle:J,actionButtonStyle:A,className:M="",descriptionClassName:ee="",duration:E,position:ae,gap:Y,loadingIcon:de,expandByDefault:T,classNames:V,icons:re,closeButtonAriaLabel:he="Close toast",pauseWhenPageIsHidden:C}=e,[F,L]=Ze.useState(null),[$,K]=Ze.useState(null),[I,X]=Ze.useState(!1),[ne,ue]=Ze.useState(!1),[xe,ke]=Ze.useState(!1),[Re,We]=Ze.useState(!1),[Z,Ge]=Ze.useState(!1),[Lt,Me]=Ze.useState(0),[Ee,it]=Ze.useState(0),et=Ze.useRef(f.duration||E||gN),dt=Ze.useRef(null),lt=Ze.useRef(null),jt=w===0,Ht=w+1<=b,ut=f.type,Mt=f.dismissible!==!1,Gt=f.className||"",st=f.descriptionClassName||"",se=Ze.useMemo(()=>j.findIndex(Ft=>Ft.toastId===f.id)||0,[j,f.id]),ve=Ze.useMemo(()=>{var Ft;return(Ft=f.closeButton)!=null?Ft:q},[f.closeButton,q]),Pe=Ze.useMemo(()=>f.duration||E||gN,[f.duration,E]),Fe=Ze.useRef(0),pe=Ze.useRef(0),ze=Ze.useRef(0),qe=Ze.useRef(null),[Ve,Yt]=ae.split("-"),xt=Ze.useMemo(()=>j.reduce((Ft,Ut,rr)=>rr>=se?Ft:Ft+Ut.height,0),[j,se]),pt=aR(),cr=f.invert||x,Wt=ut==="loading";pe.current=Ze.useMemo(()=>se*Y+xt,[se,xt]),Ze.useEffect(()=>{et.current=Pe},[Pe]),Ze.useEffect(()=>{X(!0)},[]),Ze.useEffect(()=>{let Ft=lt.current;if(Ft){let Ut=Ft.getBoundingClientRect().height;return it(Ut),S(rr=>[{toastId:f.id,height:Ut,position:f.position},...rr]),()=>S(rr=>rr.filter($r=>$r.toastId!==f.id))}},[S,f.id]),Ze.useLayoutEffect(()=>{if(!I)return;let Ft=lt.current,Ut=Ft.style.height;Ft.style.height="auto";let rr=Ft.getBoundingClientRect().height;Ft.style.height=Ut,it(rr),S($r=>$r.find(ft=>ft.toastId===f.id)?$r.map(ft=>ft.toastId===f.id?{...ft,height:rr}:ft):[{toastId:f.id,height:rr,position:f.position},...$r])},[I,f.title,f.description,S,f.id]);let wt=Ze.useCallback(()=>{ue(!0),Me(pe.current),S(Ft=>Ft.filter(Ut=>Ut.toastId!==f.id)),setTimeout(()=>{W(f)},yR)},[f,W,S,pe]);Ze.useEffect(()=>{if(f.promise&&ut==="loading"||f.duration===1/0||f.type==="loading")return;let Ft;return R||v||C&&pt?(()=>{if(ze.current<Fe.current){let Ut=new Date().getTime()-Fe.current;et.current=et.current-Ut}ze.current=new Date().getTime()})():et.current!==1/0&&(Fe.current=new Date().getTime(),Ft=setTimeout(()=>{var Ut;(Ut=f.onAutoClose)==null||Ut.call(f,f),wt()},et.current)),()=>clearTimeout(Ft)},[R,v,f,ut,C,pt,wt]),Ze.useEffect(()=>{f.delete&&wt()},[wt,f.delete]);function dr(){var Ft,Ut,rr;return re!=null&&re.loading?Ze.createElement("div",{className:di(V==null?void 0:V.loader,(Ft=f==null?void 0:f.classNames)==null?void 0:Ft.loader,"sonner-loader"),"data-visible":ut==="loading"},re.loading):de?Ze.createElement("div",{className:di(V==null?void 0:V.loader,(Ut=f==null?void 0:f.classNames)==null?void 0:Ut.loader,"sonner-loader"),"data-visible":ut==="loading"},de):Ze.createElement(ZD,{className:di(V==null?void 0:V.loader,(rr=f==null?void 0:f.classNames)==null?void 0:rr.loader),visible:ut==="loading"})}return Ze.createElement("li",{tabIndex:0,ref:lt,className:di(M,Gt,V==null?void 0:V.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,V==null?void 0:V.default,V==null?void 0:V[ut],(r=f==null?void 0:f.classNames)==null?void 0:r[ut]),"data-sonner-toast":"","data-rich-colors":(s=f.richColors)!=null?s:O,"data-styled":!(f.jsx||f.unstyled||y),"data-mounted":I,"data-promise":!!f.promise,"data-swiped":Z,"data-removed":ne,"data-visible":Ht,"data-y-position":Ve,"data-x-position":Yt,"data-index":w,"data-front":jt,"data-swiping":xe,"data-dismissible":Mt,"data-type":ut,"data-invert":cr,"data-swipe-out":Re,"data-swipe-direction":$,"data-expanded":!!(R||T&&I),style:{"--index":w,"--toasts-before":w,"--z-index":k.length-w,"--offset":`${ne?Lt:pe.current}px`,"--initial-height":T?"auto":`${Ee}px`,...D,...f.style},onDragEnd:()=>{ke(!1),L(null),qe.current=null},onPointerDown:Ft=>{Wt||!Mt||(dt.current=new Date,Me(pe.current),Ft.target.setPointerCapture(Ft.pointerId),Ft.target.tagName!=="BUTTON"&&(ke(!0),qe.current={x:Ft.clientX,y:Ft.clientY}))},onPointerUp:()=>{var Ft,Ut,rr,$r;if(Re||!Mt)return;qe.current=null;let ft=Number(((Ft=lt.current)==null?void 0:Ft.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sn=Number(((Ut=lt.current)==null?void 0:Ut.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_n=new Date().getTime()-((rr=dt.current)==null?void 0:rr.getTime()),Mr=F==="x"?ft:sn,Kr=Math.abs(Mr)/_n;if(Math.abs(Mr)>=vR||Kr>.11){Me(pe.current),($r=f.onDismiss)==null||$r.call(f,f),K(F==="x"?ft>0?"right":"left":sn>0?"down":"up"),wt(),We(!0),Ge(!1);return}ke(!1),L(null)},onPointerMove:Ft=>{var Ut,rr,$r,ft;if(!qe.current||!Mt||((Ut=window.getSelection())==null?void 0:Ut.toString().length)>0)return;let sn=Ft.clientY-qe.current.y,_n=Ft.clientX-qe.current.x,Mr=(rr=e.swipeDirections)!=null?rr:bR(ae);!F&&(Math.abs(_n)>1||Math.abs(sn)>1)&&L(Math.abs(_n)>Math.abs(sn)?"x":"y");let Kr={x:0,y:0};F==="y"?(Mr.includes("top")||Mr.includes("bottom"))&&(Mr.includes("top")&&sn<0||Mr.includes("bottom")&&sn>0)&&(Kr.y=sn):F==="x"&&(Mr.includes("left")||Mr.includes("right"))&&(Mr.includes("left")&&_n<0||Mr.includes("right")&&_n>0)&&(Kr.x=_n),(Math.abs(Kr.x)>0||Math.abs(Kr.y)>0)&&Ge(!0),($r=lt.current)==null||$r.style.setProperty("--swipe-amount-x",`${Kr.x}px`),(ft=lt.current)==null||ft.style.setProperty("--swipe-amount-y",`${Kr.y}px`)}},ve&&!f.jsx?Ze.createElement("button",{"aria-label":he,"data-disabled":Wt,"data-close-button":!0,onClick:Wt||!Mt?()=>{}:()=>{var Ft;wt(),(Ft=f.onDismiss)==null||Ft.call(f,f)},className:di(V==null?void 0:V.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(i=re==null?void 0:re.close)!=null?i:sR):null,f.jsx||p.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:Ze.createElement(Ze.Fragment,null,ut||f.icon||f.promise?Ze.createElement("div",{"data-icon":"",className:di(V==null?void 0:V.icon,(l=f==null?void 0:f.classNames)==null?void 0:l.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||dr():null,f.type!=="loading"?f.icon||(re==null?void 0:re[ut])||XD(ut):null):null,Ze.createElement("div",{"data-content":"",className:di(V==null?void 0:V.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},Ze.createElement("div",{"data-title":"",className:di(V==null?void 0:V.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?Ze.createElement("div",{"data-description":"",className:di(ee,st,V==null?void 0:V.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),p.isValidElement(f.cancel)?f.cancel:f.cancel&&Zm(f.cancel)?Ze.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||J,onClick:Ft=>{var Ut,rr;Zm(f.cancel)&&Mt&&((rr=(Ut=f.cancel).onClick)==null||rr.call(Ut,Ft),wt())},className:di(V==null?void 0:V.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,p.isValidElement(f.action)?f.action:f.action&&Zm(f.action)?Ze.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||A,onClick:Ft=>{var Ut,rr;Zm(f.action)&&((rr=(Ut=f.action).onClick)==null||rr.call(Ut,Ft),!Ft.defaultPrevented&&wt())},className:di(V==null?void 0:V.actionButton,(m=f==null?void 0:f.classNames)==null?void 0:m.actionButton)},f.action.label):null))};function xN(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function NR(e,t){let r={};return[e,t].forEach((s,a)=>{let i=a===1,l=i?"--mobile-offset":"--offset",o=i?pR:mR;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${l}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?r[`${l}-${d}`]=o:r[`${l}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(o)}),r}var jR=p.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:l,className:o,offset:c,mobileOffset:d,theme:u="light",richColors:m,duration:x,style:f,visibleToasts:y=fR,toastOptions:v,dir:S=xN(),gap:b=xR,loadingIcon:j,icons:w,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:R}=e,[W,O]=Ze.useState([]),q=Ze.useMemo(()=>Array.from(new Set([s].concat(W.filter(C=>C.position).map(C=>C.position)))),[W,s]),[D,J]=Ze.useState([]),[A,M]=Ze.useState(!1),[ee,E]=Ze.useState(!1),[ae,Y]=Ze.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),de=Ze.useRef(null),T=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Ze.useRef(null),re=Ze.useRef(!1),he=Ze.useCallback(C=>{O(F=>{var L;return(L=F.find($=>$.id===C.id))!=null&&L.delete||Ks.dismiss(C.id),F.filter(({id:$})=>$!==C.id)})},[]);return Ze.useEffect(()=>Ks.subscribe(C=>{if(C.dismiss){O(F=>F.map(L=>L.id===C.id?{...L,delete:!0}:L));return}setTimeout(()=>{mC.flushSync(()=>{O(F=>{let L=F.findIndex($=>$.id===C.id);return L!==-1?[...F.slice(0,L),{...F[L],...C},...F.slice(L+1)]:[C,...F]})})})}),[]),Ze.useEffect(()=>{if(u!=="system"){Y(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let C=window.matchMedia("(prefers-color-scheme: dark)");try{C.addEventListener("change",({matches:F})=>{Y(F?"dark":"light")})}catch{C.addListener(({matches:L})=>{try{Y(L?"dark":"light")}catch($){console.error($)}})}},[u]),Ze.useEffect(()=>{W.length<=1&&M(!1)},[W]),Ze.useEffect(()=>{let C=F=>{var L,$;a.every(K=>F[K]||F.code===K)&&(M(!0),(L=de.current)==null||L.focus()),F.code==="Escape"&&(document.activeElement===de.current||($=de.current)!=null&&$.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[a]),Ze.useEffect(()=>{if(de.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,re.current=!1)}},[de.current]),Ze.createElement("section",{ref:t,"aria-label":`${k} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},q.map((C,F)=>{var L;let[$,K]=C.split("-");return W.length?Ze.createElement("ol",{key:C,dir:S==="auto"?xN():S,tabIndex:-1,ref:de,className:o,"data-sonner-toaster":!0,"data-theme":ae,"data-y-position":$,"data-lifted":A&&W.length>1&&!i,"data-x-position":K,style:{"--front-toast-height":`${((L=D[0])==null?void 0:L.height)||0}px`,"--width":`${gR}px`,"--gap":`${b}px`,...f,...NR(c,d)},onBlur:I=>{re.current&&!I.currentTarget.contains(I.relatedTarget)&&(re.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:I=>{I.target instanceof HTMLElement&&I.target.dataset.dismissible==="false"||re.current||(re.current=!0,V.current=I.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{ee||M(!1)},onDragEnd:()=>M(!1),onPointerDown:I=>{I.target instanceof HTMLElement&&I.target.dataset.dismissible==="false"||E(!0)},onPointerUp:()=>E(!1)},W.filter(I=>!I.position&&F===0||I.position===C).map((I,X)=>{var ne,ue;return Ze.createElement(wR,{key:I.id,icons:w,index:X,toast:I,defaultRichColors:m,duration:(ne=v==null?void 0:v.duration)!=null?ne:x,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:y,closeButton:(ue=v==null?void 0:v.closeButton)!=null?ue:l,interacting:ee,position:C,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:he,toasts:W.filter(xe=>xe.position==I.position),heights:D.filter(xe=>xe.position==I.position),setHeights:J,expandByDefault:i,gap:b,loadingIcon:j,expanded:A,pauseWhenPageIsHidden:R,swipeDirections:e.swipeDirections})})):null}))});const _C=({...e})=>{const{theme:t="system"}=QD(),[r,s]=p.useState(!1);return p.useEffect(()=>{s(!0)},[]),r?n.jsx(jR,{theme:t,className:"toaster group",position:"top-right",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e}):null},SR=1,_R=1e6;let _v=0;function CR(){return _v=(_v+1)%Number.MAX_SAFE_INTEGER,_v.toString()}const Cv=new Map,vN=e=>{if(Cv.has(e))return;const t=setTimeout(()=>{Cv.delete(e),lf({type:"REMOVE_TOAST",toastId:e})},_R);Cv.set(e,t)},kR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,SR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?vN(r):e.toasts.forEach(s=>{vN(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Ep=[];let Lp={toasts:[]};function lf(e){Lp=kR(Lp,e),Ep.forEach(t=>{t(Lp)})}function PR({...e}){const t=CR(),r=a=>lf({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>lf({type:"DISMISS_TOAST",toastId:t});return lf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function AR(){const[e,t]=p.useState(Lp);return p.useEffect(()=>(Ep.push(t),()=>{const r=Ep.indexOf(t);r>-1&&Ep.splice(r,1)}),[e]),{...e,toast:PR,dismiss:r=>lf({type:"DISMISS_TOAST",toastId:r})}}function Je(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function yN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Fo(...e){return t=>{let r=!1;const s=e.map(a=>{const i=yN(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():yN(e[a],null)}}}}function or(...e){return p.useCallback(Fo(...e),e)}function ER(e,t){const r=p.createContext(t),s=i=>{const{children:l,...o}=i,c=p.useMemo(()=>o,Object.values(o));return n.jsx(r.Provider,{value:c,children:l})};s.displayName=e+"Provider";function a(i){const l=p.useContext(r);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function Ea(e,t=[]){let r=[];function s(i,l){const o=p.createContext(l),c=r.length;r=[...r,l];const d=m=>{var b;const{scope:x,children:f,...y}=m,v=((b=x==null?void 0:x[e])==null?void 0:b[c])||o,S=p.useMemo(()=>y,Object.values(y));return n.jsx(v.Provider,{value:S,children:f})};d.displayName=i+"Provider";function u(m,x){var v;const f=((v=x==null?void 0:x[e])==null?void 0:v[c])||o,y=p.useContext(f);if(y)return y;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(l=>p.createContext(l));return function(o){const c=(o==null?void 0:o[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return a.scopeName=e,[s,LR(a,...t)]}function LR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=s.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}function Yl(e){const t=DR(e),r=p.forwardRef((s,a)=>{const{children:i,...l}=s,o=p.Children.toArray(i),c=o.find(IR);if(c){const d=c.props.children,u=o.map(m=>m===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:m);return n.jsx(t,{...l,ref:a,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(t,{...l,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var TR=Yl("Slot");function DR(e){const t=p.forwardRef((r,s)=>{const{children:a,...i}=r;if(p.isValidElement(a)){const l=FR(a),o=MR(i,a.props);return a.type!==p.Fragment&&(o.ref=s?Fo(s,l):l),p.cloneElement(a,o)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var CC=Symbol("radix.slottable");function RR(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=CC,t}function IR(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===CC}function MR(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function FR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Qg(e){const t=e+"CollectionProvider",[r,s]=Ea(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=v=>{const{scope:S,children:b}=v,j=Ze.useRef(null),w=Ze.useRef(new Map).current;return n.jsx(a,{scope:S,itemMap:w,collectionRef:j,children:b})};l.displayName=t;const o=e+"CollectionSlot",c=Yl(o),d=Ze.forwardRef((v,S)=>{const{scope:b,children:j}=v,w=i(o,b),k=or(S,w.collectionRef);return n.jsx(c,{ref:k,children:j})});d.displayName=o;const u=e+"CollectionItemSlot",m="data-radix-collection-item",x=Yl(u),f=Ze.forwardRef((v,S)=>{const{scope:b,children:j,...w}=v,k=Ze.useRef(null),R=or(S,k),W=i(u,b);return Ze.useEffect(()=>(W.itemMap.set(k,{ref:k,...w}),()=>void W.itemMap.delete(k))),n.jsx(x,{[m]:"",ref:R,children:j})});f.displayName=u;function y(v){const S=i(e+"CollectionConsumer",v);return Ze.useCallback(()=>{const j=S.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(S.itemMap.values()).sort((W,O)=>w.indexOf(W.ref.current)-w.indexOf(O.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:l,Slot:d,ItemSlot:f},y,s]}var OR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bt=OR.reduce((e,t)=>{const r=Yl(`Primitive.${t}`),s=p.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...o,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function d2(e,t){e&&cd.flushSync(()=>e.dispatchEvent(t))}function Rn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function BR(e,t=globalThis==null?void 0:globalThis.document){const r=Rn(e);p.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var UR="DismissableLayer",b1="dismissableLayer.update",$R="dismissableLayer.pointerDownOutside",zR="dismissableLayer.focusOutside",bN,kC=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dd=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=e,d=p.useContext(kC),[u,m]=p.useState(null),x=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=p.useState({}),y=or(t,O=>m(O)),v=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(S),j=u?v.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,k=j>=b,R=VR(O=>{const q=O.target,D=[...d.branches].some(J=>J.contains(q));!k||D||(a==null||a(O),l==null||l(O),O.defaultPrevented||o==null||o())},x),W=HR(O=>{const q=O.target;[...d.branches].some(J=>J.contains(q))||(i==null||i(O),l==null||l(O),O.defaultPrevented||o==null||o())},x);return BR(O=>{j===d.layers.size-1&&(s==null||s(O),!O.defaultPrevented&&o&&(O.preventDefault(),o()))},x),p.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(bN=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),wN(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=bN)}},[u,x,r,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),wN())},[u,d]),p.useEffect(()=>{const O=()=>f({});return document.addEventListener(b1,O),()=>document.removeEventListener(b1,O)},[]),n.jsx(bt.div,{...c,ref:y,style:{pointerEvents:w?k?"auto":"none":void 0,...e.style},onFocusCapture:Je(e.onFocusCapture,W.onFocusCapture),onBlurCapture:Je(e.onBlurCapture,W.onBlurCapture),onPointerDownCapture:Je(e.onPointerDownCapture,R.onPointerDownCapture)})});dd.displayName=UR;var qR="DismissableLayerBranch",PC=p.forwardRef((e,t)=>{const r=p.useContext(kC),s=p.useRef(null),a=or(t,s);return p.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(bt.div,{...e,ref:a})});PC.displayName=qR;function VR(e,t=globalThis==null?void 0:globalThis.document){const r=Rn(e),s=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const i=o=>{if(o.target&&!s.current){let c=function(){AC($R,r,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function HR(e,t=globalThis==null?void 0:globalThis.document){const r=Rn(e),s=p.useRef(!1);return p.useEffect(()=>{const a=i=>{i.target&&!s.current&&AC(zR,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function wN(){const e=new CustomEvent(b1);document.dispatchEvent(e)}function AC(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?d2(a,i):a.dispatchEvent(i)}var WR=dd,GR=PC,ns=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},YR="Portal",Hu=p.forwardRef((e,t)=>{var o;const{container:r,...s}=e,[a,i]=p.useState(!1);ns(()=>i(!0),[]);const l=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?mC.createPortal(n.jsx(bt.div,{...s,ref:t}),l):null});Hu.displayName=YR;function KR(e,t){return p.useReducer((r,s)=>t[r][s]??r,e)}var ss=e=>{const{present:t,children:r}=e,s=QR(t),a=typeof r=="function"?r({present:s.isPresent}):p.Children.only(r),i=or(s.ref,XR(a));return typeof r=="function"||s.isPresent?p.cloneElement(a,{ref:i}):null};ss.displayName="Presence";function QR(e){const[t,r]=p.useState(),s=p.useRef(null),a=p.useRef(e),i=p.useRef("none"),l=e?"mounted":"unmounted",[o,c]=KR(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=ep(s.current);i.current=o==="mounted"?d:"none"},[o]),ns(()=>{const d=s.current,u=a.current;if(u!==e){const x=i.current,f=ep(d);e?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&x!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ns(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=f=>{const v=ep(s.current).includes(f.animationName);if(f.target===t&&v&&(c("ANIMATION_END"),!a.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},x=f=>{f.target===t&&(i.current=ep(s.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:p.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function ep(e){return(e==null?void 0:e.animationName)||"none"}function XR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var JR=py[" useInsertionEffect ".trim().toString()]||ns;function Oo({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,i,l]=ZR({defaultProp:t,onChange:r}),o=e!==void 0,c=o?e:a;{const u=p.useRef(e!==void 0);p.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,s])}const d=p.useCallback(u=>{var m;if(o){const x=eI(u)?u(e):u;x!==e&&((m=l.current)==null||m.call(l,x))}else i(u)},[o,e,i,l]);return[c,d]}function ZR({defaultProp:e,onChange:t}){const[r,s]=p.useState(e),a=p.useRef(r),i=p.useRef(t);return JR(()=>{i.current=t},[t]),p.useEffect(()=>{var l;a.current!==r&&((l=i.current)==null||l.call(i,r),a.current=r)},[r,a]),[r,s,i]}function eI(e){return typeof e=="function"}var EC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tI="VisuallyHidden",Xg=p.forwardRef((e,t)=>n.jsx(bt.span,{...e,ref:t,style:{...EC,...e.style}}));Xg.displayName=tI;var rI=Xg,u2="ToastProvider",[h2,nI,sI]=Qg("Toast"),[LC,b3]=Ea("Toast",[sI]),[aI,Jg]=LC(u2),TC=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=e,[o,c]=p.useState(null),[d,u]=p.useState(0),m=p.useRef(!1),x=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${u2}\`. Expected non-empty \`string\`.`),n.jsx(h2.Provider,{scope:t,children:n.jsx(aI,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:p.useCallback(()=>u(f=>f+1),[]),onToastRemove:p.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:x,children:l})})};TC.displayName=u2;var DC="ToastViewport",iI=["F8"],w1="toast.viewportPause",N1="toast.viewportResume",RC=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=iI,label:a="Notifications ({hotkey})",...i}=e,l=Jg(DC,r),o=nI(r),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null),m=p.useRef(null),x=or(t,m,l.onViewportChange),f=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=l.toastCount>0;p.useEffect(()=>{const S=b=>{var w;s.length!==0&&s.every(k=>b[k]||b.code===k)&&((w=m.current)==null||w.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[s]),p.useEffect(()=>{const S=c.current,b=m.current;if(y&&S&&b){const j=()=>{if(!l.isClosePausedRef.current){const W=new CustomEvent(w1);b.dispatchEvent(W),l.isClosePausedRef.current=!0}},w=()=>{if(l.isClosePausedRef.current){const W=new CustomEvent(N1);b.dispatchEvent(W),l.isClosePausedRef.current=!1}},k=W=>{!S.contains(W.relatedTarget)&&w()},R=()=>{S.contains(document.activeElement)||w()};return S.addEventListener("focusin",j),S.addEventListener("focusout",k),S.addEventListener("pointermove",j),S.addEventListener("pointerleave",R),window.addEventListener("blur",j),window.addEventListener("focus",w),()=>{S.removeEventListener("focusin",j),S.removeEventListener("focusout",k),S.removeEventListener("pointermove",j),S.removeEventListener("pointerleave",R),window.removeEventListener("blur",j),window.removeEventListener("focus",w)}}},[y,l.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:S})=>{const j=o().map(w=>{const k=w.ref.current,R=[k,...yI(k)];return S==="forwards"?R:R.reverse()});return(S==="forwards"?j.reverse():j).flat()},[o]);return p.useEffect(()=>{const S=m.current;if(S){const b=j=>{var R,W,O;const w=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!w){const q=document.activeElement,D=j.shiftKey;if(j.target===S&&D){(R=d.current)==null||R.focus();return}const M=v({tabbingDirection:D?"backwards":"forwards"}),ee=M.findIndex(E=>E===q);kv(M.slice(ee+1))?j.preventDefault():D?(W=d.current)==null||W.focus():(O=u.current)==null||O.focus()}};return S.addEventListener("keydown",b),()=>S.removeEventListener("keydown",b)}},[o,v]),n.jsxs(GR,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&n.jsx(j1,{ref:d,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"forwards"});kv(S)}}),n.jsx(h2.Slot,{scope:r,children:n.jsx(bt.ol,{tabIndex:-1,...i,ref:x})}),y&&n.jsx(j1,{ref:u,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"backwards"});kv(S)}})]})});RC.displayName=DC;var IC="ToastFocusProxy",j1=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=Jg(IC,r);return n.jsx(Xg,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&s()}})});j1.displayName=IC;var em="Toast",oI="toast.swipeStart",lI="toast.swipeMove",cI="toast.swipeCancel",dI="toast.swipeEnd",MC=p.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...l}=e,[o,c]=Oo({prop:s,defaultProp:a??!0,onChange:i,caller:em});return n.jsx(ss,{present:r||o,children:n.jsx(fI,{open:o,...l,ref:t,onClose:()=>c(!1),onPause:Rn(e.onPause),onResume:Rn(e.onResume),onSwipeStart:Je(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Je(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Je(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Je(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});MC.displayName=em;var[uI,hI]=LC(em,{onClose(){}}),fI=p.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:x,onSwipeEnd:f,...y}=e,v=Jg(em,r),[S,b]=p.useState(null),j=or(t,E=>b(E)),w=p.useRef(null),k=p.useRef(null),R=a||v.duration,W=p.useRef(0),O=p.useRef(R),q=p.useRef(0),{onToastAdd:D,onToastRemove:J}=v,A=Rn(()=>{var ae;(S==null?void 0:S.contains(document.activeElement))&&((ae=v.viewport)==null||ae.focus()),l()}),M=p.useCallback(E=>{!E||E===1/0||(window.clearTimeout(q.current),W.current=new Date().getTime(),q.current=window.setTimeout(A,E))},[A]);p.useEffect(()=>{const E=v.viewport;if(E){const ae=()=>{M(O.current),d==null||d()},Y=()=>{const de=new Date().getTime()-W.current;O.current=O.current-de,window.clearTimeout(q.current),c==null||c()};return E.addEventListener(w1,Y),E.addEventListener(N1,ae),()=>{E.removeEventListener(w1,Y),E.removeEventListener(N1,ae)}}},[v.viewport,R,c,d,M]),p.useEffect(()=>{i&&!v.isClosePausedRef.current&&M(R)},[i,R,v.isClosePausedRef,M]),p.useEffect(()=>(D(),()=>J()),[D,J]);const ee=p.useMemo(()=>S?qC(S):null,[S]);return v.viewport?n.jsxs(n.Fragment,{children:[ee&&n.jsx(mI,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:ee}),n.jsx(uI,{scope:r,onClose:A,children:cd.createPortal(n.jsx(h2.ItemSlot,{scope:r,children:n.jsx(WR,{asChild:!0,onEscapeKeyDown:Je(o,()=>{v.isFocusedToastEscapeKeyDownRef.current||A(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(bt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Je(e.onKeyDown,E=>{E.key==="Escape"&&(o==null||o(E.nativeEvent),E.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Je(e.onPointerDown,E=>{E.button===0&&(w.current={x:E.clientX,y:E.clientY})}),onPointerMove:Je(e.onPointerMove,E=>{if(!w.current)return;const ae=E.clientX-w.current.x,Y=E.clientY-w.current.y,de=!!k.current,T=["left","right"].includes(v.swipeDirection),V=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,re=T?V(0,ae):0,he=T?0:V(0,Y),C=E.pointerType==="touch"?10:2,F={x:re,y:he},L={originalEvent:E,delta:F};de?(k.current=F,tp(lI,m,L,{discrete:!1})):NN(F,v.swipeDirection,C)?(k.current=F,tp(oI,u,L,{discrete:!1}),E.target.setPointerCapture(E.pointerId)):(Math.abs(ae)>C||Math.abs(Y)>C)&&(w.current=null)}),onPointerUp:Je(e.onPointerUp,E=>{const ae=k.current,Y=E.target;if(Y.hasPointerCapture(E.pointerId)&&Y.releasePointerCapture(E.pointerId),k.current=null,w.current=null,ae){const de=E.currentTarget,T={originalEvent:E,delta:ae};NN(ae,v.swipeDirection,v.swipeThreshold)?tp(dI,f,T,{discrete:!0}):tp(cI,x,T,{discrete:!0}),de.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),mI=e=>{const{__scopeToast:t,children:r,...s}=e,a=Jg(em,t),[i,l]=p.useState(!1),[o,c]=p.useState(!1);return xI(()=>l(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:n.jsx(Hu,{asChild:!0,children:n.jsx(Xg,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},pI="ToastTitle",FC=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(bt.div,{...s,ref:t})});FC.displayName=pI;var gI="ToastDescription",OC=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(bt.div,{...s,ref:t})});OC.displayName=gI;var BC="ToastAction",UC=p.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(zC,{altText:r,asChild:!0,children:n.jsx(f2,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${BC}\`. Expected non-empty \`string\`.`),null)});UC.displayName=BC;var $C="ToastClose",f2=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=hI($C,r);return n.jsx(zC,{asChild:!0,children:n.jsx(bt.button,{type:"button",...s,ref:t,onClick:Je(e.onClick,a.onClose)})})});f2.displayName=$C;var zC=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(bt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function qC(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),vI(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=s.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...qC(s))}}),t}function tp(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?d2(a,i):a.dispatchEvent(i)}var NN=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>r:!i&&a>r};function xI(e=()=>{}){const t=Rn(e);ns(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function vI(e){return e.nodeType===e.ELEMENT_NODE}function yI(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function kv(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var bI=TC,VC=RC,HC=MC,WC=FC,GC=OC,YC=UC,KC=f2;function QC(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=QC(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function XC(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=QC(e))&&(s&&(s+=" "),s+=t);return s}const jN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,SN=XC,Zg=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return SN(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const x=jN(u)||jN(m);return a[d][x]}),o=r&&Object.entries(r).reduce((d,u)=>{let[m,x]=u;return x===void 0||(d[m]=x),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:m,className:x,...f}=u;return Object.entries(f).every(y=>{let[v,S]=y;return Array.isArray(S)?S.includes({...i,...o}[v]):{...i,...o}[v]===S})?[...d,m,x]:d},[]);return SN(e,l,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JC=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...o},c)=>p.createElement("svg",{ref:c,...NI,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:JC("lucide",a),...o},[...l.map(([d,u])=>p.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const r=p.forwardRef(({className:s,...a},i)=>p.createElement(jI,{ref:i,iconNode:t,className:JC(`lucide-${wI(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=St("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=St("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=St("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=St("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=St("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=St("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=St("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=St("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=St("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=St("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=St("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=St("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=St("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=St("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=St("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=St("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=St("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=St("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=St("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=St("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=St("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=St("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=St("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=St("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=St("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=St("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=St("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=St("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=St("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=St("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=St("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=St("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=St("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=St("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=St("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=St("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=St("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=St("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=St("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=St("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=St("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=St("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=St("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=St("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=St("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=St("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=St("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=St("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=St("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=St("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=St("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=St("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=St("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=St("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=St("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=St("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=St("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=St("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=St("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=St("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=St("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x2="-",$I=e=>{const t=qI(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{const o=l.split(x2);return o[0]===""&&o.length!==1&&o.shift(),sk(o,t)||zI(l)},getConflictingClassGroupIds:(l,o)=>{const c=r[l]||[];return o&&s[l]?[...c,...s[l]]:c}}},sk=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?sk(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(x2);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},kN=/^\[(.+)\]$/,zI=e=>{if(kN.test(e)){const t=kN.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},qI=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return HI(Object.entries(e.classGroups),r).forEach(([i,l])=>{k1(l,s,i,t)}),s},k1=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:PN(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(VI(a)){k1(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,l])=>{k1(l,PN(t,i),r,s)})})},PN=(e,t)=>{let r=e;return t.split(x2).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},VI=e=>e.isThemeGetter,HI=(e,t)=>t?e.map(([r,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[r,a]}):e,WI=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(i,l)=>{r.set(i,l),t++,t>e&&(t=0,s=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=s.get(i))!==void 0)return a(i,l),l},set(i,l){r.has(i)?r.set(i,l):a(i,l)}}},ak="!",GI=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],i=t.length,l=o=>{const c=[];let d=0,u=0,m;for(let S=0;S<o.length;S++){let b=o[S];if(d===0){if(b===a&&(s||o.slice(S,S+i)===t)){c.push(o.slice(u,S)),u=S+i;continue}if(b==="/"){m=S;continue}}b==="["?d++:b==="]"&&d--}const x=c.length===0?o:o.substring(u),f=x.startsWith(ak),y=f?x.substring(1):x,v=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:v}};return r?o=>r({className:o,parseClassName:l}):l},YI=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},KI=e=>({cache:WI(e.cacheSize),parseClassName:GI(e),...$I(e)}),QI=/\s+/,XI=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],l=e.trim().split(QI);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:f}=r(d);let y=!!f,v=s(y?x.substring(0,f):x);if(!v){if(!y){o=d+(o.length>0?" "+o:o);continue}if(v=s(x),!v){o=d+(o.length>0?" "+o:o);continue}y=!1}const S=YI(u).join(":"),b=m?S+ak:S,j=b+v;if(i.includes(j))continue;i.push(j);const w=a(v,y);for(let k=0;k<w.length;++k){const R=w[k];i.push(b+R)}o=d+(o.length>0?" "+o:o)}return o};function JI(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=ik(t))&&(s&&(s+=" "),s+=r);return s}const ik=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=ik(e[s]))&&(r&&(r+=" "),r+=t);return r};function ZI(e,...t){let r,s,a,i=l;function l(c){const d=t.reduce((u,m)=>m(u),e());return r=KI(d),s=r.cache.get,a=r.cache.set,i=o,o(c)}function o(c){const d=s(c);if(d)return d;const u=XI(c,r);return a(c,u),u}return function(){return i(JI.apply(null,arguments))}}const Jr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},ok=/^\[(?:([a-z-]+):)?(.+)\]$/i,e7=/^\d+\/\d+$/,t7=new Set(["px","full","screen"]),r7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,n7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,s7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,a7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,i7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vo=e=>ou(e)||t7.has(e)||e7.test(e),ll=e=>Wu(e,"length",m7),ou=e=>!!e&&!Number.isNaN(Number(e)),Lv=e=>Wu(e,"number",ou),Dh=e=>!!e&&Number.isInteger(Number(e)),o7=e=>e.endsWith("%")&&ou(e.slice(0,-1)),ir=e=>ok.test(e),cl=e=>r7.test(e),l7=new Set(["length","size","percentage"]),c7=e=>Wu(e,l7,lk),d7=e=>Wu(e,"position",lk),u7=new Set(["image","url"]),h7=e=>Wu(e,u7,g7),f7=e=>Wu(e,"",p7),Rh=()=>!0,Wu=(e,t,r)=>{const s=ok.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},m7=e=>n7.test(e)&&!s7.test(e),lk=()=>!1,p7=e=>a7.test(e),g7=e=>i7.test(e),x7=()=>{const e=Jr("colors"),t=Jr("spacing"),r=Jr("blur"),s=Jr("brightness"),a=Jr("borderColor"),i=Jr("borderRadius"),l=Jr("borderSpacing"),o=Jr("borderWidth"),c=Jr("contrast"),d=Jr("grayscale"),u=Jr("hueRotate"),m=Jr("invert"),x=Jr("gap"),f=Jr("gradientColorStops"),y=Jr("gradientColorStopPositions"),v=Jr("inset"),S=Jr("margin"),b=Jr("opacity"),j=Jr("padding"),w=Jr("saturate"),k=Jr("scale"),R=Jr("sepia"),W=Jr("skew"),O=Jr("space"),q=Jr("translate"),D=()=>["auto","contain","none"],J=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",ir,t],M=()=>[ir,t],ee=()=>["",vo,ll],E=()=>["auto",ou,ir],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",ir],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[ou,ir];return{cacheSize:500,separator:":",theme:{colors:[Rh],spacing:[vo,ll],blur:["none","",cl,ir],brightness:he(),borderColor:[e],borderRadius:["none","","full",cl,ir],borderSpacing:M(),borderWidth:ee(),contrast:he(),grayscale:V(),hueRotate:he(),invert:V(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[o7,ll],inset:A(),margin:A(),opacity:he(),padding:M(),saturate:he(),scale:he(),sepia:V(),skew:he(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",ir]}],container:["container"],columns:[{columns:[cl]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),ir]}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dh,ir]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ir]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Dh,ir]}],"grid-cols":[{"grid-cols":[Rh]}],"col-start-end":[{col:["auto",{span:["full",Dh,ir]},ir]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[Rh]}],"row-start-end":[{row:["auto",{span:[Dh,ir]},ir]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ir]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ir]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ir,t]}],"min-w":[{"min-w":[ir,t,"min","max","fit"]}],"max-w":[{"max-w":[ir,t,"none","full","min","max","fit","prose",{screen:[cl]},cl]}],h:[{h:[ir,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ir,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ir,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ir,t,"auto","min","max","fit"]}],"font-size":[{text:["base",cl,ll]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lv]}],"font-family":[{font:[Rh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ir]}],"line-clamp":[{"line-clamp":["none",ou,Lv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vo,ir]}],"list-image":[{"list-image":["none",ir]}],"list-style-type":[{list:["none","disc","decimal",ir]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vo,ll]}],"underline-offset":[{"underline-offset":["auto",vo,ir]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ir]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ir]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),d7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",c7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},h7]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Y()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[vo,ir]}],"outline-w":[{outline:[vo,ll]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[vo,ll]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",cl,f7]}],"shadow-color":[{shadow:[Rh]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",cl,ir]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[w]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ir]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",ir]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",ir]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Dh,ir]}],"translate-x":[{"translate-x":[q]}],"translate-y":[{"translate-y":[q]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ir]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ir]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ir]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[vo,ll,Lv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},v7=ZI(x7);function ht(...e){return v7(XC(e))}const y7=bI,ck=p.forwardRef(({className:e,...t},r)=>n.jsx(VC,{ref:r,className:ht("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ck.displayName=VC.displayName;const b7=Zg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dk=p.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(HC,{ref:s,className:ht(b7({variant:t}),e),...r}));dk.displayName=HC.displayName;const w7=p.forwardRef(({className:e,...t},r)=>n.jsx(YC,{ref:r,className:ht("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));w7.displayName=YC.displayName;const uk=p.forwardRef(({className:e,...t},r)=>n.jsx(KC,{ref:r,className:ht("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Nn,{className:"h-4 w-4"})}));uk.displayName=KC.displayName;const hk=p.forwardRef(({className:e,...t},r)=>n.jsx(WC,{ref:r,className:ht("text-sm font-semibold",e),...t}));hk.displayName=WC.displayName;const fk=p.forwardRef(({className:e,...t},r)=>n.jsx(GC,{ref:r,className:ht("text-sm opacity-90",e),...t}));fk.displayName=GC.displayName;function N7(){const{toasts:e}=AR();return n.jsxs(y7,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(dk,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(hk,{children:r}),s&&n.jsx(fk,{children:s})]}),a,n.jsx(uk,{})]},t)}),n.jsx(ck,{})]})}var j7=py[" useId ".trim().toString()]||(()=>{}),S7=0;function ms(e){const[t,r]=p.useState(j7());return ns(()=>{r(s=>s??String(S7++))},[e]),t?`radix-${t}`:""}const _7=["top","right","bottom","left"],Ql=Math.min,ba=Math.max,pg=Math.round,rp=Math.floor,Ji=e=>({x:e,y:e}),C7={left:"right",right:"left",bottom:"top",top:"bottom"},k7={start:"end",end:"start"};function P1(e,t,r){return ba(e,Ql(t,r))}function Bo(e,t){return typeof e=="function"?e(t):e}function Uo(e){return e.split("-")[0]}function Gu(e){return e.split("-")[1]}function v2(e){return e==="x"?"y":"x"}function y2(e){return e==="y"?"height":"width"}const P7=new Set(["top","bottom"]);function Gi(e){return P7.has(Uo(e))?"y":"x"}function b2(e){return v2(Gi(e))}function A7(e,t,r){r===void 0&&(r=!1);const s=Gu(e),a=b2(e),i=y2(a);let l=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=gg(l)),[l,gg(l)]}function E7(e){const t=gg(e);return[A1(e),t,A1(t)]}function A1(e){return e.replace(/start|end/g,t=>k7[t])}const AN=["left","right"],EN=["right","left"],L7=["top","bottom"],T7=["bottom","top"];function D7(e,t,r){switch(e){case"top":case"bottom":return r?t?EN:AN:t?AN:EN;case"left":case"right":return t?L7:T7;default:return[]}}function R7(e,t,r,s){const a=Gu(e);let i=D7(Uo(e),r==="start",s);return a&&(i=i.map(l=>l+"-"+a),t&&(i=i.concat(i.map(A1)))),i}function gg(e){return e.replace(/left|right|bottom|top/g,t=>C7[t])}function I7(e){return{top:0,right:0,bottom:0,left:0,...e}}function mk(e){return typeof e!="number"?I7(e):{top:e,right:e,bottom:e,left:e}}function xg(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function LN(e,t,r){let{reference:s,floating:a}=e;const i=Gi(t),l=b2(t),o=y2(l),c=Uo(t),d=i==="y",u=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,x=s[o]/2-a[o]/2;let f;switch(c){case"top":f={x:u,y:s.y-a.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:m};break;case"left":f={x:s.x-a.width,y:m};break;default:f={x:s.x,y:s.y}}switch(Gu(t)){case"start":f[l]-=x*(r&&d?-1:1);break;case"end":f[l]+=x*(r&&d?-1:1);break}return f}const M7=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:l}=r,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=LN(d,s,c),x=s,f={},y=0;for(let v=0;v<o.length;v++){const{name:S,fn:b}=o[v],{x:j,y:w,data:k,reset:R}=await b({x:u,y:m,initialPlacement:s,placement:x,strategy:a,middlewareData:f,rects:d,platform:l,elements:{reference:e,floating:t}});u=j??u,m=w??m,f={...f,[S]:{...f[S],...k}},R&&y<=50&&(y++,typeof R=="object"&&(R.placement&&(x=R.placement),R.rects&&(d=R.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:a}):R.rects),{x:u,y:m}=LN(d,x,c)),v=-1)}return{x:u,y:m,placement:x,strategy:a,middlewareData:f}};async function Tf(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:l,elements:o,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:x=!1,padding:f=0}=Bo(t,e),y=mk(f),S=o[x?m==="floating"?"reference":"floating":m],b=xg(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(S)))==null||r?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),j=m==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),k=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},R=xg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:j,offsetParent:w,strategy:c}):j);return{top:(b.top-R.top+y.top)/k.y,bottom:(R.bottom-b.bottom+y.bottom)/k.y,left:(b.left-R.left+y.left)/k.x,right:(R.right-b.right+y.right)/k.x}}const F7=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=t,{element:d,padding:u=0}=Bo(e,t)||{};if(d==null)return{};const m=mk(u),x={x:r,y:s},f=b2(a),y=y2(f),v=await l.getDimensions(d),S=f==="y",b=S?"top":"left",j=S?"bottom":"right",w=S?"clientHeight":"clientWidth",k=i.reference[y]+i.reference[f]-x[f]-i.floating[y],R=x[f]-i.reference[f],W=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let O=W?W[w]:0;(!O||!await(l.isElement==null?void 0:l.isElement(W)))&&(O=o.floating[w]||i.floating[y]);const q=k/2-R/2,D=O/2-v[y]/2-1,J=Ql(m[b],D),A=Ql(m[j],D),M=J,ee=O-v[y]-A,E=O/2-v[y]/2+q,ae=P1(M,E,ee),Y=!c.arrow&&Gu(a)!=null&&E!==ae&&i.reference[y]/2-(E<M?J:A)-v[y]/2<0,de=Y?E<M?E-M:E-ee:0;return{[f]:x[f]+de,data:{[f]:ae,centerOffset:E-ae-de,...Y&&{alignmentOffset:de}},reset:Y}}}),O7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...S}=Bo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=Uo(a),j=Gi(o),w=Uo(o)===o,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),R=x||(w||!v?[gg(o)]:E7(o)),W=y!=="none";!x&&W&&R.push(...R7(o,v,y,k));const O=[o,...R],q=await Tf(t,S),D=[];let J=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&D.push(q[b]),m){const E=A7(a,l,k);D.push(q[E[0]],q[E[1]])}if(J=[...J,{placement:a,overflows:D}],!D.every(E=>E<=0)){var A,M;const E=(((A=i.flip)==null?void 0:A.index)||0)+1,ae=O[E];if(ae&&(!(m==="alignment"?j!==Gi(ae):!1)||J.every(T=>T.overflows[0]>0&&Gi(T.placement)===j)))return{data:{index:E,overflows:J},reset:{placement:ae}};let Y=(M=J.filter(de=>de.overflows[0]<=0).sort((de,T)=>de.overflows[1]-T.overflows[1])[0])==null?void 0:M.placement;if(!Y)switch(f){case"bestFit":{var ee;const de=(ee=J.filter(T=>{if(W){const V=Gi(T.placement);return V===j||V==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(V=>V>0).reduce((V,re)=>V+re,0)]).sort((T,V)=>T[1]-V[1])[0])==null?void 0:ee[0];de&&(Y=de);break}case"initialPlacement":Y=o;break}if(a!==Y)return{reset:{placement:Y}}}return{}}}};function TN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function DN(e){return _7.some(t=>e[t]>=0)}const B7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=Bo(e,t);switch(s){case"referenceHidden":{const i=await Tf(t,{...a,elementContext:"reference"}),l=TN(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:DN(l)}}}case"escaped":{const i=await Tf(t,{...a,altBoundary:!0}),l=TN(i,r.floating);return{data:{escapedOffsets:l,escaped:DN(l)}}}default:return{}}}}},pk=new Set(["left","top"]);async function U7(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=Uo(r),o=Gu(r),c=Gi(r)==="y",d=pk.has(l)?-1:1,u=i&&c?-1:1,m=Bo(t,e);let{mainAxis:x,crossAxis:f,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof y=="number"&&(f=o==="end"?y*-1:y),c?{x:f*u,y:x*d}:{x:x*d,y:f*u}}const $7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:l,middlewareData:o}=t,c=await U7(t,e);return l===((r=o.offset)==null?void 0:r.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},z7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:S=>{let{x:b,y:j}=S;return{x:b,y:j}}},...c}=Bo(e,t),d={x:r,y:s},u=await Tf(t,c),m=Gi(Uo(a)),x=v2(m);let f=d[x],y=d[m];if(i){const S=x==="y"?"top":"left",b=x==="y"?"bottom":"right",j=f+u[S],w=f-u[b];f=P1(j,f,w)}if(l){const S=m==="y"?"top":"left",b=m==="y"?"bottom":"right",j=y+u[S],w=y-u[b];y=P1(j,y,w)}const v=o.fn({...t,[x]:f,[m]:y});return{...v,data:{x:v.x-r,y:v.y-s,enabled:{[x]:i,[m]:l}}}}}},q7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:l}=t,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=Bo(e,t),u={x:r,y:s},m=Gi(a),x=v2(m);let f=u[x],y=u[m];const v=Bo(o,t),S=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=x==="y"?"height":"width",k=i.reference[x]-i.floating[w]+S.mainAxis,R=i.reference[x]+i.reference[w]-S.mainAxis;f<k?f=k:f>R&&(f=R)}if(d){var b,j;const w=x==="y"?"width":"height",k=pk.has(Uo(a)),R=i.reference[m]-i.floating[w]+(k&&((b=l.offset)==null?void 0:b[m])||0)+(k?0:S.crossAxis),W=i.reference[m]+i.reference[w]+(k?0:((j=l.offset)==null?void 0:j[m])||0)-(k?S.crossAxis:0);y<R?y=R:y>W&&(y=W)}return{[x]:f,[m]:y}}}},V7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:l,elements:o}=t,{apply:c=()=>{},...d}=Bo(e,t),u=await Tf(t,d),m=Uo(a),x=Gu(a),f=Gi(a)==="y",{width:y,height:v}=i.floating;let S,b;m==="top"||m==="bottom"?(S=m,b=x===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(b=m,S=x==="end"?"top":"bottom");const j=v-u.top-u.bottom,w=y-u.left-u.right,k=Ql(v-u[S],j),R=Ql(y-u[b],w),W=!t.middlewareData.shift;let O=k,q=R;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(q=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(O=j),W&&!x){const J=ba(u.left,0),A=ba(u.right,0),M=ba(u.top,0),ee=ba(u.bottom,0);f?q=y-2*(J!==0||A!==0?J+A:ba(u.left,u.right)):O=v-2*(M!==0||ee!==0?M+ee:ba(u.top,u.bottom))}await c({...t,availableWidth:q,availableHeight:O});const D=await l.getDimensions(o.floating);return y!==D.width||v!==D.height?{reset:{rects:!0}}:{}}}};function rx(){return typeof window<"u"}function Yu(e){return gk(e)?(e.nodeName||"").toLowerCase():"#document"}function Ca(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ro(e){var t;return(t=(gk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gk(e){return rx()?e instanceof Node||e instanceof Ca(e).Node:!1}function _i(e){return rx()?e instanceof Element||e instanceof Ca(e).Element:!1}function to(e){return rx()?e instanceof HTMLElement||e instanceof Ca(e).HTMLElement:!1}function RN(e){return!rx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ca(e).ShadowRoot}const H7=new Set(["inline","contents"]);function tm(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=Ci(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!H7.has(a)}const W7=new Set(["table","td","th"]);function G7(e){return W7.has(Yu(e))}const Y7=[":popover-open",":modal"];function nx(e){return Y7.some(t=>{try{return e.matches(t)}catch{return!1}})}const K7=["transform","translate","scale","rotate","perspective"],Q7=["transform","translate","scale","rotate","perspective","filter"],X7=["paint","layout","strict","content"];function w2(e){const t=N2(),r=_i(e)?Ci(e):e;return K7.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Q7.some(s=>(r.willChange||"").includes(s))||X7.some(s=>(r.contain||"").includes(s))}function J7(e){let t=Xl(e);for(;to(t)&&!Tu(t);){if(w2(t))return t;if(nx(t))return null;t=Xl(t)}return null}function N2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Z7=new Set(["html","body","#document"]);function Tu(e){return Z7.has(Yu(e))}function Ci(e){return Ca(e).getComputedStyle(e)}function sx(e){return _i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xl(e){if(Yu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RN(e)&&e.host||ro(e);return RN(t)?t.host:t}function xk(e){const t=Xl(e);return Tu(t)?e.ownerDocument?e.ownerDocument.body:e.body:to(t)&&tm(t)?t:xk(t)}function Df(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=xk(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),l=Ca(a);if(i){const o=E1(l);return t.concat(l,l.visualViewport||[],tm(a)?a:[],o&&r?Df(o):[])}return t.concat(a,Df(a,[],r))}function E1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vk(e){const t=Ci(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=to(e),i=a?e.offsetWidth:r,l=a?e.offsetHeight:s,o=pg(r)!==i||pg(s)!==l;return o&&(r=i,s=l),{width:r,height:s,$:o}}function j2(e){return _i(e)?e:e.contextElement}function lu(e){const t=j2(e);if(!to(t))return Ji(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=vk(t);let l=(i?pg(r.width):r.width)/s,o=(i?pg(r.height):r.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const eM=Ji(0);function yk(e){const t=Ca(e);return!N2()||!t.visualViewport?eM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function tM(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ca(e)?!1:t}function Jc(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=j2(e);let l=Ji(1);t&&(s?_i(s)&&(l=lu(s)):l=lu(e));const o=tM(i,r,s)?yk(i):Ji(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){const x=Ca(i),f=s&&_i(s)?Ca(s):s;let y=x,v=E1(y);for(;v&&s&&f!==y;){const S=lu(v),b=v.getBoundingClientRect(),j=Ci(v),w=b.left+(v.clientLeft+parseFloat(j.paddingLeft))*S.x,k=b.top+(v.clientTop+parseFloat(j.paddingTop))*S.y;c*=S.x,d*=S.y,u*=S.x,m*=S.y,c+=w,d+=k,y=Ca(v),v=E1(y)}}return xg({width:u,height:m,x:c,y:d})}function S2(e,t){const r=sx(e).scrollLeft;return t?t.left+r:Jc(ro(e)).left+r}function bk(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:S2(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function rM(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",l=ro(s),o=t?nx(t.floating):!1;if(s===l||o&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Ji(1);const u=Ji(0),m=to(s);if((m||!m&&!i)&&((Yu(s)!=="body"||tm(l))&&(c=sx(s)),to(s))){const f=Jc(s);d=lu(s),u.x=f.x+s.clientLeft,u.y=f.y+s.clientTop}const x=l&&!m&&!i?bk(l,c,!0):Ji(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+x.x,y:r.y*d.y-c.scrollTop*d.y+u.y+x.y}}function nM(e){return Array.from(e.getClientRects())}function sM(e){const t=ro(e),r=sx(e),s=e.ownerDocument.body,a=ba(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=ba(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let l=-r.scrollLeft+S2(e);const o=-r.scrollTop;return Ci(s).direction==="rtl"&&(l+=ba(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:l,y:o}}function aM(e,t){const r=Ca(e),s=ro(e),a=r.visualViewport;let i=s.clientWidth,l=s.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=N2();(!d||d&&t==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}const iM=new Set(["absolute","fixed"]);function oM(e,t){const r=Jc(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=to(e)?lu(e):Ji(1),l=e.clientWidth*i.x,o=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:l,height:o,x:c,y:d}}function IN(e,t,r){let s;if(t==="viewport")s=aM(e,r);else if(t==="document")s=sM(ro(e));else if(_i(t))s=oM(t,r);else{const a=yk(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return xg(s)}function wk(e,t){const r=Xl(e);return r===t||!_i(r)||Tu(r)?!1:Ci(r).position==="fixed"||wk(r,t)}function lM(e,t){const r=t.get(e);if(r)return r;let s=Df(e,[],!1).filter(o=>_i(o)&&Yu(o)!=="body"),a=null;const i=Ci(e).position==="fixed";let l=i?Xl(e):e;for(;_i(l)&&!Tu(l);){const o=Ci(l),c=w2(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&iM.has(a.position)||tm(l)&&!c&&wk(e,l))?s=s.filter(u=>u!==l):a=o,l=Xl(l)}return t.set(e,s),s}function cM(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const l=[...r==="clippingAncestors"?nx(t)?[]:lM(t,this._c):[].concat(r),s],o=l[0],c=l.reduce((d,u)=>{const m=IN(t,u,a);return d.top=ba(m.top,d.top),d.right=Ql(m.right,d.right),d.bottom=Ql(m.bottom,d.bottom),d.left=ba(m.left,d.left),d},IN(t,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function dM(e){const{width:t,height:r}=vk(e);return{width:t,height:r}}function uM(e,t,r){const s=to(t),a=ro(t),i=r==="fixed",l=Jc(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const c=Ji(0);function d(){c.x=S2(a)}if(s||!s&&!i)if((Yu(t)!=="body"||tm(a))&&(o=sx(t)),s){const f=Jc(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&d();i&&!s&&a&&d();const u=a&&!s&&!i?bk(a,o):Ji(0),m=l.left+o.scrollLeft-c.x-u.x,x=l.top+o.scrollTop-c.y-u.y;return{x:m,y:x,width:l.width,height:l.height}}function Tv(e){return Ci(e).position==="static"}function MN(e,t){if(!to(e)||Ci(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ro(e)===r&&(r=r.ownerDocument.body),r}function Nk(e,t){const r=Ca(e);if(nx(e))return r;if(!to(e)){let a=Xl(e);for(;a&&!Tu(a);){if(_i(a)&&!Tv(a))return a;a=Xl(a)}return r}let s=MN(e,t);for(;s&&G7(s)&&Tv(s);)s=MN(s,t);return s&&Tu(s)&&Tv(s)&&!w2(s)?r:s||J7(e)||r}const hM=async function(e){const t=this.getOffsetParent||Nk,r=this.getDimensions,s=await r(e.floating);return{reference:uM(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function fM(e){return Ci(e).direction==="rtl"}const mM={convertOffsetParentRelativeRectToViewportRelativeRect:rM,getDocumentElement:ro,getClippingRect:cM,getOffsetParent:Nk,getElementRects:hM,getClientRects:nM,getDimensions:dM,getScale:lu,isElement:_i,isRTL:fM};function jk(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pM(e,t){let r=null,s;const a=ro(e);function i(){var o;clearTimeout(s),(o=r)==null||o.disconnect(),r=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:m,width:x,height:f}=d;if(o||t(),!x||!f)return;const y=rp(m),v=rp(a.clientWidth-(u+x)),S=rp(a.clientHeight-(m+f)),b=rp(u),w={rootMargin:-y+"px "+-v+"px "+-S+"px "+-b+"px",threshold:ba(0,Ql(1,c))||1};let k=!0;function R(W){const O=W[0].intersectionRatio;if(O!==c){if(!k)return l();O?l(!1,O):s=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!jk(d,e.getBoundingClientRect())&&l(),k=!1}try{r=new IntersectionObserver(R,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(R,w)}r.observe(e)}return l(!0),i}function gM(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=j2(e),u=a||i?[...d?Df(d):[],...Df(t)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const m=d&&o?pM(d,r):null;let x=-1,f=null;l&&(f=new ResizeObserver(b=>{let[j]=b;j&&j.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(t)})),r()}),d&&!c&&f.observe(d),f.observe(t));let y,v=c?Jc(e):null;c&&S();function S(){const b=Jc(e);v&&!jk(v,b)&&r(),v=b,y=requestAnimationFrame(S)}return r(),()=>{var b;u.forEach(j=>{a&&j.removeEventListener("scroll",r),i&&j.removeEventListener("resize",r)}),m==null||m(),(b=f)==null||b.disconnect(),f=null,c&&cancelAnimationFrame(y)}}const xM=$7,vM=z7,yM=O7,bM=V7,wM=B7,FN=F7,NM=q7,jM=(e,t,r)=>{const s=new Map,a={platform:mM,...r},i={...a.platform,_c:s};return M7(e,t,{...a,platform:i})};var SM=typeof document<"u",_M=function(){},Dp=SM?p.useLayoutEffect:_M;function vg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!vg(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!vg(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Sk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ON(e,t){const r=Sk(e);return Math.round(t*r)/r}function Dv(e){const t=p.useRef(e);return Dp(()=>{t.current=e}),t}function CM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[u,m]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[x,f]=p.useState(s);vg(x,s)||f(s);const[y,v]=p.useState(null),[S,b]=p.useState(null),j=p.useCallback(T=>{T!==W.current&&(W.current=T,v(T))},[]),w=p.useCallback(T=>{T!==O.current&&(O.current=T,b(T))},[]),k=i||y,R=l||S,W=p.useRef(null),O=p.useRef(null),q=p.useRef(u),D=c!=null,J=Dv(c),A=Dv(a),M=Dv(d),ee=p.useCallback(()=>{if(!W.current||!O.current)return;const T={placement:t,strategy:r,middleware:x};A.current&&(T.platform=A.current),jM(W.current,O.current,T).then(V=>{const re={...V,isPositioned:M.current!==!1};E.current&&!vg(q.current,re)&&(q.current=re,cd.flushSync(()=>{m(re)}))})},[x,t,r,A,M]);Dp(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,m(T=>({...T,isPositioned:!1})))},[d]);const E=p.useRef(!1);Dp(()=>(E.current=!0,()=>{E.current=!1}),[]),Dp(()=>{if(k&&(W.current=k),R&&(O.current=R),k&&R){if(J.current)return J.current(k,R,ee);ee()}},[k,R,ee,J,D]);const ae=p.useMemo(()=>({reference:W,floating:O,setReference:j,setFloating:w}),[j,w]),Y=p.useMemo(()=>({reference:k,floating:R}),[k,R]),de=p.useMemo(()=>{const T={position:r,left:0,top:0};if(!Y.floating)return T;const V=ON(Y.floating,u.x),re=ON(Y.floating,u.y);return o?{...T,transform:"translate("+V+"px, "+re+"px)",...Sk(Y.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:V,top:re}},[r,o,Y.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:ee,refs:ae,elements:Y,floatingStyles:de}),[u,ee,ae,Y,de])}const kM=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?FN({element:s.current,padding:a}).fn(r):{}:s?FN({element:s,padding:a}).fn(r):{}}}},PM=(e,t)=>({...xM(e),options:[e,t]}),AM=(e,t)=>({...vM(e),options:[e,t]}),EM=(e,t)=>({...NM(e),options:[e,t]}),LM=(e,t)=>({...yM(e),options:[e,t]}),TM=(e,t)=>({...bM(e),options:[e,t]}),DM=(e,t)=>({...wM(e),options:[e,t]}),RM=(e,t)=>({...kM(e),options:[e,t]});var IM="Arrow",_k=p.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...i}=e;return n.jsx(bt.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});_k.displayName=IM;var MM=_k;function Ck(e){const[t,r]=p.useState(void 0);return ns(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=e.offsetWidth,o=e.offsetHeight;r({width:l,height:o})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var _2="Popper",[kk,ic]=Ea(_2),[FM,Pk]=kk(_2),Ak=e=>{const{__scopePopper:t,children:r}=e,[s,a]=p.useState(null);return n.jsx(FM,{scope:t,anchor:s,onAnchorChange:a,children:r})};Ak.displayName=_2;var Ek="PopperAnchor",Lk=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=Pk(Ek,r),l=p.useRef(null),o=or(t,l);return p.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||l.current)}),s?null:n.jsx(bt.div,{...a,ref:o})});Lk.displayName=Ek;var C2="PopperContent",[OM,BM]=kk(C2),Tk=p.forwardRef((e,t)=>{var I,X,ne,ue,xe,ke;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:x=!1,updatePositionStrategy:f="optimized",onPlaced:y,...v}=e,S=Pk(C2,r),[b,j]=p.useState(null),w=or(t,Re=>j(Re)),[k,R]=p.useState(null),W=Ck(k),O=(W==null?void 0:W.width)??0,q=(W==null?void 0:W.height)??0,D=s+(i!=="center"?"-"+i:""),J=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},A=Array.isArray(d)?d:[d],M=A.length>0,ee={padding:J,boundary:A.filter($M),altBoundary:M},{refs:E,floatingStyles:ae,placement:Y,isPositioned:de,middlewareData:T}=CM({strategy:"fixed",placement:D,whileElementsMounted:(...Re)=>gM(...Re,{animationFrame:f==="always"}),elements:{reference:S.anchor},middleware:[PM({mainAxis:a+q,alignmentAxis:l}),c&&AM({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?EM():void 0,...ee}),c&&LM({...ee}),TM({...ee,apply:({elements:Re,rects:We,availableWidth:Z,availableHeight:Ge})=>{const{width:Lt,height:Me}=We.reference,Ee=Re.floating.style;Ee.setProperty("--radix-popper-available-width",`${Z}px`),Ee.setProperty("--radix-popper-available-height",`${Ge}px`),Ee.setProperty("--radix-popper-anchor-width",`${Lt}px`),Ee.setProperty("--radix-popper-anchor-height",`${Me}px`)}}),k&&RM({element:k,padding:o}),zM({arrowWidth:O,arrowHeight:q}),x&&DM({strategy:"referenceHidden",...ee})]}),[V,re]=Ik(Y),he=Rn(y);ns(()=>{de&&(he==null||he())},[de,he]);const C=(I=T.arrow)==null?void 0:I.x,F=(X=T.arrow)==null?void 0:X.y,L=((ne=T.arrow)==null?void 0:ne.centerOffset)!==0,[$,K]=p.useState();return ns(()=>{b&&K(window.getComputedStyle(b).zIndex)},[b]),n.jsx("div",{ref:E.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:de?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[(ue=T.transformOrigin)==null?void 0:ue.x,(xe=T.transformOrigin)==null?void 0:xe.y].join(" "),...((ke=T.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(OM,{scope:r,placedSide:V,onArrowChange:R,arrowX:C,arrowY:F,shouldHideArrow:L,children:n.jsx(bt.div,{"data-side":V,"data-align":re,...v,ref:w,style:{...v.style,animation:de?void 0:"none"}})})})});Tk.displayName=C2;var Dk="PopperArrow",UM={top:"bottom",right:"left",bottom:"top",left:"right"},Rk=p.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,i=BM(Dk,s),l=UM[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(MM,{...a,ref:r,style:{...a.style,display:"block"}})})});Rk.displayName=Dk;function $M(e){return e!==null}var zM=e=>({name:"transformOrigin",options:e,fn(t){var S,b,j;const{placement:r,rects:s,middlewareData:a}=t,l=((S=a.arrow)==null?void 0:S.centerOffset)!==0,o=l?0:e.arrowWidth,c=l?0:e.arrowHeight,[d,u]=Ik(r),m={start:"0%",center:"50%",end:"100%"}[u],x=(((b=a.arrow)==null?void 0:b.x)??0)+o/2,f=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let y="",v="";return d==="bottom"?(y=l?m:`${x}px`,v=`${-c}px`):d==="top"?(y=l?m:`${x}px`,v=`${s.floating.height+c}px`):d==="right"?(y=`${-c}px`,v=l?m:`${f}px`):d==="left"&&(y=`${s.floating.width+c}px`,v=l?m:`${f}px`),{data:{x:y,y:v}}}});function Ik(e){const[t,r="center"]=e.split("-");return[t,r]}var k2=Ak,rm=Lk,ax=Tk,ix=Rk,[ox,w3]=Ea("Tooltip",[ic]),P2=ic(),Mk="TooltipProvider",qM=700,BN="tooltip.open",[VM,Fk]=ox(Mk),Ok=e=>{const{__scopeTooltip:t,delayDuration:r=qM,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,l=p.useRef(!0),o=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx(VM,{scope:t,isOpenDelayedRef:l,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:o,onPointerInTransitChange:p.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};Ok.displayName=Mk;var Bk="Tooltip",[N3,lx]=ox(Bk),L1="TooltipTrigger",HM=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=lx(L1,r),i=Fk(L1,r),l=P2(r),o=p.useRef(null),c=or(t,o,a.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),m=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),n.jsx(rm,{asChild:!0,...l,children:n.jsx(bt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Je(e.onPointerMove,x=>{x.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Je(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Je(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Je(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Je(e.onBlur,a.onClose),onClick:Je(e.onClick,a.onClose)})})});HM.displayName=L1;var WM="TooltipPortal",[j3,GM]=ox(WM,{forceMount:void 0}),Du="TooltipContent",Uk=p.forwardRef((e,t)=>{const r=GM(Du,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...i}=e,l=lx(Du,e.__scopeTooltip);return n.jsx(ss,{present:s||l.open,children:l.disableHoverableContent?n.jsx($k,{side:a,...i,ref:t}):n.jsx(YM,{side:a,...i,ref:t})})}),YM=p.forwardRef((e,t)=>{const r=lx(Du,e.__scopeTooltip),s=Fk(Du,e.__scopeTooltip),a=p.useRef(null),i=or(t,a),[l,o]=p.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=s,x=p.useCallback(()=>{o(null),m(!1)},[m]),f=p.useCallback((y,v)=>{const S=y.currentTarget,b={x:y.clientX,y:y.clientY},j=ZM(b,S.getBoundingClientRect()),w=eF(b,j),k=tF(v.getBoundingClientRect()),R=nF([...w,...k]);o(R),m(!0)},[m]);return p.useEffect(()=>()=>x(),[x]),p.useEffect(()=>{if(c&&u){const y=S=>f(S,u),v=S=>f(S,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[c,u,f,x]),p.useEffect(()=>{if(l){const y=v=>{const S=v.target,b={x:v.clientX,y:v.clientY},j=(c==null?void 0:c.contains(S))||(u==null?void 0:u.contains(S)),w=!rF(b,l);j?x():w&&(x(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,l,d,x]),n.jsx($k,{...e,ref:i})}),[KM,QM]=ox(Bk,{isInside:!1}),XM=RR("TooltipContent"),$k=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=e,c=lx(Du,r),d=P2(r),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(BN,u),()=>document.removeEventListener(BN,u)),[u]),p.useEffect(()=>{if(c.trigger){const m=x=>{const f=x.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),n.jsx(dd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:n.jsxs(ax,{"data-state":c.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(XM,{children:s}),n.jsx(KM,{scope:r,isInside:!0,children:n.jsx(rI,{id:c.contentId,role:"tooltip",children:a||s})})]})})});Uk.displayName=Du;var zk="TooltipArrow",JM=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=P2(r);return QM(zk,r).isInside?null:n.jsx(ix,{...a,...s,ref:t})});JM.displayName=zk;function ZM(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,s,a,i)){case i:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function eF(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function tF(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function rF(e,t){const{x:r,y:s}=e;let a=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i],c=t[l],d=o.x,u=o.y,m=c.x,x=c.y;u>s!=x>s&&r<(m-d)*(s-u)/(x-u)+d&&(a=!a)}return a}function nF(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),sF(t)}function sF(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var aF=Ok,qk=Uk;const iF=aF,oF=p.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(qk,{ref:s,sideOffset:t,className:ht("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));oF.displayName=qk.displayName;var cx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dx=typeof window>"u"||"Deno"in globalThis;function mi(){}function lF(e,t){return typeof e=="function"?e(t):e}function cF(e){return typeof e=="number"&&e>=0&&e!==1/0}function dF(e,t){return Math.max(e+(t||0)-Date.now(),0)}function T1(e,t){return typeof e=="function"?e(t):e}function uF(e,t){return typeof e=="function"?e(t):e}function UN(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(s){if(t.queryHash!==A2(l,t.options))return!1}else if(!If(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function $N(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Rf(t.options.mutationKey)!==Rf(i))return!1}else if(!If(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function A2(e,t){return((t==null?void 0:t.queryKeyHashFn)||Rf)(e)}function Rf(e){return JSON.stringify(e,(t,r)=>D1(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function If(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>If(e[r],t[r])):!1}function Vk(e,t){if(e===t)return e;const r=zN(e)&&zN(t);if(r||D1(e)&&D1(t)){const s=r?e:Object.keys(e),a=s.length,i=r?t:Object.keys(t),l=i.length,o=r?[]:{},c=new Set(s);let d=0;for(let u=0;u<l;u++){const m=r?u:i[u];(!r&&c.has(m)||r)&&e[m]===void 0&&t[m]===void 0?(o[m]=void 0,d++):(o[m]=Vk(e[m],t[m]),o[m]===e[m]&&e[m]!==void 0&&d++)}return a===l&&d===a?e:o}return t}function zN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function D1(e){if(!qN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!qN(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function qN(e){return Object.prototype.toString.call(e)==="[object Object]"}function hF(e){return new Promise(t=>{setTimeout(t,e)})}function fF(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Vk(e,t):t}function mF(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function pF(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var E2=Symbol();function Hk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===E2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Fc,wl,pu,Gj,gF=(Gj=class extends cx{constructor(){super();_r(this,Fc);_r(this,wl);_r(this,pu);er(this,pu,t=>{if(!dx&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ie(this,wl)||this.setEventListener(Ie(this,pu))}onUnsubscribe(){var t;this.hasListeners()||((t=Ie(this,wl))==null||t.call(this),er(this,wl,void 0))}setEventListener(t){var r;er(this,pu,t),(r=Ie(this,wl))==null||r.call(this),er(this,wl,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Ie(this,Fc)!==t&&(er(this,Fc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ie(this,Fc)=="boolean"?Ie(this,Fc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Fc=new WeakMap,wl=new WeakMap,pu=new WeakMap,Gj),Wk=new gF,gu,Nl,xu,Yj,xF=(Yj=class extends cx{constructor(){super();_r(this,gu,!0);_r(this,Nl);_r(this,xu);er(this,xu,t=>{if(!dx&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Ie(this,Nl)||this.setEventListener(Ie(this,xu))}onUnsubscribe(){var t;this.hasListeners()||((t=Ie(this,Nl))==null||t.call(this),er(this,Nl,void 0))}setEventListener(t){var r;er(this,xu,t),(r=Ie(this,Nl))==null||r.call(this),er(this,Nl,t(this.setOnline.bind(this)))}setOnline(t){Ie(this,gu)!==t&&(er(this,gu,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Ie(this,gu)}},gu=new WeakMap,Nl=new WeakMap,xu=new WeakMap,Yj),yg=new xF;function vF(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}function yF(e){return Math.min(1e3*2**e,3e4)}function Gk(e){return(e??"online")==="online"?yg.isOnline():!0}var Yk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Rv(e){return e instanceof Yk}function Kk(e){let t=!1,r=0,s=!1,a;const i=vF(),l=v=>{var S;s||(x(new Yk(v)),(S=e.abort)==null||S.call(e))},o=()=>{t=!0},c=()=>{t=!1},d=()=>Wk.isFocused()&&(e.networkMode==="always"||yg.isOnline())&&e.canRun(),u=()=>Gk(e.networkMode)&&e.canRun(),m=v=>{var S;s||(s=!0,(S=e.onSuccess)==null||S.call(e,v),a==null||a(),i.resolve(v))},x=v=>{var S;s||(s=!0,(S=e.onError)==null||S.call(e,v),a==null||a(),i.reject(v))},f=()=>new Promise(v=>{var S;a=b=>{(s||d())&&v(b)},(S=e.onPause)==null||S.call(e)}).then(()=>{var v;a=void 0,s||(v=e.onContinue)==null||v.call(e)}),y=()=>{if(s)return;let v;const S=r===0?e.initialPromise:void 0;try{v=S??e.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(m).catch(b=>{var W;if(s)return;const j=e.retry??(dx?0:3),w=e.retryDelay??yF,k=typeof w=="function"?w(r,b):w,R=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,b);if(t||!R){x(b);return}r++,(W=e.onFail)==null||W.call(e,r,b),hF(k).then(()=>d()?void 0:f()).then(()=>{t?x(b):y()})})};return{promise:i,cancel:l,continue:()=>(a==null||a(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),i)}}var bF=e=>setTimeout(e,0);function wF(){let e=[],t=0,r=o=>{o()},s=o=>{o()},a=bF;const i=o=>{t?e.push(o):a(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{s(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{a=o}}}var Fs=wF(),Oc,Kj,Qk=(Kj=class{constructor(){_r(this,Oc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cF(this.gcTime)&&er(this,Oc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(dx?1/0:5*60*1e3))}clearGcTimeout(){Ie(this,Oc)&&(clearTimeout(Ie(this,Oc)),er(this,Oc,void 0))}},Oc=new WeakMap,Kj),vu,Bc,Ua,Uc,Ss,Gf,$c,pi,wo,Qj,NF=(Qj=class extends Qk{constructor(t){super();_r(this,pi);_r(this,vu);_r(this,Bc);_r(this,Ua);_r(this,Uc);_r(this,Ss);_r(this,Gf);_r(this,$c);er(this,$c,!1),er(this,Gf,t.defaultOptions),this.setOptions(t.options),this.observers=[],er(this,Uc,t.client),er(this,Ua,Ie(this,Uc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,er(this,vu,SF(this.options)),this.state=t.state??Ie(this,vu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ie(this,Ss))==null?void 0:t.promise}setOptions(t){this.options={...Ie(this,Gf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ie(this,Ua).remove(this)}setData(t,r){const s=fF(this.state.data,t,this.options);return xs(this,pi,wo).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){xs(this,pi,wo).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=Ie(this,Ss))==null?void 0:s.promise;return(a=Ie(this,Ss))==null||a.cancel(t),r?r.then(mi).catch(mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ie(this,vu))}isActive(){return this.observers.some(t=>uF(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===E2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>T1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!dF(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ie(this,Ss))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ie(this,Ss))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ie(this,Ua).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ie(this,Ss)&&(Ie(this,$c)?Ie(this,Ss).cancel({revert:!0}):Ie(this,Ss).cancelRetry()),this.scheduleGc()),Ie(this,Ua).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xs(this,pi,wo).call(this,{type:"invalidate"})}fetch(t,r){var d,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ie(this,Ss))return Ie(this,Ss).continueRetry(),Ie(this,Ss).promise}if(t&&this.setOptions(t),!this.options.queryFn){const x=this.observers.find(f=>f.options.queryFn);x&&this.setOptions(x.options)}const s=new AbortController,a=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(er(this,$c,!0),s.signal)})},i=()=>{const x=Hk(this.options,r),y=(()=>{const v={client:Ie(this,Uc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return er(this,$c,!1),this.options.persister?this.options.persister(x,y,this):x(y)},o=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ie(this,Uc),state:this.state,fetchFn:i};return a(x),x})();(d=this.options.behavior)==null||d.onFetch(o,this),er(this,Bc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&xs(this,pi,wo).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const c=x=>{var f,y,v,S;Rv(x)&&x.silent||xs(this,pi,wo).call(this,{type:"error",error:x}),Rv(x)||((y=(f=Ie(this,Ua).config).onError)==null||y.call(f,x,this),(S=(v=Ie(this,Ua).config).onSettled)==null||S.call(v,this.state.data,x,this)),this.scheduleGc()};return er(this,Ss,Kk({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:x=>{var f,y,v,S;if(x===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(x)}catch(b){c(b);return}(y=(f=Ie(this,Ua).config).onSuccess)==null||y.call(f,x,this),(S=(v=Ie(this,Ua).config).onSettled)==null||S.call(v,x,this.state.error,this),this.scheduleGc()},onError:c,onFail:(x,f)=>{xs(this,pi,wo).call(this,{type:"failed",failureCount:x,error:f})},onPause:()=>{xs(this,pi,wo).call(this,{type:"pause"})},onContinue:()=>{xs(this,pi,wo).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Ie(this,Ss).start()}},vu=new WeakMap,Bc=new WeakMap,Ua=new WeakMap,Uc=new WeakMap,Ss=new WeakMap,Gf=new WeakMap,$c=new WeakMap,pi=new WeakSet,wo=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...jF(s.data,this.options),fetchMeta:t.meta??null};case"success":return er(this,Bc,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Rv(a)&&a.revert&&Ie(this,Bc)?{...Ie(this,Bc),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Fs.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Ie(this,Ua).notify({query:this,type:"updated",action:t})})},Qj);function jF(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function SF(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var $i,Xj,_F=(Xj=class extends cx{constructor(t={}){super();_r(this,$i);this.config=t,er(this,$i,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??A2(a,r);let l=this.get(i);return l||(l=new NF({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){Ie(this,$i).has(t.queryHash)||(Ie(this,$i).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ie(this,$i).get(t.queryHash);r&&(t.destroy(),r===t&&Ie(this,$i).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Fs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ie(this,$i).get(t)}getAll(){return[...Ie(this,$i).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>UN(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>UN(t,s)):r}notify(t){Fs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Fs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Fs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$i=new WeakMap,Xj),zi,Rs,zc,qi,fl,Jj,CF=(Jj=class extends Qk{constructor(t){super();_r(this,qi);_r(this,zi);_r(this,Rs);_r(this,zc);this.mutationId=t.mutationId,er(this,Rs,t.mutationCache),er(this,zi,[]),this.state=t.state||kF(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ie(this,zi).includes(t)||(Ie(this,zi).push(t),this.clearGcTimeout(),Ie(this,Rs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){er(this,zi,Ie(this,zi).filter(r=>r!==t)),this.scheduleGc(),Ie(this,Rs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ie(this,zi).length||(this.state.status==="pending"?this.scheduleGc():Ie(this,Rs).remove(this))}continue(){var t;return((t=Ie(this,zc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,o,c,d,u,m,x,f,y,v,S,b,j,w,k,R,W,O,q;const r=()=>{xs(this,qi,fl).call(this,{type:"continue"})};er(this,zc,Kk({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(D,J)=>{xs(this,qi,fl).call(this,{type:"failed",failureCount:D,error:J})},onPause:()=>{xs(this,qi,fl).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ie(this,Rs).canRun(this)}));const s=this.state.status==="pending",a=!Ie(this,zc).canStart();try{if(s)r();else{xs(this,qi,fl).call(this,{type:"pending",variables:t,isPaused:a}),await((l=(i=Ie(this,Rs).config).onMutate)==null?void 0:l.call(i,t,this));const J=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,t));J!==this.state.context&&xs(this,qi,fl).call(this,{type:"pending",context:J,variables:t,isPaused:a})}const D=await Ie(this,zc).start();return await((u=(d=Ie(this,Rs).config).onSuccess)==null?void 0:u.call(d,D,t,this.state.context,this)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,D,t,this.state.context)),await((y=(f=Ie(this,Rs).config).onSettled)==null?void 0:y.call(f,D,null,this.state.variables,this.state.context,this)),await((S=(v=this.options).onSettled)==null?void 0:S.call(v,D,null,t,this.state.context)),xs(this,qi,fl).call(this,{type:"success",data:D}),D}catch(D){try{throw await((j=(b=Ie(this,Rs).config).onError)==null?void 0:j.call(b,D,t,this.state.context,this)),await((k=(w=this.options).onError)==null?void 0:k.call(w,D,t,this.state.context)),await((W=(R=Ie(this,Rs).config).onSettled)==null?void 0:W.call(R,void 0,D,this.state.variables,this.state.context,this)),await((q=(O=this.options).onSettled)==null?void 0:q.call(O,void 0,D,t,this.state.context)),D}finally{xs(this,qi,fl).call(this,{type:"error",error:D})}}finally{Ie(this,Rs).runNext(this)}}},zi=new WeakMap,Rs=new WeakMap,zc=new WeakMap,qi=new WeakSet,fl=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fs.batch(()=>{Ie(this,zi).forEach(s=>{s.onMutationUpdate(t)}),Ie(this,Rs).notify({mutation:this,type:"updated",action:t})})},Jj);function kF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ko,gi,Yf,Zj,PF=(Zj=class extends cx{constructor(t={}){super();_r(this,ko);_r(this,gi);_r(this,Yf);this.config=t,er(this,ko,new Set),er(this,gi,new Map),er(this,Yf,0)}build(t,r,s){const a=new CF({mutationCache:this,mutationId:++Im(this,Yf)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){Ie(this,ko).add(t);const r=np(t);if(typeof r=="string"){const s=Ie(this,gi).get(r);s?s.push(t):Ie(this,gi).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ie(this,ko).delete(t)){const r=np(t);if(typeof r=="string"){const s=Ie(this,gi).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Ie(this,gi).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=np(t);if(typeof r=="string"){const s=Ie(this,gi).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=np(t);if(typeof r=="string"){const a=(s=Ie(this,gi).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fs.batch(()=>{Ie(this,ko).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ie(this,ko).clear(),Ie(this,gi).clear()})}getAll(){return Array.from(Ie(this,ko))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>$N(r,s))}findAll(t={}){return this.getAll().filter(r=>$N(t,r))}notify(t){Fs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Fs.batch(()=>Promise.all(t.map(r=>r.continue().catch(mi))))}},ko=new WeakMap,gi=new WeakMap,Yf=new WeakMap,Zj);function np(e){var t;return(t=e.options.scope)==null?void 0:t.id}function VN(e){return{onFetch:(t,r)=>{var u,m,x,f,y;const s=t.options,a=(x=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:x.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],l=((y=t.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const S=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},b=Hk(t.options,t.fetchOptions),j=async(w,k,R)=>{if(v)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const O=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:k,direction:R?"backward":"forward",meta:t.options.meta};return S(A),A})(),q=await b(O),{maxPages:D}=t.options,J=R?pF:mF;return{pages:J(w.pages,q,D),pageParams:J(w.pageParams,k,D)}};if(a&&i.length){const w=a==="backward",k=w?AF:HN,R={pages:i,pageParams:l},W=k(s,R);o=await j(R,W,w)}else{const w=e??i.length;do{const k=c===0?l[0]??s.initialPageParam:HN(s,o);if(c>0&&k==null)break;o=await j(o,k),c++}while(c<w)}return o};t.options.persister?t.fetchFn=()=>{var v,S;return(S=(v=t.options).persister)==null?void 0:S.call(v,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function HN(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function AF(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var yn,jl,Sl,yu,bu,_l,wu,Nu,eS,EF=(eS=class{constructor(e={}){_r(this,yn);_r(this,jl);_r(this,Sl);_r(this,yu);_r(this,bu);_r(this,_l);_r(this,wu);_r(this,Nu);er(this,yn,e.queryCache||new _F),er(this,jl,e.mutationCache||new PF),er(this,Sl,e.defaultOptions||{}),er(this,yu,new Map),er(this,bu,new Map),er(this,_l,0)}mount(){Im(this,_l)._++,Ie(this,_l)===1&&(er(this,wu,Wk.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ie(this,yn).onFocus())})),er(this,Nu,yg.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ie(this,yn).onOnline())})))}unmount(){var e,t;Im(this,_l)._--,Ie(this,_l)===0&&((e=Ie(this,wu))==null||e.call(this),er(this,wu,void 0),(t=Ie(this,Nu))==null||t.call(this),er(this,Nu,void 0))}isFetching(e){return Ie(this,yn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ie(this,jl).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ie(this,yn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ie(this,yn).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(T1(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Ie(this,yn).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=Ie(this,yn).get(s.queryHash),i=a==null?void 0:a.state.data,l=lF(t,i);if(l!==void 0)return Ie(this,yn).build(this,s).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return Fs.batch(()=>Ie(this,yn).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ie(this,yn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ie(this,yn);Fs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ie(this,yn);return Fs.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Fs.batch(()=>Ie(this,yn).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(mi).catch(mi)}invalidateQueries(e,t={}){return Fs.batch(()=>(Ie(this,yn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Fs.batch(()=>Ie(this,yn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(mi)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(mi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ie(this,yn).build(this,t);return r.isStaleByTime(T1(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(mi).catch(mi)}fetchInfiniteQuery(e){return e.behavior=VN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(mi).catch(mi)}ensureInfiniteQueryData(e){return e.behavior=VN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return yg.isOnline()?Ie(this,jl).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ie(this,yn)}getMutationCache(){return Ie(this,jl)}getDefaultOptions(){return Ie(this,Sl)}setDefaultOptions(e){er(this,Sl,e)}setQueryDefaults(e,t){Ie(this,yu).set(Rf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ie(this,yu).values()],r={};return t.forEach(s=>{If(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){Ie(this,bu).set(Rf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ie(this,bu).values()],r={};return t.forEach(s=>{If(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ie(this,Sl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=A2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===E2&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ie(this,Sl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ie(this,yn).clear(),Ie(this,jl).clear()}},yn=new WeakMap,jl=new WeakMap,Sl=new WeakMap,yu=new WeakMap,bu=new WeakMap,_l=new WeakMap,wu=new WeakMap,Nu=new WeakMap,eS),LF=p.createContext(void 0),TF=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(LF.Provider,{value:e,children:t}));const Xk=p.createContext(null),qn=()=>{const e=p.useContext(Xk);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class DF{getBaseUrl(){const t=window.location.hostname;return t==="localhost"||t==="127.0.0.1"?"http://localhost:3001/api/auth":`http://${t}:3001/api/auth`}get baseUrl(){return this.getBaseUrl()}async login(t,r){const s=await fetch(`${this.baseUrl}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});if(!s.ok){let a;try{a=await s.json()}catch{a={error:"Login failed"}}throw new Error(a.error||"Login failed")}return await s.json()}async verifyToken(t){const r=await fetch(`${this.baseUrl}/verify`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Token verification failed");return await r.json()}async logout(){await fetch(`${this.baseUrl}/logout`,{method:"POST",headers:{"Content-Type":"application/json"}})}}const Iv=new DF,RF=({children:e})=>{const[t,r]=p.useState(null),[s,a]=p.useState(!0),[i,l]=p.useState(null);p.useEffect(()=>{(async()=>{var u;try{const m=localStorage.getItem("auth_token");if(m){const{user:x}=await Iv.verifyToken(m);l(m),r({uid:x.id,email:x.email,displayName:x.displayName,role:x.role,clinic:((u=x.clinicId)==null?void 0:u.toString())||""})}}catch(m){console.error("Token verification failed:",m),localStorage.removeItem("auth_token")}finally{a(!1)}})()},[]);const o=async(d,u)=>{var m;try{a(!0);const{token:x,user:f}=await Iv.login(d,u);localStorage.setItem("auth_token",x),l(x),r({uid:f.id,email:f.email,displayName:f.displayName,role:f.role,clinic:((m=f.clinicId)==null?void 0:m.toString())||""})}catch(x){throw console.error("Sign-in error:",x),x}finally{a(!1)}},c=async()=>{try{await Iv.logout()}catch(d){console.error("Logout error:",d)}finally{localStorage.removeItem("auth_token"),l(null),r(null)}};return n.jsx(Xk.Provider,{value:{user:t,loading:s,signIn:o,signOut:c,token:i},children:e})};class IF{constructor(){ar(this,"endpoint","/api/lab-tests")}async fetchApi(t="",r={}){try{const s=`${this.endpoint}${t}`;console.log(`API ${r.method||"GET"} request to ${s}`);const a=await fetch(s,{...r,headers:{"Content-Type":"application/json",...r.headers}});if(!a.ok){const i=await a.json().catch(()=>({}));throw new Error(i.error||`API call failed: ${a.status}`)}return await a.json()}catch(s){throw console.error("Error in lab test API call:",s),s}}async findById(t){return this.fetchApi(`/${t}`)}async findAll(){return this.fetchApi()}async create(t){return this.fetchApi("",{method:"POST",body:JSON.stringify(t)})}async update(t,r){return await this.fetchApi(`/${t}`,{method:"PUT",body:JSON.stringify(r)}),!0}async delete(t){return await this.fetchApi(`/${t}`,{method:"DELETE"}),!0}async findByClinic(t){return this.fetchApi(`/clinic/${t}`)}async findByCode(t){return this.fetchApi(`/code/${t}`)}async toApplicationLabTest(t){return t}async createWithComponents(t,r){return this.fetchApi("/with-components",{method:"POST",body:JSON.stringify({test:t,components:r})})}async updateWithComponents(t,r,s){return await this.fetchApi(`/${t}/with-components`,{method:"PUT",body:JSON.stringify({test:r,components:s})}),!0}async deleteWithComponents(t){return await this.fetchApi(`/${t}/with-components`,{method:"DELETE"}),!0}}const MF=new IF;let FF=class{async findById(t){return this.mockUser(t)}async findByEmail(t){return this.mockUser("1",t)}async findAll(){return[this.mockUser("1")]}async findByClinic(t){return[this.mockUser("1")]}async create(t){return this.mockUser("new",t.email)}async update(t,r){return!0}async delete(t){return!0}async toApplicationUser(t){return{id:t.id,email:t.email||"user@example.com",displayName:t.displayName||"Test User",role:t.role||"admin",clinic:t.clinic||"Test Clinic",isActive:t.isActive!==!1}}mockUser(t,r="user@example.com"){return{id:t,email:r,displayName:"Test User",role:"admin",clinic:"Test Clinic",isActive:!0,get:s=>({id:t,email:r,display_name:"Test User",role:"admin",clinic_id:1,status:"active",is_active:!0})[s]}}};const OF=new FF;class ux{async findById(){return{}}async findAll(){return[]}async create(t){return t}async update(t,r){return!0}async delete(){return!0}async findByClinic(){return[]}}const BF=new ux,UF=new ux,$F=new ux,zF=new ux,Jk=p.createContext(void 0),qF=({children:e})=>{const t={userRepo:OF,patientRepo:BF,labTestRepo:MF,visitRepo:UF,diagnosisRepo:$F,drugInventoryRepo:zF};return n.jsx(Jk.Provider,{value:t,children:e})},VF=()=>{const e=p.useContext(Jk);if(!e)throw new Error("useDatabase must be used within a DatabaseProvider");return e},HF=Zg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-sm text-[13px] font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-muted/60 hover:text-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-8 px-3 py-1.5",sm:"h-7 px-2.5",lg:"h-9 px-4",icon:"h-8 w-8"}},defaultVariants:{variant:"default",size:"default"}}),_e=p.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const l=s?TR:"button";return n.jsx(l,{className:ht(HF({variant:t,size:r,className:e})),ref:i,...a})});_e.displayName="Button";const Oe=p.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:ht("flex h-8 w-full rounded-sm border border-input bg-background px-2.5 py-1.5 text-[13px] ring-offset-background file:border-0 file:bg-transparent file:text-[13px] file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));Oe.displayName="Input";var WF="Label",Zk=p.forwardRef((e,t)=>n.jsx(bt.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Zk.displayName=WF;var eP=Zk;const GF=Zg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=p.forwardRef(({className:e,...t},r)=>n.jsx(eP,{ref:r,className:ht(GF(),e),...t}));Ce.displayName=eP.displayName;const YF=({email:e,onComplete:t})=>{const[r,s]=p.useState(""),[a,i]=p.useState(""),[l,o]=p.useState(!1),[c,d]=p.useState(!1),[u,m]=p.useState(!1),x=async f=>{if(f.preventDefault(),r!==a){ye.error("Passwords do not match");return}if(r.length<6){ye.error("Password must be at least 6 characters long");return}m(!0);try{const y=await fetch("/api/auth/setup-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e.toLowerCase(),password:r})});if(!y.ok){const v=await y.json();throw new Error(v.message||"Failed to setup password")}ye.success("Password set successfully! Welcome to Universal Hospital HMIS."),t()}catch(y){console.error("Error setting up password:",y),ye.error(y.message||"Failed to set up password. Please try again.")}finally{m(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border p-8 shadow-lg",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center mx-auto mb-4",children:n.jsx(To,{className:"w-8 h-8 text-primary"})}),n.jsx("h1",{className:"text-2xl font-bold",children:"Welcome to Universal Hospital"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Set up your password to complete your account"})]}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hc,{className:"w-5 h-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Account Setup"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e})]})]})}),n.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"password",className:"form-label",children:"Create Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"password",type:l?"text":"password",value:r,onChange:f=>s(f.target.value),placeholder:"Enter your password",required:!0,minLength:6,autoFocus:!0,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"confirmPassword",type:c?"text":"password",value:a,onChange:f=>i(f.target.value),placeholder:"Confirm your password",required:!0,minLength:6,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Password Requirements:"}),n.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[n.jsx("li",{children:" At least 6 characters long"}),n.jsx("li",{children:" Use a combination of letters and numbers"}),n.jsx("li",{children:" Keep it secure and don't share with others"})]})]}),n.jsxs(_e,{type:"submit",className:"w-full h-12",disabled:u||!r||!a,children:[u?n.jsx(mr,{className:"w-5 h-5 mr-2 animate-spin"}):n.jsx(ra,{className:"w-5 h-5 mr-2"}),"Complete Setup"]})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"By setting up your password, you agree to keep your account secure"})})]})})})},KF=()=>{const[e,t]=p.useState(""),[r,s]=p.useState(""),[a,i]=p.useState(!1),[l,o]=p.useState(""),[c,d]=p.useState(!1),[u,m]=p.useState(!1),[x,f]=p.useState(!1),[y,v]=p.useState(""),{signIn:S,user:b}=qn(),j=Vu(),w=async W=>{W.preventDefault(),o(""),i(!0);try{await S(e,r),ye.success("Welcome back!"),await new Promise(O=>setTimeout(O,500)),j("/dashboard",{replace:!0})}catch(O){const q=O.message||"Failed to sign in. Please try again.";o(q),ye.error(q)}finally{i(!1)}},k=()=>{m(!1),f(!1),v(""),t(""),s(""),ye.success("Account setup complete! Please sign in with your new password.")},R=async W=>{W.preventDefault(),o(""),i(!0);try{v(e),m(!0),f(!1),i(!1)}catch(O){console.error("Error in first time login:",O),o("Failed to proceed. Please try again.")}finally{i(!1)}};return u?n.jsx(YF,{email:y,onComplete:k}):n.jsxs("div",{className:"min-h-screen bg-background flex",children:[n.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-primary relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary via-primary to-primary/80"}),n.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12 text-primary-foreground",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white flex items-center justify-center p-2",children:n.jsx("img",{src:"/logo.jpeg",alt:"Universal Hospital Logo",className:"w-full h-full object-contain"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Universal Hospital"}),n.jsx("p",{className:"text-primary-foreground/70",children:"Health Management Information System"})]})]}),n.jsxs("div",{className:"space-y-6 max-w-md",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h2",{className:"text-4xl font-bold leading-tight",children:"Fast. Simple. Reliable."}),n.jsx("p",{className:"text-lg text-primary-foreground/80",children:"Designed for field clinics with high patient volume and limited connectivity."})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4 pt-6",children:n.jsxs("div",{className:"bg-primary-foreground/10 rounded-lg px-4 py-3",children:[n.jsx("p",{className:"font-medium",children:"Universal Hospital"}),n.jsx("p",{className:"text-sm text-primary-foreground/60",children:"Main Hospital"})]})})]})]}),n.jsx("div",{className:"absolute -bottom-32 -right-32 w-96 h-96 bg-primary-foreground/5 rounded-full"}),n.jsx("div",{className:"absolute -top-16 -right-16 w-64 h-64 bg-primary-foreground/5 rounded-full"})]}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-y-auto",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"lg:hidden flex items-center justify-center gap-3 mb-8",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-white flex items-center justify-center p-1",children:n.jsx("img",{src:"/logo.jpeg",alt:"Universal Hospital Logo",className:"w-full h-full object-contain"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold",children:"Universal Hospital"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"HMIS"})]})]}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:x?"Set up your account":"Welcome back"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:x?"Enter your email to create your password":"Sign in to access the HMIS"})]}),l&&n.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3 mb-6",children:n.jsx("p",{className:"text-sm text-destructive",children:l})}),x?n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"First Time Login"}),n.jsx("p",{className:"text-xs text-blue-700",children:"Enter the email address your administrator used to create your account."})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"email",className:"form-label",children:"Email Address"}),n.jsx(Oe,{id:"email",type:"email",value:e,onChange:W=>t(W.target.value),placeholder:"Enter your email",required:!0,autoFocus:!0,className:"h-12"})]}),n.jsxs(_e,{type:"submit",className:"w-full h-12",disabled:a,children:[a?n.jsx(mr,{className:"w-5 h-5 mr-2 animate-spin"}):null,"Continue Setup"]}),n.jsx(_e,{type:"button",variant:"outline",className:"w-full h-12",onClick:()=>{f(!1),t(""),o("")},disabled:a,children:"Back to Login"})]}):n.jsxs("form",{onSubmit:w,className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"email",className:"form-label",children:"Email Address"}),n.jsx(Oe,{id:"email",type:"email",value:e,onChange:W=>t(W.target.value),placeholder:"Enter your email",required:!0,autoFocus:!0,className:"h-12"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"password",className:"form-label",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"password",type:c?"text":"password",value:r,onChange:W=>s(W.target.value),placeholder:"Enter your password",required:!0,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs(_e,{type:"submit",className:"w-full h-12",disabled:a,children:[a?n.jsx(mr,{className:"w-5 h-5 mr-2 animate-spin"}):null,"Sign In"]})]}),n.jsx("div",{className:"text-center mt-6",children:x?n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Already have a password?"," ",n.jsx("button",{type:"button",onClick:()=>{f(!1),t(""),o("")},className:"text-primary hover:underline font-medium",disabled:a,children:"Click here to login"})]}):n.jsxs("p",{className:"text-xs text-muted-foreground",children:["New User?"," ",n.jsx("button",{type:"button",onClick:()=>{f(!0),t(""),s(""),o("")},className:"text-primary hover:underline font-medium",disabled:a,children:"Click here"})]})})]})})]})},QF=[{label:"Dashboard",href:"/dashboard",icon:DI,roles:["admin","reception","doctor","lab","pharmacy","reports"]},{label:"Clinical",href:"/clinical",icon:qa,roles:["admin","doctor"]},{label:"Laboratory",href:"/laboratory",icon:Kl,roles:["admin","lab","doctor"]},{label:"Pharmacy",href:"/pharmacy",icon:ya,roles:["admin","pharmacy"]},{label:"Reports",href:"/reports",icon:Xd,roles:["admin","reports"]}],WN={label:"Patient Registry",icon:bi,roles:["admin","reception","doctor"],items:[{label:"Patients List",href:"/patients",icon:bi,roles:["admin","reception","doctor"]}]},GN={label:"Patients Bill",icon:au,roles:["admin","reception","doctor","pharmacy"],items:[{label:"Patient Bills",href:"/patients-bill",icon:au,roles:["admin","reception","doctor"]},{label:"Receipts",href:"/receipts",icon:hn,roles:["admin","reception","doctor","pharmacy"]}]},YN={label:"Accounts",icon:nk,roles:["admin","reception"],items:[{label:"Ledger Accounts",href:"/accounts/ledger",icon:SI,roles:["admin","reception"]},{label:"Cashier Shifts",href:"/accounts/cashier-shifts",icon:Eu,roles:["admin","reception"]}]},KN={label:"Setup",icon:rk,roles:["admin"],items:[{label:"Lab Tests",href:"/setup/lab-tests",icon:g2,roles:["admin"]},{label:"Services",href:"/setup/services",icon:C1,roles:["admin"]},{label:"Clinics",href:"/setup/clinics",icon:qa,roles:["admin"]},{label:"Mindray Integration",href:"/setup/mindray-integration",icon:Kl,roles:["admin"]},{label:"Security",href:"/setup/security",icon:Hc,roles:["admin"]}]},XF=({isOpen:e,onToggle:t})=>{var j;const r=ac(),{user:s,signOut:a}=qn(),[i,l]=p.useState(r.pathname.startsWith("/setup")),[o,c]=p.useState(r.pathname.startsWith("/patients")&&!r.pathname.startsWith("/patients-bill")),[d,u]=p.useState(r.pathname.startsWith("/patients-bill")||r.pathname.startsWith("/receipts")),[m,x]=p.useState(r.pathname.startsWith("/accounts")),f=QF.filter(w=>(s==null?void 0:s.role)&&w.roles.includes(s.role)),y=(s==null?void 0:s.role)&&KN.roles.includes(s.role),v=(s==null?void 0:s.role)&&WN.roles.includes(s.role),S=(s==null?void 0:s.role)&&GN.roles.includes(s.role),b=(s==null?void 0:s.role)&&YN.roles.includes(s.role);return n.jsxs(n.Fragment,{children:[e&&n.jsx("div",{className:"fixed inset-0 bg-foreground/20 z-40 lg:hidden",onClick:t}),n.jsx("aside",{className:ht("fixed top-0 left-0 z-50 h-full w-64 bg-sidebar text-sidebar-foreground transition-transform duration-300 lg:translate-x-0",e?"translate-x-0":"-translate-x-full"),children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-3 border-b border-sidebar-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-9 h-9 rounded-sm bg-white flex items-center justify-center p-1",children:n.jsx("img",{src:"/logo.jpeg",alt:"Universal Hospital Logo",className:"w-full h-full object-contain"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-bold text-base leading-tight",children:"Universal Hospital"}),n.jsx("p",{className:"text-[11px] text-sidebar-foreground/70 leading-tight",children:"HMIS"})]})]}),n.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-sm hover:bg-sidebar-accent",children:n.jsx(Nn,{className:"w-5 h-5"})})]}),n.jsxs("nav",{className:"flex-1 px-2 py-3 space-y-1 overflow-y-auto",children:[f.filter(w=>w.href==="/dashboard").map(w=>{const k=w.icon,R=r.pathname===w.href;return n.jsxs(jo,{to:w.href,onClick:()=>window.innerWidth<1024&&t(),className:ht("flex items-center gap-3 px-3 py-2 rounded-sm transition-colors text-[13px]",R?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent text-sidebar-foreground/80 hover:text-sidebar-foreground"),children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium leading-none",children:w.label})]},w.href)}),v&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("button",{onClick:()=>c(!o),className:ht("w-full flex items-center justify-between px-3 py-2 rounded-sm transition-colors text-[13px]",r.pathname.startsWith("/patients")&&!r.pathname.startsWith("/patients-bill")?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent text-sidebar-foreground/80 hover:text-sidebar-foreground"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(bi,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium leading-none",children:"Patient Registry"})]}),n.jsx(Dc,{className:ht("w-4 h-4 transition-transform",o&&"rotate-180")})]}),o&&n.jsx("div",{className:"ml-4 mt-1 space-y-1 border-l border-sidebar-border pl-3",children:WN.items.map(w=>{const k=w.icon,R=r.pathname===w.href;return n.jsxs(jo,{to:w.href,onClick:()=>window.innerWidth<1024&&t(),className:ht("flex items-center gap-3 px-3 py-2 rounded-sm transition-colors text-[12px]",R?"bg-sidebar-accent text-sidebar-foreground font-medium":"hover:bg-sidebar-accent/50 text-sidebar-foreground/70 hover:text-sidebar-foreground"),children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{children:w.label})]},w.href)})})]}),S&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("button",{onClick:()=>u(!d),className:ht("w-full flex items-center justify-between px-3 py-2 rounded-sm transition-colors text-[13px]",r.pathname.startsWith("/patients-bill")||r.pathname.startsWith("/receipts")?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent text-sidebar-foreground/80 hover:text-sidebar-foreground"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(au,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium leading-none",children:"Patients Bill"})]}),n.jsx(Dc,{className:ht("w-4 h-4 transition-transform",d&&"rotate-180")})]}),d&&n.jsx("div",{className:"ml-4 mt-1 space-y-1 border-l border-sidebar-border pl-3",children:GN.items.map(w=>{const k=w.icon,R=r.pathname===w.href;return n.jsxs(jo,{to:w.href,onClick:()=>window.innerWidth<1024&&t(),className:ht("flex items-center gap-3 px-3 py-2 rounded-sm transition-colors text-[12px]",R?"bg-sidebar-accent text-sidebar-foreground font-medium":"hover:bg-sidebar-accent/50 text-sidebar-foreground/70 hover:text-sidebar-foreground"),children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{children:w.label})]},w.href)})})]}),f.filter(w=>w.href!=="/dashboard").map(w=>{const k=w.icon,R=r.pathname===w.href;return n.jsxs(jo,{to:w.href,onClick:()=>window.innerWidth<1024&&t(),className:ht("flex items-center gap-3 px-3 py-2 rounded-sm transition-colors text-[13px]",R?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent text-sidebar-foreground/80 hover:text-sidebar-foreground"),children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium leading-none",children:w.label})]},w.href)}),b&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("button",{onClick:()=>x(!m),className:ht("w-full flex items-center justify-between px-3 py-2 rounded-sm transition-colors text-[13px]",r.pathname.startsWith("/accounts")?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent text-sidebar-foreground/80 hover:text-sidebar-foreground"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(nk,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium leading-none",children:"Accounts"})]}),n.jsx(Dc,{className:ht("w-4 h-4 transition-transform",m&&"rotate-180")})]}),m&&n.jsx("div",{className:"ml-4 mt-1 space-y-1 border-l border-sidebar-border pl-3",children:YN.items.map(w=>{const k=w.icon,R=r.pathname===w.href;return n.jsxs(jo,{to:w.href,onClick:()=>window.innerWidth<1024&&t(),className:ht("flex items-center gap-3 px-3 py-2 rounded-sm transition-colors text-[12px]",R?"bg-sidebar-accent text-sidebar-foreground font-medium":"hover:bg-sidebar-accent/50 text-sidebar-foreground/70 hover:text-sidebar-foreground"),children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{children:w.label})]},w.href)})})]}),y&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("button",{onClick:()=>l(!i),className:ht("w-full flex items-center justify-between px-3 py-2 rounded-sm transition-colors text-[13px]",r.pathname.startsWith("/setup")?"bg-sidebar-primary text-sidebar-primary-foreground":"hover:bg-sidebar-accent text-sidebar-foreground/80 hover:text-sidebar-foreground"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(rk,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium leading-none",children:"Setup"})]}),n.jsx(Dc,{className:ht("w-4 h-4 transition-transform",i&&"rotate-180")})]}),i&&n.jsx("div",{className:"ml-4 mt-1 space-y-1 border-l border-sidebar-border pl-3",children:KN.items.map(w=>{const k=w.icon,R=r.pathname===w.href;return n.jsxs(jo,{to:w.href,onClick:()=>window.innerWidth<1024&&t(),className:ht("flex items-center gap-3 px-3 py-2 rounded-sm transition-colors text-[12px]",R?"bg-sidebar-accent text-sidebar-foreground font-medium":"hover:bg-sidebar-accent/50 text-sidebar-foreground/70 hover:text-sidebar-foreground"),children:[n.jsx(k,{className:"w-4 h-4"}),n.jsx("span",{children:w.label})]},w.href)})})]})]}),n.jsxs("div",{className:"px-3 py-3 border-t border-sidebar-border",children:[n.jsxs(jo,{to:"/profile",onClick:()=>window.innerWidth<1024&&t(),className:"flex items-center gap-3 mb-4 p-2 rounded-sm hover:bg-sidebar-accent transition-colors cursor-pointer",children:[n.jsx("div",{className:"w-9 h-9 rounded-sm bg-sidebar-accent flex items-center justify-center",children:n.jsx("span",{className:"font-semibold text-[13px]",children:((j=s==null?void 0:s.displayName)==null?void 0:j.charAt(0).toUpperCase())||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-[13px] truncate leading-tight",children:s==null?void 0:s.displayName}),n.jsxs("p",{className:"text-[11px] text-sidebar-foreground/60 capitalize leading-tight",children:[s==null?void 0:s.role,"  ",s==null?void 0:s.clinic]})]})]}),n.jsxs("button",{onClick:a,className:"w-full flex items-center gap-2 px-3 py-2 rounded-sm text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-colors text-[13px]",children:[n.jsx(II,{className:"w-4 h-4"}),n.jsx("span",{children:"Sign Out"})]})]})]})})]})},JF=({onMenuClick:e})=>{var r;const{user:t}=qn();return n.jsx("header",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-background border-b border-border h-16 flex items-center justify-between px-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:e,className:"p-2 hover:bg-accent rounded-md",children:n.jsx(FI,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-white rounded flex items-center justify-center p-1",children:n.jsx("img",{src:"/logo.jpeg",alt:"Universal Hospital Logo",className:"w-full h-full object-contain"})}),n.jsx("span",{className:"font-semibold",children:"Universal Hospital"})]}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-semibold text-primary",children:((r=t==null?void 0:t.displayName)==null?void 0:r.charAt(0).toUpperCase())||"U"})})]})})},Xn=({children:e})=>{const[t,r]=p.useState(!1);return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(XF,{isOpen:t,onToggle:()=>r(!t)}),n.jsx(JF,{onMenuClick:()=>r(!t)}),n.jsx("main",{className:"lg:ml-64 pt-16 lg:pt-0 min-h-screen",children:n.jsx("div",{className:"p-3 lg:p-4",children:e})})]})};var Mv="focusScope.autoFocusOnMount",Fv="focusScope.autoFocusOnUnmount",QN={bubbles:!1,cancelable:!0},ZF="FocusScope",nm=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=e,[o,c]=p.useState(null),d=Rn(a),u=Rn(i),m=p.useRef(null),x=or(t,v=>c(v)),f=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(s){let v=function(w){if(f.paused||!o)return;const k=w.target;o.contains(k)?m.current=k:ml(m.current,{select:!0})},S=function(w){if(f.paused||!o)return;const k=w.relatedTarget;k!==null&&(o.contains(k)||ml(m.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const R of w)R.removedNodes.length>0&&ml(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",S);const j=new MutationObserver(b);return o&&j.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",S),j.disconnect()}}},[s,o,f.paused]),p.useEffect(()=>{if(o){JN.add(f);const v=document.activeElement;if(!o.contains(v)){const b=new CustomEvent(Mv,QN);o.addEventListener(Mv,d),o.dispatchEvent(b),b.defaultPrevented||(eO(aO(tP(o)),{select:!0}),document.activeElement===v&&ml(o))}return()=>{o.removeEventListener(Mv,d),setTimeout(()=>{const b=new CustomEvent(Fv,QN);o.addEventListener(Fv,u),o.dispatchEvent(b),b.defaultPrevented||ml(v??document.body,{select:!0}),o.removeEventListener(Fv,u),JN.remove(f)},0)}}},[o,d,u,f]);const y=p.useCallback(v=>{if(!r&&!s||f.paused)return;const S=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(S&&b){const j=v.currentTarget,[w,k]=tO(j);w&&k?!v.shiftKey&&b===k?(v.preventDefault(),r&&ml(w,{select:!0})):v.shiftKey&&b===w&&(v.preventDefault(),r&&ml(k,{select:!0})):b===j&&v.preventDefault()}},[r,s,f.paused]);return n.jsx(bt.div,{tabIndex:-1,...l,ref:x,onKeyDown:y})});nm.displayName=ZF;function eO(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(ml(s,{select:t}),document.activeElement!==r)return}function tO(e){const t=tP(e),r=XN(t,e),s=XN(t.reverse(),e);return[r,s]}function tP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function XN(e,t){for(const r of e)if(!rO(r,{upTo:t}))return r}function rO(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nO(e){return e instanceof HTMLInputElement&&"select"in e}function ml(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&nO(e)&&t&&e.select()}}var JN=sO();function sO(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=ZN(e,t),e.unshift(t)},remove(t){var r;e=ZN(e,t),(r=e[0])==null||r.resume()}}}function ZN(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function aO(e){return e.filter(t=>t.tagName!=="A")}var Ov=0;function hx(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??e5()),document.body.insertAdjacentElement("beforeend",e[1]??e5()),Ov++,()=>{Ov===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ov--}},[])}function e5(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Hi=function(){return Hi=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Hi.apply(this,arguments)};function rP(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function iO(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var Rp="right-scroll-bar-position",Ip="width-before-scroll-bar",oO="with-scroll-bars-hidden",lO="--removed-body-scroll-bar-size";function Bv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function cO(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var dO=typeof window<"u"?p.useLayoutEffect:p.useEffect,t5=new WeakMap;function uO(e,t){var r=cO(null,function(s){return e.forEach(function(a){return Bv(a,s)})});return dO(function(){var s=t5.get(r);if(s){var a=new Set(s),i=new Set(e),l=r.current;a.forEach(function(o){i.has(o)||Bv(o,null)}),i.forEach(function(o){a.has(o)||Bv(o,l)})}t5.set(r,e)},[e]),r}function hO(e){return e}function fO(e,t){t===void 0&&(t=hO);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var l=t(i,s);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(s=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){s=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(i),l=r}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),r}}}};return a}function mO(e){e===void 0&&(e={});var t=fO(null);return t.options=Hi({async:!0,ssr:!1},e),t}var nP=function(e){var t=e.sideCar,r=rP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return p.createElement(s,Hi({},r))};nP.isSideCarExport=!0;function pO(e,t){return e.useMedium(t),nP}var sP=mO(),Uv=function(){},fx=p.forwardRef(function(e,t){var r=p.useRef(null),s=p.useState({onScrollCapture:Uv,onWheelCapture:Uv,onTouchMoveCapture:Uv}),a=s[0],i=s[1],l=e.forwardProps,o=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,x=e.sideCar,f=e.noRelative,y=e.noIsolation,v=e.inert,S=e.allowPinchZoom,b=e.as,j=b===void 0?"div":b,w=e.gapMode,k=rP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=x,W=uO([r,t]),O=Hi(Hi({},k),a);return p.createElement(p.Fragment,null,u&&p.createElement(R,{sideCar:sP,removeScrollBar:d,shards:m,noRelative:f,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!S,lockRef:r,gapMode:w}),l?p.cloneElement(p.Children.only(o),Hi(Hi({},O),{ref:W})):p.createElement(j,Hi({},O,{className:c,ref:W}),o))});fx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fx.classNames={fullWidth:Ip,zeroRight:Rp};var gO=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xO(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gO();return t&&e.setAttribute("nonce",t),e}function vO(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yO(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bO=function(){var e=0,t=null;return{add:function(r){e==0&&(t=xO())&&(vO(t,r),yO(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wO=function(){var e=bO();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},aP=function(){var e=wO(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},NO={left:0,top:0,right:0,gap:0},$v=function(e){return parseInt(e||"",10)||0},jO=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[$v(r),$v(s),$v(a)]},SO=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return NO;var t=jO(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},_O=aP(),cu="data-scroll-locked",CO=function(e,t,r,s){var a=e.left,i=e.top,l=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(oO,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(cu,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rp,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Ip,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Rp," .").concat(Rp,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Ip," .").concat(Ip,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(cu,`] {
    `).concat(lO,": ").concat(o,`px;
  }
`)},r5=function(){var e=parseInt(document.body.getAttribute(cu)||"0",10);return isFinite(e)?e:0},kO=function(){p.useEffect(function(){return document.body.setAttribute(cu,(r5()+1).toString()),function(){var e=r5()-1;e<=0?document.body.removeAttribute(cu):document.body.setAttribute(cu,e.toString())}},[])},PO=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;kO();var i=p.useMemo(function(){return SO(a)},[a]);return p.createElement(_O,{styles:CO(i,!t,a,r?"":"!important")})},R1=!1;if(typeof window<"u")try{var sp=Object.defineProperty({},"passive",{get:function(){return R1=!0,!0}});window.addEventListener("test",sp,sp),window.removeEventListener("test",sp,sp)}catch{R1=!1}var kd=R1?{passive:!1}:!1,AO=function(e){return e.tagName==="TEXTAREA"},iP=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!AO(e)&&r[t]==="visible")},EO=function(e){return iP(e,"overflowY")},LO=function(e){return iP(e,"overflowX")},n5=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=oP(e,s);if(a){var i=lP(e,s),l=i[1],o=i[2];if(l>o)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},TO=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},DO=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},oP=function(e,t){return e==="v"?EO(t):LO(t)},lP=function(e,t){return e==="v"?TO(t):DO(t)},RO=function(e,t){return e==="h"&&t==="rtl"?-1:1},IO=function(e,t,r,s,a){var i=RO(e,window.getComputedStyle(t).direction),l=i*s,o=r.target,c=t.contains(o),d=!1,u=l>0,m=0,x=0;do{if(!o)break;var f=lP(e,o),y=f[0],v=f[1],S=f[2],b=v-S-i*y;(y||b)&&oP(e,o)&&(m+=b,x+=y);var j=o.parentNode;o=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(x)<1||!a))&&(d=!0),d},ap=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},s5=function(e){return[e.deltaX,e.deltaY]},a5=function(e){return e&&"current"in e?e.current:e},MO=function(e,t){return e[0]===t[0]&&e[1]===t[1]},FO=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OO=0,Pd=[];function BO(e){var t=p.useRef([]),r=p.useRef([0,0]),s=p.useRef(),a=p.useState(OO++)[0],i=p.useState(aP)[0],l=p.useRef(e);p.useEffect(function(){l.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=iO([e.lockRef.current],(e.shards||[]).map(a5),!0).filter(Boolean);return v.forEach(function(S){return S.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=p.useCallback(function(v,S){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!l.current.allowPinchZoom;var b=ap(v),j=r.current,w="deltaX"in v?v.deltaX:j[0]-b[0],k="deltaY"in v?v.deltaY:j[1]-b[1],R,W=v.target,O=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in v&&O==="h"&&W.type==="range")return!1;var q=n5(O,W);if(!q)return!0;if(q?R=O:(R=O==="v"?"h":"v",q=n5(O,W)),!q)return!1;if(!s.current&&"changedTouches"in v&&(w||k)&&(s.current=R),!R)return!0;var D=s.current||R;return IO(D,S,v,D==="h"?w:k,!0)},[]),c=p.useCallback(function(v){var S=v;if(!(!Pd.length||Pd[Pd.length-1]!==i)){var b="deltaY"in S?s5(S):ap(S),j=t.current.filter(function(R){return R.name===S.type&&(R.target===S.target||S.target===R.shadowParent)&&MO(R.delta,b)})[0];if(j&&j.should){S.cancelable&&S.preventDefault();return}if(!j){var w=(l.current.shards||[]).map(a5).filter(Boolean).filter(function(R){return R.contains(S.target)}),k=w.length>0?o(S,w[0]):!l.current.noIsolation;k&&S.cancelable&&S.preventDefault()}}},[]),d=p.useCallback(function(v,S,b,j){var w={name:v,delta:S,target:b,should:j,shadowParent:UO(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(k){return k!==w})},1)},[]),u=p.useCallback(function(v){r.current=ap(v),s.current=void 0},[]),m=p.useCallback(function(v){d(v.type,s5(v),v.target,o(v,e.lockRef.current))},[]),x=p.useCallback(function(v){d(v.type,ap(v),v.target,o(v,e.lockRef.current))},[]);p.useEffect(function(){return Pd.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",c,kd),document.addEventListener("touchmove",c,kd),document.addEventListener("touchstart",u,kd),function(){Pd=Pd.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,kd),document.removeEventListener("touchmove",c,kd),document.removeEventListener("touchstart",u,kd)}},[]);var f=e.removeScrollBar,y=e.inert;return p.createElement(p.Fragment,null,y?p.createElement(i,{styles:FO(a)}):null,f?p.createElement(PO,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function UO(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $O=pO(sP,BO);var sm=p.forwardRef(function(e,t){return p.createElement(fx,Hi({},e,{ref:t,sideCar:$O}))});sm.classNames=fx.classNames;var zO=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ad=new WeakMap,ip=new WeakMap,op={},zv=0,cP=function(e){return e&&(e.host||cP(e.parentNode))},qO=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=cP(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},VO=function(e,t,r,s){var a=qO(t,Array.isArray(e)?e:[e]);op[r]||(op[r]=new WeakMap);var i=op[r],l=[],o=new Set,c=new Set(a),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(x){if(o.has(x))u(x);else try{var f=x.getAttribute(s),y=f!==null&&f!=="false",v=(Ad.get(x)||0)+1,S=(i.get(x)||0)+1;Ad.set(x,v),i.set(x,S),l.push(x),v===1&&y&&ip.set(x,!0),S===1&&x.setAttribute(r,"true"),y||x.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",x,b)}})};return u(t),o.clear(),zv++,function(){l.forEach(function(m){var x=Ad.get(m)-1,f=i.get(m)-1;Ad.set(m,x),i.set(m,f),x||(ip.has(m)||m.removeAttribute(s),ip.delete(m)),f||m.removeAttribute(r)}),zv--,zv||(Ad=new WeakMap,Ad=new WeakMap,ip=new WeakMap,op={})}},mx=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=zO(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),VO(s,a,r,"aria-hidden")):function(){return null}},px="Dialog",[dP,_3]=Ea(px),[HO,Pi]=dP(px),uP=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,o=p.useRef(null),c=p.useRef(null),[d,u]=Oo({prop:s,defaultProp:a??!1,onChange:i,caller:px});return n.jsx(HO,{scope:t,triggerRef:o,contentRef:c,contentId:ms(),titleId:ms(),descriptionId:ms(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(m=>!m),[u]),modal:l,children:r})};uP.displayName=px;var hP="DialogTrigger",fP=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=Pi(hP,r),i=or(t,a.triggerRef);return n.jsx(bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":D2(a.open),...s,ref:i,onClick:Je(e.onClick,a.onOpenToggle)})});fP.displayName=hP;var L2="DialogPortal",[WO,mP]=dP(L2,{forceMount:void 0}),pP=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,i=Pi(L2,t);return n.jsx(WO,{scope:t,forceMount:r,children:p.Children.map(s,l=>n.jsx(ss,{present:r||i.open,children:n.jsx(Hu,{asChild:!0,container:a,children:l})}))})};pP.displayName=L2;var bg="DialogOverlay",gP=p.forwardRef((e,t)=>{const r=mP(bg,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=Pi(bg,e.__scopeDialog);return i.modal?n.jsx(ss,{present:s||i.open,children:n.jsx(YO,{...a,ref:t})}):null});gP.displayName=bg;var GO=Yl("DialogOverlay.RemoveScroll"),YO=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=Pi(bg,r);return n.jsx(sm,{as:GO,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(bt.div,{"data-state":D2(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Zc="DialogContent",xP=p.forwardRef((e,t)=>{const r=mP(Zc,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=Pi(Zc,e.__scopeDialog);return n.jsx(ss,{present:s||i.open,children:i.modal?n.jsx(KO,{...a,ref:t}):n.jsx(QO,{...a,ref:t})})});xP.displayName=Zc;var KO=p.forwardRef((e,t)=>{const r=Pi(Zc,e.__scopeDialog),s=p.useRef(null),a=or(t,r.contentRef,s);return p.useEffect(()=>{const i=s.current;if(i)return mx(i)},[]),n.jsx(vP,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Je(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Je(e.onFocusOutside,i=>i.preventDefault())})}),QO=p.forwardRef((e,t)=>{const r=Pi(Zc,e.__scopeDialog),s=p.useRef(!1),a=p.useRef(!1);return n.jsx(vP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(s.current||(o=r.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),vP=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=e,o=Pi(Zc,r),c=p.useRef(null),d=or(t,c);return hx(),n.jsxs(n.Fragment,{children:[n.jsx(nm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(dd,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":D2(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(XO,{titleId:o.titleId}),n.jsx(ZO,{contentRef:c,descriptionId:o.descriptionId})]})]})}),T2="DialogTitle",yP=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=Pi(T2,r);return n.jsx(bt.h2,{id:a.titleId,...s,ref:t})});yP.displayName=T2;var bP="DialogDescription",wP=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=Pi(bP,r);return n.jsx(bt.p,{id:a.descriptionId,...s,ref:t})});wP.displayName=bP;var NP="DialogClose",jP=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=Pi(NP,r);return n.jsx(bt.button,{type:"button",...s,ref:t,onClick:Je(e.onClick,()=>a.onOpenChange(!1))})});jP.displayName=NP;function D2(e){return e?"open":"closed"}var SP="DialogTitleWarning",[C3,_P]=ER(SP,{contentName:Zc,titleName:T2,docsSlug:"dialog"}),XO=({titleId:e})=>{const t=_P(SP),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},JO="DialogDescriptionWarning",ZO=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_P(JO).contentName}}.`;return p.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},CP=uP,e9=fP,kP=pP,R2=gP,I2=xP,PP=yP,AP=wP,t9=jP;const wr=CP,I1=e9,r9=kP,EP=p.forwardRef(({className:e,...t},r)=>n.jsx(R2,{ref:r,className:ht("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));EP.displayName=R2.displayName;const xr=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(r9,{children:[n.jsx(EP,{}),n.jsxs(I2,{ref:s,className:ht("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(t9,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(Nn,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xr.displayName=I2.displayName;const Nr=({className:e,...t})=>n.jsx("div",{className:ht("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Nr.displayName="DialogHeader";const vr=p.forwardRef(({className:e,...t},r)=>n.jsx(PP,{ref:r,className:ht("text-lg font-semibold leading-none tracking-tight",e),...t}));vr.displayName=PP.displayName;const _s=p.forwardRef(({className:e,...t},r)=>n.jsx(AP,{ref:r,className:ht("text-sm text-muted-foreground",e),...t}));_s.displayName=AP.displayName;class n9{constructor(){ar(this,"baseUrl","/api/dashboard")}async getStats(t){try{const r=await fetch(`${this.baseUrl}/stats/${t}`);if(!r.ok)throw new Error("Failed to fetch dashboard stats");return await r.json()}catch(r){throw console.error("Error fetching dashboard stats:",r),r}}}let s9=class{constructor(){ar(this,"baseUrl","/api/patients")}async create(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create patient");return await r.json()}catch(r){throw console.error("Error creating patient:",r),r}}};const a9=()=>{const{user:e}=qn(),t=Vu(),[r,s]=p.useState({totalPatients:0,todayPatients:0,todayVisits:0,pendingLabTests:0,completedLabTests:0,lowStockItems:0,queuePatients:0}),[a,i]=p.useState(!0),[l,o]=p.useState(!1),[c,d]=p.useState(!1),[u,m]=p.useState({fullName:"",age:"",dateOfBirth:"",gender:"",occupation:"",phoneNumber:""}),x=new n9,f=new s9,y=O=>{const q="UH",D=Date.now().toString().slice(-4),J=Math.floor(Math.random()*100).toString().padStart(2,"0");return`${q}-${D}${J}`},v=O=>{if(!O)return 0;const q=new Date,D=new Date(O);let J=q.getFullYear()-D.getFullYear();const A=q.getMonth()-D.getMonth();return(A<0||A===0&&q.getDate()<D.getDate())&&J--,J},S=O=>!O||O<=0?"":`${new Date().getFullYear()-O}-01-01`,b=async O=>{if(O.preventDefault(),!!(e!=null&&e.clinic)){d(!0);try{const q={patient_id:y(e.clinic),full_name:u.fullName.trim(),age:u.age?parseInt(u.age):null,date_of_birth:u.dateOfBirth||null,gender:u.gender||null,occupation:u.occupation.trim(),phone_number:u.phoneNumber.trim(),clinic_id:parseInt(e.clinic)||1,registered_by:e.displayName};await f.create(q),ye.success(`Patient ${u.fullName} registered successfully!`),m({fullName:"",age:"",dateOfBirth:"",gender:"",occupation:"",phoneNumber:""}),o(!1),j(),t("/patients")}catch(q){console.error("Error registering patient:",q),ye.error("Failed to register patient. Please try again.")}finally{d(!1)}}},j=async()=>{try{const O=(e==null?void 0:e.clinic)||"1",q=await x.getStats(O);s(q)}catch(O){console.error("Error fetching stats:",O),s({totalPatients:0,todayPatients:0,todayVisits:0,pendingLabTests:0,completedLabTests:0,lowStockItems:0,queuePatients:0})}finally{i(!1)}};p.useEffect(()=>{e&&j()},[e]);const k=[{title:"Total Patients",value:r.totalPatients,icon:bi,color:"text-primary",bgColor:"bg-primary/10",link:"/patients",roles:["admin","reception","doctor","lab","pharmacy","reports"]},{title:"Today's Registrations",value:r.todayPatients,icon:UI,color:"text-success",bgColor:"bg-success/10",link:"/patients",roles:["admin","reception","doctor","lab","pharmacy","reports"]},{title:"Today's Visits",value:r.todayVisits,icon:qa,color:"text-blue-600",bgColor:"bg-blue-100",link:"/clinical",roles:["admin","reception","doctor","lab","pharmacy","reports"]},{title:"Queue Patients",value:r.queuePatients,icon:Eu,color:"text-orange-600",bgColor:"bg-orange-100",link:"/patients",roles:["admin","reception","doctor","lab","pharmacy","reports"]},{title:"Pending Lab Tests",value:r.pendingLabTests,icon:Kl,color:"text-warning",bgColor:"bg-warning/10",link:"/laboratory",roles:["admin","doctor","lab","pharmacy","reports"]},{title:"Completed Lab Tests",value:r.completedLabTests,icon:To,color:"text-green-600",bgColor:"bg-green-100",link:"/laboratory",roles:["admin","doctor","lab","pharmacy","reports"]},{title:"Low Stock Alerts",value:r.lowStockItems,icon:_1,color:"text-destructive",bgColor:"bg-destructive/10",link:"/pharmacy",roles:["admin","doctor","pharmacy","reports"]}].filter(O=>(e==null?void 0:e.role)&&O.roles.includes(e.role)),W=[{label:"Register Patient",icon:Al,action:()=>o(!0),roles:["admin","reception"]},{label:"Clinical Visit",icon:qa,href:"/clinical",roles:["admin","doctor"]},{label:"Lab Queue",icon:Kl,href:"/laboratory",roles:["admin","lab"]},{label:"Dispense Drugs",icon:ya,href:"/pharmacy",roles:["admin","pharmacy"]}].filter(O=>(e==null?void 0:e.role)&&O.roles.includes(e.role));return n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Dashboard"}),n.jsxs("p",{className:"text-muted-foreground mt-1",children:["Welcome back, ",e==null?void 0:e.displayName,"  ",e==null?void 0:e.clinic]})]}),n.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-2 bg-muted rounded-lg",children:[n.jsx(Eu,{className:"w-4 h-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:k.map(O=>{const q=O.icon;return n.jsxs(jo,{to:O.link,className:"stat-card group",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:`w-10 h-10 rounded-lg ${O.bgColor} flex items-center justify-center`,children:n.jsx(q,{className:`w-5 h-5 ${O.color}`})})}),n.jsx("p",{className:"text-2xl font-bold text-foreground",children:a?"":O.value}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:O.title})]},O.title)})}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Quick Actions"}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:W.map(O=>{const q=O.icon;return O.action?n.jsxs("button",{onClick:O.action,className:"flex flex-col items-center justify-center p-6 bg-card rounded-xl border border-border hover:border-primary hover:shadow-md transition-all group",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center mb-3 group-hover:bg-primary/20 transition-colors",children:n.jsx(q,{className:"w-6 h-6 text-primary"})}),n.jsx("span",{className:"font-medium text-foreground",children:O.label})]},O.label):n.jsxs(jo,{to:O.href,className:"flex flex-col items-center justify-center p-6 bg-card rounded-xl border border-border hover:border-primary hover:shadow-md transition-all group",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center mb-3 group-hover:bg-primary/20 transition-colors",children:n.jsx(q,{className:"w-6 h-6 text-primary"})}),n.jsx("span",{className:"font-medium text-foreground",children:O.label})]},O.label)})})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"System Status"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-success animate-pulse-soft"}),n.jsx("span",{className:"text-foreground",children:"All systems operational"})]}),n.jsx("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx(To,{className:"w-4 h-4 inline mr-2"}),"Offline mode enabled - data will sync when connected"]})})]}),n.jsx(wr,{open:l,onOpenChange:o,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsx(vr,{children:"Quick Patient Registration"})}),n.jsxs("form",{onSubmit:b,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"fullName",className:"form-label",children:"Full Name *"}),n.jsx(Oe,{id:"fullName",value:u.fullName,onChange:O=>m({...u,fullName:O.target.value}),placeholder:"Enter patient's full name",required:!0,autoFocus:!0,className:"h-12"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"age",className:"form-label",children:"Age"}),n.jsxs("div",{className:"relative",children:[n.jsx(ex,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{id:"age",type:"number",value:u.age,onChange:O=>{const q=O.target.value,D=q?S(parseInt(q)):"";m({...u,age:q,dateOfBirth:D})},placeholder:"Years",min:"0",max:"150",className:"pl-10 h-12"})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"dob",className:"form-label",children:"OR Date of Birth"}),n.jsx(Oe,{id:"dob",type:"date",value:u.dateOfBirth,onChange:O=>{const q=O.target.value,D=q?v(q).toString():"";m({...u,dateOfBirth:q,age:D})},className:"h-12"})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"gender",className:"form-label",children:"Gender"}),n.jsxs("select",{id:"gender",value:u.gender,onChange:O=>m({...u,gender:O.target.value}),className:"w-full h-12 px-3 py-2 border border-input bg-background rounded-md text-sm",children:[n.jsx("option",{value:"",children:"Select gender..."}),n.jsx("option",{value:"male",children:"Male"}),n.jsx("option",{value:"female",children:"Female"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"occupation",className:"form-label",children:"Occupation"}),n.jsx(Oe,{id:"occupation",value:u.occupation,onChange:O=>m({...u,occupation:O.target.value}),placeholder:"Patient's occupation",className:"h-12"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"phoneNumber",className:"form-label",children:"Phone Number"}),n.jsx(Oe,{id:"phoneNumber",value:u.phoneNumber,onChange:O=>m({...u,phoneNumber:O.target.value}),placeholder:"Patient's phone number",className:"h-12"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>o(!1),className:"flex-1",disabled:c,children:"Cancel"}),n.jsx(_e,{type:"submit",className:"flex-1",disabled:c||!u.fullName.trim(),children:c?n.jsxs(n.Fragment,{children:[n.jsx(To,{className:"w-4 h-4 mr-2 animate-spin"}),"Registering..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Al,{className:"w-4 h-4 mr-2"}),"Register & Queue"]})})]})]})]})})]})})};class i9{getBaseUrl(){const t=window.location.hostname,r=t==="localhost"||t==="127.0.0.1";return"/api/patients"}get baseUrl(){return this.getBaseUrl()}async getByClinic(t){try{const r=await fetch(`${this.baseUrl}/clinic/${t}`);if(!r.ok)throw new Error("Failed to fetch patients by clinic");return await r.json()}catch(r){throw console.error("Error fetching patients by clinic:",r),r}}async create(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create patient");return await r.json()}catch(r){throw console.error("Error creating patient:",r),r}}async search(t){try{const r=await fetch(`${this.baseUrl}/search?q=${encodeURIComponent(t)}`);if(!r.ok)throw new Error("Failed to search patients");return await r.json()}catch(r){throw console.error("Error searching patients:",r),r}}}class o9{constructor(){ar(this,"baseUrl","/api/users")}async getByClinic(t){try{const r=await fetch(`${this.baseUrl}/clinic/${t}`);if(!r.ok)throw new Error("Failed to fetch users by clinic");return await r.json()}catch(r){throw console.error("Error fetching users by clinic:",r),r}}}class l9{constructor(){ar(this,"baseUrl","/api/patient-queue")}async getByClinic(t){try{const r=await fetch(`${this.baseUrl}/clinic/${t}`);if(!r.ok)throw new Error("Failed to fetch queue entries");return await r.json()}catch(r){throw console.error("Error fetching queue entries:",r),r}}async getByClinicAndStatus(t,r){try{const s=await fetch(`${this.baseUrl}/clinic/${t}/status/${r}`);if(!s.ok)throw new Error("Failed to fetch queue entries");return await s.json()}catch(s){throw console.error("Error fetching queue entries:",s),s}}async create(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to add patient to queue");return await r.json()}catch(r){throw console.error("Error adding patient to queue:",r),r}}}class c9{constructor(){ar(this,"baseUrl","/api/clinics")}async getAll(){try{const t=await fetch(this.baseUrl);if(!t.ok)throw new Error("Failed to fetch clinics");return await t.json()}catch(t){throw console.error("Error fetching clinics:",t),t}}async getActiveOnly(){try{const t=await fetch(this.baseUrl);if(!t.ok)throw new Error("Failed to fetch clinics");return(await t.json()).filter(s=>s.isActive)}catch(t){throw console.error("Error fetching active clinics:",t),t}}}class d9{constructor(){ar(this,"baseUrl","/api/patient-bills")}async create(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create patient bill");return await r.json()}catch(r){throw console.error("Error creating patient bill:",r),r}}}const i5=new i9,u9=new o9,o5=new l9,h9=new c9,f9=new d9,m9=e=>{const t="UH",r=Date.now().toString().slice(-4),s=Math.floor(Math.random()*100).toString().padStart(2,"0");return`${t}-${r}${s}`},l5=e=>{if(!e)return 0;const t=new Date,r=new Date(e);let s=t.getFullYear()-r.getFullYear();const a=t.getMonth()-r.getMonth();return(a<0||a===0&&t.getDate()<r.getDate())&&s--,s},c5=e=>!e||e<=0?"":`${new Date().getFullYear()-e}-01-01`,p9=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(!1),[o,c]=p.useState(!1),[d,u]=p.useState(""),[m,x]=p.useState(!1),[f,y]=p.useState(null),[v,S]=p.useState([]),[b,j]=p.useState([]),[w,k]=p.useState(new Set),[R,W]=p.useState(new Map),[O,q]=p.useState(1),[D]=p.useState(8),[J,A]=p.useState(""),[M,ee]=p.useState(""),[E,ae]=p.useState({fullName:"",age:"",dateOfBirth:"",gender:"",occupation:"",phoneNumber:"",beneficiaryType:"local_residents"}),[Y,de]=p.useState({doctor:"",clinic:"",priority:"normal",notes:""});p.useEffect(()=>{T(),V(),re(),he()},[e==null?void 0:e.clinic]);const T=async()=>{if(e!=null&&e.clinic)try{const X=(await i5.getByClinic(e.clinic)).map(ne=>({id:ne.id,patientId:ne.patient_id,fullName:`${ne.first_name} ${ne.last_name}`,firstName:ne.first_name,lastName:ne.last_name,age:l5(ne.date_of_birth),dateOfBirth:ne.date_of_birth,gender:ne.gender,phoneNumber:ne.phone||"",occupation:ne.occupation||"",address:ne.address||"",clinic:e.clinic,registeredAt:ne.createdAt||new Date().toISOString(),registeredBy:(e==null?void 0:e.displayName)||"System",beneficiaryType:"local_residents"}));r(X)}catch(I){console.error("Error fetching patients:",I),ye.error("Failed to load patients")}finally{a(!1)}},V=async()=>{if(e!=null&&e.clinic)try{const X=(await u9.getByClinic(e.clinic)).filter(ne=>ne.role==="admin"||ne.role==="doctor").map(ne=>({displayName:ne.display_name,role:ne.role})).sort((ne,ue)=>ne.role!==ue.role?ne.role==="admin"?-1:1:ne.displayName.localeCompare(ue.displayName));S(X)}catch(I){console.error("Error fetching users:",I),ye.error("Failed to load doctors")}},re=async()=>{try{const X=(await h9.getActiveOnly()).map(ne=>({id:ne.id,name:ne.name,department:ne.department,service:ne.service}));j(X)}catch(I){console.error("Error fetching clinics:",I),ye.error("Failed to load clinics")}},he=async()=>{if(e!=null&&e.clinic)try{const I=await o5.getByClinic(e.clinic);console.log("Fetched queue entries:",I.map(ue=>({patient_id:ue.patient_id,status:ue.status})));const X=new Set,ne=new Map;I.forEach(ue=>{const xe=ue.patient_id,ke=ue.status;console.log(`Processing queue entry: Patient ${xe} has status ${ke}`),ke==="waiting"||ke==="in_progress"?(X.add(xe),console.log(`Added patient ${xe} to queued patients (status: ${ke})`)):console.log(`Patient ${xe} not added to queued patients (status: ${ke})`),ne.set(xe,ke)}),console.log("Final queuedPatientIds:",Array.from(X)),console.log("Final statusMap:",Object.fromEntries(ne)),k(X),W(ne)}catch(I){console.error("Error fetching queue status:",I),k(new Set),W(new Map)}},C=async I=>{if(I.preventDefault(),!!e){c(!0);try{const X=m9(e.clinic),ne=E.dateOfBirth?Math.floor((Date.now()-new Date(E.dateOfBirth).getTime())/315576e5):parseInt(E.age)||void 0,ue={patientId:X,fullName:E.fullName.trim(),age:ne,occupation:E.occupation.trim(),phoneNumber:E.phoneNumber.trim(),clinic:e.clinic,registeredAt:new Date().toISOString(),registeredBy:e.displayName,beneficiaryType:E.beneficiaryType};E.dateOfBirth&&(ue.dateOfBirth=E.dateOfBirth),E.gender&&(ue.gender=E.gender);const xe={patient_id:X,first_name:E.fullName.split(" ")[0]||"",last_name:E.fullName.split(" ").slice(1).join(" ")||"",date_of_birth:E.dateOfBirth||c5(parseInt(E.age)),gender:E.gender,phone:E.phoneNumber,occupation:E.occupation,address:"",clinic_id:parseInt(e.clinic)||1},ke=await i5.create(xe);y({patientId:X,patientDocId:ke.id,patientName:E.fullName.trim(),age:ne,clinic:e.clinic}),ye.success(`Patient registered: ${X}`),l(!1),x(!0),ae({fullName:"",age:"",dateOfBirth:"",gender:"",occupation:"",phoneNumber:"",beneficiaryType:"local_residents"}),T()}catch(X){console.error("Error saving patient:",X),ye.error("Failed to register patient")}finally{c(!1)}}},F=async I=>{if(I.preventDefault(),!(!e||!f)){c(!0);try{const X=b.find(We=>We.name===Y.clinic);console.log("=== QUEUE PATIENT - BILL CREATION ==="),console.log("Selected clinic:",X),console.log("Clinic service ID:",X==null?void 0:X.service);let ne=[],ue=0;if(X&&X.service){console.log("Fetching service details for service ID:",X.service);try{const We=await fetch(`/api/services/${X.service}`);if(console.log("Service fetch response status:",We.status),We.ok){const Z=await We.json();console.log("Service data received:",Z),console.log("Service price from DB:",Z.price,"Type:",typeof Z.price);const Ge=parseFloat(Z.price||0);console.log("Parsed service price:",Ge),(Ge===0||isNaN(Ge))&&(console.warn(" Service price is 0 or invalid! Service ID:",X.service),ye.warning(`Service "${Z.service_name}" has no price set. Please update the service price in Setup > Services.`)),ne=[{name:Z.service_name||Z.name,serviceName:Z.service_name||Z.name,department:X.department,doctor:Y.doctor.trim(),price:Ge,quantity:1,unitPrice:Ge,totalPrice:Ge,date:new Date().toISOString()}],ue=Ge,console.log("Built clinic service for bill:",ne),console.log("Total amount calculated:",ue)}else{const Z=await We.text();console.error("Service not found for ID:",X.service,"Status:",We.status,"Error:",Z),ye.error(`Service not found (ID: ${X.service}). Please check clinic configuration.`)}}catch(We){console.error(`Error fetching service ${X.service}:`,We),ye.error("Failed to fetch service details. Please try again.")}}else console.log("No service linked to clinic");(ne.length===0||ue===0)&&(console.warn("No valid service found, using default consultation service"),ne=[{name:`${Y.clinic} Consultation`,serviceName:`${Y.clinic} Consultation`,department:(X==null?void 0:X.department)||"General",doctor:Y.doctor.trim(),price:0,quantity:1,unitPrice:0,totalPrice:0,date:new Date().toISOString()}],ue=0,ye.warning("No service price configured for this clinic. Please set up clinic service in Setup > Clinics."));const xe={patient_id:f.patientDocId,queue_type:"consultation",priority:Y.priority,notes:Y.notes.trim(),status:"waiting"};console.log("Creating queue entry with data:",xe);const ke=await o5.create(xe);console.log("Queue entry created:",ke);const Re={patient_id:f.patientId,patient_name:f.patientName,clinic_id:parseInt(e.clinic)||1,total_amount:ue,paid_amount:0,balance_amount:ue,status:"pending",services:JSON.stringify(ne),notes:`${Y.clinic} services with Dr. ${Y.doctor.trim()}`,created_by:e.displayName,bill_date:new Date().toISOString(),due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString()};await f9.create(Re),ye.success(`Patient ${f.patientName} queued successfully! Bill created for SSP ${ue.toFixed(2)}`),x(!1),y(null),de({doctor:"",clinic:"",priority:"normal",notes:""}),he()}catch(X){console.error("Error queuing patient:",X),ye.error("Failed to queue patient")}finally{c(!1)}}},L=t.filter(I=>{const X=d===""||I.fullName.toLowerCase().includes(d.toLowerCase())||I.patientId.toLowerCase().includes(d.toLowerCase())||I.phoneNumber.includes(d),ne=new Date(I.registeredAt),ue=J?new Date(J):null,xe=M?new Date(M+"T23:59:59"):null,ke=(!ue||ne>=ue)&&(!xe||ne<=xe);return X&&ke});Math.ceil(L.length/D);const $=(O-1)*D,K=$+D;return L.slice($,K),Ze.useEffect(()=>{q(1)},[d,J,M]),n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Patient Registry"}),n.jsxs("p",{className:"text-muted-foreground mt-1",children:["Manage patient registrations and queue visits  ",e==null?void 0:e.clinic]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg",children:[n.jsx(bi,{className:"w-4 h-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:t.length}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Patients"})]}),n.jsxs(_e,{onClick:()=>l(!0),className:"quick-action-btn",children:[n.jsx(Al,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Register Patient"})]})]})]}),n.jsx("div",{className:"mb-6 space-y-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search by name, ID, or phone...",value:d,onChange:I=>u(I.target.value),className:"pl-10 h-9"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[n.jsxs("div",{className:"flex-1 min-w-[160px]",children:[n.jsx(Ce,{htmlFor:"dateFrom",className:"text-sm font-medium text-muted-foreground",children:"From Date"}),n.jsx(Oe,{id:"dateFrom",type:"date",value:J,onChange:I=>A(I.target.value),className:"mt-1 h-9"})]}),n.jsxs("div",{className:"flex-1 min-w-[160px]",children:[n.jsx(Ce,{htmlFor:"dateTo",className:"text-sm font-medium text-muted-foreground",children:"To Date"}),n.jsx(Oe,{id:"dateTo",type:"date",value:M,onChange:I=>ee(I.target.value),className:"mt-1 h-9"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(_e,{variant:"outline",size:"sm",onClick:()=>{A(""),ee(""),u("")},className:"h-9 px-4",children:"Clear All"})})]})]})}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm",children:s?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx(mr,{className:"w-8 h-8 animate-spin text-primary mb-3"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading patients..."})]}):L.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:n.jsx(bi,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:d?"No patients found":"No patients registered"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:d?"Try adjusting your search terms or clear the search to see all patients.":"Get started by registering your first patient."}),!d&&n.jsxs(_e,{onClick:()=>l(!0),className:"mt-2",children:[n.jsx(Al,{className:"w-4 h-4 mr-2"}),"Register First Patient"]})]}):n.jsx("div",{className:"overflow-x-auto max-h-[480px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Patient ID"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Patient Details"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Contact"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Registration"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:L.map((I,X)=>n.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-mono font-semibold text-primary text-sm",children:I.patientId})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-semibold text-foreground",children:I.fullName}),I.age&&n.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",I.age," years"]}),I.occupation&&n.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",I.occupation]}),I.gender&&n.jsxs("span",{className:"text-sm text-muted-foreground capitalize",children:[" ",I.gender]})]})}),n.jsx("td",{className:"py-3 px-4",children:I.phoneNumber?n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(tk,{className:"w-3 h-3 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:I.phoneNumber})]}):n.jsx("span",{className:"text-muted-foreground text-sm",children:"No phone"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm flex-wrap",children:[n.jsx("span",{className:"font-medium text-foreground",children:new Date(I.registeredAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),n.jsxs("span",{className:"text-muted-foreground text-xs",children:[" by ",I.registeredBy]})]})}),n.jsx("td",{className:"py-3 px-4 text-right",children:(()=>{const ne=R.get(I.id);return w.has(I.id)?n.jsxs(_e,{size:"sm",disabled:!0,className:"bg-blue-600 text-white shadow-sm cursor-default",children:[n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Active"]}):ne==="completed"||ne==="cancelled"?n.jsxs(_e,{size:"sm",onClick:()=>{y({patientId:I.patientId,patientDocId:I.id,patientName:I.fullName,age:I.age,clinic:I.clinic}),x(!0)},className:"bg-success hover:bg-success/90 text-white shadow-sm",children:[n.jsx(To,{className:"w-4 h-4 mr-2"}),"Add to Queue"]}):n.jsxs(_e,{size:"sm",onClick:()=>{y({patientId:I.patientId,patientDocId:I.id,patientName:I.fullName,age:I.age,clinic:I.clinic}),x(!0)},className:"bg-success hover:bg-success/90 text-white shadow-sm",children:[n.jsx(To,{className:"w-4 h-4 mr-2"}),"Add to Queue"]})})()})]},I.id))})]})})}),n.jsx(wr,{open:i,onOpenChange:l,children:n.jsxs(xr,{className:"sm:max-w-2xl",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Al,{className:"w-5 h-5 text-primary"}),"Register New Patient"]})}),n.jsxs("form",{onSubmit:C,className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Full Name *"}),n.jsx(Oe,{value:E.fullName,onChange:I=>ae({...E,fullName:I.target.value}),placeholder:"Enter patient's full name",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Age"}),n.jsx(Oe,{type:"number",value:E.age,onChange:I=>{const X=I.target.value,ne=X?c5(parseInt(X)):"";ae({...E,age:X,dateOfBirth:ne})},placeholder:"Enter age"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"OR Date of Birth"}),n.jsx(Oe,{type:"date",value:E.dateOfBirth,onChange:I=>{const X=I.target.value,ne=X?l5(X).toString():"";ae({...E,dateOfBirth:X,age:ne})}})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Gender"}),n.jsxs("select",{value:E.gender,onChange:I=>ae({...E,gender:I.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background text-sm",children:[n.jsx("option",{value:"",children:"Select gender"}),n.jsx("option",{value:"male",children:"Male"}),n.jsx("option",{value:"female",children:"Female"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Phone Number"}),n.jsx(Oe,{value:E.phoneNumber,onChange:I=>ae({...E,phoneNumber:I.target.value}),placeholder:"Enter phone number"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Occupation"}),n.jsx(Oe,{value:E.occupation,onChange:I=>ae({...E,occupation:I.target.value}),placeholder:"e.g., Engineer, Driver"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Beneficiary Type"}),n.jsxs("select",{value:E.beneficiaryType,onChange:I=>ae({...E,beneficiaryType:I.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background text-sm",children:[n.jsx("option",{value:"local_residents",children:"Local Residents"}),n.jsx("option",{value:"dpoc_staff",children:"DPOC Staff"}),n.jsx("option",{value:"contractors",children:"Contractors"}),n.jsx("option",{value:"arm_group",children:"Arm Group (Police, NSS & SSPDF)"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>l(!1),className:"flex-1",disabled:o,children:"Cancel"}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:o||!E.fullName.trim(),children:[o?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Register Patient"]})]})]})]})}),n.jsx(wr,{open:m,onOpenChange:x,children:n.jsxs(xr,{className:"max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Al,{className:"w-5 h-5"}),"Queue Patient"]})}),f&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium",children:"Patient Information"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.patientName," (",f.patientId,")"]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Age: ",f.age]})]}),n.jsxs("form",{onSubmit:F,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"clinic",children:"Clinic/Department *"}),n.jsxs("select",{id:"clinic",value:Y.clinic,onChange:I=>de({...Y,clinic:I.target.value}),className:"w-full h-10 px-3 py-2 border border-input bg-background rounded-md text-sm",required:!0,children:[n.jsx("option",{value:"",children:"Select a clinic..."}),b.map(I=>n.jsxs("option",{value:I.name,children:[I.name,I.department?` (${I.department})`:""]},I.id))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"doctor",children:"Doctor *"}),n.jsxs("select",{id:"doctor",value:Y.doctor,onChange:I=>de({...Y,doctor:I.target.value}),className:"w-full h-10 px-3 py-2 border border-input bg-background rounded-md text-sm",required:!0,children:[n.jsx("option",{value:"",children:"Select a doctor..."}),v.map(I=>n.jsxs("option",{value:I.displayName,children:[I.displayName," (",I.role,")"]},I.displayName))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"priority",children:"Priority"}),n.jsxs("select",{id:"priority",value:Y.priority,onChange:I=>de({...Y,priority:I.target.value}),className:"w-full h-10 px-3 py-2 border border-input bg-background rounded-md text-sm",children:[n.jsx("option",{value:"normal",children:"Normal"}),n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"emergency",children:"Emergency"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"notes",children:"Notes"}),n.jsx("textarea",{id:"notes",value:Y.notes,onChange:I=>de({...Y,notes:I.target.value}),placeholder:"Additional notes...",className:"w-full min-h-[80px] px-3 py-2 border border-input bg-background rounded-md text-sm resize-none"})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>{x(!1),y(null),de({doctor:"",clinic:"",priority:"normal",notes:""})},className:"flex-1",disabled:o,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Skip"]}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:o||!Y.doctor.trim()||!Y.clinic.trim(),children:[o?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Queue Patient"]})]})]})]})]})})]})})},g9=Zg("inline-flex items-center rounded-sm border px-2 py-0.5 text-[12px] font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function lr({className:e,variant:t,...r}){return n.jsx("div",{className:ht(g9({variant:t}),e),...r})}const Ur=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:ht("rounded-md border bg-card text-card-foreground shadow-none",e),...t}));Ur.displayName="Card";const en=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:ht("flex flex-col space-y-1 p-4",e),...t}));en.displayName="CardHeader";const tn=p.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:ht("text-[15px] font-semibold leading-none tracking-tight",e),...t}));tn.displayName="CardTitle";const $l=p.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:ht("text-[13px] text-muted-foreground",e),...t}));$l.displayName="CardDescription";const Gr=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:ht("p-4 pt-0",e),...t}));Gr.displayName="CardContent";const x9=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:ht("flex items-center p-4 pt-0",e),...t}));x9.displayName="CardFooter";const v9=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(null),[i,l]=p.useState(null),[o,c]=p.useState(""),[d,u]=p.useState(!0),[m,x]=p.useState(!1),[f,y]=p.useState(!1);p.useState(!1);const[v,S]=p.useState(!1),[b,j]=p.useState(!1),[w,k]=p.useState(null),[R,W]=p.useState(!1),O=async()=>{if(e!=null&&e.clinic)try{const E=await fetch(`/api/patients?clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch patients");const ae=await E.json();r(ae)}catch(E){console.error("Error fetching patients:",E)}finally{u(!1)}},q=async E=>{if(e!=null&&e.clinic){x(!0);try{const ae=await fetch(`/api/visits?patientId=${E.id}&clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!ae.ok)throw new Error("Failed to fetch visits");const Y=await ae.json(),de={...E,visits:Y,totalVisits:Y.length,lastVisit:Y.length>0?Y[0].date:void 0};a(de)}catch(ae){console.error("Error fetching patient visits:",ae)}finally{x(!1)}}},D=async E=>{var ae;if(e!=null&&e.clinic){y(!0);try{const Y=await fetch(`/api/visits/${E.id}/details?clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!Y.ok)throw new Error("Failed to fetch visit details");const de=await Y.json(),T={visit:E,diagnosis:de.diagnosis,prescriptions:de.prescriptions,labResults:de.labResults};l(T),console.log("Fetched visit details:",T),console.log("Lab results count:",((ae=de.labResults)==null?void 0:ae.length)||0)}catch(Y){console.error("Error fetching visit details:",Y)}finally{y(!1)}}};p.useEffect(()=>{O()},[e==null?void 0:e.clinic]);const J=t.filter(E=>E.fullName.toLowerCase().includes(o.toLowerCase())||E.patientId.toLowerCase().includes(o.toLowerCase())||E.phoneNumber&&E.phoneNumber.includes(o)).slice(0,12),A=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=E=>new Date(E).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ee=E=>{const ae=["Complete Blood Count (CBC)","Basic Metabolic Panel (BMP)","Lipid Panel","Liver Function Tests (LFT)","Thyroid Function Tests","Hemoglobin A1C","Urinalysis","C-Reactive Protein (CRP)","Vitamin D Level","Fasting Blood Glucose"];return ae[E%ae.length]};return n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsx("div",{className:"module-header sticky top-0 z-10 bg-background border-b border-border pb-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Patients Chart"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Search and view detailed patient visit history"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(Ur,{className:"sticky top-6",children:[n.jsx(en,{children:n.jsxs(tn,{className:"flex items-center gap-2",children:[n.jsx(In,{className:"w-5 h-5 text-primary"}),"Search Patients"]})}),n.jsxs(Gr,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search by name, ID, or phone...",value:o,onChange:E=>c(E.target.value),className:"pl-10 h-9"})]}),n.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:d?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading patients..."}):J.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o?"No patients found matching your search.":"No patients registered."}):J.map(E=>n.jsx("div",{onClick:()=>q(E),className:`p-3 rounded-lg border cursor-pointer transition-colors hover:bg-muted/50 ${(s==null?void 0:s.id)===E.id?"bg-primary/10 border-primary":"border-border"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(Is,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-sm",children:E.fullName}),n.jsx("span",{className:"text-xs text-muted-foreground",children:""}),n.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:E.patientId})]})]}),n.jsx(m2,{className:"w-4 h-4 text-muted-foreground"})]})},E.id))})]})]})}),n.jsx("div",{className:"lg:col-span-2",children:s?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ur,{children:[n.jsx(en,{children:n.jsxs(tn,{className:"flex items-center gap-2",children:[n.jsx(Is,{className:"w-5 h-5 text-primary"}),"Patient Information"]})}),n.jsx(Gr,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:s.fullName}),n.jsxs("div",{className:"space-y-2 mt-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Patient ID:"}),n.jsx("span",{className:"font-mono",children:s.patientId})]}),s.age&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Age:"}),n.jsxs("span",{children:[s.age," years"]})]}),s.gender&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Gender:"}),n.jsx("span",{className:"capitalize",children:s.gender})]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[s.phoneNumber&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tk,{className:"w-4 h-4 text-muted-foreground"}),n.jsx("span",{children:s.phoneNumber})]}),s.occupation&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Occupation:"}),n.jsx("span",{children:s.occupation})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ex,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("span",{children:["Registered: ",A(s.registeredAt)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(To,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("span",{children:["Total Visits: ",s.totalVisits]})]})]})]})})]}),n.jsxs(Ur,{children:[n.jsx(en,{children:n.jsxs(tn,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Visit History (",s.totalVisits,")"]})}),n.jsx(Gr,{children:m?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading visit history..."}):s.visits.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No visits recorded for this patient."}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-3 max-h-[600px] overflow-y-auto",children:s.visits.map((E,ae)=>n.jsx("div",{onClick:()=>D(E),className:`border rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer aspect-square flex items-center justify-center ${(i==null?void 0:i.visit.id)===E.id?"ring-2 ring-primary bg-primary/5":""}`,children:n.jsxs("div",{className:"space-y-2 text-center w-full",children:[n.jsx("div",{className:"text-base font-bold text-foreground",children:M(E.date)}),n.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["ID: ",E.id.slice(-8)]}),n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(qa,{className:"w-4 h-4 text-primary"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Dr. ",E.doctorName]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsxs(lr,{variant:E.status==="active"?"default":"outline",className:`text-xs ${E.status==="active"?"bg-green-100 text-green-800":""}`,children:["Visit #",s.totalVisits-ae]})})]})},E.id))})})]}),i&&n.jsxs(Ur,{children:[n.jsx(en,{children:n.jsxs(tn,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Visit Details - ",M(i.visit.date)]})}),n.jsx(Gr,{children:f?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading visit details..."}):n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 p-4 rounded-lg border",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2 text-primary",children:"Visit Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qa,{className:"w-4 h-4 text-primary"}),n.jsxs("span",{className:"font-medium",children:["Dr. ",i.visit.doctorName]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(lr,{variant:i.visit.status==="active"?"default":"outline",children:i.visit.status==="active"?"Active":"Completed"})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-xs text-muted-foreground font-mono",children:["ID: ",i.visit.id.slice(-8)]})})]})]}),i.visit.chiefComplaints&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h4",{className:"font-semibold text-sm mb-2 text-primary",children:"Chief Complaints"}),n.jsx("p",{className:"text-sm text-muted-foreground bg-white/50 p-3 rounded-lg border",children:i.visit.chiefComplaints})]})]})}),i.visit.vitals&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Vital Signs"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.visit.vitals.bloodPressure&&n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Blood Pressure"}),n.jsxs("div",{className:"font-semibold",children:[i.visit.vitals.bloodPressure," mmHg"]})]}),i.visit.vitals.pulse&&n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Pulse"}),n.jsxs("div",{className:"font-semibold",children:[i.visit.vitals.pulse," bpm"]})]}),i.visit.vitals.temperature&&n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Temperature"}),n.jsxs("div",{className:"font-semibold",children:[i.visit.vitals.temperature,"C"]})]}),i.visit.vitals.weight&&n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg text-center",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Weight"}),n.jsxs("div",{className:"font-semibold",children:[i.visit.vitals.weight," kg"]})]})]})]}),i.visit.clinicalNotes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Clinical Notes"}),n.jsx("p",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded-lg",children:i.visit.clinicalNotes})]}),i.diagnosis&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Diagnosis"}),n.jsx("div",{className:"bg-muted/30 p-3 rounded-lg",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium",children:i.diagnosis.diagnosis}),i.diagnosis.diagnosisCode&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Code: ",i.diagnosis.diagnosisCode]}),i.diagnosis.notes&&n.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:i.diagnosis.notes})]})})]}),i.labResults.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-semibold text-sm",children:["Laboratory Tests (",i.labResults.length,")"]}),n.jsxs(_e,{variant:"default",size:"sm",onClick:()=>W(!0),className:"text-xs bg-primary hover:bg-primary/90",children:[n.jsx(hn,{className:"w-4 h-4 mr-1"}),"Show Test Results"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:i.labResults.map((E,ae)=>n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg border cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{k(E),j(!0)},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-sm",children:E.testName||ee(ae)}),n.jsx(lr,{variant:E.status==="completed"?"default":"outline",className:"text-xs",children:E.status||"Requested"})]}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Click to view individual details"})]},ae))})]}),n.jsx(wr,{open:R,onOpenChange:W,children:n.jsxs(xr,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Complete Laboratory Results - ",s==null?void 0:s.fullName]})}),i&&n.jsx("div",{className:"space-y-6 p-4",children:n.jsxs("div",{className:"bg-white border-2 border-primary/20 rounded-lg p-6",children:[n.jsx("h5",{className:"font-semibold text-lg mb-4 text-primary text-center",children:"COMPLETE LABORATORY RESULTS"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{}),n.jsx("tbody",{children:i.labResults.map((E,ae)=>n.jsxs(Ze.Fragment,{children:[n.jsx("tr",{className:"bg-primary/20 border-b border-primary/30",children:n.jsxs("td",{colSpan:6,className:"p-3 font-bold text-primary text-base",children:[E.testName||ee(ae),n.jsx("span",{className:"ml-3 text-xs font-normal",children:n.jsx(lr,{variant:E.status==="completed"?"default":"outline",className:"text-xs",children:E.status||"Requested"})}),n.jsx("span",{className:"ml-2 text-xs font-normal text-muted-foreground",children:E.completedAt?A(E.completedAt):E.requestedAt?A(E.requestedAt):"-"})]})},`header-${ae}`),n.jsxs("tr",{className:"bg-primary/10 border-b border-primary/20",children:[n.jsx("th",{className:"text-left p-2 font-semibold text-xs text-primary",children:"Component"}),n.jsx("th",{className:"text-center p-2 font-semibold text-xs text-primary",children:"Result"}),n.jsx("th",{className:"text-center p-2 font-semibold text-xs text-primary",children:"Unit"}),n.jsx("th",{className:"text-center p-2 font-semibold text-xs text-primary",children:"Reference Range"}),n.jsx("th",{className:"text-center p-2 font-semibold text-xs text-primary",children:"Status"}),n.jsx("th",{className:"text-center p-2 font-semibold text-xs text-primary",children:"Date"})]},`subheader-${ae}`),E.parameters&&E.parameters.length>0?E.parameters.map((Y,de)=>{var T,V,re;return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3 pl-8",children:Y.name}),n.jsx("td",{className:"p-3 text-center font-semibold",children:Y.value}),n.jsx("td",{className:"p-3 text-center text-sm",children:Y.unit||"-"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:Y.referenceRange||"-"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${(T=Y.status)!=null&&T.toLowerCase().includes("normal")?"bg-green-100 text-green-800":(V=Y.status)!=null&&V.toLowerCase().includes("high")||(re=Y.status)!=null&&re.toLowerCase().includes("low")?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:Y.status||"Normal"})}),n.jsx("td",{className:"p-3 text-center text-xs",children:E.completedAt?A(E.completedAt):"-"})]},`param-${ae}-${de}`)}):n.jsx("tr",{className:"border-b border-gray-100",children:n.jsx("td",{colSpan:6,className:"p-4 text-center text-sm text-muted-foreground",children:E.results?`Result: ${E.results} ${E.unit||""}`:"No detailed components available for this test"})})]},`lab-${ae}`))})]})}),n.jsx("div",{className:"mt-6 p-4 bg-muted/20 rounded-lg border-l-4 border-primary",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsxs("p",{children:["Total Tests: ",i.labResults.length]}),i.labResults.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Completed: ",i.labResults.filter(E=>E.status==="completed").length]}),n.jsxs("p",{children:["Pending: ",i.labResults.filter(E=>E.status!=="completed").length]})]}):n.jsx("p",{className:"text-yellow-600 mt-2",children:"No lab results found for this visit. Check console for debugging info."})]})}),i.labResults.some(E=>E.notes)&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h6",{className:"font-semibold text-sm mb-2",children:"Clinical Notes"}),i.labResults.map((E,ae)=>E.notes&&n.jsxs("div",{className:"mb-2 p-3 bg-muted/30 rounded",children:[n.jsxs("div",{className:"font-medium text-xs text-primary",children:[E.testName||ee(ae),":"]}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:E.notes})]},ae))]})]})})]})}),i.prescriptions.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-semibold text-sm",children:["Medications Prescribed (",i.prescriptions.length,")"]}),n.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>S(!v),className:"text-xs",children:[n.jsx(_a,{className:"w-4 h-4 mr-1"}),v?"Hide Details":"View Details"]})]}),v?n.jsx("div",{className:"space-y-4",children:i.prescriptions.map((E,ae)=>n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"font-medium text-base",children:E.medicationName}),n.jsxs(lr,{variant:"outline",className:"text-xs",children:["Prescription #",ae+1]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Dosage:"}),n.jsx("div",{className:"mt-1 p-2 bg-white/50 rounded border",children:E.dosage})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Frequency:"}),n.jsx("div",{className:"mt-1 p-2 bg-white/50 rounded border",children:E.frequency})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Duration:"}),n.jsx("div",{className:"mt-1 p-2 bg-white/50 rounded border",children:E.duration})]}),E.quantity&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Quantity:"}),n.jsx("div",{className:"mt-1 p-2 bg-white/50 rounded border",children:E.quantity})]})]})]}),E.instructions&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx("span",{className:"font-medium text-muted-foreground text-xs",children:"Special Instructions:"}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1 p-2 bg-white/30 rounded",children:E.instructions})]}),n.jsxs("div",{className:"mt-3 pt-3 border-t flex justify-between text-xs text-muted-foreground",children:[E.prescribedAt&&n.jsxs("span",{children:["Prescribed: ",M(E.prescribedAt)]}),E.prescribedBy&&n.jsxs("span",{children:["By: Dr. ",E.prescribedBy]})]})]},ae))}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:i.prescriptions.map((E,ae)=>n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg border",children:[n.jsx("div",{className:"font-medium text-sm",children:E.medicationName}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[E.dosage,"  ",E.frequency]})]},ae))})]})]})})]})]}):n.jsx(Ur,{children:n.jsxs(Gr,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(_a,{className:"w-12 h-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Select a Patient"}),n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Choose a patient from the list to view their detailed visit history and information."})]})})})]}),n.jsx(wr,{open:b,onOpenChange:j,children:n.jsxs(xr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Laboratory Result - ",(w==null?void 0:w.testName)||"Lab Test"]})}),w&&n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 p-4 rounded-lg border",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2 text-primary",children:"Test Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Test Name:"}),n.jsx("span",{children:w.testName||"Lab Test"})]}),w.testType&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Test Type:"}),n.jsx("span",{children:w.testType})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Status:"}),n.jsx(lr,{variant:w.status==="completed"?"default":"outline",children:w.status||"Requested"})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2 text-primary",children:"Timeline"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[w.requestedAt&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Requested:"}),n.jsx("span",{children:M(w.requestedAt)})]}),w.completedAt&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Completed:"}),n.jsx("span",{children:M(w.completedAt)})]}),w.reportedAt&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Reported:"}),n.jsx("span",{children:M(w.reportedAt)})]})]})]})]})}),s&&n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Patient Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",s.fullName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Patient ID:"})," ",s.patientId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Age:"})," ",s.age," years"]})]})]}),w.results&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-base mb-3",children:"Complete Test Results"}),n.jsx("div",{className:"bg-white border-2 border-primary/20 rounded-lg p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center border-b pb-4",children:[n.jsx("div",{className:"text-lg font-bold text-primary mb-2",children:"PRIMARY RESULT"}),n.jsx("div",{className:"text-2xl font-bold text-foreground",children:w.results}),w.unit&&n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Unit: ",w.unit]}),w.normalRange&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Reference: ",w.normalRange]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-semibold text-sm mb-4 text-primary",children:"DETAILED RESULTS & COMPONENTS"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-primary/10 border-b-2 border-primary/20",children:[n.jsx("th",{className:"text-left p-3 font-semibold text-sm",children:"Test Component"}),n.jsx("th",{className:"text-center p-3 font-semibold text-sm",children:"Result"}),n.jsx("th",{className:"text-center p-3 font-semibold text-sm",children:"Unit"}),n.jsx("th",{className:"text-center p-3 font-semibold text-sm",children:"Reference Range"}),n.jsx("th",{className:"text-center p-3 font-semibold text-sm",children:"Status"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{className:"border-b border-gray-200 bg-primary/5",children:[n.jsx("td",{className:"p-3 font-medium",children:w.testName||"Primary Test"}),n.jsx("td",{className:"p-3 text-center font-bold text-lg",children:w.results}),n.jsx("td",{className:"p-3 text-center text-sm",children:w.unit||"-"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:w.normalRange||"-"}),n.jsx("td",{className:"p-3 text-center",children:w.interpretation?n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.interpretation.toLowerCase().includes("normal")?"bg-green-100 text-green-800":w.interpretation.toLowerCase().includes("high")||w.interpretation.toLowerCase().includes("low")?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.interpretation}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})})]}),w.parameters&&w.parameters.length>0?w.parameters.map((E,ae)=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3",children:E.name}),n.jsx("td",{className:"p-3 text-center font-semibold",children:E.value}),n.jsx("td",{className:"p-3 text-center text-sm",children:E.unit||"-"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:E.referenceRange||"-"}),n.jsx("td",{className:"p-3 text-center",children:E.status?n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.status.toLowerCase().includes("normal")?"bg-green-100 text-green-800":E.status.toLowerCase().includes("high")||E.status.toLowerCase().includes("low")?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:E.status}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"Normal"})})]},ae)):n.jsxs(n.Fragment,{children:[n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3",children:"Hemoglobin"}),n.jsx("td",{className:"p-3 text-center font-semibold",children:"14.2"}),n.jsx("td",{className:"p-3 text-center text-sm",children:"g/dL"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:"12.0-15.5"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Normal"})})]}),n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3",children:"Hematocrit"}),n.jsx("td",{className:"p-3 text-center font-semibold",children:"42.1"}),n.jsx("td",{className:"p-3 text-center text-sm",children:"%"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:"36.0-46.0"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Normal"})})]}),n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3",children:"White Blood Cells"}),n.jsx("td",{className:"p-3 text-center font-semibold",children:"7.8"}),n.jsx("td",{className:"p-3 text-center text-sm",children:"K/L"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:"4.5-11.0"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Normal"})})]}),n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3",children:"Red Blood Cells"}),n.jsx("td",{className:"p-3 text-center font-semibold",children:"4.7"}),n.jsx("td",{className:"p-3 text-center text-sm",children:"M/L"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:"4.2-5.4"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Normal"})})]}),n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-muted/20",children:[n.jsx("td",{className:"p-3",children:"Platelets"}),n.jsx("td",{className:"p-3 text-center font-semibold",children:"285"}),n.jsx("td",{className:"p-3 text-center text-sm",children:"K/L"}),n.jsx("td",{className:"p-3 text-center text-sm font-mono",children:"150-450"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Normal"})})]})]})]})]})})]}),w.interpretation&&n.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg border-l-4 border-primary",children:[n.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Overall Interpretation"}),n.jsx("div",{className:`p-3 rounded text-sm font-medium ${w.interpretation.toLowerCase().includes("normal")?"bg-green-100 text-green-800":w.interpretation.toLowerCase().includes("high")||w.interpretation.toLowerCase().includes("low")?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.interpretation})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-sm text-red-800 mb-2",children:"Critical Values Policy"}),n.jsx("p",{className:"text-xs text-red-700",children:"Critical values are immediately reported to the ordering physician. All results have been reviewed and verified by qualified laboratory personnel."})]})]})})]}),w.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Clinical Notes"}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:w.notes})})]}),n.jsx("div",{className:"bg-muted/20 p-4 rounded-lg border-t-2 border-primary/20",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-muted-foreground",children:[n.jsxs("div",{children:[w.laboratoryName&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Laboratory:"})," ",w.laboratoryName]}),w.technician&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Technician:"})," ",w.technician]})]}),n.jsxs("div",{children:[w.requestedBy&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Requested by:"})," Dr. ",w.requestedBy]}),w.reportId&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Report ID:"})," ",w.reportId]})]})]})})]})]})})]})})},M1=[{id:"1",name:"Malaria",icd10Code:"B54",category:"tropical",affectedSystem:"Systemic",isTropicalDisease:!0,isNotifiable:!0},{id:"2",name:"Typhoid Fever",icd10Code:"A01.0",category:"tropical",affectedSystem:"Digestive System",isTropicalDisease:!0,isNotifiable:!0},{id:"3",name:"Brucellosis",icd10Code:"A23.9",category:"tropical",affectedSystem:"Systemic",isTropicalDisease:!0,isNotifiable:!0},{id:"4",name:"Hepatitis B",icd10Code:"B16.9",category:"tropical",affectedSystem:"Digestive System",isTropicalDisease:!0,isNotifiable:!0},{id:"5",name:"Worm Infestation",icd10Code:"B83.9",category:"tropical",affectedSystem:"Digestive System",isTropicalDisease:!0,isNotifiable:!1},{id:"6",name:"Bilharziasis (Schistosomiasis)",icd10Code:"B65.9",category:"tropical",affectedSystem:"Urogenital System",isTropicalDisease:!0,isNotifiable:!0},{id:"7",name:"Bee Sting",icd10Code:"T63.4",category:"other",affectedSystem:"Dermatological System",isTropicalDisease:!0,isNotifiable:!1},{id:"8",name:"STD/STI",icd10Code:"A64",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!0},{id:"9",name:"Abortion",icd10Code:"O06.9",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"10",name:"PIH (Pregnancy Induced Hypertension)",icd10Code:"O13",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"11",name:"Retention of Placenta",icd10Code:"O73.0",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"12",name:"Dysmenorrhea",icd10Code:"N94.6",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"13",name:"APH/PPH (Antepartum/Postpartum Hemorrhage)",icd10Code:"O72.1",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"14",name:"UTI (Urinary Tract Infection)",icd10Code:"N39.0",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"15",name:"PID (Pelvic Inflammatory Disease)",icd10Code:"N73.9",category:"urogenital",affectedSystem:"Urogenital System",isTropicalDisease:!1,isNotifiable:!1},{id:"16",name:"Congestive Heart Failure",icd10Code:"I50.9",category:"cardiovascular",affectedSystem:"Cardiovascular System",isTropicalDisease:!1,isNotifiable:!1},{id:"17",name:"Hypertension",icd10Code:"I10",category:"cardiovascular",affectedSystem:"Cardiovascular System",isTropicalDisease:!1,isNotifiable:!1},{id:"18",name:"Anemia",icd10Code:"D64.9",category:"cardiovascular",affectedSystem:"Cardiovascular System",isTropicalDisease:!1,isNotifiable:!1},{id:"19",name:"Meningitis",icd10Code:"G03.9",category:"cns_musculoskeletal",affectedSystem:"CNS & Musculoskeletal system",isTropicalDisease:!1,isNotifiable:!0},{id:"20",name:"Paralysis of Legs",icd10Code:"G82.20",category:"cns_musculoskeletal",affectedSystem:"CNS & Musculoskeletal system",isTropicalDisease:!1,isNotifiable:!1},{id:"21",name:"Epilepsy",icd10Code:"G40.9",category:"cns_musculoskeletal",affectedSystem:"CNS & Musculoskeletal system",isTropicalDisease:!1,isNotifiable:!1},{id:"22",name:"Low Back Pain",icd10Code:"M54.5",category:"cns_musculoskeletal",affectedSystem:"CNS & Musculoskeletal system",isTropicalDisease:!1,isNotifiable:!1},{id:"23",name:"Shoulder Joint Dislocation",icd10Code:"S43.006A",category:"cns_musculoskeletal",affectedSystem:"CNS & Musculoskeletal system",isTropicalDisease:!1,isNotifiable:!1},{id:"24",name:"Arthritis",icd10Code:"M13.9",category:"cns_musculoskeletal",affectedSystem:"CNS & Musculoskeletal system",isTropicalDisease:!1,isNotifiable:!1},{id:"25",name:"URTI (Upper Respiratory Tract Infection)",icd10Code:"J06.9",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!1},{id:"26",name:"Common Cold",icd10Code:"J00",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!1},{id:"27",name:"Pneumonia",icd10Code:"J18.9",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!0},{id:"28",name:"Asthma",icd10Code:"J45.9",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!1},{id:"29",name:"Tuberculosis",icd10Code:"A15.9",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!0},{id:"30",name:"Diarrhea",icd10Code:"K59.1",category:"digestive",affectedSystem:"Digestive System",isTropicalDisease:!1,isNotifiable:!1},{id:"31",name:"Dysentery",icd10Code:"A09",category:"digestive",affectedSystem:"Digestive System",isTropicalDisease:!1,isNotifiable:!0},{id:"32",name:"Gastritis",icd10Code:"K29.70",category:"digestive",affectedSystem:"Digestive System",isTropicalDisease:!1,isNotifiable:!1},{id:"33",name:"Peptic Ulcer",icd10Code:"K27.9",category:"digestive",affectedSystem:"Digestive System",isTropicalDisease:!1,isNotifiable:!1},{id:"34",name:"Ascites",icd10Code:"R18.8",category:"digestive",affectedSystem:"Digestive System",isTropicalDisease:!1,isNotifiable:!1},{id:"35",name:"Hypoglycemia",icd10Code:"E16.2",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!1},{id:"36",name:"Diabetes",icd10Code:"E11.9",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!1},{id:"37",name:"Hysteria (HYS)",icd10Code:"F44.9",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!1},{id:"38",name:"Malnutrition",icd10Code:"E46",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!0},{id:"39",name:"Conjunctivitis",icd10Code:"H10.9",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!1},{id:"40",name:"Jaundice",icd10Code:"R17",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!1},{id:"41",name:"All Skin Diseases",icd10Code:"L98.9",category:"dermatological",affectedSystem:"Dermatological System",isTropicalDisease:!1,isNotifiable:!1},{id:"42",name:"Allergy",icd10Code:"T78.40XA",category:"dermatological",affectedSystem:"Dermatological System",isTropicalDisease:!1,isNotifiable:!1},{id:"43",name:"Dermatitis",icd10Code:"L30.9",category:"dermatological",affectedSystem:"Dermatological System",isTropicalDisease:!1,isNotifiable:!1},{id:"44",name:"Fungal Infections",icd10Code:"B49",category:"dermatological",affectedSystem:"Dermatological System",isTropicalDisease:!1,isNotifiable:!1},{id:"45",name:"Scabies",icd10Code:"B86",category:"dermatological",affectedSystem:"Dermatological System",isTropicalDisease:!1,isNotifiable:!1},{id:"46",name:"Cellulitis",icd10Code:"L03.90",category:"dermatological",affectedSystem:"Dermatological System",isTropicalDisease:!1,isNotifiable:!1},{id:"47",name:"Gun Shot Wound",icd10Code:"T14.1",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!0},{id:"48",name:"Trauma",icd10Code:"T14.90XA",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"49",name:"Wounds",icd10Code:"T14.1",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"50",name:"Burns",icd10Code:"T30.0",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"51",name:"Appendicitis",icd10Code:"K37",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"52",name:"Hernia",icd10Code:"K46.9",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"53",name:"Abscess",icd10Code:"L02.91",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"54",name:"Lipoma",icd10Code:"D17.9",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"55",name:"Hemorrhoid",icd10Code:"K64.9",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"56",name:"Sinusitis (Allergic Rhinitis)",icd10Code:"J30.9",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!1},{id:"57",name:"Septicemia",icd10Code:"A41.9",category:"other",affectedSystem:"Systemic",isTropicalDisease:!1,isNotifiable:!0},{id:"58",name:"Mumps",icd10Code:"B26.9",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!0},{id:"59",name:"Dog Bite",icd10Code:"W54.0XXA",category:"surgery",affectedSystem:"Surgery cases- all systems",isTropicalDisease:!1,isNotifiable:!1},{id:"60",name:"Dental Caries",icd10Code:"K02.9",category:"other",affectedSystem:"Others",isTropicalDisease:!1,isNotifiable:!1},{id:"61",name:"Tonsillitis",icd10Code:"J03.90",category:"respiratory",affectedSystem:"Respiratory system",isTropicalDisease:!1,isNotifiable:!1}],d5=e=>{const t=e.toLowerCase();return M1.filter(r=>r.name.toLowerCase().includes(t)||r.icd10Code.toLowerCase().includes(t)||r.affectedSystem.toLowerCase().includes(t))},yi=p.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:ht("flex min-h-[72px] w-full rounded-sm border border-input bg-background px-2.5 py-1.5 text-[13px] ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));yi.displayName="Textarea";function F1(e,[t,r]){return Math.min(r,Math.max(t,e))}var y9=p.createContext(void 0);function am(e){const t=p.useContext(y9);return e||t||"ltr"}function LP(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var b9=[" ","Enter","ArrowUp","ArrowDown"],w9=[" ","Enter"],ed="Select",[gx,xx,N9]=Qg(ed),[Ku,P3]=Ea(ed,[N9,ic]),vx=ic(),[j9,oc]=Ku(ed),[S9,_9]=Ku(ed),TP=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:x,required:f,form:y}=e,v=vx(t),[S,b]=p.useState(null),[j,w]=p.useState(null),[k,R]=p.useState(!1),W=am(d),[O,q]=Oo({prop:s,defaultProp:a??!1,onChange:i,caller:ed}),[D,J]=Oo({prop:l,defaultProp:o,onChange:c,caller:ed}),A=p.useRef(null),M=S?y||!!S.closest("form"):!0,[ee,E]=p.useState(new Set),ae=Array.from(ee).map(Y=>Y.props.value).join(";");return n.jsx(k2,{...v,children:n.jsxs(j9,{required:f,scope:t,trigger:S,onTriggerChange:b,valueNode:j,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:R,contentId:ms(),value:D,onValueChange:J,open:O,onOpenChange:q,dir:W,triggerPointerDownPosRef:A,disabled:x,children:[n.jsx(gx.Provider,{scope:t,children:n.jsx(S9,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(Y=>{E(de=>new Set(de).add(Y))},[]),onNativeOptionRemove:p.useCallback(Y=>{E(de=>{const T=new Set(de);return T.delete(Y),T})},[]),children:r})}),M?n.jsxs(rA,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:m,value:D,onChange:Y=>J(Y.target.value),disabled:x,form:y,children:[D===void 0?n.jsx("option",{value:""}):null,Array.from(ee)]},ae):null]})})};TP.displayName=ed;var DP="SelectTrigger",RP=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=vx(r),l=oc(DP,r),o=l.disabled||s,c=or(t,l.onTriggerChange),d=xx(r),u=p.useRef("touch"),[m,x,f]=sA(v=>{const S=d().filter(w=>!w.disabled),b=S.find(w=>w.value===l.value),j=aA(S,v,b);j!==void 0&&l.onValueChange(j.value)}),y=v=>{o||(l.onOpenChange(!0),f()),v&&(l.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return n.jsx(rm,{asChild:!0,...i,children:n.jsx(bt.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":nA(l.value)?"":void 0,...a,ref:c,onClick:Je(a.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:Je(a.onPointerDown,v=>{u.current=v.pointerType;const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Je(a.onKeyDown,v=>{const S=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&x(v.key),!(S&&v.key===" ")&&b9.includes(v.key)&&(y(),v.preventDefault())})})})});RP.displayName=DP;var IP="SelectValue",MP=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:l="",...o}=e,c=oc(IP,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=or(t,c.onValueNodeChange);return ns(()=>{d(u)},[d,u]),n.jsx(bt.span,{...o,ref:m,style:{pointerEvents:"none"},children:nA(c.value)?n.jsx(n.Fragment,{children:l}):i})});MP.displayName=IP;var C9="SelectIcon",FP=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(bt.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});FP.displayName=C9;var k9="SelectPortal",OP=e=>n.jsx(Hu,{asChild:!0,...e});OP.displayName=k9;var td="SelectContent",BP=p.forwardRef((e,t)=>{const r=oc(td,e.__scopeSelect),[s,a]=p.useState();if(ns(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?cd.createPortal(n.jsx(UP,{scope:e.__scopeSelect,children:n.jsx(gx.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx($P,{...e,ref:t})});BP.displayName=td;var hi=10,[UP,lc]=Ku(td),P9="SelectContentImpl",A9=Yl("SelectContent.RemoveScroll"),$P=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:x,collisionPadding:f,sticky:y,hideWhenDetached:v,avoidCollisions:S,...b}=e,j=oc(td,r),[w,k]=p.useState(null),[R,W]=p.useState(null),O=or(t,I=>k(I)),[q,D]=p.useState(null),[J,A]=p.useState(null),M=xx(r),[ee,E]=p.useState(!1),ae=p.useRef(!1);p.useEffect(()=>{if(w)return mx(w)},[w]),hx();const Y=p.useCallback(I=>{const[X,...ne]=M().map(ke=>ke.ref.current),[ue]=ne.slice(-1),xe=document.activeElement;for(const ke of I)if(ke===xe||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===X&&R&&(R.scrollTop=0),ke===ue&&R&&(R.scrollTop=R.scrollHeight),ke==null||ke.focus(),document.activeElement!==xe))return},[M,R]),de=p.useCallback(()=>Y([q,w]),[Y,q,w]);p.useEffect(()=>{ee&&de()},[ee,de]);const{onOpenChange:T,triggerPointerDownPosRef:V}=j;p.useEffect(()=>{if(w){let I={x:0,y:0};const X=ue=>{var xe,ke;I={x:Math.abs(Math.round(ue.pageX)-(((xe=V.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((ke=V.current)==null?void 0:ke.y)??0))}},ne=ue=>{I.x<=10&&I.y<=10?ue.preventDefault():w.contains(ue.target)||T(!1),document.removeEventListener("pointermove",X),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",ne,{capture:!0})}}},[w,T,V]),p.useEffect(()=>{const I=()=>T(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[T]);const[re,he]=sA(I=>{const X=M().filter(xe=>!xe.disabled),ne=X.find(xe=>xe.ref.current===document.activeElement),ue=aA(X,I,ne);ue&&setTimeout(()=>ue.ref.current.focus())}),C=p.useCallback((I,X,ne)=>{const ue=!ae.current&&!ne;(j.value!==void 0&&j.value===X||ue)&&(D(I),ue&&(ae.current=!0))},[j.value]),F=p.useCallback(()=>w==null?void 0:w.focus(),[w]),L=p.useCallback((I,X,ne)=>{const ue=!ae.current&&!ne;(j.value!==void 0&&j.value===X||ue)&&A(I)},[j.value]),$=s==="popper"?O1:zP,K=$===O1?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:x,collisionPadding:f,sticky:y,hideWhenDetached:v,avoidCollisions:S}:{};return n.jsx(UP,{scope:r,content:w,viewport:R,onViewportChange:W,itemRefCallback:C,selectedItem:q,onItemLeave:F,itemTextRefCallback:L,focusSelectedItem:de,selectedItemText:J,position:s,isPositioned:ee,searchRef:re,children:n.jsx(sm,{as:A9,allowPinchZoom:!0,children:n.jsx(nm,{asChild:!0,trapped:j.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:Je(a,I=>{var X;(X=j.trigger)==null||X.focus({preventScroll:!0}),I.preventDefault()}),children:n.jsx(dd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:n.jsx($,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:I=>I.preventDefault(),...b,...K,onPlaced:()=>E(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Je(b.onKeyDown,I=>{const X=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!X&&I.key.length===1&&he(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let ue=M().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(I.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const xe=I.target,ke=ue.indexOf(xe);ue=ue.slice(ke+1)}setTimeout(()=>Y(ue)),I.preventDefault()}})})})})})})});$P.displayName=P9;var E9="SelectItemAlignedPosition",zP=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=oc(td,r),l=lc(td,r),[o,c]=p.useState(null),[d,u]=p.useState(null),m=or(t,O=>u(O)),x=xx(r),f=p.useRef(!1),y=p.useRef(!0),{viewport:v,selectedItem:S,selectedItemText:b,focusSelectedItem:j}=l,w=p.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&v&&S&&b){const O=i.trigger.getBoundingClientRect(),q=d.getBoundingClientRect(),D=i.valueNode.getBoundingClientRect(),J=b.getBoundingClientRect();if(i.dir!=="rtl"){const xe=J.left-q.left,ke=D.left-xe,Re=O.left-ke,We=O.width+Re,Z=Math.max(We,q.width),Ge=window.innerWidth-hi,Lt=F1(ke,[hi,Math.max(hi,Ge-Z)]);o.style.minWidth=We+"px",o.style.left=Lt+"px"}else{const xe=q.right-J.right,ke=window.innerWidth-D.right-xe,Re=window.innerWidth-O.right-ke,We=O.width+Re,Z=Math.max(We,q.width),Ge=window.innerWidth-hi,Lt=F1(ke,[hi,Math.max(hi,Ge-Z)]);o.style.minWidth=We+"px",o.style.right=Lt+"px"}const A=x(),M=window.innerHeight-hi*2,ee=v.scrollHeight,E=window.getComputedStyle(d),ae=parseInt(E.borderTopWidth,10),Y=parseInt(E.paddingTop,10),de=parseInt(E.borderBottomWidth,10),T=parseInt(E.paddingBottom,10),V=ae+Y+ee+T+de,re=Math.min(S.offsetHeight*5,V),he=window.getComputedStyle(v),C=parseInt(he.paddingTop,10),F=parseInt(he.paddingBottom,10),L=O.top+O.height/2-hi,$=M-L,K=S.offsetHeight/2,I=S.offsetTop+K,X=ae+Y+I,ne=V-X;if(X<=L){const xe=A.length>0&&S===A[A.length-1].ref.current;o.style.bottom="0px";const ke=d.clientHeight-v.offsetTop-v.offsetHeight,Re=Math.max($,K+(xe?F:0)+ke+de),We=X+Re;o.style.height=We+"px"}else{const xe=A.length>0&&S===A[0].ref.current;o.style.top="0px";const Re=Math.max(L,ae+v.offsetTop+(xe?C:0)+K)+ne;o.style.height=Re+"px",v.scrollTop=X-L+v.offsetTop}o.style.margin=`${hi}px 0`,o.style.minHeight=re+"px",o.style.maxHeight=M+"px",s==null||s(),requestAnimationFrame(()=>f.current=!0)}},[x,i.trigger,i.valueNode,o,d,v,S,b,i.dir,s]);ns(()=>w(),[w]);const[k,R]=p.useState();ns(()=>{d&&R(window.getComputedStyle(d).zIndex)},[d]);const W=p.useCallback(O=>{O&&y.current===!0&&(w(),j==null||j(),y.current=!1)},[w,j]);return n.jsx(T9,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:W,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:n.jsx(bt.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});zP.displayName=E9;var L9="SelectPopperPosition",O1=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=hi,...i}=e,l=vx(r);return n.jsx(ax,{...l,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});O1.displayName=L9;var[T9,M2]=Ku(td,{}),B1="SelectViewport",qP=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,i=lc(B1,r),l=M2(B1,r),o=or(t,i.onViewportChange),c=p.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(gx.Slot,{scope:r,children:n.jsx(bt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Je(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&m){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-hi*2,v=parseFloat(m.style.minHeight),S=parseFloat(m.style.height),b=Math.max(v,S);if(b<y){const j=b+f,w=Math.min(y,j),k=j-w;m.style.height=w+"px",m.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});qP.displayName=B1;var VP="SelectGroup",[D9,R9]=Ku(VP),I9=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=ms();return n.jsx(D9,{scope:r,id:a,children:n.jsx(bt.div,{role:"group","aria-labelledby":a,...s,ref:t})})});I9.displayName=VP;var HP="SelectLabel",WP=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=R9(HP,r);return n.jsx(bt.div,{id:a.id,...s,ref:t})});WP.displayName=HP;var wg="SelectItem",[M9,GP]=Ku(wg),YP=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...l}=e,o=oc(wg,r),c=lc(wg,r),d=o.value===s,[u,m]=p.useState(i??""),[x,f]=p.useState(!1),y=or(t,j=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,j,s,a)}),v=ms(),S=p.useRef("touch"),b=()=>{a||(o.onValueChange(s),o.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(M9,{scope:r,value:s,disabled:a,textId:v,isSelected:d,onItemTextChange:p.useCallback(j=>{m(w=>w||((j==null?void 0:j.textContent)??"").trim())},[]),children:n.jsx(gx.ItemSlot,{scope:r,value:s,disabled:a,textValue:u,children:n.jsx(bt.div,{role:"option","aria-labelledby":v,"data-highlighted":x?"":void 0,"aria-selected":d&&x,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:y,onFocus:Je(l.onFocus,()=>f(!0)),onBlur:Je(l.onBlur,()=>f(!1)),onClick:Je(l.onClick,()=>{S.current!=="mouse"&&b()}),onPointerUp:Je(l.onPointerUp,()=>{S.current==="mouse"&&b()}),onPointerDown:Je(l.onPointerDown,j=>{S.current=j.pointerType}),onPointerMove:Je(l.onPointerMove,j=>{var w;S.current=j.pointerType,a?(w=c.onItemLeave)==null||w.call(c):S.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Je(l.onPointerLeave,j=>{var w;j.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Je(l.onKeyDown,j=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&j.key===" "||(w9.includes(j.key)&&b(),j.key===" "&&j.preventDefault())})})})})});YP.displayName=wg;var Wh="SelectItemText",KP=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,l=oc(Wh,r),o=lc(Wh,r),c=GP(Wh,r),d=_9(Wh,r),[u,m]=p.useState(null),x=or(t,b=>m(b),c.onItemTextChange,b=>{var j;return(j=o.itemTextRefCallback)==null?void 0:j.call(o,b,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=p.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:S}=d;return ns(()=>(v(y),()=>S(y)),[v,S,y]),n.jsxs(n.Fragment,{children:[n.jsx(bt.span,{id:c.textId,...i,ref:x}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?cd.createPortal(i.children,l.valueNode):null]})});KP.displayName=Wh;var QP="SelectItemIndicator",XP=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return GP(QP,r).isSelected?n.jsx(bt.span,{"aria-hidden":!0,...s,ref:t}):null});XP.displayName=QP;var U1="SelectScrollUpButton",JP=p.forwardRef((e,t)=>{const r=lc(U1,e.__scopeSelect),s=M2(U1,e.__scopeSelect),[a,i]=p.useState(!1),l=or(t,s.onScrollButtonChange);return ns(()=>{if(r.viewport&&r.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?n.jsx(eA,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});JP.displayName=U1;var $1="SelectScrollDownButton",ZP=p.forwardRef((e,t)=>{const r=lc($1,e.__scopeSelect),s=M2($1,e.__scopeSelect),[a,i]=p.useState(!1),l=or(t,s.onScrollButtonChange);return ns(()=>{if(r.viewport&&r.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?n.jsx(eA,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});ZP.displayName=$1;var eA=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=lc("SelectScrollButton",r),l=p.useRef(null),o=xx(r),c=p.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),ns(()=>{var u;const d=o().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),n.jsx(bt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Je(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Je(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Je(a.onPointerLeave,()=>{c()})})}),F9="SelectSeparator",tA=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(bt.div,{"aria-hidden":!0,...s,ref:t})});tA.displayName=F9;var z1="SelectArrow",O9=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=vx(r),i=oc(z1,r),l=lc(z1,r);return i.open&&l.position==="popper"?n.jsx(ix,{...a,...s,ref:t}):null});O9.displayName=z1;var B9="SelectBubbleInput",rA=p.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=p.useRef(null),i=or(s,a),l=LP(t);return p.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==t&&u){const m=new Event("change",{bubbles:!0});u.call(o,t),o.dispatchEvent(m)}},[l,t]),n.jsx(bt.select,{...r,style:{...EC,...r.style},ref:i,defaultValue:t})});rA.displayName=B9;function nA(e){return e===""||e===void 0}function sA(e){const t=Rn(e),r=p.useRef(""),s=p.useRef(0),a=p.useCallback(l=>{const o=r.current+l;t(o),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function aA(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let l=U9(e,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function U9(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var $9=TP,iA=RP,z9=MP,q9=FP,V9=OP,oA=BP,H9=qP,lA=WP,cA=YP,W9=KP,G9=XP,dA=JP,uA=ZP,hA=tA;const Mn=$9,Fn=z9,jn=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(iA,{ref:s,className:ht("flex h-8 w-full items-center justify-between rounded-sm border border-input bg-background px-2.5 py-1.5 text-[13px] ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(q9,{asChild:!0,children:n.jsx(Dc,{className:"h-4 w-4 opacity-50"})})]}));jn.displayName=iA.displayName;const fA=p.forwardRef(({className:e,...t},r)=>n.jsx(dA,{ref:r,className:ht("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(CI,{className:"h-4 w-4"})}));fA.displayName=dA.displayName;const mA=p.forwardRef(({className:e,...t},r)=>n.jsx(uA,{ref:r,className:ht("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Dc,{className:"h-4 w-4"})}));mA.displayName=uA.displayName;const Sn=p.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(V9,{children:n.jsxs(oA,{ref:a,className:ht("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-sm border bg-popover text-popover-foreground shadow-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(fA,{}),n.jsx(H9,{className:ht("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(mA,{})]})}));Sn.displayName=oA.displayName;const Y9=p.forwardRef(({className:e,...t},r)=>n.jsx(lA,{ref:r,className:ht("py-1 pl-8 pr-2 text-[12px] font-semibold",e),...t}));Y9.displayName=lA.displayName;const ot=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(cA,{ref:s,className:ht("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-[13px] outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(G9,{children:n.jsx(ra,{className:"h-4 w-4"})})}),n.jsx(W9,{children:t})]}));ot.displayName=cA.displayName;const K9=p.forwardRef(({className:e,...t},r)=>n.jsx(hA,{ref:r,className:ht("-mx-1 my-1 h-px bg-muted",e),...t}));K9.displayName=hA.displayName;let Q9=class{constructor(){ar(this,"baseUrl","/api/clinical")}async getPatients(t){try{const r=await fetch(`${this.baseUrl}/patients/${t}`);if(!r.ok)throw new Error("Failed to fetch patients");return await r.json()}catch(r){throw console.error("Error fetching patients:",r),r}}async getQueue(t){try{const r=await fetch(`${this.baseUrl}/queue/${t}`);if(!r.ok)throw new Error("Failed to fetch queue");return await r.json()}catch(r){throw console.error("Error fetching queue:",r),r}}async getVisits(t,r){try{const s=await fetch(`${this.baseUrl}/visits/${t}/${r}`);if(!s.ok)throw new Error("Failed to fetch visits");return await s.json()}catch(s){throw console.error("Error fetching visits:",s),s}}async createVisit(t){try{const r=await fetch(`${this.baseUrl}/visits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create visit");return await r.json()}catch(r){throw console.error("Error creating visit:",r),r}}async getLabTests(){try{const t=await fetch(`${this.baseUrl}/lab-tests`);if(!t.ok)throw new Error("Failed to fetch lab tests");return await t.json()}catch(t){throw console.error("Error fetching lab tests:",t),t}}async getMedicines(t){try{const r=await fetch(`${this.baseUrl}/medicines/${t}`);if(!r.ok)throw new Error("Failed to fetch medicines");return await r.json()}catch(r){throw console.error("Error fetching medicines:",r),r}}async createPrescription(t){try{const r=await fetch(`${this.baseUrl}/prescriptions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create prescription");return await r.json()}catch(r){throw console.error("Error creating prescription:",r),r}}async closeVisit(t,r){try{const s=await fetch(`${this.baseUrl}/visits/${t}/close`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({closedBy:r})});if(!s.ok)throw new Error("Failed to close visit");return await s.json()}catch(s){throw console.error("Error closing visit:",s),s}}async removeFromQueue(t){try{if(!(await fetch(`${this.baseUrl}/queue/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to remove from queue")}catch(r){throw console.error("Error removing from queue:",r),r}}async getServices(t){try{const r=await fetch(`${this.baseUrl}/services/${t}`);if(!r.ok)throw new Error("Failed to fetch services");return await r.json()}catch(r){throw console.error("Error fetching services:",r),r}}async createService(t){try{const r=await fetch(`${this.baseUrl}/services`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create service");return await r.json()}catch(r){throw console.error("Error creating service:",r),r}}async updateService(t,r){try{const s=await fetch(`${this.baseUrl}/services/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error("Failed to update service");return await s.json()}catch(s){throw console.error("Error updating service:",s),s}}async deleteService(t){try{if(!(await fetch(`${this.baseUrl}/services/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete service")}catch(r){throw console.error("Error deleting service:",r),r}}};const X9=["Fever","Headache","Cough","Body pain/aches","Abdominal pain","Diarrhea","Vomiting/Nausea","Chest pain","Shortness of breath","Fatigue/weakness","Dizziness","Skin rash","Sore throat","Difficulty urinating","Joint pain","Back pain","Loss of appetite","Weight loss","Insomnia/sleep problems","Anxiety/stress"],J9=()=>{const{user:e}=qn(),t=new Q9,[r,s]=p.useState([]),[a,i]=p.useState([]),[l,o]=p.useState([]),[c,d]=p.useState(!0),[u,m]=p.useState(!1),[x,f]=p.useState(!1),[y,v]=p.useState(""),[S,b]=p.useState(""),[j,w]=p.useState(""),[k,R]=p.useState(null),[W,O]=p.useState(null),[q,D]=p.useState([]),[J,A]=p.useState([]),[M,ee]=p.useState([]),[E,ae]=p.useState(""),[Y,de]=p.useState(!1),[T,V]=p.useState(!1),[re,he]=p.useState(""),[C,F]=p.useState(!1),[L,$]=p.useState(null),[K,I]=p.useState([]),[X,ne]=p.useState([]),[ue,xe]=p.useState(null);p.useState(new Set);const[ke,Re]=p.useState(!1),[We,Z]=p.useState(null),[Ge,Lt]=p.useState(!1),[Me,Ee]=p.useState({medicationName:"",take:"",frequency:"",duration:"",instructions:"",quantity:""}),[it,et]=p.useState([]),[dt,lt]=p.useState([]),[jt,Ht]=p.useState(!1),[ut,Mt]=p.useState(""),[Gt,st]=p.useState(!1),[se,ve]=p.useState({diagnosis:"",diagnosisCode:""}),[Pe,Fe]=p.useState(!1),[pe,ze]=p.useState(""),[qe,Ve]=p.useState(!1),[Yt,xt]=p.useState([]),[pt,cr]=p.useState(null),[Wt,wt]=p.useState([]),[dr,Ft]=p.useState(!1),[Ut,rr]=p.useState(!1),[$r,ft]=p.useState(!1),[sn,_n]=p.useState([]),[Mr,Kr]=p.useState(!1),[zr,qr]=p.useState(!1),[Ir,ei]=p.useState(null),[Ps,Jn]=p.useState([]),[qs,an]=p.useState(!1),[Qt,Qr]=p.useState({fullName:"",age:"",dateOfBirth:"",gender:"",phoneNumber:"",beneficiaryType:"local_residents"}),[Vs,ce]=p.useState(!1),[Be,He]=p.useState(!1),[Ye,tt]=p.useState(!1),[ct,qt]=p.useState({chiefComplaints:"",clinicalNotes:"",diagnosis:"",diagnosisCode:""}),[mt,Pt]=p.useState(""),[$t,At]=p.useState(!1),[at,Ot]=p.useState([]),[Sr,on]=p.useState(null),[Vr,Pr]=p.useState(!1),[pr,aa]=p.useState({name:"",icd10Code:"",category:"other",affectedSystem:"",isTropicalDisease:!1,isNotifiable:!1}),[_t,dc]=p.useState({bloodPressureSystolic:"",bloodPressureDiastolic:"",pulse:"",temperature:"",respiratoryRate:"",oxygenSaturation:"",weight:"",height:"",bmi:"",notes:""}),La=(B,Ne)=>{const Xe=parseFloat(B),zt=parseFloat(Ne);if(Xe>0&&zt>0){const It=zt/100;return(Xe/(It*It)).toFixed(1)}return""},ao=B=>{if(Pt(B),B.trim()){const Ne=d5(B);Ot(Ne),At(!0)}else Ot(M1.slice(0,20)),At(!0)},pd=B=>{on(B),qt({...ct,diagnosis:B.name,diagnosisCode:B.icd10Code}),Pt(B.name),At(!1)},Hs=async()=>{if(!pr.name.trim()||!(e!=null&&e.clinic)){ye.error("Please fill in diagnosis name");return}try{const B={...pr,id:Date.now().toString(),clinic:e.clinic,addedBy:e.displayName,addedAt:new Date().toISOString()};await addDoc(collection(db,"custom_diagnoses"),B),ye.success("New diagnosis added successfully"),Pr(!1),aa({name:"",icd10Code:"",category:"other",affectedSystem:"",isTropicalDisease:!1,isNotifiable:!1})}catch(B){console.error("Error adding new diagnosis:",B),ye.error("Failed to add new diagnosis")}},pn=B=>{if(ze(B),B.trim()){const Ne=d5(B);xt(Ne),Ve(!0)}else xt(M1.slice(0,20)),Ve(!0)},ti=B=>{cr(B),ve({diagnosis:B.name,diagnosisCode:B.icd10Code}),ze(B.name),Ve(!1)},Ws=(B,Ne)=>{const Xe={..._t,[B]:Ne};(B==="weight"||B==="height")&&(Xe.bmi=La(Xe.weight,Xe.height)),dc(Xe)},Zu=async()=>{if(e!=null&&e.clinic)try{const B=await t.getLabTests();A(B)}catch(B){console.error("Error fetching lab tests:",B),ye.error("Failed to fetch lab tests")}},eh=async()=>{if(e!=null&&e.clinic){Ht(!0);try{const B=await t.getMedicines(e.clinic);lt(B)}catch(B){console.error("Error fetching medicines:",B),ye.error("Failed to fetch available medicines")}finally{Ht(!1)}}};p.useEffect(()=>{qo(),Zu()},[e==null?void 0:e.clinic]),p.useEffect(()=>{e!=null&&e.clinic&&wt([])},[e==null?void 0:e.clinic]);const Ta=async B=>{try{console.log("Mark notification as read:",B)}catch(Ne){console.error("Error marking notification as read:",Ne)}};p.useEffect(()=>{const B=Ne=>{Ne.target.closest(".medicine-dropdown-container")||st(!1)};if(Gt)return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[Gt]),p.useEffect(()=>{const B=Ne=>{Ne.target.closest(".complaint-dropdown-container")||de(!1)};if(Y)return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[Y]),p.useEffect(()=>{const B=Ne=>{Ne.target.closest(".lab-test-dropdown-container")||V(!1)};if(T)return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[T]);const gd=(B,Ne,Xe)=>{const zt=parseFloat(B)||0,It=parseFloat(Ne)||0,Bt=parseFloat(Xe)||0;if(zt>0&&It>0&&Bt>0){const rt=zt*It*Bt;return Math.ceil(rt).toString()}return""},xd=B=>{switch(B){case"1":return"Once daily";case"2":return"Twice daily";case"3":return"Three times daily";case"4":return"Four times daily";case"6":return"Every 4 hours";case"8":return"Every 3 hours";case"0":return"As needed (PRN)";default:return B}},zo=B=>{const Ne=parseInt(B);return Ne===7?"7 days (1 week)":Ne===14?"14 days (2 weeks)":Ne===21?"21 days (3 weeks)":Ne===30?"30 days (1 month)":Ne===60?"60 days (2 months)":Ne===90?"90 days (3 months)":`${Ne} days`};p.useEffect(()=>{const B=gd(Me.take,Me.frequency,Me.duration);B!==Me.quantity&&Ee(Ne=>({...Ne,quantity:B}))},[Me.take,Me.frequency,Me.duration]);const io=()=>{if(!Me.medicationName||!Me.take||!Me.frequency||!Me.duration){ye.error("Please fill in all required fields");return}if(it.some(Xe=>Xe.medicationName===Me.medicationName)){ye.error("This medication is already in the prescription list");return}const B=dt.find(Xe=>Xe.drug_name===Me.medicationName),Ne=parseInt(Me.quantity)||0;if(B&&Ne>0){if(Ne>B.current_stock){ye.error(`Insufficient stock! Available: ${B.current_stock} ${B.unit_of_measure}, Requested: ${Ne} ${B.unit_of_measure}`);return}Ne>B.current_stock*.8&&ye.warning(`Warning: Prescribing ${Ne} out of ${B.current_stock} available ${B.unit_of_measure}. Low stock remaining.`)}et([...it,{...Me}]),Ee({medicationName:"",take:"",frequency:"",duration:"",instructions:"",quantity:""}),Mt(""),st(!1),ye.success("Medication added to prescription")},th=B=>{et(it.filter((Ne,Xe)=>Xe!==B)),ye.success("Medication removed from prescription")},qo=async()=>{if(e!=null&&e.clinic)try{const Ne=(await t.getPatients(e.clinic)).map(rt=>{var Tt;return{id:rt.id,patientId:rt.patient_id,fullName:`${rt.first_name||""} ${rt.last_name||""}`.trim(),first_name:rt.first_name,last_name:rt.last_name,age:rt.age,dateOfBirth:rt.date_of_birth,gender:rt.gender,phoneNumber:rt.phone_number||rt.phone,phone:rt.phone,occupation:rt.occupation,clinic:(Tt=rt.clinic_id)==null?void 0:Tt.toString(),registeredAt:rt.createdAt,registeredBy:rt.registered_by}});s(Ne);const zt=(await t.getQueue(e.clinic)).map(rt=>{var Tt;return{id:rt.id,patientId:rt.patient_id,patientDocId:rt.patient_id,patientName:rt.patient_name||"Unknown",age:rt.age||0,clinic:((Tt=rt.clinic_id)==null?void 0:Tt.toString())||(e==null?void 0:e.clinic)||"1",doctor:rt.doctor||"",priority:rt.priority||"normal",notes:rt.notes||"",status:rt.status,queuedAt:rt.created_at||rt.queued_at,queuedBy:rt.queued_by||"System"}});i(zt);const Bt=(await t.getVisits(e.clinic,e.uid)).map(rt=>({id:rt.id,patientId:rt.patient_id,patientName:rt.patient_name,clinic:rt.clinic_id.toString(),date:rt.date,chiefComplaints:rt.chief_complaints,clinicalNotes:rt.clinical_notes,doctorId:rt.doctor_id,doctorName:rt.doctor_name,status:rt.status,vitals:rt.vitals?(()=>{try{const Tt=JSON.parse(rt.vitals);return Tt&&typeof Tt=="object"?Tt:{}}catch(Tt){return console.error("Error parsing vitals JSON:",Tt,"Raw vitals:",rt.vitals),{}}})():{},labRequests:rt.lab_requests?JSON.parse(rt.lab_requests):[]}));o(Bt)}catch(B){console.error("Error fetching data:",B)}finally{d(!1)}},rh=async(B,Ne)=>{try{const Xe=await Promise.all(Ne.map(async gn=>{try{const as=window.location.hostname,bd=as==="localhost"||as==="127.0.0.1",Ia=await fetch(`/api/lab-tests/search?q=${encodeURIComponent(gn)}`);if(Ia.ok){const si=(await Ia.json()).find(lo=>lo.test_name.toLowerCase()===gn.toLowerCase());return{serviceName:gn,quantity:1,unitPrice:parseFloat(si==null?void 0:si.price)||0,totalPrice:parseFloat(si==null?void 0:si.price)||0}}return{serviceName:gn,quantity:1,unitPrice:0,totalPrice:0}}catch(as){return console.error(`Error fetching price for ${gn}:`,as),{serviceName:gn,quantity:1,unitPrice:0,totalPrice:0}}})),zt=Xe.reduce((gn,as)=>gn+(parseFloat(as.totalPrice.toString())||0),0),It=k.patientId||k.id,Bt=k.fullName||`${k.first_name||""} ${k.last_name||""}`.trim()||k.patientName||"Unknown Patient";console.log("Clinical - Creating/updating bill for patient:",{patientId:It,patientName:Bt,clinicId:e.clinic});const rt=window.location.hostname,Tt=rt==="localhost"||rt==="127.0.0.1",oa="/api",Ho=await fetch(`${oa}/patient-bills/active/${It}/${e.clinic}`);let Ra,ni;if(Ho.ok){const gn=await Ho.json();console.log("Clinical - Found existing bill:",gn.bill_number);const as=await fetch(`${oa}/patient-bills/${gn.id}/add-services`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({services:Xe})});if(as.ok)Ra=as,ni=gn.bill_number,console.log("Clinical - Added services to existing bill"),setTimeout(()=>{ye.success(`Lab tests added to existing bill ${ni}`)},0);else throw new Error("Failed to add services to existing bill")}else{console.log("Clinical - Creating new bill for patient:",It);const gn=Date.now().toString().slice(-6);ni=`BILL-${new Date().getFullYear()}-${gn}`;const as={bill_number:ni,patient_id:It,patient_name:Bt,clinic_id:parseInt(e.clinic),total_amount:zt,paid_amount:0,balance_amount:zt,status:"pending",bill_date:new Date().toISOString(),due_date:null,services:JSON.stringify(Xe),notes:`Lab tests requested during clinical visit on ${new Date().toLocaleDateString()}`,created_by:e.displayName||"Unknown User"};Ra=await fetch(`${oa}/patient-bills`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(as)}),Ra.ok&&(console.log("Clinical - New patient bill created successfully for lab tests"),setTimeout(()=>{ye.success(`New patient bill ${ni} created for lab tests`)},0))}Ra&&Ra.ok||(console.error("Failed to create patient bill"),setTimeout(()=>{ye.error("Failed to create patient bill")},0))}catch(Xe){console.error("Error creating patient bill for lab tests:",Xe)}},uc=async B=>{if(B.preventDefault(),!(!e||!k)){f(!0);try{const Ne={patientId:k.id,patientName:k.fullName,clinic:e.clinic,date:new Date().toISOString(),chiefComplaints:M.join(", "),clinicalNotes:ct.clinicalNotes,doctorId:e.uid,doctorName:e.displayName,status:"active",vitals:{bloodPressure:_t.bloodPressureSystolic&&_t.bloodPressureDiastolic?`${_t.bloodPressureSystolic}/${_t.bloodPressureDiastolic}`:"",pulse:_t.pulse,temperature:_t.temperature,respiratoryRate:_t.respiratoryRate,oxygenSaturation:_t.oxygenSaturation,weight:_t.weight,height:_t.height,bmi:_t.bmi,notes:_t.notes}};q.length>0&&(Ne.labRequests=q),console.log("Selected Patient Data:",k),console.log("Patient Full Name:",k.fullName),console.log("Patient ID:",k.id);let Xe=k.fullName||`${k.first_name||""} ${k.last_name||""}`.trim()||k.patientName||(W==null?void 0:W.patientName)||"Unknown Patient";console.log("Final Patient Name for Visit:",Xe),console.log("Vitals state before saving:",_t),console.log("Selected complaints:",M);const zt=Object.values(_t).some(rt=>rt&&rt.toString().trim()!=="");console.log("Has vitals data:",zt);const It={patient_id:k.id,patient_name:Xe,clinic_id:parseInt(e.clinic)||1,visit_date:new Date().toISOString(),chief_complaint:M.join(", ")||null,clinical_notes:ct.clinicalNotes||null,doctor_id:e.uid,doctor_name:e.displayName||"Unknown Doctor",status:"active",queue_id:(W==null?void 0:W.id)||null,vitals:(()=>{const rt={bloodPressure:_t.bloodPressureSystolic&&_t.bloodPressureDiastolic?`${_t.bloodPressureSystolic}/${_t.bloodPressureDiastolic}`:"",pulse:_t.pulse||"",temperature:_t.temperature||"",respiratoryRate:_t.respiratoryRate||"",oxygenSaturation:_t.oxygenSaturation||"",weight:_t.weight||"",height:_t.height||"",bmi:_t.bmi||"",notes:_t.notes||""};console.log("Vitals data being stringified:",rt);const Tt=JSON.stringify(rt);return console.log("Stringified vitals:",Tt),Tt})(),lab_requests:q.length>0?JSON.stringify(q):null,diagnosis:ct.diagnosis||null,diagnosis_code:ct.diagnosisCode||null},Bt=await t.createVisit(It);q.length>0&&await rh(Bt,q),ye.success("Visit created successfully"),m(!1),R(null),O(null),D([]),ee([]),ae(""),qt({chiefComplaints:"",clinicalNotes:"",diagnosis:"",diagnosisCode:""}),dc({bloodPressureSystolic:"",bloodPressureDiastolic:"",pulse:"",temperature:"",respiratoryRate:"",oxygenSaturation:"",weight:"",height:"",bmi:"",notes:""}),qo()}catch(Ne){console.error("Error creating visit:",Ne),console.error("Error details:",Ne.message),console.error("Error stack:",Ne.stack),ye.error(`Failed to create visit: ${Ne.message||"Unknown error"}`)}finally{f(!1)}}},hc=()=>{E.trim()&&!M.includes(E.trim())&&(ee([...M,E.trim()]),ae(""))},ia=B=>{ee(M.filter(Ne=>Ne!==B))},nh=async()=>{if(!L||!(e!=null&&e.clinic)||it.length===0){ye.error("Please add at least one medication to the prescription");return}rr(!0);try{const B=it.map(Ne=>{const Xe={visit_id:L.id,patient_id:L.patientId,patient_name:L.patientName,medication_name:Ne.medicationName.trim(),take_instructions:Ne.take.trim(),frequency:Ne.frequency.trim(),duration:Ne.duration.trim(),instructions:Ne.instructions.trim(),quantity:Ne.quantity.trim(),prescribed_by:e.displayName,prescribed_at:new Date().toISOString(),clinic_id:parseInt(e.clinic),status:"active"};return t.createPrescription(Xe)});await Promise.all(B),ye.success(`Prescription created successfully with ${it.length} medication${it.length!==1?"s":""}`),Lt(!1),Ee({medicationName:"",take:"",frequency:"",duration:"",instructions:"",quantity:""}),et([]),Mt(""),st(!1)}catch(B){console.error("Error creating prescription:",B),ye.error("Failed to create prescription")}finally{rr(!1)}},oo=async B=>{if(e!=null&&e.displayName){He(!0);try{await t.closeVisit(B.id,e.displayName),ye.success("Visit closed successfully. Patient remains in Today's Visits with inactive status."),F(!1),qo()}catch(Ne){console.error("Error closing visit:",Ne),ye.error("Failed to close visit")}finally{He(!1)}}},fc=async()=>{if(!L||!(e!=null&&e.clinic)||!se.diagnosis.trim()){ye.error("Please enter a diagnosis");return}tt(!0);try{const B=collection(db,"diagnoses"),Ne=query(B,where("visitId","==",L.id),where("clinic","==",e.clinic)),Xe=await getDocs(Ne),zt={description:se.diagnosis.trim(),code:se.diagnosisCode.trim()||"UNSPECIFIED",...pt&&{diseaseCategory:pt.category,isTropicalDisease:pt.isTropicalDisease,affectedSystem:pt.affectedSystem,icd10Code:pt.icd10Code,isNotifiable:pt.isNotifiable}};if(Xe.empty)await addDoc(collection(db,"diagnoses"),{visitId:L.id,patientId:L.patientId,...zt,clinic:e.clinic,date:new Date().toISOString(),doctorId:e.uid,doctorName:e.displayName});else{const It=Xe.docs[0];await updateDoc(doc(db,"diagnoses",It.id),{...zt,updatedAt:new Date().toISOString(),updatedBy:e.displayName})}if(ye.success("Diagnosis updated successfully"),Fe(!1),ve({diagnosis:"",diagnosisCode:""}),L){const It=collection(db,"diagnoses"),Bt=query(It,where("visitId","==",L.id),where("clinic","==",e.clinic)),rt=await getDocs(Bt),Tt=rt.empty?null:{id:rt.docs[0].id,...rt.docs[0].data()};xe(Tt)}}catch(B){console.error("Error updating diagnosis:",B),ye.error("Failed to update diagnosis")}finally{tt(!1)}},vd=async B=>{if(e!=null&&e.clinic){$(B),F(!0),I([]),ne([]),xe(null),Kr(!1);try{console.log("Fetching complete visit details for visit:",B.id);const Ne=window.location.hostname,Xe=Ne==="localhost"||Ne==="127.0.0.1",zt="/api";console.log("Making API call to:",`${zt}/clinical/visit-details/${B.id}`);const It=await fetch(`${zt}/clinical/visit-details/${B.id}`,{credentials:"include"});if(console.log("API response status:",It.status),console.log("API response ok:",It.ok),It.ok){const Bt=await It.json();console.log("Complete visit details received:",Bt);const rt={...B,patientId:Bt.patient_id||B.patientId,clinicalNotes:Bt.clinical_notes||"",vitals:Bt.vitals?(()=>{try{console.log("Raw vitals from DB:",Bt.vitals);let Tt=Bt.vitals;return typeof Tt=="string"&&(Tt=JSON.parse(Tt),typeof Tt=="string"&&(Tt=JSON.parse(Tt))),console.log("Parsed vitals:",Tt),Tt||{}}catch(Tt){return console.error("Error parsing vitals:",Tt,"Raw data:",Bt.vitals),{}}})():{},labRequests:Bt.lab_requests?(()=>{try{console.log("Raw lab_requests from DB:",Bt.lab_requests);let Tt=Bt.lab_requests;return typeof Tt=="string"&&(Tt=JSON.parse(Tt),typeof Tt=="string"&&(Tt=JSON.parse(Tt))),console.log("Parsed lab requests:",Tt),Tt||[]}catch(Tt){return console.error("Error parsing lab requests:",Tt,"Raw data:",Bt.lab_requests),[]}})():[]};if(console.log("Updated visit object before setState:",rt),console.log("Updated visit vitals:",rt.vitals),console.log("Updated visit labRequests:",rt.labRequests),$(rt),Bt.lab_requests)try{console.log("Setting visitLabRequests with:",Bt.lab_requests);let Tt=Bt.lab_requests;typeof Tt=="string"&&(Tt=JSON.parse(Tt),typeof Tt=="string"&&(Tt=JSON.parse(Tt))),console.log("Parsed lab requests for state:",Tt),I(Tt||[])}catch(Tt){console.error("Error parsing lab requests for state:",Tt),I([])}Bt.diagnosis&&xe({diagnosis:Bt.diagnosis,diagnosisCode:Bt.diagnosis_code||""})}else{console.error("Failed to fetch visit details:",It.status);const Bt=await It.text();console.error("Error response body:",Bt)}}catch(Ne){console.error("Error fetching visit details:",Ne),ye.error("Failed to fetch complete visit details")}}},Vt=async B=>{if(e!=null&&e.clinic)try{const Ne=collection(db,"visits"),Xe=query(Ne,where("patientId","==",B.patientId),where("clinic","==",e.clinic),orderBy("date","desc")),It=(await getDocs(Xe)).docs.map(Bt=>({id:Bt.id,...Bt.data()}));ei(B),Jn(It),qr(!0)}catch(Ne){console.error("Error fetching patient history:",Ne),ye.error("Failed to fetch patient history")}},sh=async()=>{if(e!=null&&e.clinic){ce(!0);try{const B=`P${Date.now()}`,Ne=Qt.age||(Qt.dateOfBirth?yd(Qt.dateOfBirth):""),Xe={patientId:B,fullName:Qt.fullName,dateOfBirth:Qt.dateOfBirth,age:Ne,gender:Qt.gender,phoneNumber:Qt.phoneNumber,clinic:e.clinic,registeredAt:new Date().toISOString(),registeredBy:e.displayName,beneficiaryType:Qt.beneficiaryType,occupation:""},zt=await addDoc(collection(db,"patients"),Xe),It={patientId:B,patientName:Qt.fullName,age:Ne,queueNumber:await ah(),status:"waiting",queuedAt:new Date().toISOString(),queuedBy:e.displayName,clinic:e.clinic,patientDocId:zt.id},Bt=await addDoc(collection(db,"patient_queue"),It);Qr({fullName:"",age:"",dateOfBirth:"",gender:"",phoneNumber:"",beneficiaryType:"local_residents"}),an(!1),await qo(),ye.success(`Patient ${Qt.fullName} registered and queued successfully!`);const rt={id:zt.id,patientId:B,fullName:Qt.fullName,age:Ne,gender:Qt.gender,phoneNumber:Qt.phoneNumber,occupation:"",clinic:e.clinic,registeredAt:new Date().toISOString(),registeredBy:e.displayName},Tt={id:Bt.id,patientId:B,patientName:Qt.fullName,age:Ne,queueNumber:It.queueNumber,status:"waiting",queuedAt:new Date().toISOString(),queuedBy:e.displayName,clinic:e.clinic,patientDocId:zt.id};R({...rt,age:parseInt(Qt.age)||0,gender:Qt.gender}),O({...Tt,age:parseInt(Qt.age)||0,status:"waiting"}),m(!0)}catch(B){console.error("Error registering patient:",B),ye.error("Failed to register patient")}finally{ce(!1)}}},yd=B=>{const Ne=new Date,Xe=new Date(B);let zt=Ne.getFullYear()-Xe.getFullYear();const It=Ne.getMonth()-Xe.getMonth();return(It<0||It===0&&Ne.getDate()<Xe.getDate())&&zt--,zt},ah=async()=>{try{const B=new Date().toISOString().split("T")[0],Ne=collection(db,"patient_queue"),Xe=query(Ne,where("clinic","==",e==null?void 0:e.clinic));return(await getDocs(Xe)).docs.filter(Bt=>{const rt=Bt.data().queuedAt;return rt&&rt.startsWith(B)}).length+1}catch(B){return console.error("Error getting queue number:",B),1}},ri=B=>{const Ne=r.find(Xe=>Xe.id===B.patientDocId);Ne?(R(Ne),O(B),m(!0)):(R({id:B.patientDocId,patientId:B.patientId,fullName:B.patientName||"Unknown Patient",age:B.age,occupation:"",phoneNumber:"",clinic:B.clinic,registeredAt:B.queuedAt,registeredBy:B.queuedBy}),O(B),m(!0))},Da=r.filter(B=>{var Ne,Xe;return(((Ne=B.fullName)==null?void 0:Ne.toLowerCase())||"").includes(y.toLowerCase())||(((Xe=B.patientId)==null?void 0:Xe.toLowerCase())||"").includes(y.toLowerCase())}),mc=a.filter(B=>B.status==="waiting").filter(B=>{var Ne,Xe;return(((Ne=B.patientName)==null?void 0:Ne.toLowerCase())||"").includes(S.toLowerCase())||(((Xe=B.patientId)==null?void 0:Xe.toLowerCase())||"").includes(S.toLowerCase())||B.age&&B.age.toString().includes(S)}),Vo=l.filter(B=>{var Ne;return(Ne=B.date)==null?void 0:Ne.startsWith(new Date().toISOString().split("T")[0])}),Ti=Vo.filter(B=>{var Ne,Xe,zt,It;return(((Ne=B.patientName)==null?void 0:Ne.toLowerCase())||"").includes(j.toLowerCase())||(((Xe=B.patientId)==null?void 0:Xe.toLowerCase())||"").includes(j.toLowerCase())||(((zt=B.chiefComplaints)==null?void 0:zt.toLowerCase())||"").includes(j.toLowerCase())||(((It=B.doctorName)==null?void 0:It.toLowerCase())||"").includes(j.toLowerCase())});return n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Clinical Module"}),n.jsxs("p",{className:"text-muted-foreground mt-1",children:[Vo.length," visits today  Dr. ",e==null?void 0:e.displayName]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_e,{onClick:()=>an(!0),variant:"outline",className:"quick-action-btn text-black hover:text-black",children:[n.jsx(Is,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Register Patient"})]}),n.jsxs(_e,{onClick:()=>m(!0),className:"quick-action-btn",children:[n.jsx(kr,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"New Visit"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[n.jsx(Eu,{className:"w-5 h-5 text-primary"}),"Patient Queue (",mc.length,")"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>Ft(!dr),className:"flex items-center gap-2",children:[n.jsx(ZC,{className:"w-4 h-4"}),Wt.length>0&&n.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Wt.length})]}),dr&&n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-card border border-border rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[n.jsx("div",{className:"p-3 border-b border-border",children:n.jsx("h4",{className:"font-medium text-sm",children:"Lab Results Ready"})}),Wt.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No new lab results"}):n.jsx("div",{className:"divide-y divide-border",children:Wt.map(B=>n.jsx("div",{className:"p-3 hover:bg-muted/50",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(tx,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"font-medium text-sm",children:B.patientName})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:[B.testType," - ",B.message]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Completed by ",B.completedBy]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(B.completedAt).toLocaleString()})]}),n.jsx(_e,{size:"sm",variant:"ghost",onClick:()=>Ta(B.id),className:"text-xs px-2 py-1 h-auto",children:n.jsx(Nn,{className:"w-3 h-3"})})]})},B.id))})]})]}),n.jsxs(_e,{onClick:()=>an(!0),size:"sm",className:"flex items-center gap-2",children:[n.jsx(kr,{className:"w-4 h-4"}),"Register Patient"]})]})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search queue by name, ID, or age...",value:S,onChange:B=>b(B.target.value),className:"pl-10"})]})}),c?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(mr,{className:"w-6 h-6 animate-spin text-primary"})}):mc.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Is,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),n.jsx("p",{className:"text-muted-foreground",children:S?"No patients found matching search":"No patients in queue"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S?"Try a different search term":"Patients will appear here after registration"})]}):n.jsx("div",{className:"bg-card border rounded-lg overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Patient"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Age"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Time"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:mc.map((B,Ne)=>{const Xe=a.findIndex(zt=>zt.id===B.id);return n.jsxs("tr",{onClick:()=>ri(B),className:"hover:bg-muted/30 cursor-pointer transition-colors group",children:[n.jsx("td",{className:"p-3",children:n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center font-bold text-primary text-sm",children:Xe+1})}),n.jsx("td",{className:"p-3",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:B.patientName}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",B.patientId]})]})}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"text-sm text-foreground",children:B.age||"N/A"})}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:"Waiting"})}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(B.queuedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})})]},B.id)})})]})})})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Today's Visits (",Ti.length,")"]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search visits by patient, complaints, or doctor...",value:j,onChange:B=>w(B.target.value),className:"pl-10"})]})}),c?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(mr,{className:"w-6 h-6 animate-spin text-primary"})}):Ti.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(qa,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:j?"No visits found matching search":"No visits recorded"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j?"Try a different search term":"Visits will appear here as you see patients"})]}):n.jsx("div",{className:"bg-card border rounded-lg overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Patient"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Complaints"}),n.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:Ti.map(B=>n.jsxs("tr",{onClick:()=>vd(B),className:`hover:bg-muted/30 cursor-pointer transition-colors group ${B.status==="inactive"?"opacity-70 bg-gray-50/50":""}`,children:[n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Is,{className:"w-4 h-4 text-primary"})}),n.jsx("div",{children:n.jsx("p",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:B.patientName})})]})}),n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs font-medium text-foreground",children:new Date(B.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(B.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"text-sm text-foreground line-clamp-2",children:B.chiefComplaints||"No complaints recorded"})}),n.jsx("td",{className:"p-3",children:n.jsx(lr,{variant:B.status==="completed"?"outline":B.status==="inactive"?"default":"secondary",className:B.status==="inactive"?"bg-gray-100 text-gray-700 hover:bg-gray-100":"",children:B.status==="completed"?"Completed":B.status==="inactive"?"Closed":"Active"})})]},B.id))})]})})})]})]}),n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsxs("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[n.jsx(Sc,{className:"w-5 h-5 text-primary"}),"Today's Statistics"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("p",{className:"text-3xl font-bold text-primary",children:Vo.length}),n.jsx("p",{className:"text-muted-foreground",children:"Today's Patients"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("p",{className:"text-3xl font-bold text-primary",children:a.length}),n.jsx("p",{className:"text-muted-foreground",children:"Patients Waiting"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("p",{className:"text-3xl font-bold text-primary",children:Vo.filter(B=>{var Ne;return(Ne=B.labRequests)==null?void 0:Ne.length}).length}),n.jsx("p",{className:"text-muted-foreground",children:"Lab Requests Today"})]})]}),n.jsxs("div",{className:"pt-6 border-t border-border",children:[n.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Search existing patient"}),n.jsxs("div",{className:"relative",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search patient by name or ID...",value:y,onChange:B=>v(B.target.value),className:"pl-10 h-12"})]}),y&&n.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto mt-3",children:[Da.slice(0,5).map(B=>n.jsxs("button",{onClick:()=>{R(B),O(null),m(!0),v("")},onContextMenu:Ne=>{Ne.preventDefault(),Vt(B)},className:"w-full flex items-center gap-4 p-3 rounded-lg border border-border hover:border-primary hover:bg-primary/5 transition-all text-left",children:[n.jsx(Is,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:B.fullName}),n.jsx("p",{className:"text-xs text-muted-foreground",children:B.patientId})]}),n.jsx("div",{className:"flex gap-1",children:n.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Vt(B)},className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",title:"View History",children:"History"})})]},B.id)),Da.length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-2 text-sm",children:"No patients found"})]})]})]})}),n.jsx(wr,{open:zr,onOpenChange:qr,children:n.jsxs(xr,{className:"sm:max-w-4xl h-[90vh] flex flex-col",children:[n.jsxs(Nr,{className:"flex-shrink-0",children:[n.jsxs(vr,{className:"flex items-center gap-3",children:[n.jsx(Is,{className:"w-5 h-5 text-primary"}),"Patient Visit History"]}),n.jsx(_s,{children:Ir&&n.jsxs(n.Fragment,{children:["View all previous visits for ",Ir.fullName," (ID: ",Ir.patientId,")"]})})]}),Ir&&n.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4",children:[n.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:Ir.fullName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Patient ID: ",Ir.patientId,"  Age: ",Ir.age||"N/A","  Total Visits: ",Ps.length]})]}),n.jsxs(_e,{onClick:()=>{R(Ir),O(null),qr(!1),m(!0)},className:"bg-green-600 hover:bg-green-700",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"New Visit"]})]})}),Ps.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(qa,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No previous visits found"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This will be the patient's first visit"})]}):n.jsx("div",{className:"space-y-4",children:Ps.map((B,Ne)=>n.jsxs("div",{className:"bg-card border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{qr(!1),vd(B)},children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center font-bold text-primary",children:Ne+1}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-foreground",children:["Visit #",Ps.length-Ne]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(B.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," at ",new Date(B.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[B.labRequests&&B.labRequests.length>0&&n.jsxs(lr,{variant:"outline",className:"text-xs",children:[B.labRequests.length," lab test",B.labRequests.length!==1?"s":""]}),n.jsx(lr,{variant:B.status==="completed"?"default":"secondary",className:B.status==="completed"?"bg-green-100 text-green-800":"",children:B.status==="completed"?"Completed":"Active"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"Chief Complaints:"}),n.jsx("p",{className:"text-foreground line-clamp-2",children:B.chiefComplaints||"No complaints recorded"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"Doctor:"}),n.jsxs("p",{className:"text-foreground",children:["Dr. ",B.doctorName]})]})]}),B.clinicalNotes&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[n.jsx("p",{className:"font-medium text-muted-foreground mb-1 text-sm",children:"Clinical Notes:"}),n.jsx("p",{className:"text-sm text-foreground line-clamp-2",children:B.clinicalNotes})]})]},B.id))}),n.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:n.jsx(_e,{variant:"outline",onClick:()=>qr(!1),children:"Close"})})]})]})}),n.jsx(wr,{open:ke,onOpenChange:Re,children:n.jsxs(xr,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-3",children:[n.jsx(Kl,{className:"w-5 h-5 text-primary"}),"Lab Results Preview"]}),n.jsx(_s,{children:"View and review lab test results for the selected patient."})]}),We&&We.allResults&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Complete Lab Results"}),n.jsxs(lr,{className:"bg-green-100 text-green-800",children:[We.allResults.length," Test",We.allResults.length!==1?"s":""," Completed"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Patient:"})," ",We.visitInfo.patientName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Visit Date:"})," ",new Date(We.visitInfo.date).toLocaleDateString()]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Doctor:"})," Dr. ",We.visitInfo.doctorName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Clinic:"})," ",We.visitInfo.clinic]})]})]}),n.jsx("div",{className:"space-y-6",children:We.allResults.map((B,Ne)=>n.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-primary/5 border-b border-border p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-semibold text-foreground text-lg",children:B.testType}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(lr,{className:"bg-green-100 text-green-800",children:"Completed"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(B.resultDate).toLocaleDateString()})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Performed by: ",B.performedBy,"  Specimen: Serum"]})]}),B.componentValues&&B.componentValues.length>0?n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"bg-card border rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 font-medium text-sm",children:"Component"}),n.jsx("th",{className:"text-center p-3 font-medium text-sm",children:"Result"}),n.jsx("th",{className:"text-center p-3 font-medium text-sm",children:"Unit"}),n.jsx("th",{className:"text-center p-3 font-medium text-sm",children:"Reference Range"}),n.jsx("th",{className:"text-center p-3 font-medium text-sm",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:B.componentValues.map((Xe,zt)=>n.jsxs("tr",{className:"hover:bg-muted/20",children:[n.jsx("td",{className:"p-3 font-medium text-foreground",children:Xe.name}),n.jsx("td",{className:"p-3 text-center font-medium",children:Xe.value||"-"}),n.jsx("td",{className:"p-3 text-center text-muted-foreground",children:Xe.unit||""}),n.jsx("td",{className:"p-3 text-center text-muted-foreground text-sm",children:Xe.normalRangeMin&&Xe.normalRangeMax?`${Xe.normalRangeMin} - ${Xe.normalRangeMax}`:Xe.normalRangeText||"N/A"}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Xe.remark==="High"?"bg-red-100 text-red-700":Xe.remark==="Low"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:Xe.remark||"Normal"})})]},zt))})]})})}):n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"bg-card border rounded-lg p-4",children:n.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:B.results||"No detailed results available"})})}),B.doctorNote&&n.jsx("div",{className:"px-4 pb-4",children:n.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"Clinical Notes:"}),n.jsx("p",{className:"text-sm text-foreground",children:B.doctorNote})]})})]},Ne))}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[n.jsx(_e,{variant:"outline",onClick:()=>Re(!1),children:"Close"}),n.jsxs(_e,{onClick:()=>{ye.info("Print functionality coming soon")},children:[n.jsx(p2,{className:"w-4 h-4 mr-2"}),"Print Results"]})]})]})]})}),n.jsx(wr,{open:C,onOpenChange:B=>{F(B),B||(xe(null),I([]),ne([]),Fe(!1),ve({diagnosis:"",diagnosisCode:""}))},children:n.jsxs(xr,{className:"sm:max-w-4xl h-[90vh] flex flex-col",children:[n.jsxs(Nr,{className:"flex-shrink-0",children:[n.jsxs(vr,{className:"flex items-center gap-3",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Visit Details"]}),n.jsx(_s,{children:"View comprehensive visit information including complaints, notes, and prescriptions."})]}),L&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6",children:[n.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Is,{className:"w-6 h-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:L.patientName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Patient ID: ",L.patientId||"N/A","  Visit Date: ",new Date(L.date).toLocaleDateString(),"  Time: ",new Date(L.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(lr,{variant:L.status==="completed"?"default":"secondary",className:L.status==="completed"?"bg-green-100 text-green-800":"",children:L.status==="completed"?"Completed":"Active"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Seen by Dr. ",L.doctorName]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>{console.log("View History clicked"),console.log("selectedVisit:",L),console.log("patients array:",r);const B=r.find(Ne=>Ne.patientId===L.patientId);if(console.log("Found patient:",B),B)console.log("Calling fetchPatientHistory"),Vt(B);else{console.log("Patient not found, trying alternative search");const Ne=r.find(Xe=>Xe.fullName===L.patientName);console.log("Alternative patient found:",Ne),Ne?Vt(Ne):(console.log("No patient found for history"),ye.error("Patient not found for history view"))}},className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",children:[n.jsx(Is,{className:"w-4 h-4 mr-2"}),"View History"]}),L.status==="active"&&n.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>oo(L),disabled:Be,className:"bg-red-50 hover:bg-red-100 text-red-700 border-red-200",children:[Be?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Close Visit"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[n.jsx(Sc,{className:"w-4 h-4 text-primary"}),"Chief Complaints"]}),n.jsx("div",{className:"bg-card border rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-foreground",children:L.chiefComplaints||"No complaints recorded"})})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[n.jsx(qa,{className:"w-4 h-4 text-primary"}),"Clinical Notes"]}),n.jsx("div",{className:"bg-card border rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-foreground",children:L.clinicalNotes&&L.clinicalNotes.trim()!==""?L.clinicalNotes:"No clinical notes recorded"})})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[n.jsx(qa,{className:"w-4 h-4 text-primary"}),"Vital Signs"]}),n.jsx("div",{className:"bg-card border rounded-lg p-3",children:(()=>{console.log("Vitals display check:"),console.log("selectedVisit.vitals:",L.vitals),console.log("Object.keys(selectedVisit.vitals).length:",L.vitals?Object.keys(L.vitals).length:0),console.log("Object.values check:",L.vitals?Object.values(L.vitals).some(Ne=>Ne&&Ne.toString().trim()!==""):!1);const B=L.vitals&&Object.keys(L.vitals).length>0&&Object.values(L.vitals).some(Ne=>Ne&&Ne.toString().trim()!=="");return console.log("Final hasVitals result:",B),B})()?n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[L.vitals.bloodPressure&&L.vitals.bloodPressure.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Blood Pressure:"}),n.jsx("p",{className:"text-foreground",children:L.vitals.bloodPressure})]}),L.vitals.pulse&&L.vitals.pulse.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Pulse:"}),n.jsxs("p",{className:"text-foreground",children:[L.vitals.pulse," bpm"]})]}),L.vitals.temperature&&L.vitals.temperature.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Temperature:"}),n.jsxs("p",{className:"text-foreground",children:[L.vitals.temperature,"C"]})]}),L.vitals.respiratoryRate&&L.vitals.respiratoryRate.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Respiratory Rate:"}),n.jsxs("p",{className:"text-foreground",children:[L.vitals.respiratoryRate," /min"]})]}),L.vitals.oxygenSaturation&&L.vitals.oxygenSaturation.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"O2 Saturation:"}),n.jsxs("p",{className:"text-foreground",children:[L.vitals.oxygenSaturation,"%"]})]}),L.vitals.weight&&L.vitals.weight.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Weight:"}),n.jsxs("p",{className:"text-foreground",children:[L.vitals.weight," kg"]})]}),L.vitals.height&&L.vitals.height.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Height:"}),n.jsxs("p",{className:"text-foreground",children:[L.vitals.height," cm"]})]}),L.vitals.bmi&&L.vitals.bmi.trim()!==""&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"BMI:"}),n.jsx("p",{className:"text-foreground",children:L.vitals.bmi})]}),L.vitals.notes&&L.vitals.notes.trim()!==""&&n.jsxs("div",{className:"col-span-2 pt-2 border-t border-muted",children:[n.jsx("span",{className:"font-medium text-muted-foreground",children:"Notes:"}),n.jsx("p",{className:"text-foreground mt-1",children:L.vitals.notes})]})]}):n.jsx("p",{className:"text-sm text-foreground",children:"No vital signs recorded"})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h4",{className:"font-semibold text-foreground flex items-center gap-2",children:[n.jsx(hn,{className:"w-4 h-4 text-primary"}),"Diagnosis"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_e,{size:"sm",variant:"outline",onClick:async()=>{try{const B=window.location.hostname,Ne=B==="localhost"||B==="127.0.0.1",zt=await fetch(`/api/clinical/prescriptions/visit/${L.id}`);if(zt.ok){const It=await zt.json();console.log("Fetched prescriptions for visit:",It),It.length===0?ye.info("No prescriptions found for this visit"):(_n(It),ft(!0))}else console.error("Failed to fetch prescriptions:",zt.status),ye.error("Failed to fetch prescribed medications")}catch(B){console.error("Error fetching prescriptions:",B),ye.error("Failed to fetch prescribed medications")}},className:"h-7 px-3 text-xs bg-green-50 border-green-200 text-green-700 hover:bg-green-100",children:[n.jsx(Sc,{className:"w-3 h-3 mr-1"}),"View Prescriptions"]}),n.jsx(_e,{size:"sm",variant:"outline",onClick:()=>{!Pe&&ue?ve({diagnosis:ue.description||"",diagnosisCode:ue.code==="UNSPECIFIED"?"":ue.code||""}):Pe&&ve({diagnosis:"",diagnosisCode:""}),Fe(!Pe)},className:"h-7 px-3 text-xs",children:Pe?"Cancel":"Edit"})]})]}),Pe?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-xs font-medium text-muted-foreground",children:"Diagnosis *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{value:pe,onChange:B=>pn(B.target.value),onFocus:()=>pn(pe),placeholder:"Search for diagnosis...",className:"mt-1 pr-10"}),n.jsx(In,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),qe&&n.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-background border border-border rounded-lg shadow-lg max-h-64 overflow-y-auto",children:n.jsx("div",{className:"p-2",children:Yt.length>0?n.jsxs(n.Fragment,{children:[Yt.map(B=>n.jsx("div",{onClick:()=>ti(B),className:"p-3 hover:bg-muted/50 cursor-pointer rounded-md border-b border-border/50 last:border-b-0",children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:B.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["ICD-10: ",B.icd10Code," | ",B.affectedSystem]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[B.isTropicalDisease&&n.jsx(lr,{variant:"secondary",className:"text-xs",children:"Tropical"}),B.isNotifiable&&n.jsx(lr,{variant:"destructive",className:"text-xs",children:"Notifiable"})]})]})})},B.id)),n.jsx("div",{className:"border-t border-border/50 mt-2 pt-2",children:n.jsxs(_e,{type:"button",variant:"ghost",size:"sm",onClick:()=>{Pr(!0),Ve(!1)},className:"w-full text-primary hover:text-primary/80",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add New Diagnosis"]})})]}):n.jsxs("div",{className:"p-4 text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No diagnoses found"}),n.jsxs(_e,{type:"button",variant:"outline",size:"sm",onClick:()=>{Pr(!0),Ve(!1)},children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add New Diagnosis"]})]})})})]}),pt&&n.jsx("div",{className:"mt-2 p-3 bg-primary/5 border border-primary/20 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:pt.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["ICD-10: ",pt.icd10Code," | ",pt.affectedSystem]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[pt.isTropicalDisease&&n.jsx(lr,{variant:"secondary",className:"text-xs",children:"Tropical Disease"}),pt.isNotifiable&&n.jsx(lr,{variant:"destructive",className:"text-xs",children:"Notifiable Disease"})]})]}),n.jsx(_e,{type:"button",variant:"ghost",size:"sm",onClick:()=>{cr(null),ze(""),ve({diagnosis:"",diagnosisCode:""})},children:n.jsx(Nn,{className:"w-4 h-4"})})]})})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(_e,{size:"sm",onClick:fc,disabled:!se.diagnosis.trim()||Ye,className:"flex-1",children:[Ye?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Save Diagnosis"]})})]}):n.jsx("div",{className:"bg-card border rounded-lg p-3",children:ue?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Diagnosis:"}),n.jsx("p",{className:"text-sm text-foreground",children:ue.description})]}),ue.code&&ue.code!=="UNSPECIFIED"&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"ICD Code:"}),n.jsx("p",{className:"text-sm text-foreground",children:ue.code})]}),n.jsxs("div",{className:"text-xs text-muted-foreground pt-1 border-t border-muted",children:["Diagnosed by Dr. ",ue.doctorName," on ",new Date(ue.date).toLocaleDateString()]})]}):n.jsx("p",{className:"text-sm text-foreground",children:"No diagnosis recorded yet"})})]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h4",{className:"font-semibold text-foreground flex items-center gap-2",children:[n.jsx(Kl,{className:"w-4 h-4 text-primary"}),"Laboratory Tests",n.jsxs(lr,{variant:"outline",className:"ml-2",children:[K.length," test",K.length!==1?"s":""]})]}),X.length>0&&n.jsxs(_e,{size:"sm",variant:"outline",onClick:()=>{Z({allResults:X,visitInfo:L}),Re(!0)},className:"h-7 px-3 text-xs",children:[n.jsx(hn,{className:"w-3 h-3 mr-1"}),"Preview All Results"]})]}),n.jsx("div",{className:"bg-card border rounded-lg",children:(()=>{console.log("Lab requests display check:"),console.log("visitLabRequests:",K),console.log("selectedVisit.labRequests:",L.labRequests),console.log("visitLabRequests.length:",Array.isArray(K)?K.length:"not array"),console.log("selectedVisit.labRequests.length:",Array.isArray(L.labRequests)?L.labRequests.length:"not array");const B=(!Array.isArray(K)||K.length===0)&&(!Array.isArray(L.labRequests)||L.labRequests.length===0);return console.log("Final noLabRequests result:",B),B})()?n.jsx("div",{className:"p-4 text-center",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"No lab tests requested"})}):n.jsx("div",{className:"divide-y divide-border",children:(Array.isArray(K)&&K.length>0?K:Array.isArray(L.labRequests)?L.labRequests:[]).map((B,Ne)=>{const Xe=typeof B=="string"?B:B.testType||B.name,zt=typeof B=="string"?`lab-${Ne}`:B.id,It=X.find(Bt=>Bt.requestId===zt);return n.jsxs("div",{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-sm",children:Xe}),n.jsx(lr,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Requested"})]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Test requested for this visit"}),It&&n.jsxs("div",{className:"mt-2 p-2 bg-muted/30 rounded text-xs",children:[n.jsx("p",{className:"font-medium text-foreground mb-2",children:"Results Available"}),It.componentValues&&It.componentValues.length>0?n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-muted-foreground",children:[It.componentValues.length," component",It.componentValues.length!==1?"s":""," tested"]}),n.jsxs("div",{className:"flex gap-1 flex-wrap",children:[It.componentValues.slice(0,3).map((Bt,rt)=>n.jsxs("span",{className:`px-1 rounded text-xs font-medium ${Bt.remark==="High"?"bg-red-100 text-red-700":Bt.remark==="Low"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:[Bt.name,": ",Bt.remark||"Normal"]},rt)),It.componentValues.length>3&&n.jsxs("span",{className:"text-muted-foreground text-xs",children:["+",It.componentValues.length-3," more"]})]})]}):n.jsx("p",{className:"text-muted-foreground",children:It.results?"Text results available":"Results completed"}),n.jsxs("p",{className:"text-muted-foreground mt-2 pt-1 border-t border-muted",children:["Completed: ",new Date(It.resultDate).toLocaleDateString()," by ",It.performedBy]})]})]},zt)})})})]})})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex justify-between pt-4 border-t border-border bg-background",children:[n.jsx(_e,{variant:"outline",onClick:()=>F(!1),children:"Close"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(_e,{onClick:()=>{$(L),Lt(!0),Mt(""),st(!1),Ee({medicationName:"",take:"",frequency:"",duration:"",instructions:"",quantity:""}),et([]),eh()},className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Prescribe Medication"]}),n.jsxs(_e,{onClick:()=>{ye.info("Edit functionality coming soon")},children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add Follow-up"]})]})]})]})]})}),n.jsx(wr,{open:$r,onOpenChange:ft,children:n.jsxs(xr,{className:"sm:max-w-3xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-3",children:[n.jsx(Sc,{className:"w-5 h-5 text-primary"}),"Prescribed Medications (",sn.length,")"]}),n.jsx(_s,{children:"Review all prescribed medications for this patient visit."})]}),sn.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Sc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No medications prescribed for this visit"})]}):n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Medication"}),n.jsx("th",{children:"Take"}),n.jsx("th",{children:"Frequency"}),n.jsx("th",{children:"Duration"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Instructions"}),n.jsx("th",{children:"Status"})]})}),n.jsx("tbody",{children:sn.map(B=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium text-primary",children:B.medication_name||B.medicationName}),n.jsx("td",{children:n.jsx(lr,{variant:"outline",className:"text-xs",children:B.take_instructions||B.take})}),n.jsx("td",{className:"font-medium",children:B.frequency==="1"?"Once daily":B.frequency==="2"?"Twice daily":B.frequency==="3"?"Three times daily":B.frequency==="4"?"Four times daily":B.frequency==="6"?"Every 4 hours":B.frequency==="8"?"Every 3 hours":B.frequency==="0"?"As needed":B.frequency}),n.jsxs("td",{className:"font-medium",children:[B.duration," days"]}),n.jsx("td",{className:"font-medium",children:B.quantity}),n.jsx("td",{className:"max-w-xs",children:n.jsx("div",{className:"truncate",title:B.instructions,children:B.instructions||"-"})}),n.jsx("td",{children:n.jsx(lr,{variant:B.status==="dispensed"?"default":"secondary",className:B.status==="dispensed"?"bg-green-100 text-green-800":"",children:B.status==="dispensed"?"Dispensed":"Active"})})]},B.id))})]})})}),n.jsx("div",{className:"flex justify-end pt-4",children:n.jsx(_e,{variant:"outline",onClick:()=>ft(!1),children:"Close"})})]})}),n.jsx(wr,{open:Ge,onOpenChange:Lt,children:n.jsxs(xr,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-3",children:[n.jsx(kr,{className:"w-5 h-5 text-primary"}),"Prescribe Medication"]}),n.jsx(_s,{children:"Add medications to the patient's prescription from available pharmacy stock."})]}),L&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Is,{className:"w-5 h-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:L.patientName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Visit: ",new Date(L.date).toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2 relative",children:[n.jsx(Ce,{className:"text-sm font-medium text-foreground",children:"Medication Name *"}),jt?n.jsx("div",{className:"mt-1 p-3 border rounded-md bg-muted/30 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Loading available medicines..."]})}):n.jsxs("div",{className:"relative medicine-dropdown-container",children:[n.jsx(Oe,{value:ut,onChange:B=>{Mt(B.target.value),st(!0)},onFocus:()=>st(!0),placeholder:"Search and select medication from available stock",className:"mt-1"}),Gt&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:[dt.length===0?n.jsx("div",{className:"p-3 text-center text-muted-foreground",children:"No medicines available in stock"}):dt.filter(B=>B.drug_name.toLowerCase().includes(ut.toLowerCase())).map(B=>n.jsx("div",{className:"p-3 hover:bg-muted cursor-pointer border-b border-border last:border-b-0",onClick:()=>{Ee({...Me,medicationName:B.drug_name}),Mt(B.drug_name),st(!1)},children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:B.drug_name}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Stock: ",B.current_stock," ",B.unit_of_measure]})]})},B.id)),dt.filter(B=>B.drug_name.toLowerCase().includes(ut.toLowerCase())).length===0&&ut&&n.jsxs("div",{className:"p-3 text-center text-muted-foreground",children:['No medicines found matching "',ut,'"']})]})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium text-foreground",children:"Take *"}),n.jsx(Oe,{value:Me.take,onChange:B=>Ee({...Me,take:B.target.value}),placeholder:"e.g., 1, 2, 0.5 (number of tablets/units)",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium text-foreground",children:"Frequency *"}),n.jsxs(Mn,{value:Me.frequency,onValueChange:B=>Ee({...Me,frequency:B}),children:[n.jsx(jn,{className:"mt-1",children:n.jsx(Fn,{placeholder:"Select frequency"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"1",children:"Once daily (1x/day)"}),n.jsx(ot,{value:"2",children:"Twice daily (2x/day)"}),n.jsx(ot,{value:"3",children:"Three times daily (3x/day)"}),n.jsx(ot,{value:"4",children:"Four times daily (4x/day)"}),n.jsx(ot,{value:"6",children:"Every 4 hours (6x/day)"}),n.jsx(ot,{value:"8",children:"Every 3 hours (8x/day)"}),n.jsx(ot,{value:"0",children:"As needed (PRN)"})]})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium text-foreground",children:"Duration *"}),n.jsxs(Mn,{value:Me.duration,onValueChange:B=>Ee({...Me,duration:B}),children:[n.jsx(jn,{className:"mt-1",children:n.jsx(Fn,{placeholder:"Select duration"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"3",children:"3 days"}),n.jsx(ot,{value:"5",children:"5 days"}),n.jsx(ot,{value:"7",children:"7 days (1 week)"}),n.jsx(ot,{value:"10",children:"10 days"}),n.jsx(ot,{value:"14",children:"14 days (2 weeks)"}),n.jsx(ot,{value:"21",children:"21 days (3 weeks)"}),n.jsx(ot,{value:"30",children:"30 days (1 month)"}),n.jsx(ot,{value:"60",children:"60 days (2 months)"}),n.jsx(ot,{value:"90",children:"90 days (3 months)"})]})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium text-foreground",children:"Quantity (Auto-calculated)"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Oe,{value:Me.quantity,readOnly:!0,placeholder:"Will be calculated automatically",className:`mt-1 bg-muted/30 cursor-not-allowed ${Me.medicationName&&Me.quantity?(()=>{const B=dt.find(Xe=>Xe.drug_name===Me.medicationName),Ne=parseInt(Me.quantity)||0;return B&&Ne>B.current_stock?"border-red-500 bg-red-50":B&&Ne>B.current_stock*.8?"border-yellow-500 bg-yellow-50":""})():""}`}),Me.medicationName&&(()=>{const B=dt.find(Ne=>Ne.drug_name===Me.medicationName);if(B){const Ne=parseInt(Me.quantity)||0;return n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"Available Stock:"}),n.jsxs("span",{className:`font-medium ${Ne>B.current_stock?"text-red-600":Ne>B.current_stock*.8?"text-yellow-600":"text-green-600"}`,children:[B.current_stock," ",B.unit_of_measure]})]}),Ne>0&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"Prescribing:"}),n.jsxs("span",{className:`font-medium ${Ne>B.current_stock?"text-red-600":Ne>B.current_stock*.8?"text-yellow-600":"text-green-600"}`,children:[Ne," ",B.unit_of_measure]})]}),Ne>B.current_stock&&n.jsxs("div",{className:"text-red-600 font-medium",children:[" Insufficient stock! Need ",Ne-B.current_stock," more ",B.unit_of_measure]}),Ne>B.current_stock*.8&&Ne<=B.current_stock&&n.jsxs("div",{className:"text-yellow-600 font-medium",children:[" Low stock warning! Only ",B.current_stock-Ne," ",B.unit_of_measure," remaining"]})]})}return null})()]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ce,{className:"text-sm font-medium text-foreground",children:"Instructions"}),n.jsx(yi,{value:Me.instructions,onChange:B=>Ee({...Me,instructions:B.target.value}),placeholder:"Special instructions for the patient",className:"mt-1",rows:2})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(_e,{type:"button",onClick:io,disabled:(()=>{if(!Me.medicationName||!Me.take||!Me.frequency||!Me.duration)return!0;const B=dt.find(Xe=>Xe.drug_name===Me.medicationName),Ne=parseInt(Me.quantity)||0;return B&&Ne>B.current_stock})(),className:`${(()=>{if(!Me.medicationName||!Me.take||!Me.frequency||!Me.duration)return"bg-gray-400 hover:bg-gray-400 cursor-not-allowed";const B=dt.find(Xe=>Xe.drug_name===Me.medicationName),Ne=parseInt(Me.quantity)||0;return B&&Ne>B.current_stock?"bg-red-500 hover:bg-red-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"})()}`,children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),(()=>{if(!Me.medicationName||!Me.take||!Me.frequency||!Me.duration)return"Add to Prescription";const B=dt.find(Xe=>Xe.drug_name===Me.medicationName),Ne=parseInt(Me.quantity)||0;return B&&Ne>B.current_stock?"Insufficient Stock":"Add to Prescription"})()]})}),it.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sc,{className:"w-5 h-5 text-primary"}),n.jsxs("h3",{className:"text-lg font-semibold",children:["Prescribed Medications (",it.length,")"]})]}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:n.jsx("div",{className:"max-h-60 overflow-y-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{className:"sticky top-0 bg-background",children:n.jsxs("tr",{children:[n.jsx("th",{children:"Medication"}),n.jsx("th",{children:"Take"}),n.jsx("th",{children:"Frequency"}),n.jsx("th",{children:"Duration"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Instructions"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:it.map((B,Ne)=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium text-primary",children:B.medicationName}),n.jsx("td",{children:n.jsx(lr,{variant:"outline",className:"text-xs",children:B.take})}),n.jsx("td",{className:"font-medium",children:xd(B.frequency)}),n.jsx("td",{className:"font-medium",children:zo(B.duration)}),n.jsx("td",{className:"font-medium",children:B.quantity||"-"}),n.jsx("td",{className:"max-w-xs",children:n.jsx("div",{className:"truncate",title:B.instructions,children:B.instructions||"-"})}),n.jsx("td",{children:n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>th(Ne),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 px-2",children:n.jsx(Nn,{className:"w-4 h-4"})})})]},Ne))})]})})})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[n.jsx(_e,{variant:"outline",onClick:()=>{Lt(!1),Ee({medicationName:"",take:"",frequency:"",duration:"",instructions:"",quantity:""})},className:"flex-1",disabled:Ut,children:"Cancel"}),n.jsxs(_e,{onClick:nh,className:"flex-1",disabled:Ut||it.length===0,children:[Ut?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Create Prescription (",it.length," medication",it.length!==1?"s":"",")"]})]})]})]})}),n.jsx(wr,{open:u,onOpenChange:m,children:n.jsxs(xr,{className:"sm:max-w-4xl max-h-[90vh] flex flex-col",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-3",children:[n.jsx(qa,{className:"w-5 h-5 text-primary"}),"New Clinical Visit"]}),n.jsx(_s,{children:"Create a new clinical visit with patient complaints, vital signs, and clinical notes."})]}),k&&n.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"font-medium",children:k.fullName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.patientId,"  Age: ",k.age||"N/A","  ",k.occupation||"N/A"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs("form",{id:"visit-form",onSubmit:uc,className:"space-y-6",children:[n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[n.jsx(Sc,{className:"w-5 h-5 text-primary"}),"Chief Complaints"]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Chief Complaints *"}),n.jsxs("div",{className:"relative complaint-dropdown-container",children:[n.jsxs("button",{type:"button",onClick:()=>de(!Y),className:"w-full p-3 border border-border rounded-lg bg-background hover:bg-muted/50 text-left min-h-[48px] flex items-center justify-between",children:[n.jsx("span",{className:M.length===0?"text-muted-foreground":"",children:M.length===0?"Select chief complaints...":`${M.length} complaint${M.length>1?"s":""} selected`}),n.jsx(kr,{className:"w-4 h-4 text-muted-foreground"})]}),Y&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-background border border-border rounded-lg shadow-lg max-h-64 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx(Oe,{placeholder:"Add custom complaint...",value:E,onChange:B=>ae(B.target.value),onKeyDown:B=>{B.key==="Enter"&&(B.preventDefault(),hc())},className:"flex-1"}),n.jsx(_e,{type:"button",size:"sm",onClick:hc,disabled:!E.trim(),children:"Add"})]}),n.jsx("div",{className:"space-y-1",children:X9.map(B=>n.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:M.includes(B),onChange:Ne=>{Ne.target.checked?ee([...M,B]):ee(M.filter(Xe=>Xe!==B))},className:"rounded"}),n.jsx("span",{className:"text-sm",children:B})]},B))})]})})]}),M.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:M.map(B=>n.jsxs(lr,{variant:"secondary",className:"cursor-pointer hover:bg-muted/80",onClick:()=>ia(B),children:[B,n.jsx(Nn,{className:"w-3 h-3 ml-1"})]},B))})]})]}),n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[n.jsx(To,{className:"w-5 h-5 text-primary"}),"Vital Signs"]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Blood Pressure (mmHg)"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(Oe,{type:"number",placeholder:"Systolic",value:_t.bloodPressureSystolic,onChange:B=>Ws("bloodPressureSystolic",B.target.value),className:"flex-1"}),n.jsx("span",{className:"text-muted-foreground",children:"/"}),n.jsx(Oe,{type:"number",placeholder:"Diastolic",value:_t.bloodPressureDiastolic,onChange:B=>Ws("bloodPressureDiastolic",B.target.value),className:"flex-1"})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Pulse (bpm)"}),n.jsx(Oe,{type:"number",placeholder:"e.g., 72",value:_t.pulse,onChange:B=>Ws("pulse",B.target.value),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Temperature (C)"}),n.jsx(Oe,{type:"number",step:"0.1",placeholder:"e.g., 36.5",value:_t.temperature,onChange:B=>Ws("temperature",B.target.value),className:"mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Respiratory Rate (breaths/min)"}),n.jsx(Oe,{type:"number",placeholder:"e.g., 16",value:_t.respiratoryRate,onChange:B=>Ws("respiratoryRate",B.target.value),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Oxygen Saturation (%)"}),n.jsx(Oe,{type:"number",placeholder:"e.g., 98",value:_t.oxygenSaturation,onChange:B=>Ws("oxygenSaturation",B.target.value),className:"mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Weight (kg)"}),n.jsx(Oe,{type:"number",step:"0.1",placeholder:"e.g., 70.5",value:_t.weight,onChange:B=>Ws("weight",B.target.value),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Height (cm)"}),n.jsx(Oe,{type:"number",placeholder:"e.g., 175",value:_t.height,onChange:B=>Ws("height",B.target.value),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"BMI"}),n.jsx(Oe,{value:_t.bmi,readOnly:!0,placeholder:"Auto-calculated",className:"mt-1 bg-muted/50"})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Vitals Notes"}),n.jsx(yi,{placeholder:"Additional observations about vital signs...",value:_t.notes,onChange:B=>Ws("notes",B.target.value),rows:2,className:"mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Clinical Assessment"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Clinical Notes"}),n.jsx(yi,{value:ct.clinicalNotes,onChange:B=>qt({...ct,clinicalNotes:B.target.value}),placeholder:"Examination findings, observations...",rows:4})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Diagnosis *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{value:mt,onChange:B=>ao(B.target.value),onFocus:()=>ao(mt),placeholder:"Search for diagnosis...",className:"pr-10"}),n.jsx(In,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),$t&&n.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-background border border-border rounded-lg shadow-lg max-h-64 overflow-y-auto",children:n.jsx("div",{className:"p-2",children:at.length>0?n.jsxs(n.Fragment,{children:[at.map(B=>n.jsx("div",{onClick:()=>pd(B),className:"p-3 hover:bg-muted/50 cursor-pointer rounded-md border-b border-border/50 last:border-b-0",children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:B.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["ICD-10: ",B.icd10Code," | ",B.affectedSystem]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[B.isTropicalDisease&&n.jsx(lr,{variant:"secondary",className:"text-xs",children:"Tropical"}),B.isNotifiable&&n.jsx(lr,{variant:"destructive",className:"text-xs",children:"Notifiable"})]})]})})},B.id)),n.jsx("div",{className:"border-t border-border/50 mt-2 pt-2",children:n.jsxs(_e,{type:"button",variant:"ghost",size:"sm",onClick:()=>{Pr(!0),At(!1)},className:"w-full text-primary hover:text-primary/80",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add New Diagnosis"]})})]}):n.jsxs("div",{className:"p-4 text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No diagnoses found"}),n.jsxs(_e,{type:"button",variant:"outline",size:"sm",onClick:()=>{Pr(!0),At(!1)},children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add New Diagnosis"]})]})})})]}),Sr&&n.jsx("div",{className:"mt-2 p-3 bg-primary/5 border border-primary/20 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:Sr.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["ICD-10: ",Sr.icd10Code," | ",Sr.affectedSystem]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[Sr.isTropicalDisease&&n.jsx(lr,{variant:"secondary",className:"text-xs",children:"Tropical Disease"}),Sr.isNotifiable&&n.jsx(lr,{variant:"destructive",className:"text-xs",children:"Notifiable Disease"})]})]}),n.jsx(_e,{type:"button",variant:"ghost",size:"sm",onClick:()=>{on(null),Pt(""),qt({...ct,diagnosis:"",diagnosisCode:""})},children:n.jsx(Nn,{className:"w-4 h-4"})})]})})]})})]})]}),n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[n.jsx(g2,{className:"w-5 h-5 text-primary"}),"Laboratory Requests"]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Laboratory Tests"}),n.jsxs("div",{className:"relative lab-test-dropdown-container",children:[n.jsxs("button",{type:"button",onClick:()=>V(!T),className:"w-full p-3 border border-border rounded-lg bg-background hover:bg-muted/50 text-left min-h-[48px] flex items-center justify-between",children:[n.jsx("span",{className:q.length===0?"text-muted-foreground":"",children:q.length===0?"Select laboratory tests...":`${q.length} test${q.length>1?"s":""} selected`}),n.jsx(kr,{className:"w-4 h-4 text-muted-foreground"})]}),T&&n.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-background border border-border rounded-lg shadow-lg",children:n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"mb-2 sticky top-0 bg-background",children:n.jsx(Oe,{placeholder:"Search lab tests...",value:re,onChange:B=>he(B.target.value),className:"w-full"})}),n.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:J.filter(B=>B.toLowerCase().includes(re.toLowerCase())).map(B=>n.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:q.includes(B),onChange:Ne=>{Ne.target.checked?D([...q,B]):D(q.filter(Xe=>Xe!==B))},className:"rounded"}),n.jsx("span",{className:"text-sm",children:B})]},B))})]})})]}),q.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:q.map(B=>n.jsxs(lr,{variant:"secondary",className:"cursor-pointer hover:bg-muted/80",onClick:()=>D(q.filter(Ne=>Ne!==B)),children:[B,n.jsx(Nn,{className:"w-3 h-3 ml-1"})]},B))})]})]})]})]})}),n.jsx("div",{className:"bg-background border-t border-border p-4 mt-4",children:n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>{m(!1),R(null),O(null),ee([]),ae("")},className:"w-24",disabled:x,children:"Cancel"}),n.jsxs(_e,{type:"submit",form:"visit-form",className:"w-32",disabled:x||M.length===0,children:[x?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Save Visit"]})]})})]})}),n.jsx(wr,{open:qs,onOpenChange:an,children:n.jsxs(xr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Is,{className:"w-5 h-5 text-primary"}),"Register New Patient"]}),n.jsx(_s,{children:"Register a new patient and automatically add them to the queue"})]}),n.jsxs("form",{onSubmit:B=>{B.preventDefault(),sh()},className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Full Name *"}),n.jsx(Oe,{value:Qt.fullName,onChange:B=>Qr({...Qt,fullName:B.target.value}),placeholder:"Enter patient's full name",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Age"}),n.jsx(Oe,{type:"number",value:Qt.age,onChange:B=>{Qr({...Qt,age:B.target.value,dateOfBirth:""})},placeholder:"Enter age"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"OR Date of Birth"}),n.jsx(Oe,{type:"date",value:Qt.dateOfBirth,onChange:B=>{const Ne=B.target.value?yd(B.target.value):"";Qr({...Qt,dateOfBirth:B.target.value,age:Ne.toString()})}})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Gender"}),n.jsxs(Mn,{value:Qt.gender,onValueChange:B=>Qr({...Qt,gender:B}),children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select gender"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"Male",children:"Male"}),n.jsx(ot,{value:"Female",children:"Female"}),n.jsx(ot,{value:"Other",children:"Other"})]})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Phone Number"}),n.jsx(Oe,{value:Qt.phoneNumber,onChange:B=>Qr({...Qt,phoneNumber:B.target.value}),placeholder:"Enter phone number"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Beneficiary Type"}),n.jsxs(Mn,{value:Qt.beneficiaryType,onValueChange:B=>Qr({...Qt,beneficiaryType:B}),children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select beneficiary type"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"local_residents",children:"Local Residents"}),n.jsx(ot,{value:"dpoc_staff",children:"DPOC Staff"}),n.jsx(ot,{value:"contractors",children:"Contractors"}),n.jsx(ot,{value:"arm_group",children:"Arm Group (Police, NSS & SSPDF)"})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>{an(!1),Qr({fullName:"",age:"",dateOfBirth:"",gender:"",phoneNumber:"",beneficiaryType:"local_residents"})},className:"flex-1",disabled:Vs,children:"Cancel"}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:Vs||!Qt.fullName,children:[Vs?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(Is,{className:"w-4 h-4 mr-2"}),"Register & Queue Patient"]})]})]})]})}),n.jsx(wr,{open:Vr,onOpenChange:Pr,children:n.jsxs(xr,{className:"max-w-2xl",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(kr,{className:"w-5 h-5 text-primary"}),"Add New Diagnosis"]}),n.jsx(_s,{children:"Add a new diagnosis to the MOH master list for future use"})]}),n.jsxs("form",{onSubmit:B=>{B.preventDefault(),Hs()},className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Diagnosis Name *"}),n.jsx(Oe,{value:pr.name,onChange:B=>aa({...pr,name:B.target.value}),placeholder:"e.g., Acute Bronchitis",required:!0})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"ICD-10 Code"}),n.jsx(Oe,{value:pr.icd10Code,onChange:B=>aa({...pr,icd10Code:B.target.value}),placeholder:"e.g., J20.9"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Disease Category"}),n.jsxs(Mn,{value:pr.category,onValueChange:B=>aa({...pr,category:B}),children:[n.jsx(jn,{children:n.jsx(Fn,{})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"tropical",children:"Tropical Disease"}),n.jsx(ot,{value:"digestive",children:"Digestive System"}),n.jsx(ot,{value:"respiratory",children:"Respiratory System"}),n.jsx(ot,{value:"urogenital",children:"Urogenital System"}),n.jsx(ot,{value:"cardiovascular",children:"Cardiovascular System"}),n.jsx(ot,{value:"cns_musculoskeletal",children:"CNS & Musculoskeletal"}),n.jsx(ot,{value:"dermatological",children:"Dermatological System"}),n.jsx(ot,{value:"surgery",children:"Surgery Cases"}),n.jsx(ot,{value:"other",children:"Others"})]})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Affected System"}),n.jsx(Oe,{value:pr.affectedSystem,onChange:B=>aa({...pr,affectedSystem:B.target.value}),placeholder:"e.g., Respiratory system"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx("div",{className:"form-field",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"isTropicalDisease",checked:pr.isTropicalDisease,onChange:B=>aa({...pr,isTropicalDisease:B.target.checked}),className:"rounded border-border"}),n.jsx(Ce,{htmlFor:"isTropicalDisease",className:"text-sm font-medium",children:"Tropical Disease"})]})}),n.jsx("div",{className:"form-field",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"isNotifiable",checked:pr.isNotifiable,onChange:B=>aa({...pr,isNotifiable:B.target.checked}),className:"rounded border-border"}),n.jsx(Ce,{htmlFor:"isNotifiable",className:"text-sm font-medium",children:"Notifiable Disease"})]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>Pr(!1),className:"flex-1",children:"Cancel"}),n.jsxs(_e,{type:"submit",className:"flex-1",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add Diagnosis"]})]})]})]})})]})})};var yx="Checkbox",[Z9,E3]=Ea(yx),[eB,F2]=Z9(yx);function tB(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=e,[x,f]=Oo({prop:r,defaultProp:a??!1,onChange:c,caller:yx}),[y,v]=p.useState(null),[S,b]=p.useState(null),j=p.useRef(!1),w=y?!!l||!!y.closest("form"):!0,k={checked:x,disabled:i,setChecked:f,control:y,setControl:v,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:zl(a)?!1:a,isFormControl:w,bubbleInput:S,setBubbleInput:b};return n.jsx(eB,{scope:t,...k,children:rB(m)?m(k):s})}var pA="CheckboxTrigger",gA=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:i,value:l,disabled:o,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:x,isFormControl:f,bubbleInput:y}=F2(pA,e),v=or(a,u),S=p.useRef(c);return p.useEffect(()=>{const b=i==null?void 0:i.form;if(b){const j=()=>m(S.current);return b.addEventListener("reset",j),()=>b.removeEventListener("reset",j)}},[i,m]),n.jsx(bt.button,{type:"button",role:"checkbox","aria-checked":zl(c)?"mixed":c,"aria-required":d,"data-state":wA(c),"data-disabled":o?"":void 0,disabled:o,value:l,...s,ref:v,onKeyDown:Je(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Je(r,b=>{m(j=>zl(j)?!0:!j),y&&f&&(x.current=b.isPropagationStopped(),x.current||b.stopPropagation())})})});gA.displayName=pA;var O2=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return n.jsx(tB,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:x})=>n.jsxs(n.Fragment,{children:[n.jsx(gA,{...m,ref:t,__scopeCheckbox:r}),x&&n.jsx(bA,{__scopeCheckbox:r})]})})});O2.displayName=yx;var xA="CheckboxIndicator",vA=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,i=F2(xA,r);return n.jsx(ss,{present:s||zl(i.checked)||i.checked===!0,children:n.jsx(bt.span,{"data-state":wA(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});vA.displayName=xA;var yA="CheckboxBubbleInput",bA=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:d,value:u,form:m,bubbleInput:x,setBubbleInput:f}=F2(yA,e),y=or(r,f),v=LP(i),S=Ck(s);p.useEffect(()=>{const j=x;if(!j)return;const w=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(w,"checked").set,W=!a.current;if(v!==i&&R){const O=new Event("click",{bubbles:W});j.indeterminate=zl(i),R.call(j,zl(i)?!1:i),j.dispatchEvent(O)}},[x,v,i,a]);const b=p.useRef(zl(i)?!1:i);return n.jsx(bt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,required:o,disabled:c,name:d,value:u,form:m,...t,tabIndex:-1,ref:y,style:{...t.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});bA.displayName=yA;function rB(e){return typeof e=="function"}function zl(e){return e==="indeterminate"}function wA(e){return zl(e)?"indeterminate":e?"checked":"unchecked"}const xl=p.forwardRef(({className:e,...t},r)=>n.jsx(O2,{ref:r,className:ht("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(vA,{className:ht("flex items-center justify-center text-current"),children:n.jsx(ra,{className:"h-4 w-4"})})}));xl.displayName=O2.displayName;function Ai(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function rd(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const NA=6048e5,nB=864e5;let sB={};function bx(){return sB}function Mf(e,t){var o,c,d,u;const r=bx(),s=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ai(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Ng(e){return Mf(e,{weekStartsOn:1})}function jA(e){const t=Ai(e),r=t.getFullYear(),s=rd(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Ng(s),i=rd(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Ng(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function u5(e){const t=Ai(e);return t.setHours(0,0,0,0),t}function h5(e){const t=Ai(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function aB(e,t){const r=u5(e),s=u5(t),a=+r-h5(r),i=+s-h5(s);return Math.round((a-i)/nB)}function iB(e){const t=jA(e),r=rd(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ng(r)}function oB(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function lB(e){if(!oB(e)&&typeof e!="number")return!1;const t=Ai(e);return!isNaN(Number(t))}function cB(e){const t=Ai(e),r=rd(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const dB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uB=(e,t,r)=>{let s;const a=dB[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qv(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const hB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pB={date:qv({formats:hB,defaultWidth:"full"}),time:qv({formats:fB,defaultWidth:"full"}),dateTime:qv({formats:mB,defaultWidth:"full"})},gB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xB=(e,t,r,s)=>gB[e];function Ih(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):l;a=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[o]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const vB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},NB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SB=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},_B={ordinalNumber:SB,era:Ih({values:vB,defaultWidth:"wide"}),quarter:Ih({values:yB,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ih({values:bB,defaultWidth:"wide"}),day:Ih({values:wB,defaultWidth:"wide"}),dayPeriod:Ih({values:NB,defaultWidth:"wide",formattingValues:jB,defaultFormattingWidth:"wide"})};function Mh(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?kB(o,m=>m.test(l)):CB(o,m=>m.test(l));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(l.length);return{value:d,rest:u}}}function CB(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function kB(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function PB(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const o=t.slice(a.length);return{value:l,rest:o}}}const AB=/^(\d+)(th|st|nd|rd)?/i,EB=/\d+/i,LB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TB={any:[/^b/i,/^(a|c)/i]},DB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RB={any:[/1/i,/2/i,/3/i,/4/i]},IB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$B={ordinalNumber:PB({matchPattern:AB,parsePattern:EB,valueCallback:e=>parseInt(e,10)}),era:Mh({matchPatterns:LB,defaultMatchWidth:"wide",parsePatterns:TB,defaultParseWidth:"any"}),quarter:Mh({matchPatterns:DB,defaultMatchWidth:"wide",parsePatterns:RB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Mh({matchPatterns:IB,defaultMatchWidth:"wide",parsePatterns:MB,defaultParseWidth:"any"}),day:Mh({matchPatterns:FB,defaultMatchWidth:"wide",parsePatterns:OB,defaultParseWidth:"any"}),dayPeriod:Mh({matchPatterns:BB,defaultMatchWidth:"any",parsePatterns:UB,defaultParseWidth:"any"})},zB={code:"en-US",formatDistance:uB,formatLong:pB,formatRelative:xB,localize:_B,match:$B,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qB(e){const t=Ai(e);return aB(t,cB(t))+1}function VB(e){const t=Ai(e),r=+Ng(t)-+iB(t);return Math.round(r/NA)+1}function SA(e,t){var u,m,x,f;const r=Ai(e),s=r.getFullYear(),a=bx(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(x=a.locale)==null?void 0:x.options)==null?void 0:f.firstWeekContainsDate)??1,l=rd(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const o=Mf(l,t),c=rd(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=Mf(c,t);return r.getTime()>=o.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function HB(e,t){var o,c,d,u;const r=bx(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=SA(e,t),i=rd(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Mf(i,t)}function WB(e,t){const r=Ai(e),s=+Mf(r,t)-+HB(r,t);return Math.round(s/NA)+1}function Tr(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const dl={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Tr(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Tr(r+1,2)},d(e,t){return Tr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Tr(e.getHours()%12||12,t.length)},H(e,t){return Tr(e.getHours(),t.length)},m(e,t){return Tr(e.getMinutes(),t.length)},s(e,t){return Tr(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Tr(a,t.length)}},Ed={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},f5={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return dl.y(e,t)},Y:function(e,t,r,s){const a=SA(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return Tr(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Tr(i,t.length)},R:function(e,t){const r=jA(e);return Tr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Tr(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Tr(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Tr(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return dl.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Tr(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=WB(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Tr(a,t.length)},I:function(e,t,r){const s=VB(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Tr(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):dl.d(e,t)},D:function(e,t,r){const s=qB(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Tr(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Tr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Tr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Tr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Ed.noon:s===0?a=Ed.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Ed.evening:s>=12?a=Ed.afternoon:s>=4?a=Ed.morning:a=Ed.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return dl.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):dl.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Tr(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Tr(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):dl.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):dl.s(e,t)},S:function(e,t){return dl.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return p5(s);case"XXXX":case"XX":return kc(s);case"XXXXX":case"XXX":default:return kc(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return p5(s);case"xxxx":case"xx":return kc(s);case"xxxxx":case"xxx":default:return kc(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m5(s,":");case"OOOO":default:return"GMT"+kc(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m5(s,":");case"zzzz":default:return"GMT"+kc(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Tr(s,t.length)},T:function(e,t,r){const s=e.getTime();return Tr(s,t.length)}};function m5(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+Tr(i,2)}function p5(e,t){return e%60===0?(e>0?"-":"+")+Tr(Math.abs(e)/60,2):kc(e,t)}function kc(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Tr(Math.trunc(s/60),2),i=Tr(s%60,2);return r+a+t+i}const g5=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_A=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},GB=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return g5(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",g5(s,t)).replace("{{time}}",_A(a,t))},YB={p:_A,P:GB},KB=/^D+$/,QB=/^Y+$/,XB=["D","DD","YY","YYYY"];function JB(e){return KB.test(e)}function ZB(e){return QB.test(e)}function eU(e,t,r){const s=tU(e,t,r);if(console.warn(s),XB.includes(e))throw new RangeError(s)}function tU(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sU=/^'([^]*?)'?$/,aU=/''/g,iU=/[a-zA-Z]/;function Vv(e,t,r){var u,m,x,f;const s=bx(),a=s.locale??zB,i=s.firstWeekContainsDate??((m=(u=s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,l=s.weekStartsOn??((f=(x=s.locale)==null?void 0:x.options)==null?void 0:f.weekStartsOn)??0,o=Ai(e);if(!lB(o))throw new RangeError("Invalid time value");let c=t.match(nU).map(y=>{const v=y[0];if(v==="p"||v==="P"){const S=YB[v];return S(y,a.formatLong)}return y}).join("").match(rU).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:oU(y)};if(f5[v])return{isToken:!0,value:y};if(v.match(iU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(ZB(v)||JB(v))&&eU(v,t,String(e));const S=f5[v[0]];return S(o,v,a.localize,d)}).join("")}function oU(e){const t=e.match(sU);return t?t[1].replace(aU,"'"):e}const lU=({bill:e,payment:t,clinicName:r="Medical Clinic",receiptNumber:s})=>{var l,o,c;const a=new Date,i=s||`RCP-${Date.now().toString().slice(-8)}`;return n.jsxs("div",{className:"thermal-receipt",style:{width:"100%",maxWidth:"302px",fontFamily:"monospace",fontSize:"11px",lineHeight:"1.3",color:"#000",backgroundColor:"#fff",padding:"12px",margin:"0 auto",boxSizing:"border-box"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"12px"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"2px"},children:"UNIVERSAL HOSPITAL"}),n.jsx("div",{style:{fontSize:"9px",marginBottom:"1px",color:"#666"},children:"Hai Jerusalem, Juba, South Sudan"}),n.jsx("div",{style:{fontSize:"9px",marginBottom:"1px",color:"#666"},children:"Tel: 0922123463"}),n.jsx("div",{style:{fontSize:"9px",marginBottom:"6px",color:"#666"},children:"Email: info@universalhospital.com"}),n.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",marginBottom:"2px"},children:"PAYMENT RECEIPT"}),n.jsx("div",{style:{fontSize:"10px"},children:Vv(a,"dd/MM/yyyy HH:mm:ss")})]}),n.jsx("div",{style:{borderTop:"1px dashed #000",margin:"8px 0"}}),n.jsxs("div",{style:{marginBottom:"12px",fontSize:"11px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"Receipt No:"}),n.jsx("span",{style:{fontWeight:"bold"},children:i})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"Bill No:"}),n.jsx("span",{children:e.billNumber})]})]}),n.jsxs("div",{style:{marginBottom:"12px",fontSize:"11px"},children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"2px"},children:"PATIENT DETAILS:"}),n.jsxs("div",{children:["Name: ",e.patientName]}),n.jsxs("div",{children:["ID: ",e.patientId]}),n.jsxs("div",{children:["Bill Date: ",Vv(new Date(e.billDate),"dd/MM/yyyy")]})]}),n.jsx("div",{style:{borderTop:"1px dashed #000",margin:"8px 0"}}),n.jsxs("div",{style:{marginBottom:"12px",fontSize:"10px"},children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"SERVICES:"}),e.services&&e.services.length>0?e.services.map((d,u)=>n.jsxs("div",{style:{marginBottom:"3px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{flex:1,paddingRight:"4px"},children:d.serviceName||d.name||d.service_name||d.test_name||"Unknown Service"}),n.jsxs("span",{style:{minWidth:"60px",textAlign:"right"},children:["SSP ",(d.totalPrice||d.total_price||d.price||0).toFixed(2)]})]}),n.jsxs("div",{style:{fontSize:"9px",color:"#666",paddingLeft:"4px"},children:[d.quantity||1," x SSP ",(d.unitPrice||d.unit_price||d.price||0).toFixed(2)]})]},d.id||u)):n.jsx("div",{style:{fontSize:"9px",color:"#666",fontStyle:"italic"},children:"No service details available"})]}),n.jsx("div",{style:{borderTop:"1px dashed #000",margin:"8px 0"}}),n.jsxs("div",{style:{marginBottom:"12px",fontSize:"11px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[n.jsx("span",{children:"Total Amount:"}),n.jsxs("span",{children:["SSP ",((l=e.totalAmount)==null?void 0:l.toFixed(2))||"0.00"]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[n.jsx("span",{children:"Total Paid:"}),n.jsxs("span",{children:["SSP ",((o=e.paidAmount)==null?void 0:o.toFixed(2))||"0.00"]})]}),n.jsx("div",{style:{borderTop:"1px solid #000",paddingTop:"2px",marginTop:"4px"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold"},children:[n.jsx("span",{children:"Balance Due:"}),n.jsxs("span",{children:["SSP ",Math.max(0,(e.totalAmount||0)-(e.paidAmount||0)).toFixed(2)]})]})})]}),n.jsxs("div",{style:{marginBottom:"12px",fontSize:"11px"},children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:"2px"},children:"PAYMENT DETAILS:"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"Method:"}),n.jsx("span",{style:{textTransform:"capitalize"},children:t.method})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:"Date:"}),n.jsx("span",{children:Vv(new Date(t.date),"dd/MM/yyyy")})]}),t.from_lease&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginTop:"4px",fontWeight:"bold",fontSize:"10px"},children:"LEASE PAYMENT"}),t.lease_details&&n.jsx("div",{style:{fontSize:"9px",marginTop:"2px",wordWrap:"break-word"},children:t.lease_details})]}),t.notes&&n.jsxs("div",{style:{marginTop:"4px"},children:[n.jsx("div",{style:{fontWeight:"bold",fontSize:"10px"},children:"Notes:"}),n.jsx("div",{style:{fontSize:"9px",wordWrap:"break-word"},children:t.notes})]})]}),n.jsx("div",{style:{borderTop:"1px dashed #000",margin:"8px 0"}}),t.cashierName&&n.jsxs("div",{style:{marginBottom:"12px",fontSize:"10px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[n.jsx("span",{style:{fontWeight:"bold"},children:"RECEIVED BY:"}),n.jsx("span",{style:{fontWeight:"bold"},children:t.cashierName})]}),t.cashierId&&n.jsxs("div",{style:{textAlign:"right",fontSize:"9px",color:"#666"},children:["ID: ",t.cashierId]})]}),n.jsx("div",{style:{borderTop:"1px dashed #000",margin:"8px 0"}}),n.jsxs("div",{style:{textAlign:"center",fontSize:"10px",marginTop:"12px"},children:[n.jsx("div",{style:{marginBottom:"4px"},children:"Thank you for your payment!"}),n.jsx("div",{style:{fontSize:"9px",color:"#666"},children:"Keep this receipt for your records"}),e.balanceAmount>0&&n.jsxs("div",{style:{fontSize:"9px",color:"#666",marginTop:"4px"},children:["Outstanding balance: SSP ",((c=e.balanceAmount)==null?void 0:c.toFixed(2))||"0.00"]})]}),n.jsx("div",{style:{height:"20px"}})]})},cU=e=>{const t=window.open("","_blank");if(!t){alert("Please allow popups to print the receipt");return}const r=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Payment Receipt</title>
      <style>
        @media print {
          @page {
            size: 80mm auto;
            margin: 0;
          }
          body {
            margin: 0;
            padding: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.2;
          }
          .thermal-receipt {
            width: 80mm !important;
            max-width: none !important;
          }
        }
        body {
          margin: 0;
          padding: 8px;
          font-family: 'Courier New', monospace;
        }
      </style>
    </head>
    <body>
      ${e.outerHTML}
      <script>
        window.onload = function() {
          window.print();
          setTimeout(function() {
            window.close();
          }, 1000);
        };
      <\/script>
    </body>
    </html>
  `;t.document.write(r),t.document.close()},dU=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(""),[o,c]=p.useState(null),[d,u]=p.useState(!1),[m,x]=p.useState(!1),[f,y]=p.useState(!1),[v,S]=p.useState(!1),[b,j]=p.useState(null),[w,k]=p.useState(new Set),[R,W]=p.useState([]),[O,q]=p.useState({paymentMethod:"cash",amountTendered:"",notes:""}),[D,J]=p.useState({billId:"",amount:0,paymentMethod:"cash",paymentDate:new Date().toISOString().split("T")[0],notes:"",fromLease:!1,leaseDetails:"",cashierName:(e==null?void 0:e.displayName)||"Unknown",cashierId:(e==null?void 0:e.id)||"",paidServiceIndexes:[]}),[A,M]=p.useState(!1),[ee,E]=p.useState([]),[ae,Y]=p.useState([]),[de,T]=p.useState(""),[V,re]=p.useState({patientId:"",isWalkIn:!1,walkInPatient:{fullName:"",age:"",phone:"",gender:""},selectedServices:[],notes:""}),[he,C]=p.useState(!1),[F,L]=p.useState(!1),[$,K]=p.useState(""),[I,X]=p.useState({selectedServices:[]}),[ne,ue]=p.useState(!1),xe={async getByClinic(se){try{const ve=window.location.hostname,Pe=ve==="localhost"||ve==="127.0.0.1",pe=await fetch(`/api/patient-bills/clinic/${se}`);if(!pe.ok)throw new Error("Failed to fetch patient bills");return(await pe.json()).map(qe=>{let Ve=[];if(qe.services)try{typeof qe.services=="object"?Ve=Array.isArray(qe.services)?qe.services:[qe.services]:typeof qe.services=="string"&&(Ve=JSON.parse(qe.services))}catch(Yt){console.warn("Failed to parse services for bill:",qe.id,Yt),Ve=[]}return{id:qe.id,patientId:qe.patient_id,patientName:qe.patient_name,billNumber:qe.bill_number,totalAmount:parseFloat(qe.total_amount)||0,paidAmount:parseFloat(qe.paid_amount)||0,balanceAmount:parseFloat(qe.balance_amount)||0,status:qe.status,billDate:qe.bill_date,dueDate:qe.due_date,services:Ve,createdAt:qe.created_at,updatedAt:qe.updated_at}})}catch(ve){throw console.error("Error fetching patient bills:",ve),ve}},async create(se){try{const ve=window.location.hostname,Pe=ve==="localhost"||ve==="127.0.0.1",pe=await fetch("/api/patient-bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!pe.ok)throw new Error("Failed to create patient bill");return await pe.json()}catch(ve){throw console.error("Error creating patient bill:",ve),ve}},async update(se,ve){try{const Pe=window.location.hostname,Fe=Pe==="localhost"||Pe==="127.0.0.1",ze=await fetch(`/api/patient-bills/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(!ze.ok)throw new Error("Failed to update patient bill");return await ze.json()}catch(Pe){throw console.error("Error updating patient bill:",Pe),Pe}},async delete(se){try{const ve=window.location.hostname,Pe=ve==="localhost"||ve==="127.0.0.1";if(!(await fetch(`/api/patient-bills/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete patient bill")}catch(ve){throw console.error("Error deleting patient bill:",ve),ve}},async getReceipts(se){try{const ve=window.location.hostname,Pe=ve==="localhost"||ve==="127.0.0.1",Fe="/api",pe=await fetch(`${Fe}/receipts/clinic/${e==null?void 0:e.clinic}?bill_id=${se}`);if(!pe.ok)throw new Error("Failed to fetch receipts");const qe=(await pe.json()).filter(Ve=>Ve.bill_id===se);console.log("Direct receipts fetch for bill:",se,qe);try{const Ve=await fetch(`${Fe}/patient-bills/${se}/receipts`);if(Ve.ok){const Yt=await Ve.json();console.log("Fallback receipts from patient-bills endpoint:",Yt);const xt=[...qe];return Yt.forEach(pt=>{qe.find(cr=>cr.id===pt.id)||xt.push(pt)}),console.log("Merged receipts:",xt),xt}}catch{console.log("Fallback endpoint failed, using primary results")}return qe}catch(ve){throw console.error("Error fetching receipts:",ve),ve}},async addPayment(se){try{const ve={amount:se.amount,payment_method:se.paymentMethod,payment_date:se.paymentDate,notes:se.notes,from_lease:se.fromLease,lease_details:se.leaseDetails,paidServiceIndexes:se.paidServiceIndexes,cashierName:se.cashierName,cashierId:se.cashierId};console.log("Payment payload being sent:",ve),console.log("paidServiceIndexes value:",se.paidServiceIndexes);const Pe=window.location.hostname,Fe=Pe==="localhost"||Pe==="127.0.0.1",ze=await fetch(`/api/patient-bills/${se.billId}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(!ze.ok){const qe=await ze.text();throw console.error("Payment API Error Response:",qe),console.error("Response Status:",ze.status),console.error("Response Headers:",ze.headers),new Error(`Failed to add payment: ${ze.status} - ${qe}`)}return await ze.json()}catch(ve){throw console.error("Error adding payment:",ve),ve}}};p.useEffect(()=>{ke()},[]);const ke=async()=>{if(e!=null&&e.clinic)try{a(!0);const se=await xe.getByClinic(e.clinic);r(se)}catch(se){console.error("Error fetching bills:",se),ye.error("Failed to fetch bills")}finally{a(!1)}},Re=async()=>{try{const se=await fetch("/api/patients");if(!se.ok)throw new Error("Failed to fetch patients");const ve=await se.json();E(ve)}catch(se){console.error("Error fetching patients:",se),ye.error("Failed to fetch patients")}},We=async()=>{try{const se=await fetch("/api/services");if(!se.ok)throw new Error("Failed to fetch services");const ve=await se.json();Y(ve)}catch(se){console.error("Error fetching services:",se),ye.error("Failed to fetch services")}},Z=()=>{M(!0),Re(),We()},Ge=se=>{V.selectedServices.findIndex(Pe=>Pe.serviceId===se.id)>=0?re({...V,selectedServices:V.selectedServices.filter(Pe=>Pe.serviceId!==se.id)}):re({...V,selectedServices:[...V.selectedServices,{serviceId:se.id,serviceName:se.service_name||se.name,price:parseFloat(se.price),quantity:1}]})},Lt=(se,ve)=>{re({...V,selectedServices:V.selectedServices.map(Pe=>Pe.serviceId===se?{...Pe,quantity:Math.max(1,ve)}:Pe)})},Me=async()=>{if(!V.isWalkIn&&!V.patientId){ye.error("Please select a patient");return}if(V.isWalkIn&&!V.walkInPatient.fullName.trim()){ye.error("Please enter patient full name");return}if(V.selectedServices.length===0){ye.error("Please select at least one service");return}C(!0);try{let se,ve;if(V.isWalkIn)se=`WALKIN-${Date.now()}`,ve=V.walkInPatient.fullName;else{const Ve=ee.find(Yt=>Yt.id===V.patientId);se=Ve.patient_id||Ve.id,ve=`${Ve.first_name} ${Ve.last_name}`}const Pe=V.selectedServices.map(Ve=>({serviceName:Ve.serviceName,name:Ve.serviceName,service_name:Ve.serviceName,quantity:Ve.quantity,unitPrice:Ve.price,unit_price:Ve.price,totalPrice:Ve.price*Ve.quantity,total_price:Ve.price*Ve.quantity,price:Ve.price*Ve.quantity,date:new Date().toISOString()})),Fe=Pe.reduce((Ve,Yt)=>Ve+Yt.totalPrice,0);let pe=V.notes||"Bill created from billing page";V.isWalkIn&&(pe+=`
Walk-in Patient - Age: ${V.walkInPatient.age||"N/A"}, Gender: ${V.walkInPatient.gender||"N/A"}, Phone: ${V.walkInPatient.phone||"N/A"}`);const ze={patient_id:se,patient_name:ve,clinic_id:parseInt((e==null?void 0:e.clinic)||"1"),total_amount:Fe,paid_amount:0,balance_amount:Fe,status:"pending",services:JSON.stringify(Pe),notes:pe,created_by:(e==null?void 0:e.displayName)||"Unknown",bill_date:new Date().toISOString(),due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString()};if(!(await fetch("/api/patient-bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ze)})).ok)throw new Error("Failed to create bill");ye.success("Bill created successfully"),M(!1),re({patientId:"",isWalkIn:!1,walkInPatient:{fullName:"",age:"",phone:"",gender:""},selectedServices:[],notes:""}),T(""),ke()}catch(se){console.error("Error creating bill:",se),ye.error("Failed to create bill")}finally{C(!1)}},Ee=se=>{I.selectedServices.findIndex(Pe=>Pe.serviceId===se.id)>=0?X({selectedServices:I.selectedServices.filter(Pe=>Pe.serviceId!==se.id)}):X({selectedServices:[...I.selectedServices,{serviceId:se.id,serviceName:se.service_name||se.name,price:parseFloat(se.price),quantity:1}]})},it=(se,ve)=>{X({selectedServices:I.selectedServices.map(Pe=>Pe.serviceId===se?{...Pe,quantity:Math.max(1,ve)}:Pe)})},et=async()=>{if(o){if(I.selectedServices.length===0){ye.error("Please select at least one service");return}ue(!0);try{const se=I.selectedServices.map(pe=>({serviceName:pe.serviceName,name:pe.serviceName,service_name:pe.serviceName,quantity:pe.quantity,unitPrice:pe.price,unit_price:pe.price,totalPrice:pe.price*pe.quantity,total_price:pe.price*pe.quantity,price:pe.price*pe.quantity,date:new Date().toISOString()}));if(!(await fetch(`/api/patient-bills/${o.id}/add-services`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({services:se})})).ok)throw new Error("Failed to add items to bill");ye.success("Items added to bill successfully"),L(!1),X({selectedServices:[]}),K(""),await ke();const Fe=(await xe.getByClinic((e==null?void 0:e.clinic)||"1")).find(pe=>pe.id===o.id);Fe&&c(Fe)}catch(se){console.error("Error adding items to bill:",se),ye.error("Failed to add items to bill")}finally{ue(!1)}}},dt=t.filter(se=>se.patientName.toLowerCase().includes(i.toLowerCase())||se.billNumber.toLowerCase().includes(i.toLowerCase())||se.patientId.toLowerCase().includes(i.toLowerCase())),lt=se=>{switch(se){case"paid":return n.jsxs(lr,{className:"bg-green-100 text-green-800 border-green-200",children:[n.jsx(ek,{className:"w-3 h-3 mr-1"}),"Paid"]});case"partial":return n.jsxs(lr,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[n.jsx(Eu,{className:"w-3 h-3 mr-1"}),"Partial"]});case"overdue":return n.jsxs(lr,{className:"bg-red-100 text-red-800 border-red-200",children:[n.jsx(tx,{className:"w-3 h-3 mr-1"}),"Overdue"]});default:return n.jsxs(lr,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[n.jsx(Eu,{className:"w-3 h-3 mr-1"}),"Pending"]})}},jt=async se=>{c(se),W([]);try{const ve=await xe.getReceipts(se.id);console.log("=== BILL SERVICES DEBUG ==="),console.log("Bill ID:",se.id),console.log("Bill services:",se.services.map((Fe,pe)=>({index:pe,name:Fe.serviceName||Fe.name||Fe.service_name,price:Fe.totalPrice||Fe.total_price||Fe.price}))),console.log("Fetched receipts for bill:",se.id,ve);const Pe=new Set;ve.forEach(Fe=>{console.log("Processing receipt:",Fe.receipt_number,"Status:",Fe.status),console.log("Receipt paid_services:",Fe.paid_services),console.log("Receipt service_details:",Fe.service_details),Fe.status==="active"?(console.log("Processing active receipt:",Fe.receipt_number),Fe.paid_services&&Array.isArray(Fe.paid_services)?(console.log("Found paid_services array:",Fe.paid_services),Fe.paid_services.forEach(pe=>{const ze=typeof pe=="string"?parseInt(pe):pe;isNaN(ze)?console.log("Invalid service index:",pe):(console.log("Adding paid service index from paid_services:",ze),Pe.add(ze))})):console.log("No paid_services array found or not an array"),Fe.service_details&&Array.isArray(Fe.service_details)?(console.log("Found service_details array:",Fe.service_details),Fe.service_details.forEach(pe=>{typeof pe.index=="number"?(console.log("Adding paid service index from service_details:",pe.index),Pe.add(pe.index)):console.log("Service detail missing valid index:",pe)})):console.log("No service_details array found or not an array")):console.log("Skipping non-active receipt:",Fe.receipt_number,"Status:",Fe.status)}),console.log("=== FINAL PAID INDEXES ==="),console.log("Final paid service indexes:",Array.from(Pe)),console.log("Services that will show as PAID:"),Array.from(Pe).forEach(Fe=>{const pe=se.services[Fe];pe&&console.log(`  Index ${Fe}: ${pe.serviceName||pe.name||pe.service_name}`)}),console.log("=== END DEBUG ==="),k(Pe)}catch(ve){console.error("Error fetching receipts:",ve),k(new Set)}u(!0)},Ht=se=>{let ve;if(R.length===0?ve=se.services.map((Fe,pe)=>pe.toString()).filter(Fe=>!w.has(parseInt(Fe))):ve=R.filter(Fe=>{const pe=parseInt(Fe);return!w.has(pe)}),ve.length===0){ye.error("All selected services have already been paid for");return}const Pe=ve.reduce((Fe,pe)=>{const ze=se.services[parseInt(pe)];return Fe+((ze==null?void 0:ze.totalPrice)||0)},0);c(se),J({billId:se.id,amount:Pe,paymentMethod:"cash",paymentDate:new Date().toISOString().split("T")[0],notes:`Payment for ${ve.length} selected services`,fromLease:!1,leaseDetails:"",cashierName:(e==null?void 0:e.displayName)||"Unknown",cashierId:(e==null?void 0:e.id)||"",paidServiceIndexes:ve}),x(!0)},ut=async()=>{if(!o||D.amount<=0){ye.error("Please enter a valid payment amount");return}if(D.amount>o.balanceAmount){ye.error("Payment amount cannot exceed balance due");return}if(D.fromLease&&!D.leaseDetails.trim()){ye.error("Please provide lease details when payment is from lease");return}try{y(!0),console.log("Payment data before API call:",D),console.log("Selected services:",R),console.log("paidServiceIndexes in paymentData:",D.paidServiceIndexes);const se={...D,paidServiceIndexes:R.length>0?R:D.paidServiceIndexes};console.log("Final payment data with service indexes:",se),console.log("paidServiceIndexes being sent to API:",se.paidServiceIndexes),console.log("Type of paidServiceIndexes:",typeof se.paidServiceIndexes,Array.isArray(se.paidServiceIndexes)),await xe.addPayment(se);const ve=(se.paidServiceIndexes||[]).map(Pe=>{const Fe=parseInt(Pe),pe=o.services[Fe];return pe?{id:pe.id||`service-${Fe}`,serviceName:pe.serviceName||pe.name||pe.service_name||pe.test_name||"Unknown Service",name:pe.serviceName||pe.name||pe.service_name||pe.test_name||"Unknown Service",service_name:pe.serviceName||pe.name||pe.service_name||pe.test_name||"Unknown Service",quantity:pe.quantity||1,unitPrice:pe.unitPrice||pe.unit_price||pe.price||0,unit_price:pe.unitPrice||pe.unit_price||pe.price||0,totalPrice:pe.totalPrice||pe.total_price||pe.price||0,total_price:pe.totalPrice||pe.total_price||pe.price||0,price:pe.totalPrice||pe.total_price||pe.price||0}:null}).filter(Boolean);if(j({...D,id:`PAY-${Date.now()}`,cashierName:(e==null?void 0:e.displayName)||"Unknown",cashierId:(e==null?void 0:e.id)||"",paidServices:ve}),ye.success("Payment added successfully"),x(!1),W([]),await ke(),o)try{const Pe=await xe.getReceipts(o.id);console.log("Refreshing receipts for bill:",o.id,Pe);const Fe=new Set;Pe.forEach(pe=>{console.log("Refresh - Processing receipt:",pe.receipt_number,"Status:",pe.status),console.log("Refresh - Receipt paid_services:",pe.paid_services),console.log("Refresh - Receipt service_details:",pe.service_details),pe.status==="active"&&(pe.paid_services&&Array.isArray(pe.paid_services)&&pe.paid_services.forEach(ze=>{const qe=typeof ze=="string"?parseInt(ze):ze;console.log("Refresh - Adding paid service index:",qe),Fe.add(qe)}),pe.service_details&&Array.isArray(pe.service_details)&&pe.service_details.forEach(ze=>{typeof ze.index=="number"&&(console.log("Refresh - Adding paid service index from service_details:",ze.index),Fe.add(ze.index))}))}),console.log("Refresh - Final paid service indexes:",Array.from(Fe)),k(Fe)}catch(Pe){console.error("Error refreshing paid service status:",Pe)}S(!0)}catch(se){console.error("Error saving payment:",se),ye.error("Failed to save payment")}finally{y(!1)}},Mt=()=>{J({billId:"",amount:0,paymentMethod:"cash",paymentDate:new Date().toISOString().split("T")[0],notes:"",fromLease:!1,leaseDetails:"",cashierName:(e==null?void 0:e.displayName)||"Unknown",cashierId:(e==null?void 0:e.id)||"",paidServiceIndexes:[]}),x(!1)},Gt=()=>{const se=document.getElementById("payment-receipt");se&&cU(se)},st=()=>{S(!1),j(null)};return s?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading bills..."})]})}):n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Patients Bill"}),n.jsxs("p",{className:"text-muted-foreground mt-1",children:["Manage patient billing and payments  ",e==null?void 0:e.clinic]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-2 bg-muted/50 rounded-lg",children:[n.jsx(au,{className:"w-4 h-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:t.length}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Bills"})]}),n.jsxs(_e,{className:"quick-action-btn",onClick:Z,children:[n.jsx(kr,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"New Bill"})]})]})]}),n.jsx("div",{className:"mb-6 space-y-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search by bill number, patient name, or ID...",value:i,onChange:se=>l(se.target.value),className:"pl-10 h-9"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(_e,{variant:"outline",size:"sm",onClick:()=>l(""),className:"h-9 px-4",children:"Clear Search"})})]})}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm",children:s?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx(mr,{className:"w-8 h-8 animate-spin text-primary mb-3"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading bills..."})]}):dt.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:n.jsx(au,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:i?"No bills found":"No bills recorded"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:i?"Try adjusting your search terms or clear the search to see all bills.":"Get started by creating your first bill."}),!i&&n.jsxs(_e,{className:"mt-2",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Create First Bill"]})]}):n.jsx("div",{className:"overflow-x-auto max-h-[480px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Bill Number"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Patient Details"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Amount"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Payment"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Status"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:dt.map(se=>n.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-mono font-semibold text-primary text-sm",children:se.billNumber})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-semibold text-foreground",children:se.patientName}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ID: ",se.patientId]}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",new Date(se.billDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm flex-wrap",children:[n.jsxs("span",{className:"font-medium text-foreground",children:["SSP ",se.totalAmount.toFixed(2)]}),n.jsx("span",{className:"text-muted-foreground text-xs",children:" Total"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"font-medium text-green-600",children:["SSP ",se.paidAmount.toFixed(2)]}),n.jsx("span",{className:"text-muted-foreground text-xs",children:"paid"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:`font-medium ${se.balanceAmount>0?"text-red-600":"text-green-600"}`,children:["SSP ",se.balanceAmount.toFixed(2)]}),n.jsx("span",{className:"text-muted-foreground text-xs",children:"balance"})]})]})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[n.jsx(_e,{size:"sm",onClick:()=>jt(se),className:"bg-success hover:bg-success/90 text-white shadow-sm",title:"View Bill Details",children:n.jsx(_a,{className:"w-4 h-4"})}),se.balanceAmount>0&&n.jsxs(_e,{size:"sm",onClick:()=>Ht(se),className:"bg-primary hover:bg-primary/90 text-white shadow-sm ml-1",children:[n.jsx(Tp,{className:"w-4 h-4 mr-2"}),"Pay"]})]})})]},se.id))})]})})}),n.jsx(wr,{open:d,onOpenChange:u,children:n.jsxs(xr,{className:"max-w-6xl h-[90vh] flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 border-b bg-muted/30 -mx-6 -mt-6 px-6 py-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(vr,{className:"text-2xl font-bold text-foreground",children:"Bill Details"}),o&&n.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-1 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Bill Number:"}),n.jsx("span",{className:"font-semibold",children:o.billNumber}),lt(o.status)]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Patient:"}),n.jsx("span",{className:"font-semibold",children:o.patientName}),n.jsxs("span",{className:"text-muted-foreground",children:["(",o.patientId,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Bill Date:"}),n.jsx("span",{className:"font-medium",children:new Date(o.billDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),n.jsx("span",{className:"font-medium",children:o.dueDate?new Date(o.dueDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set"})]})]})]}),n.jsxs("div",{className:"text-right space-y-2",children:[o&&n.jsx("div",{className:"bg-background rounded-lg p-3 border shadow-sm min-w-[280px]",children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold text-foreground",children:["SSP ",o.totalAmount.toFixed(2)]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold text-green-600",children:["SSP ",o.paidAmount.toFixed(2)]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Paid"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-lg font-bold ${o.balanceAmount>0?"text-red-600":"text-green-600"}`,children:["SSP ",o.balanceAmount.toFixed(2)]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Balance"})]})]})}),(o==null?void 0:o.balanceAmount)>0&&n.jsxs(_e,{onClick:()=>Ht(o),className:"w-full gap-2",disabled:R.length===0,children:[n.jsx(Tp,{className:"w-4 h-4"}),"Add Payment (",R.length," items)"]})]})]})}),o&&n.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:n.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 h-full",children:[n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden h-full flex flex-col",children:[n.jsx("div",{className:"bg-muted/50 px-4 py-3 border-b flex-shrink-0",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),n.jsx("h3",{className:"font-semibold text-foreground",children:"Services & Items"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",o.services.length," items)"]})]}),n.jsxs(_e,{size:"sm",variant:"outline",onClick:()=>{L(!0),ae.length===0&&We()},className:"gap-2",children:[n.jsx(kr,{className:"w-4 h-4"}),"Add Item"]})]})}),n.jsx("div",{className:"overflow-x-auto flex-1",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-center py-3 px-4 font-semibold text-sm text-foreground w-12",children:n.jsx(xl,{checked:R.length===o.services.length&&o.services.length>0,onCheckedChange:se=>{W(se?o.services.map((ve,Pe)=>Pe.toString()):[])}})}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Service"}),n.jsx("th",{className:"text-center py-3 px-4 font-semibold text-sm text-foreground",children:"Qty"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Unit Price"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Total"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:o.services.map((se,ve)=>{const Pe=w.has(ve),Fe=Pe?"paid":"pending";console.log(`Service ${ve} (${se.serviceName||se.name||se.service_name}):`,{index:ve,serviceName:se.serviceName||se.name||se.service_name,isPaidFromReceipts:Pe,serviceStatus:Fe,paidServiceIndexes:Array.from(w),serviceData:se});const pe=Ve=>{switch(Ve){case"paid":return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),n.jsx("span",{className:"text-xs font-medium text-green-700",children:"Paid"})]});case"voided":return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),n.jsx("span",{className:"text-xs font-medium text-red-700",children:"Voided"})]});default:return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-800"}),n.jsx("span",{className:"text-xs font-medium text-gray-800",children:"Pending"})]})}},ze=Fe==="paid",qe=ze?"bg-green-100 border-green-300 hover:bg-green-200 transition-colors border-l-4 border-l-green-600":"hover:bg-muted/20 transition-colors";return n.jsxs("tr",{className:qe,children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx(xl,{checked:R.includes(ve.toString()),disabled:ze,onCheckedChange:Ve=>{ze||W(Ve?[...R,ve.toString()]:R.filter(Yt=>Yt!==ve.toString()))}})}),n.jsx("td",{className:"py-3 px-4",children:pe(Fe)}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:`font-medium ${ze?"text-green-700":"text-foreground"}`,children:se.serviceName||se.name||se.service_name||se.test_name||"Unknown Service"})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("span",{className:"inline-flex items-center justify-center min-w-[32px] h-6 bg-muted rounded text-sm font-medium",children:se.quantity})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`font-mono text-sm ${ze?"text-green-800":""}`,children:["SSP ",(se.unitPrice||se.price||se.unit_price||0).toFixed(2)]})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`font-mono font-semibold ${ze?"text-green-800":""}`,children:["SSP ",(se.totalPrice||se.total_price||se.price||0).toFixed(2)]})})]},se.id||ve)})})]})})]})}),n.jsx("div",{className:"col-span-4",children:n.jsxs("div",{className:"bg-card rounded-lg border border-border h-full flex flex-col",children:[n.jsx("div",{className:"bg-muted/50 px-4 py-3 border-b flex-shrink-0",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tp,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"font-semibold text-foreground",children:"Payment"})]})}),n.jsxs("div",{className:"p-4 flex-1 space-y-4",children:[n.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[n.jsx("div",{className:"text-sm font-medium text-foreground mb-2",children:"Selected Items"}),n.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[R.length," of ",o.services.length," items selected"]}),n.jsxs("div",{className:"text-lg font-bold text-foreground",children:["SSP ",R.reduce((se,ve)=>{const Pe=o.services[parseInt(ve)];return se+((Pe==null?void 0:Pe.totalPrice)||0)},0).toFixed(2)]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Payment Method"}),n.jsxs(Mn,{value:O.paymentMethod,onValueChange:se=>q({...O,paymentMethod:se}),children:[n.jsx(jn,{className:"w-full",children:n.jsx(Fn,{})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"cash",children:"Cash"}),n.jsx(ot,{value:"card",children:"Card"}),n.jsx(ot,{value:"check",children:"Check"}),n.jsx(ot,{value:"lease",children:"Lease"}),n.jsx(ot,{value:"insurance",children:"Insurance"})]})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Amount Tendered"}),n.jsx(Oe,{type:"number",step:"0.01",placeholder:"0.00",value:O.amountTendered,onChange:se=>q({...O,amountTendered:se.target.value}),className:"font-mono"})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Notes (Optional)"}),n.jsx(yi,{placeholder:"Payment notes...",value:O.notes,onChange:se=>q({...O,notes:se.target.value}),rows:2,className:"text-sm"})]}),O.amountTendered&&n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Change Due"}),n.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["SSP ",Math.max(0,parseFloat(O.amountTendered)-R.reduce((se,ve)=>{const Pe=o.services[parseInt(ve)];return se+((Pe==null?void 0:Pe.totalPrice)||0)},0)).toFixed(2)]})]})]}),n.jsx("div",{className:"pt-2",children:n.jsx(_e,{className:"w-full gap-2",disabled:R.length===0||!O.amountTendered||parseFloat(O.amountTendered)<R.reduce((se,ve)=>{const Pe=o.services[parseInt(ve)];return se+((Pe==null?void 0:Pe.totalPrice)||0)},0),onClick:async()=>{const se=R.reduce((Pe,Fe)=>{const pe=o.services[parseInt(Fe)];return Pe+((pe==null?void 0:pe.totalPrice)||0)},0);console.log("Processing payment for selected services:",{selectedServices:R,selectedAmount:se,billId:o.id});const ve={billId:o.id,amount:se,paymentMethod:O.paymentMethod,paymentDate:new Date().toISOString().split("T")[0],notes:O.notes||`Payment for ${R.length} selected services`,fromLease:O.paymentMethod==="lease",leaseDetails:O.paymentMethod==="lease"?O.notes:"",cashierName:(e==null?void 0:e.displayName)||"Unknown",cashierId:(e==null?void 0:e.id)||"",paidServiceIndexes:R};console.log("Payment data being sent:",ve);try{y(!0),console.log("Calling addPayment API...");const Pe=await xe.addPayment(ve);console.log("Payment API response:",Pe);const Fe=R.map(pe=>{const ze=parseInt(pe),qe=o.services[ze];return{id:qe.id||`service-${ze}`,serviceName:qe.serviceName||qe.name||qe.service_name||qe.test_name||"Unknown Service",name:qe.serviceName||qe.name||qe.service_name||qe.test_name||"Unknown Service",service_name:qe.serviceName||qe.name||qe.service_name||qe.test_name||"Unknown Service",quantity:qe.quantity||1,unitPrice:qe.unitPrice||qe.unit_price||qe.price||0,unit_price:qe.unitPrice||qe.unit_price||qe.price||0,totalPrice:qe.totalPrice||qe.total_price||qe.price||0,total_price:qe.totalPrice||qe.total_price||qe.price||0,price:qe.totalPrice||qe.total_price||qe.price||0}});j({...ve,id:`PAY-${Date.now()}`,paidServices:Fe}),ye.success(`Payment of SSP ${se.toFixed(2)} saved successfully`),q({paymentMethod:"cash",amountTendered:"",notes:""}),W([]),console.log("Refreshing bills data..."),await ke(),u(!1),S(!0)}catch(Pe){console.error("Payment save error:",Pe),ye.error(`Failed to save payment: ${Pe instanceof Error?Pe.message:"Unknown error"}`)}finally{y(!1)}},children:f?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(S1,{className:"w-4 h-4"}),"Save Payment"]})})})]})]})})]})})})]})}),n.jsx(wr,{open:m,onOpenChange:x,children:n.jsxs(xr,{className:"max-w-md",children:[n.jsxs(Nr,{children:[n.jsx(vr,{children:"Add Payment"}),n.jsxs(_s,{children:["Record a payment for ",o==null?void 0:o.patientName,"'s bill"]})]}),o&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Bill:"})," ",o.billNumber]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Balance Due:"})," ",n.jsxs("span",{className:"text-red-600 font-semibold",children:["SSP ",o.balanceAmount.toFixed(2)]})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Services to Pay For"}),n.jsx("div",{className:"border rounded-lg max-h-48 overflow-y-auto",children:o.services.map((se,ve)=>{var pe;const Pe=w.has(ve),Fe=(pe=D.paidServiceIndexes)==null?void 0:pe.includes(ve.toString());return n.jsxs("div",{className:`flex items-center gap-3 p-3 border-b last:border-b-0 ${Pe?"bg-green-50 opacity-60":"hover:bg-muted/50"}`,children:[n.jsx(xl,{checked:Fe,disabled:Pe,onCheckedChange:ze=>{const qe=D.paidServiceIndexes||[];let Ve;ze?Ve=[...qe,ve.toString()]:Ve=qe.filter(xt=>xt!==ve.toString());const Yt=Ve.reduce((xt,pt)=>{const cr=o.services[parseInt(pt)];return xt+((cr==null?void 0:cr.totalPrice)||0)},0);J({...D,paidServiceIndexes:Ve,amount:Yt})}}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:`text-sm font-medium ${Pe?"text-green-700":"text-foreground"}`,children:[se.serviceName||se.name||se.service_name||"Unknown Service",Pe&&n.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(Paid)"})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Qty: ",se.quantity||1,"  SSP ",(se.unitPrice||se.price||0).toFixed(2)]})]}),n.jsxs("div",{className:"text-sm font-semibold",children:["SSP ",(se.totalPrice||se.price||0).toFixed(2)]})]},ve)})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"amount",children:"Payment Amount *"}),n.jsx(Oe,{id:"amount",type:"number",step:"0.01",min:"0",max:o.balanceAmount,value:D.amount,onChange:se=>J({...D,amount:parseFloat(se.target.value)||0}),placeholder:"Enter payment amount",className:"font-semibold"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Amount is auto-calculated based on selected services. You can adjust if needed."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"paymentMethod",children:"Payment Method *"}),n.jsxs(Mn,{value:D.paymentMethod,onValueChange:se=>J({...D,paymentMethod:se}),children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select payment method"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"cash",children:"Cash"}),n.jsx(ot,{value:"card",children:"Credit/Debit Card"}),n.jsx(ot,{value:"check",children:"Check"}),n.jsx(ot,{value:"lease",children:"Lease Payment"}),n.jsx(ot,{value:"insurance",children:"Insurance"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"paymentDate",children:"Payment Date *"}),n.jsx(Oe,{id:"paymentDate",type:"date",value:D.paymentDate,onChange:se=>J({...D,paymentDate:se.target.value})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(xl,{id:"fromLease",checked:D.fromLease,onCheckedChange:se=>J({...D,fromLease:se})}),n.jsx(Ce,{htmlFor:"fromLease",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Payment from lease agreement"})]}),D.fromLease&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"leaseDetails",children:"Lease Details *"}),n.jsx(yi,{id:"leaseDetails",value:D.leaseDetails,onChange:se=>J({...D,leaseDetails:se.target.value}),placeholder:"Enter lease agreement details, reference number, etc.",rows:3})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(yi,{id:"notes",value:D.notes,onChange:se=>J({...D,notes:se.target.value}),placeholder:"Additional notes about this payment",rows:2})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsxs(_e,{variant:"outline",onClick:Mt,disabled:f,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(_e,{onClick:ut,disabled:f||D.amount<=0,children:[f?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(S1,{className:"w-4 h-4 mr-2"}),"Save Payment"]})]})]})]})}),n.jsx(wr,{open:v,onOpenChange:S,children:n.jsxs(xr,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(Nr,{className:"flex-shrink-0",children:[n.jsx(vr,{children:"Payment Receipt"}),n.jsx(_s,{children:"Payment processed successfully"})]}),o&&b&&n.jsxs("div",{className:"flex flex-col space-y-4 flex-1 min-h-0",children:[n.jsx("div",{className:"border rounded-lg p-3 bg-gray-50 overflow-y-auto flex-1 min-h-0",children:n.jsx("div",{id:"payment-receipt",className:"w-full",children:n.jsx(lU,{bill:{...o,services:b.paidServices||o.services||[],balanceAmount:o.balanceAmount},payment:{amount:b.amount,method:b.paymentMethod,date:b.paymentDate,notes:b.notes,from_lease:b.fromLease,lease_details:b.leaseDetails,cashierName:b.cashierName,cashierId:b.cashierId},clinicName:(e==null?void 0:e.clinic)||"Medical Clinic"})})}),n.jsxs("div",{className:"flex justify-end gap-2 flex-shrink-0 pt-2 border-t",children:[n.jsx(_e,{variant:"outline",onClick:st,children:"Close"}),n.jsxs(_e,{onClick:Gt,className:"bg-primary hover:bg-primary/90 text-white",children:[n.jsx(au,{className:"w-4 h-4 mr-2"}),"Print Receipt"]})]})]})]})}),n.jsx(wr,{open:A,onOpenChange:M,children:n.jsxs(xr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Nr,{children:[n.jsx(vr,{children:"Create New Bill"}),n.jsx(_s,{children:"Select a patient and services to create a new bill"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted/30 rounded-lg",children:[n.jsx(Ce,{className:"text-sm font-semibold",children:"Patient Type:"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"patientType",checked:!V.isWalkIn,onChange:()=>re({...V,isWalkIn:!1,patientId:"",walkInPatient:{fullName:"",age:"",phone:"",gender:""}}),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Existing Patient"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"patientType",checked:V.isWalkIn,onChange:()=>re({...V,isWalkIn:!0,patientId:""}),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Walk-in Patient"})]})]})]}),V.isWalkIn?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"fullName",children:"Full Name *"}),n.jsx(Oe,{id:"fullName",value:V.walkInPatient.fullName,onChange:se=>re({...V,walkInPatient:{...V.walkInPatient,fullName:se.target.value}}),placeholder:"Enter full name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"age",children:"Age"}),n.jsx(Oe,{id:"age",value:V.walkInPatient.age,onChange:se=>re({...V,walkInPatient:{...V.walkInPatient,age:se.target.value}}),placeholder:"Enter age"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"phone",children:"Phone Number"}),n.jsx(Oe,{id:"phone",value:V.walkInPatient.phone,onChange:se=>re({...V,walkInPatient:{...V.walkInPatient,phone:se.target.value}}),placeholder:"Enter phone number"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"gender",children:"Gender"}),n.jsxs(Mn,{value:V.walkInPatient.gender,onValueChange:se=>re({...V,walkInPatient:{...V.walkInPatient,gender:se}}),children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select gender"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"Male",children:"Male"}),n.jsx(ot,{value:"Female",children:"Female"}),n.jsx(ot,{value:"Other",children:"Other"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(yi,{id:"notes",value:V.notes,onChange:se=>re({...V,notes:se.target.value}),placeholder:"Add any additional notes...",rows:3})]})]}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"patient",children:"Patient *"}),n.jsxs(Mn,{value:V.patientId,onValueChange:se=>re({...V,patientId:se}),children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select a patient"})}),n.jsx(Sn,{children:ee.map(se=>n.jsxs(ot,{value:se.id,children:[se.first_name," ",se.last_name," - ",se.patient_id]},se.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(yi,{id:"notes",value:V.notes,onChange:se=>re({...V,notes:se.target.value}),placeholder:"Add any additional notes...",rows:3})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[n.jsxs("div",{className:"lg:col-span-6 space-y-2",children:[n.jsx(Ce,{children:"Services *"}),n.jsxs("div",{className:"relative",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search services by name, category, or department...",value:de,onChange:se=>T(se.target.value),className:"pl-10"})]}),n.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:ae.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Loading services..."}):ae.filter(se=>{const ve=de.toLowerCase(),Pe=(se.service_name||se.name||"").toLowerCase(),Fe=(se.category||"").toLowerCase(),pe=(se.department||"").toLowerCase();return Pe.includes(ve)||Fe.includes(ve)||pe.includes(ve)}).map(se=>{const ve=V.selectedServices.find(Pe=>Pe.serviceId===se.id);return n.jsxs("div",{className:`flex items-center gap-3 p-3 border-b last:border-b-0 ${ve?"bg-primary/5":"hover:bg-muted/50"}`,children:[n.jsx(xl,{checked:!!ve,onCheckedChange:()=>Ge(se)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium",children:se.service_name||se.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[se.category,"  ",se.department||"N/A"]})]}),n.jsxs("div",{className:"text-sm font-semibold",children:["SSP ",parseFloat(se.price).toFixed(2)]}),ve&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ce,{className:"text-xs",children:"Qty:"}),n.jsx(Oe,{type:"number",min:"1",value:ve.quantity,onChange:Pe=>Lt(se.id,parseInt(Pe.target.value)||1),className:"w-16 h-8 text-xs"})]})]},se.id)})})]}),n.jsxs("div",{className:"lg:col-span-6 space-y-2",children:[n.jsx(Ce,{className:"text-sm font-semibold",children:"Selected Services Summary"}),V.selectedServices.length===0?n.jsx("div",{className:"p-4 border rounded-lg bg-muted/20 text-center text-sm text-muted-foreground",children:"No services selected yet. Select services from the list to see the summary."}):n.jsx("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg border max-h-96 overflow-y-auto",children:n.jsxs("div",{className:"space-y-1",children:[V.selectedServices.map(se=>n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:[se.serviceName,"  ",se.quantity]}),n.jsxs("span",{className:"font-semibold",children:["SSP ",(se.price*se.quantity).toFixed(2)]})]},se.serviceId)),n.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t",children:[n.jsx("span",{children:"Total Amount:"}),n.jsxs("span",{children:["SSP"," ",V.selectedServices.reduce((se,ve)=>se+ve.price*ve.quantity,0).toFixed(2)]})]})]})})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(_e,{variant:"outline",onClick:()=>{M(!1),re({patientId:"",isWalkIn:!1,walkInPatient:{fullName:"",age:"",phone:"",gender:""},selectedServices:[],notes:""}),T("")},disabled:he,children:"Cancel"}),n.jsx(_e,{onClick:Me,disabled:he||!V.isWalkIn&&!V.patientId||V.isWalkIn&&!V.walkInPatient.fullName.trim()||V.selectedServices.length===0,children:he?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Create Bill"]})})]})]})]})}),n.jsx(wr,{open:F,onOpenChange:L,children:n.jsxs(xr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Nr,{children:[n.jsx(vr,{children:"Add Items to Bill"}),n.jsxs(_s,{children:["Select services to add to ",o==null?void 0:o.billNumber]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{children:"Services *"}),n.jsxs("div",{className:"relative",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search services by name, category, or department...",value:$,onChange:se=>K(se.target.value),className:"pl-10"})]}),n.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:ae.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Loading services..."}):ae.filter(se=>{const ve=$.toLowerCase(),Pe=(se.service_name||se.name||"").toLowerCase(),Fe=(se.category||"").toLowerCase(),pe=(se.department||"").toLowerCase();return Pe.includes(ve)||Fe.includes(ve)||pe.includes(ve)}).map(se=>{const ve=I.selectedServices.find(Pe=>Pe.serviceId===se.id);return n.jsxs("div",{className:`flex items-center gap-3 p-3 border-b last:border-b-0 ${ve?"bg-primary/5":"hover:bg-muted/50"}`,children:[n.jsx(xl,{checked:!!ve,onCheckedChange:()=>Ee(se)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium",children:se.service_name||se.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[se.category,"  ",se.department||"N/A"]})]}),n.jsxs("div",{className:"text-sm font-semibold",children:["SSP ",parseFloat(se.price).toFixed(2)]}),ve&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ce,{className:"text-xs",children:"Qty:"}),n.jsx(Oe,{type:"number",min:"1",value:ve.quantity,onChange:Pe=>it(se.id,parseInt(Pe.target.value)||1),className:"w-16 h-8 text-xs"})]})]},se.id)})})]}),I.selectedServices.length>0&&n.jsxs("div",{className:"space-y-2 p-4 bg-muted/30 rounded-lg",children:[n.jsx(Ce,{className:"text-sm font-semibold",children:"Selected Items Summary"}),n.jsxs("div",{className:"space-y-1",children:[I.selectedServices.map(se=>n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:[se.serviceName,"  ",se.quantity]}),n.jsxs("span",{className:"font-semibold",children:["SSP ",(se.price*se.quantity).toFixed(2)]})]},se.serviceId)),n.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t",children:[n.jsx("span",{children:"Total to Add:"}),n.jsxs("span",{children:["SSP"," ",I.selectedServices.reduce((se,ve)=>se+ve.price*ve.quantity,0).toFixed(2)]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(_e,{variant:"outline",onClick:()=>{L(!1),X({selectedServices:[]}),K("")},disabled:ne,children:"Cancel"}),n.jsx(_e,{onClick:et,disabled:ne||I.selectedServices.length===0,children:ne?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add to Bill"]})})]})]})]})})]})})},uU=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(""),[o,c]=p.useState(null),[d,u]=p.useState(!1),[m,x]=p.useState("all"),[f,y]=p.useState("all"),[v,S]=p.useState("all"),[b,j]=p.useState({from:"",to:""}),[w,k]=p.useState(!1),[R,W]=p.useState(""),[O,q]=p.useState([]),D={async getByClinic(Y){try{const de=window.location.hostname,T=de==="localhost"||de==="127.0.0.1",re=await fetch(`/api/receipts/clinic/${Y}`);if(!re.ok)throw new Error("Failed to fetch receipts");return await re.json()}catch(de){throw console.error("Error fetching receipts:",de),de}},async getById(Y){try{const de=window.location.hostname,T=de==="localhost"||de==="127.0.0.1",re=await fetch(`/api/receipts/${Y}`);if(!re.ok)throw new Error("Failed to fetch receipt");return await re.json()}catch(de){throw console.error("Error fetching receipt:",de),de}},async cancelReceipt(Y,de){try{const T=window.location.hostname,V=T==="localhost"||T==="127.0.0.1";if(!(await fetch(`/api/receipts/${Y}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"voided",reason:de})})).ok)throw new Error("Failed to cancel receipt")}catch(T){throw console.error("Error cancelling receipt:",T),T}}};p.useEffect(()=>{J()},[]);const J=async()=>{if(e!=null&&e.clinic)try{a(!0);const Y=await D.getByClinic(e.clinic);r(Y);const de=[...new Set(Y.map(T=>T.cashier_name).filter(Boolean))];q(de)}catch(Y){console.error("Error fetching receipts:",Y),ye.error("Failed to fetch receipts")}finally{a(!1)}},A=t.filter(Y=>{var C;const de=Y.receipt_number.toLowerCase().includes(i.toLowerCase())||Y.patient_name.toLowerCase().includes(i.toLowerCase())||Y.patient_id.toLowerCase().includes(i.toLowerCase())||((C=Y.cashier_name)==null?void 0:C.toLowerCase().includes(i.toLowerCase())),T=m==="all"||Y.status===m,V=f==="all"||Y.payment_method===f,re=v==="all"||Y.cashier_name===v;let he=!0;if(b.from&&b.to){const F=new Date(Y.payment_date),L=new Date(b.from),$=new Date(b.to);he=F>=L&&F<=$}return de&&T&&V&&re&&he}),M=async()=>{if(!o||!R.trim()){ye.error("Please provide a cancellation reason");return}try{await D.cancelReceipt(o.id,R),ye.success("Receipt cancelled successfully"),k(!1),W(""),J()}catch(Y){console.error("Error cancelling receipt:",Y),ye.error("Failed to cancel receipt")}},ee=()=>{if(!o)return;const Y=window.open("","_blank");if(!Y){ye.error("Please allow popups to print the receipt");return}const de=new Date,T=o.receipt_number,V=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt</title>
        <style>
          @media print {
            @page {
              size: 80mm auto;
              margin: 0;
            }
            body {
              margin: 0;
              padding: 0;
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.2;
            }
            .thermal-receipt {
              width: 80mm !important;
              max-width: none !important;
            }
          }
          body {
            margin: 0;
            padding: 8px;
            font-family: 'Courier New', monospace;
          }
        </style>
      </head>
      <body>
        <div class="thermal-receipt" style="
          width: 100%;
          max-width: 302px;
          font-family: monospace;
          font-size: 11px;
          line-height: 1.3;
          color: #000;
          background-color: #fff;
          padding: 12px;
          margin: 0 auto;
          box-sizing: border-box;
        ">
          <!-- Header -->
          <div style="text-align: center; margin-bottom: 12px;">
            <div style="font-size: 16px; font-weight: bold; margin-bottom: 2px;">
              UNIVERSAL HOSPITAL
            </div>
            <div style="font-size: 9px; margin-bottom: 1px; color: #666;">
              Hai Jerusalem, Juba, South Sudan
            </div>
            <div style="font-size: 9px; margin-bottom: 1px; color: #666;">
              Tel: 0922123463
            </div>
            <div style="font-size: 9px; margin-bottom: 6px; color: #666;">
              Email: info@universalhospital.com
            </div>
            <div style="font-size: 11px; font-weight: bold; margin-bottom: 2px;">
              PAYMENT RECEIPT
            </div>
            <div style="font-size: 10px;">
              ${de.toLocaleDateString("en-GB")} ${de.toLocaleTimeString("en-GB")}
            </div>
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Receipt Info -->
          <div style="margin-bottom: 12px; font-size: 11px;">
            <div style="display: flex; justify-content: space-between;">
              <span>Receipt No:</span>
              <span style="font-weight: bold;">${T}</span>
            </div>
          </div>

          <!-- Patient Info -->
          <div style="margin-bottom: 12px; font-size: 11px;">
            <div style="font-weight: bold; margin-bottom: 2px;">PATIENT DETAILS:</div>
            <div>Name: ${o.patient_name}</div>
            <div>ID: ${o.patient_id}</div>
            <div>Date: ${new Date(o.payment_date).toLocaleDateString("en-GB")}</div>
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Services -->
          <div style="margin-bottom: 12px; font-size: 10px;">
            <div style="font-weight: bold; margin-bottom: 4px;">SERVICES:</div>
            ${o.service_details&&o.service_details.length>0?o.service_details.map(re=>`
                <div style="margin-bottom: 3px;">
                  <div style="display: flex; justify-content: space-between;">
                    <span style="flex: 1; padding-right: 4px;">
                      ${re.serviceName||"Unknown Service"}
                    </span>
                    <span style="min-width: 60px; text-align: right;">
                      SSP ${(typeof re.totalPrice=="number"?re.totalPrice:parseFloat(re.totalPrice)||0).toFixed(2)}
                    </span>
                  </div>
                  <div style="font-size: 9px; color: #666; padding-left: 4px;">
                    ${re.quantity||1} x SSP ${(typeof re.unitPrice=="number"?re.unitPrice:parseFloat(re.unitPrice)||0).toFixed(2)}
                  </div>
                </div>
              `).join(""):"<div>No service details available</div>"}
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Payment Details -->
          <div style="margin-bottom: 12px; font-size: 11px;">
            <div style="font-weight: bold; margin-bottom: 2px;">PAYMENT DETAILS:</div>
            <div style="display: flex; justify-content: space-between;">
              <span>Method:</span>
              <span style="text-transform: capitalize;">${o.payment_method}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>Date:</span>
              <span>${new Date(o.payment_date).toLocaleDateString("en-GB")}</span>
            </div>
            <div style="border-top: 1px solid #000; padding-top: 2px; margin-top: 4px;">
              <div style="display: flex; justify-content: space-between; font-weight: bold;">
                <span>TOTAL AMOUNT:</span>
                <span>SSP ${(typeof o.payment_amount=="number"?o.payment_amount:parseFloat(o.payment_amount)||0).toFixed(2)}</span>
              </div>
            </div>
            ${o.notes?`
              <div style="margin-top: 4px;">
                <div style="font-weight: bold; font-size: 10px;">Notes:</div>
                <div style="font-size: 9px; word-wrap: break-word;">
                  ${o.notes}
                </div>
              </div>
            `:""}
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Cashier Information -->
          ${o.cashier_name?`
            <div style="margin-bottom: 12px; font-size: 10px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
                <span style="font-weight: bold;">RECEIVED BY:</span>
                <span style="font-weight: bold;">${o.cashier_name}</span>
              </div>
            </div>
          `:""}

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Footer -->
          <div style="text-align: center; font-size: 10px; margin-top: 12px;">
            <div style="margin-bottom: 4px;">
              Thank you for your payment!
            </div>
            <div style="font-size: 9px; color: #666;">
              Keep this receipt for your records
            </div>
            <div style="font-size: 9px; color: #666; margin-top: 4px;">
              Status: ${o.status.toUpperCase()}
            </div>
          </div>

          <!-- Bottom spacing for tear-off -->
          <div style="height: 20px;"></div>
        </div>
        
        <script>
          window.onload = function() {
            window.print();
            setTimeout(function() {
              window.close();
            }, 1000);
          };
        <\/script>
      </body>
      </html>
    `;Y.document.write(V),Y.document.close()},E=A.reduce((Y,de)=>{const T=typeof de.payment_amount=="number"?de.payment_amount:parseFloat(de.payment_amount)||0;return Y+T},0),ae=A.length;return s?n.jsx(Xn,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(mr,{className:"w-8 h-8 animate-spin"})})}):n.jsx(Xn,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Receipts Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Complete payment receipt tracking and management system"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Total Receipts"}),n.jsx(hn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold",children:ae}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.filter(Y=>new Date(Y.payment_date).toDateString()===new Date().toDateString()).length," today"]})]})]}),n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),n.jsx(Tp,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Gr,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["SSP ",E.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",ae," receipts"]})]})]}),n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Active Receipts"}),n.jsx(hn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(Y=>Y.status==="active").length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Active payment receipts"})]})]}),n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Today's Receipts"}),n.jsx(ex,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(Y=>new Date(Y.payment_date).toDateString()===new Date().toDateString()).length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Receipts generated today"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{children:n.jsx("h2",{className:"text-xl font-semibold",children:"Receipt Records"})}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(In,{className:"w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:"Search receipts...",value:i,onChange:Y=>l(Y.target.value),className:"max-w-md"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Mn,{value:m,onValueChange:x,children:[n.jsx(jn,{className:"w-32",children:n.jsx(Fn,{placeholder:"Status"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"all",children:"All Status"}),n.jsx(ot,{value:"active",children:"Active"}),n.jsx(ot,{value:"voided",children:"Voided"}),n.jsx(ot,{value:"refunded",children:"Refunded"})]})]}),n.jsxs(Mn,{value:f,onValueChange:y,children:[n.jsx(jn,{className:"w-40",children:n.jsx(Fn,{placeholder:"Payment Method"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"all",children:"All Methods"}),n.jsx(ot,{value:"cash",children:"Cash"}),n.jsx(ot,{value:"card",children:"Card"}),n.jsx(ot,{value:"check",children:"Check"}),n.jsx(ot,{value:"lease",children:"Lease"}),n.jsx(ot,{value:"insurance",children:"Insurance"})]})]}),n.jsxs(Mn,{value:v,onValueChange:S,children:[n.jsx(jn,{className:"w-40",children:n.jsx(Fn,{placeholder:"Cashier"})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"all",children:"All Cashiers"}),O.map(Y=>n.jsx(ot,{value:Y,children:Y},Y))]})]}),n.jsx(Oe,{type:"date",placeholder:"From Date",value:b.from,onChange:Y=>j(de=>({...de,from:Y.target.value})),className:"w-40"}),n.jsx(Oe,{type:"date",placeholder:"To Date",value:b.to,onChange:Y=>j(de=>({...de,to:Y.target.value})),className:"w-40"}),n.jsxs(_e,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(Eo,{className:"w-4 h-4"}),"Export"]})]})]})]}),n.jsx("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:A.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-3",children:n.jsx(hn,{className:"w-6 h-6 text-muted-foreground"})}),n.jsx("h3",{className:"text-base font-medium text-foreground mb-2",children:i?"No receipts found":"No receipts available"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i?"Try adjusting your search terms or clear the search to see all receipts.":"Receipts will appear here as payments are processed."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/30 border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider w-32",children:"Receipt #"}),n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider w-48",children:"Patient"}),n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider w-32",children:"Amount"}),n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider w-32",children:"Method"}),n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider w-32",children:"Date"}),n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider w-32",children:"Cashier"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-border",children:A.slice(0,10).map((Y,de)=>n.jsxs("tr",{className:"hover:bg-muted/10 transition-colors cursor-pointer",onClick:()=>{c(Y),u(!0)},children:[n.jsx("td",{className:"py-2.5 px-3 w-32",children:n.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:Y.receipt_number})}),n.jsxs("td",{className:"py-2.5 px-3 w-48",children:[n.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:Y.patient_name}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:Y.patient_id})]}),n.jsx("td",{className:"py-2.5 px-3 w-32",children:n.jsxs("div",{className:"text-sm font-semibold text-foreground",children:["SSP ",(typeof Y.payment_amount=="number"?Y.payment_amount:parseFloat(Y.payment_amount)||0).toFixed(2)]})}),n.jsx("td",{className:"py-2.5 px-3 w-32",children:n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200",children:Y.payment_method.charAt(0).toUpperCase()+Y.payment_method.slice(1)})}),n.jsx("td",{className:"py-2.5 px-3 w-32",children:n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(Y.payment_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),n.jsx("td",{className:"py-2.5 px-3 w-32",children:n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:Y.cashier_name||"Unknown"})})]},Y.id))})]})}),A.length>10&&n.jsx("div",{className:"px-3 py-2 bg-muted/20 border-t border-border",children:n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Showing 10 of ",A.length," receipts. Scroll to view more or use filters to narrow results."]})})]})}),n.jsx(wr,{open:d,onOpenChange:u,children:n.jsxs(xr,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Nr,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Receipt Details - ",o==null?void 0:o.receipt_number]}),n.jsxs(_s,{children:["Items and services for receipt ",o==null?void 0:o.receipt_number]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(_e,{variant:"outline",size:"sm",onClick:ee,className:"gap-2",children:[n.jsx(p2,{className:"w-4 h-4"}),"Print Receipt"]}),(o==null?void 0:o.status)==="active"&&n.jsxs(_e,{variant:"destructive",size:"sm",onClick:()=>k(!0),className:"gap-2",children:[n.jsx(Nn,{className:"w-4 h-4"}),"Cancel Receipt"]})]})]})}),o&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted/20 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Receipt Number"}),n.jsx("p",{className:"text-sm font-semibold text-foreground",children:o.receipt_number})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Patient"}),n.jsx("p",{className:"text-sm font-semibold text-foreground",children:o.patient_name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o.patient_id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Amount"}),n.jsxs("p",{className:"text-sm font-semibold text-foreground",children:["SSP ",(typeof o.payment_amount=="number"?o.payment_amount:parseFloat(o.payment_amount)||0).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Payment Date"}),n.jsx("p",{className:"text-sm font-semibold text-foreground",children:new Date(o.payment_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-base font-semibold text-foreground mb-3",children:"Service Items"}),o.service_details&&o.service_details.length>0?n.jsx("div",{className:"bg-white rounded-lg border border-border overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/30 border-b border-border",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider",children:"Service"}),n.jsx("th",{className:"text-left py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider",children:"Department"}),n.jsx("th",{className:"text-center py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider",children:"Qty"}),n.jsx("th",{className:"text-right py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"text-right py-2.5 px-3 font-medium text-xs text-muted-foreground uppercase tracking-wider",children:"Total"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:o.service_details.map((Y,de)=>n.jsxs("tr",{className:"hover:bg-muted/10",children:[n.jsx("td",{className:"py-2.5 px-3",children:n.jsx("div",{className:"text-sm font-medium text-foreground",children:Y.serviceName})}),n.jsx("td",{className:"py-2.5 px-3",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:Y.department||"General"})}),n.jsx("td",{className:"py-2.5 px-3 text-center",children:n.jsx("div",{className:"text-sm text-foreground",children:Y.quantity})}),n.jsx("td",{className:"py-2.5 px-3 text-right",children:n.jsxs("div",{className:"text-sm text-foreground",children:["SSP ",(typeof Y.unitPrice=="number"?Y.unitPrice:parseFloat(Y.unitPrice)||0).toFixed(2)]})}),n.jsx("td",{className:"py-2.5 px-3 text-right",children:n.jsxs("div",{className:"text-sm font-semibold text-foreground",children:["SSP ",(typeof Y.totalPrice=="number"?Y.totalPrice:parseFloat(Y.totalPrice)||0).toFixed(2)]})})]},de))})]})}):n.jsxs("div",{className:"text-center py-8 bg-muted/10 rounded-lg",children:[n.jsx(hn,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No service details available for this receipt"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-border",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Payment Method"}),n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200 mt-1",children:o.payment_method.charAt(0).toUpperCase()+o.payment_method.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Cashier"}),n.jsx("p",{className:"text-sm text-foreground mt-1",children:o.cashier_name||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),n.jsx("div",{className:"mt-1",children:o.status==="active"?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-50 text-green-700 border border-green-200",children:"Active"}):o.status==="voided"?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 border border-red-200",children:"Voided"}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-50 text-yellow-700 border border-yellow-200",children:"Refunded"})})]})]}),o.notes&&n.jsxs("div",{className:"pt-4 border-t border-border",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Notes"}),n.jsx("p",{className:"text-sm text-foreground mt-1",children:o.notes})]})]})]})}),n.jsx(wr,{open:w,onOpenChange:k,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsxs(Nr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Nn,{className:"w-5 h-5 text-destructive"}),"Cancel Receipt"]}),n.jsxs(_s,{children:["Are you sure you want to cancel receipt ",o==null?void 0:o.receipt_number,"? This action cannot be undone."]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Cancellation Reason *"}),n.jsx("textarea",{value:R,onChange:Y=>W(Y.target.value),placeholder:"Please provide a reason for cancelling this receipt...",className:"w-full mt-1 p-3 border border-border rounded-md resize-none h-24 text-sm",required:!0})]}),n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsx(_e,{variant:"outline",onClick:()=>{k(!1),W("")},children:"Cancel"}),n.jsx(_e,{variant:"destructive",onClick:M,disabled:!R.trim(),children:"Cancel Receipt"})]})]})]})})]})})};var Hv="rovingFocusGroup.onEntryFocus",hU={bubbles:!1,cancelable:!0},im="RovingFocusGroup",[q1,CA,fU]=Qg(im),[mU,wx]=Ea(im,[fU]),[pU,gU]=mU(im),kA=p.forwardRef((e,t)=>n.jsx(q1.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(q1.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(xU,{...e,ref:t})})}));kA.displayName=im;var xU=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,x=p.useRef(null),f=or(t,x),y=am(i),[v,S]=Oo({prop:l,defaultProp:o??null,onChange:c,caller:im}),[b,j]=p.useState(!1),w=Rn(d),k=CA(r),R=p.useRef(!1),[W,O]=p.useState(0);return p.useEffect(()=>{const q=x.current;if(q)return q.addEventListener(Hv,w),()=>q.removeEventListener(Hv,w)},[w]),n.jsx(pU,{scope:r,orientation:s,dir:y,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(q=>S(q),[S]),onItemShiftTab:p.useCallback(()=>j(!0),[]),onFocusableItemAdd:p.useCallback(()=>O(q=>q+1),[]),onFocusableItemRemove:p.useCallback(()=>O(q=>q-1),[]),children:n.jsx(bt.div,{tabIndex:b||W===0?-1:0,"data-orientation":s,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:Je(e.onMouseDown,()=>{R.current=!0}),onFocus:Je(e.onFocus,q=>{const D=!R.current;if(q.target===q.currentTarget&&D&&!b){const J=new CustomEvent(Hv,hU);if(q.currentTarget.dispatchEvent(J),!J.defaultPrevented){const A=k().filter(Y=>Y.focusable),M=A.find(Y=>Y.active),ee=A.find(Y=>Y.id===v),ae=[M,ee,...A].filter(Boolean).map(Y=>Y.ref.current);EA(ae,u)}}R.current=!1}),onBlur:Je(e.onBlur,()=>j(!1))})})}),PA="RovingFocusGroupItem",AA=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:l,...o}=e,c=ms(),d=i||c,u=gU(PA,r),m=u.currentTabStopId===d,x=CA(r),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:v}=u;return p.useEffect(()=>{if(s)return f(),()=>y()},[s,f,y]),n.jsx(q1.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:n.jsx(bt.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Je(e.onMouseDown,S=>{s?u.onItemFocus(d):S.preventDefault()}),onFocus:Je(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Je(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){u.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const b=bU(S,u.orientation,u.dir);if(b!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let w=x().filter(k=>k.focusable).map(k=>k.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const k=w.indexOf(S.currentTarget);w=u.loop?wU(w,k+1):w.slice(k+1)}setTimeout(()=>EA(w))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:v!=null}):l})})});AA.displayName=PA;var vU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yU(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function bU(e,t,r){const s=yU(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return vU[s]}function EA(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function wU(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var LA=kA,TA=AA,Nx="Tabs",[NU,L3]=Ea(Nx,[wx]),DA=wx(),[jU,B2]=NU(Nx),RA=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=am(o),[m,x]=Oo({prop:s,onChange:a,defaultProp:i??"",caller:Nx});return n.jsx(jU,{scope:r,baseId:ms(),value:m,onValueChange:x,orientation:l,dir:u,activationMode:c,children:n.jsx(bt.div,{dir:u,"data-orientation":l,...d,ref:t})})});RA.displayName=Nx;var IA="TabsList",MA=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,i=B2(IA,r),l=DA(r);return n.jsx(LA,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(bt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});MA.displayName=IA;var FA="TabsTrigger",OA=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,l=B2(FA,r),o=DA(r),c=$A(l.baseId,s),d=zA(l.baseId,s),u=s===l.value;return n.jsx(TA,{asChild:!0,...o,focusable:!a,active:u,children:n.jsx(bt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Je(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(s):m.preventDefault()}),onKeyDown:Je(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(s)}),onFocus:Je(e.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!a&&m&&l.onValueChange(s)})})})});OA.displayName=FA;var BA="TabsContent",UA=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...l}=e,o=B2(BA,r),c=$A(o.baseId,s),d=zA(o.baseId,s),u=s===o.value,m=p.useRef(u);return p.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),n.jsx(ss,{present:a||u,children:({present:x})=>n.jsx(bt.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!x,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:x&&i})})});UA.displayName=BA;function $A(e,t){return`${e}-trigger-${t}`}function zA(e,t){return`${e}-content-${t}`}var SU=RA,qA=MA,VA=OA,HA=UA;const U2=SU,jx=p.forwardRef(({className:e,...t},r)=>n.jsx(qA,{ref:r,className:ht("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));jx.displayName=qA.displayName;const Va=p.forwardRef(({className:e,...t},r)=>n.jsx(VA,{ref:r,className:ht("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Va.displayName=VA.displayName;const Ha=p.forwardRef(({className:e,...t},r)=>n.jsx(HA,{ref:r,className:ht("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ha.displayName=HA.displayName;function _U(e,t){return p.useReducer((r,s)=>t[r][s]??r,e)}var $2="ScrollArea",[WA,T3]=Ea($2),[CU,Za]=WA($2),GA=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:i=600,...l}=e,[o,c]=p.useState(null),[d,u]=p.useState(null),[m,x]=p.useState(null),[f,y]=p.useState(null),[v,S]=p.useState(null),[b,j]=p.useState(0),[w,k]=p.useState(0),[R,W]=p.useState(!1),[O,q]=p.useState(!1),D=or(t,A=>c(A)),J=am(a);return n.jsx(CU,{scope:r,type:s,dir:J,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:m,onContentChange:x,scrollbarX:f,onScrollbarXChange:y,scrollbarXEnabled:R,onScrollbarXEnabledChange:W,scrollbarY:v,onScrollbarYChange:S,scrollbarYEnabled:O,onScrollbarYEnabledChange:q,onCornerWidthChange:j,onCornerHeightChange:k,children:n.jsx(bt.div,{dir:J,...l,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});GA.displayName=$2;var YA="ScrollAreaViewport",KA=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...i}=e,l=Za(YA,r),o=p.useRef(null),c=or(t,o,l.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(bt.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});KA.displayName=YA;var no="ScrollAreaScrollbar",z2=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Za(no,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=e.orientation==="horizontal";return p.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?n.jsx(kU,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(PU,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(QA,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(q2,{...s,ref:t}):null});z2.displayName=no;var kU=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Za(no,e.__scopeScrollArea),[i,l]=p.useState(!1);return p.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(ss,{present:r||i,children:n.jsx(QA,{"data-state":i?"visible":"hidden",...s,ref:t})})}),PU=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Za(no,e.__scopeScrollArea),i=e.orientation==="horizontal",l=_x(()=>c("SCROLL_END"),100),[o,c]=_U("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),p.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const x=()=>{const f=d[u];m!==f&&(c("SCROLL"),l()),m=f};return d.addEventListener("scroll",x),()=>d.removeEventListener("scroll",x)}},[a.viewport,i,c,l]),n.jsx(ss,{present:r||o!=="hidden",children:n.jsx(q2,{"data-state":o==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Je(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Je(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),QA=p.forwardRef((e,t)=>{const r=Za(no,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,l]=p.useState(!1),o=e.orientation==="horizontal",c=_x(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(o?d:u)}},10);return Ru(r.viewport,c),Ru(r.content,c),n.jsx(ss,{present:s||i,children:n.jsx(q2,{"data-state":i?"visible":"hidden",...a,ref:t})})}),q2=p.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Za(no,e.__scopeScrollArea),i=p.useRef(null),l=p.useRef(0),[o,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=tE(o.viewport,o.content),u={...s,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:x=>l.current=x};function m(x,f){return RU(x,l.current,o,f)}return r==="horizontal"?n.jsx(AU,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const x=a.viewport.scrollLeft,f=x5(x,o,a.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollLeft=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollLeft=m(x,a.dir))}}):r==="vertical"?n.jsx(EU,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const x=a.viewport.scrollTop,f=x5(x,o);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollTop=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollTop=m(x))}}):null}),AU=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=Za(no,e.__scopeScrollArea),[l,o]=p.useState(),c=p.useRef(null),d=or(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),n.jsx(JA,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sx(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const x=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(x),nE(x,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Sg(l.paddingLeft),paddingEnd:Sg(l.paddingRight)}})}})}),EU=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=Za(no,e.__scopeScrollArea),[l,o]=p.useState(),c=p.useRef(null),d=or(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),n.jsx(JA,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sx(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const x=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(x),nE(x,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Sg(l.paddingTop),paddingEnd:Sg(l.paddingBottom)}})}})}),[LU,XA]=WA(no),JA=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...x}=e,f=Za(no,r),[y,v]=p.useState(null),S=or(t,D=>v(D)),b=p.useRef(null),j=p.useRef(""),w=f.viewport,k=s.content-s.viewport,R=Rn(u),W=Rn(c),O=_x(m,10);function q(D){if(b.current){const J=D.clientX-b.current.left,A=D.clientY-b.current.top;d({x:J,y:A})}}return p.useEffect(()=>{const D=J=>{const A=J.target;(y==null?void 0:y.contains(A))&&R(J,k)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[w,y,k,R]),p.useEffect(W,[s,W]),Ru(y,O),Ru(f.content,O),n.jsx(LU,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:Rn(i),onThumbPointerUp:Rn(l),onThumbPositionChange:W,onThumbPointerDown:Rn(o),children:n.jsx(bt.div,{...x,ref:S,style:{position:"absolute",...x.style},onPointerDown:Je(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),b.current=y.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),q(D))}),onPointerMove:Je(e.onPointerMove,q),onPointerUp:Je(e.onPointerUp,D=>{const J=D.target;J.hasPointerCapture(D.pointerId)&&J.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=j.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),jg="ScrollAreaThumb",ZA=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=XA(jg,e.__scopeScrollArea);return n.jsx(ss,{present:r||a.hasThumb,children:n.jsx(TU,{ref:t,...s})})}),TU=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,i=Za(jg,r),l=XA(jg,r),{onThumbPositionChange:o}=l,c=or(t,m=>l.onThumbChange(m)),d=p.useRef(void 0),u=_x(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const m=i.viewport;if(m){const x=()=>{if(u(),!d.current){const f=IU(m,o);d.current=f,o()}};return o(),m.addEventListener("scroll",x),()=>m.removeEventListener("scroll",x)}},[i.viewport,u,o]),n.jsx(bt.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Je(e.onPointerDownCapture,m=>{const f=m.target.getBoundingClientRect(),y=m.clientX-f.left,v=m.clientY-f.top;l.onThumbPointerDown({x:y,y:v})}),onPointerUp:Je(e.onPointerUp,l.onThumbPointerUp)})});ZA.displayName=jg;var V2="ScrollAreaCorner",eE=p.forwardRef((e,t)=>{const r=Za(V2,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(DU,{...e,ref:t}):null});eE.displayName=V2;var DU=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Za(V2,r),[i,l]=p.useState(0),[o,c]=p.useState(0),d=!!(i&&o);return Ru(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Ru(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),d?n.jsx(bt.div,{...s,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Sg(e){return e?parseInt(e,10):0}function tE(e,t){const r=e/t;return isNaN(r)?0:r}function Sx(e){const t=tE(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function RU(e,t,r,s="ltr"){const a=Sx(r),i=a/2,l=t||i,o=a-l,c=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-o,u=r.content-r.viewport,m=s==="ltr"?[0,u]:[u*-1,0];return rE([c,d],m)(e)}function x5(e,t,r="ltr"){const s=Sx(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,l=t.content-t.viewport,o=i-s,c=r==="ltr"?[0,l]:[l*-1,0],d=F1(e,c);return rE([0,l],[0,o])(d)}function rE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function nE(e,t){return e>0&&e<t}var IU=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},l=r.left!==i.left,o=r.top!==i.top;(l||o)&&t(),r=i,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function _x(e,t){const r=Rn(e),s=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),p.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Ru(e,t){const r=Rn(t);ns(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var sE=GA,MU=KA,FU=eE;const aE=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(sE,{ref:s,className:ht("relative overflow-hidden",e),...r,children:[n.jsx(MU,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(iE,{}),n.jsx(FU,{})]}));aE.displayName=sE.displayName;const iE=p.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(z2,{ref:s,orientation:t,className:ht("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(ZA,{className:"relative flex-1 rounded-full bg-border"})}));iE.displayName=z2.displayName;const OU=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState([]),[i,l]=p.useState(!0),[o,c]=p.useState({}),[d,u]=p.useState(""),[m,x]=p.useState(null),[f,y]=p.useState(null),[v,S]=p.useState(""),[b,j]=p.useState([]),[w,k]=p.useState(null),[R,W]=p.useState(""),[O,q]=p.useState(!1),[D,J]=p.useState("list"),[A,M]=p.useState(""),[ee,E]=p.useState(""),[ae,Y]=p.useState(""),[de,T]=p.useState("all"),[V,re]=p.useState([]);p.useState(""),p.useState(new Set),p.useState(!1),p.useState(null),p.useState([]),p.useState(!1),p.useEffect(()=>{if(!(e!=null&&e.clinic)){l(!1);return}he(),C(),F()},[e==null?void 0:e.clinic]);const he=async()=>{try{const X=await fetch(`/api/lab-requests?clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch lab requests");const ne=await X.json();r(ne)}catch(X){console.error("Error loading lab requests:",X),ye.error("Failed to load lab requests")}},C=async()=>{try{const X=await fetch(`/api/lab-results?clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch lab results");const ne=await X.json();a(ne)}catch(X){console.error("Error loading lab results:",X)}finally{l(!1)}},F=async()=>{try{const X=await fetch(`/api/patients?clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch patients");const ne=await X.json(),ue={};ne.forEach(xe=>{ue[xe.id]=xe}),c(ue)}catch(X){console.error("Error loading patients:",X)}},L=async(X,ne)=>{S(ne),x(o[X]||null),y(X),j([]),k(null),M(""),re([]),W("");try{const ue=await fetch(`/api/lab-requests?clinic=${encodeURIComponent(e.clinic)}&patientId=${X}&status=pending,partial`,{credentials:"include"});if(ue.ok){const xe=await ue.json();if(j(xe),xe.length>0){const ke=xe[0];k(ke),M(ke.testType)}}}catch(ue){console.error("Error loading patient requests:",ue)}},$=async()=>{if(!(!w||!e)){q(!0);try{const X=await fetch(`/api/lab-requests/${w.id}/results`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({components:V,resultText:R,performedBy:e.displayName,status:"completed"})});if(!X.ok){const ne=await X.json();throw new Error(ne.message||"Failed to save results")}ye.success("Lab results saved successfully"),await he(),await C(),k(null),re([]),W("")}catch(X){console.error("Error saving results:",X),ye.error("Failed to save lab results")}finally{q(!1)}}},I=t.filter(X=>!(de!=="all"&&X.status!==de||ee&&X.requestedAt<ee||ae&&X.requestedAt>ae||d&&!X.patientName.toLowerCase().includes(d.toLowerCase()))).reduce((X,ne)=>{const ue=ne.patientId;return X[ue]||(X[ue]={patient:o[ue]||null,requests:[]}),X[ue].requests.push(ne),X},{});return i?n.jsx(Xn,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(mr,{className:"w-8 h-8 animate-spin"})})}):n.jsx(Xn,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Laboratory"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage lab requests and results"})]})}),n.jsxs(U2,{value:D,onValueChange:X=>J(X),children:[n.jsxs(jx,{children:[n.jsx(Va,{value:"list",children:"Pending Tests"}),n.jsx(Va,{value:"history",children:"Test History"})]}),n.jsxs(Ha,{value:"list",className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),n.jsx(Oe,{placeholder:"Search patients...",value:d,onChange:X=>u(X.target.value),className:"pl-10"})]}),n.jsxs(Mn,{value:de,onValueChange:X=>T(X),children:[n.jsx(jn,{className:"w-48",children:n.jsx(Fn,{})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"all",children:"All Status"}),n.jsx(ot,{value:"pending",children:"Pending"}),n.jsx(ot,{value:"partial",children:"Partial"}),n.jsx(ot,{value:"completed",children:"Completed"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Ur,{children:[n.jsxs(en,{children:[n.jsx(tn,{children:"Lab Requests"}),n.jsx($l,{children:"Select a patient to view their lab requests"})]}),n.jsx(Gr,{children:n.jsx(aE,{className:"h-96",children:n.jsx("div",{className:"space-y-2",children:Object.entries(I).map(([X,ne])=>{var ue;return n.jsx("div",{className:"border rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>{var xe;return L(X,((xe=ne.patient)==null?void 0:xe.fullName)||"Unknown")},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Is,{className:"w-4 h-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:((ue=ne.patient)==null?void 0:ue.fullName)||"Unknown Patient"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[ne.requests.length," test",ne.requests.length!==1?"s":""]})]})]}),n.jsx(m2,{className:"w-4 h-4"})]})},X)})})})})]}),n.jsxs(Ur,{children:[n.jsxs(en,{children:[n.jsx(tn,{children:"Test Results Entry"}),n.jsx($l,{children:m?`Enter results for ${m.fullName}`:"Select a patient to enter results"})]}),n.jsx(Gr,{children:w?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ce,{children:"Test Type"}),n.jsx("p",{className:"text-sm font-medium",children:w.testType})]}),n.jsxs("div",{children:[n.jsx(Ce,{htmlFor:"resultText",children:"Results"}),n.jsx(yi,{id:"resultText",value:R,onChange:X=>W(X.target.value),placeholder:"Enter test results...",rows:6})]}),n.jsx(_e,{onClick:$,disabled:O||!R.trim(),className:"w-full",children:O?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Save Results"]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(OI,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Select a patient to enter test results"})]})})]})]})]}),n.jsx(Ha,{value:"history",className:"space-y-4",children:n.jsxs(Ur,{children:[n.jsxs(en,{children:[n.jsx(tn,{children:"Test History"}),n.jsx($l,{children:"View completed lab results"})]}),n.jsx(Gr,{children:n.jsx("div",{className:"space-y-4",children:s.length>0?s.map(X=>n.jsx("div",{className:"border rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:X.patientName}),n.jsx("p",{className:"text-sm text-muted-foreground",children:X.testType})]}),n.jsx(lr,{variant:"secondary",children:"Completed"})]})},X.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(hn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No completed results found"})]})})})]})})]})]})})};var V1=["Enter"," "],BU=["ArrowDown","PageUp","Home"],oE=["ArrowUp","PageDown","End"],UU=[...BU,...oE],$U={ltr:[...V1,"ArrowRight"],rtl:[...V1,"ArrowLeft"]},zU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},om="Menu",[Ff,qU,VU]=Qg(om),[ud,lE]=Ea(om,[VU,ic,wx]),Cx=ic(),cE=wx(),[HU,hd]=ud(om),[WU,lm]=ud(om),dE=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:i,modal:l=!0}=e,o=Cx(t),[c,d]=p.useState(null),u=p.useRef(!1),m=Rn(i),x=am(a);return p.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),n.jsx(k2,{...o,children:n.jsx(HU,{scope:t,open:r,onOpenChange:m,content:c,onContentChange:d,children:n.jsx(WU,{scope:t,onClose:p.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:x,modal:l,children:s})})})};dE.displayName=om;var GU="MenuAnchor",H2=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Cx(r);return n.jsx(rm,{...a,...s,ref:t})});H2.displayName=GU;var W2="MenuPortal",[YU,uE]=ud(W2,{forceMount:void 0}),hE=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,i=hd(W2,t);return n.jsx(YU,{scope:t,forceMount:r,children:n.jsx(ss,{present:r||i.open,children:n.jsx(Hu,{asChild:!0,container:a,children:s})})})};hE.displayName=W2;var Ka="MenuContent",[KU,G2]=ud(Ka),fE=p.forwardRef((e,t)=>{const r=uE(Ka,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,i=hd(Ka,e.__scopeMenu),l=lm(Ka,e.__scopeMenu);return n.jsx(Ff.Provider,{scope:e.__scopeMenu,children:n.jsx(ss,{present:s||i.open,children:n.jsx(Ff.Slot,{scope:e.__scopeMenu,children:l.modal?n.jsx(QU,{...a,ref:t}):n.jsx(XU,{...a,ref:t})})})})}),QU=p.forwardRef((e,t)=>{const r=hd(Ka,e.__scopeMenu),s=p.useRef(null),a=or(t,s);return p.useEffect(()=>{const i=s.current;if(i)return mx(i)},[]),n.jsx(Y2,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Je(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),XU=p.forwardRef((e,t)=>{const r=hd(Ka,e.__scopeMenu);return n.jsx(Y2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),JU=Yl("MenuContent.ScrollLock"),Y2=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:x,onDismiss:f,disableOutsideScroll:y,...v}=e,S=hd(Ka,r),b=lm(Ka,r),j=Cx(r),w=cE(r),k=qU(r),[R,W]=p.useState(null),O=p.useRef(null),q=or(t,O,S.onContentChange),D=p.useRef(0),J=p.useRef(""),A=p.useRef(0),M=p.useRef(null),ee=p.useRef("right"),E=p.useRef(0),ae=y?sm:p.Fragment,Y=y?{as:JU,allowPinchZoom:!0}:void 0,de=V=>{var I,X;const re=J.current+V,he=k().filter(ne=>!ne.disabled),C=document.activeElement,F=(I=he.find(ne=>ne.ref.current===C))==null?void 0:I.textValue,L=he.map(ne=>ne.textValue),$=d$(L,re,F),K=(X=he.find(ne=>ne.textValue===$))==null?void 0:X.ref.current;(function ne(ue){J.current=ue,window.clearTimeout(D.current),ue!==""&&(D.current=window.setTimeout(()=>ne(""),1e3))})(re),K&&setTimeout(()=>K.focus())};p.useEffect(()=>()=>window.clearTimeout(D.current),[]),hx();const T=p.useCallback(V=>{var he,C;return ee.current===((he=M.current)==null?void 0:he.side)&&h$(V,(C=M.current)==null?void 0:C.area)},[]);return n.jsx(KU,{scope:r,searchRef:J,onItemEnter:p.useCallback(V=>{T(V)&&V.preventDefault()},[T]),onItemLeave:p.useCallback(V=>{var re;T(V)||((re=O.current)==null||re.focus(),W(null))},[T]),onTriggerLeave:p.useCallback(V=>{T(V)&&V.preventDefault()},[T]),pointerGraceTimerRef:A,onPointerGraceIntentChange:p.useCallback(V=>{M.current=V},[]),children:n.jsx(ae,{...Y,children:n.jsx(nm,{asChild:!0,trapped:a,onMountAutoFocus:Je(i,V=>{var re;V.preventDefault(),(re=O.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:n.jsx(dd,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:x,onDismiss:f,children:n.jsx(LA,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:s,currentTabStopId:R,onCurrentTabStopIdChange:W,onEntryFocus:Je(c,V=>{b.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(ax,{role:"menu","aria-orientation":"vertical","data-state":AE(S.open),"data-radix-menu-content":"",dir:b.dir,...j,...v,ref:q,style:{outline:"none",...v.style},onKeyDown:Je(v.onKeyDown,V=>{const he=V.target.closest("[data-radix-menu-content]")===V.currentTarget,C=V.ctrlKey||V.altKey||V.metaKey,F=V.key.length===1;he&&(V.key==="Tab"&&V.preventDefault(),!C&&F&&de(V.key));const L=O.current;if(V.target!==L||!UU.includes(V.key))return;V.preventDefault();const K=k().filter(I=>!I.disabled).map(I=>I.ref.current);oE.includes(V.key)&&K.reverse(),l$(K)}),onBlur:Je(e.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(D.current),J.current="")}),onPointerMove:Je(e.onPointerMove,Of(V=>{const re=V.target,he=E.current!==V.clientX;if(V.currentTarget.contains(re)&&he){const C=V.clientX>E.current?"right":"left";ee.current=C,E.current=V.clientX}}))})})})})})})});fE.displayName=Ka;var ZU="MenuGroup",K2=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(bt.div,{role:"group",...s,ref:t})});K2.displayName=ZU;var e$="MenuLabel",mE=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(bt.div,{...s,ref:t})});mE.displayName=e$;var _g="MenuItem",v5="menu.itemSelect",kx=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,i=p.useRef(null),l=lm(_g,e.__scopeMenu),o=G2(_g,e.__scopeMenu),c=or(t,i),d=p.useRef(!1),u=()=>{const m=i.current;if(!r&&m){const x=new CustomEvent(v5,{bubbles:!0,cancelable:!0});m.addEventListener(v5,f=>s==null?void 0:s(f),{once:!0}),d2(m,x),x.defaultPrevented?d.current=!1:l.onClose()}};return n.jsx(pE,{...a,ref:c,disabled:r,onClick:Je(e.onClick,u),onPointerDown:m=>{var x;(x=e.onPointerDown)==null||x.call(e,m),d.current=!0},onPointerUp:Je(e.onPointerUp,m=>{var x;d.current||(x=m.currentTarget)==null||x.click()}),onKeyDown:Je(e.onKeyDown,m=>{const x=o.searchRef.current!=="";r||x&&m.key===" "||V1.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});kx.displayName=_g;var pE=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...i}=e,l=G2(_g,r),o=cE(r),c=p.useRef(null),d=or(t,c),[u,m]=p.useState(!1),[x,f]=p.useState("");return p.useEffect(()=>{const y=c.current;y&&f((y.textContent??"").trim())},[i.children]),n.jsx(Ff.ItemSlot,{scope:r,disabled:s,textValue:a??x,children:n.jsx(TA,{asChild:!0,...o,focusable:!s,children:n.jsx(bt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:d,onPointerMove:Je(e.onPointerMove,Of(y=>{s?l.onItemLeave(y):(l.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Je(e.onPointerLeave,Of(y=>l.onItemLeave(y))),onFocus:Je(e.onFocus,()=>m(!0)),onBlur:Je(e.onBlur,()=>m(!1))})})})}),t$="MenuCheckboxItem",gE=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(wE,{scope:e.__scopeMenu,checked:r,children:n.jsx(kx,{role:"menuitemcheckbox","aria-checked":Cg(r)?"mixed":r,...a,ref:t,"data-state":X2(r),onSelect:Je(a.onSelect,()=>s==null?void 0:s(Cg(r)?!0:!r),{checkForDefaultPrevented:!1})})})});gE.displayName=t$;var xE="MenuRadioGroup",[r$,n$]=ud(xE,{value:void 0,onValueChange:()=>{}}),vE=p.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,i=Rn(s);return n.jsx(r$,{scope:e.__scopeMenu,value:r,onValueChange:i,children:n.jsx(K2,{...a,ref:t})})});vE.displayName=xE;var yE="MenuRadioItem",bE=p.forwardRef((e,t)=>{const{value:r,...s}=e,a=n$(yE,e.__scopeMenu),i=r===a.value;return n.jsx(wE,{scope:e.__scopeMenu,checked:i,children:n.jsx(kx,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":X2(i),onSelect:Je(s.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,r)},{checkForDefaultPrevented:!1})})})});bE.displayName=yE;var Q2="MenuItemIndicator",[wE,s$]=ud(Q2,{checked:!1}),NE=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,i=s$(Q2,r);return n.jsx(ss,{present:s||Cg(i.checked)||i.checked===!0,children:n.jsx(bt.span,{...a,ref:t,"data-state":X2(i.checked)})})});NE.displayName=Q2;var a$="MenuSeparator",jE=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(bt.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});jE.displayName=a$;var i$="MenuArrow",SE=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Cx(r);return n.jsx(ix,{...a,...s,ref:t})});SE.displayName=i$;var o$="MenuSub",[D3,_E]=ud(o$),Gh="MenuSubTrigger",CE=p.forwardRef((e,t)=>{const r=hd(Gh,e.__scopeMenu),s=lm(Gh,e.__scopeMenu),a=_E(Gh,e.__scopeMenu),i=G2(Gh,e.__scopeMenu),l=p.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=p.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const m=o.current;return()=>{window.clearTimeout(m),c(null)}},[o,c]),n.jsx(H2,{asChild:!0,...d,children:n.jsx(pE,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":AE(r.open),...e,ref:Fo(t,a.onTriggerChange),onClick:m=>{var x;(x=e.onClick)==null||x.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Je(e.onPointerMove,Of(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:Je(e.onPointerLeave,Of(m=>{var f,y;u();const x=(f=r.content)==null?void 0:f.getBoundingClientRect();if(x){const v=(y=r.content)==null?void 0:y.dataset.side,S=v==="right",b=S?-5:5,j=x[S?"left":"right"],w=x[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:j,y:x.top},{x:w,y:x.top},{x:w,y:x.bottom},{x:j,y:x.bottom}],side:v}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Je(e.onKeyDown,m=>{var f;const x=i.searchRef.current!=="";e.disabled||x&&m.key===" "||$U[s.dir].includes(m.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),m.preventDefault())})})})});CE.displayName=Gh;var kE="MenuSubContent",PE=p.forwardRef((e,t)=>{const r=uE(Ka,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,i=hd(Ka,e.__scopeMenu),l=lm(Ka,e.__scopeMenu),o=_E(kE,e.__scopeMenu),c=p.useRef(null),d=or(t,c);return n.jsx(Ff.Provider,{scope:e.__scopeMenu,children:n.jsx(ss,{present:s||i.open,children:n.jsx(Ff.Slot,{scope:e.__scopeMenu,children:n.jsx(Y2,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;l.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Je(e.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Je(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:Je(e.onKeyDown,u=>{var f;const m=u.currentTarget.contains(u.target),x=zU[l.dir].includes(u.key);m&&x&&(i.onOpenChange(!1),(f=o.trigger)==null||f.focus(),u.preventDefault())})})})})})});PE.displayName=kE;function AE(e){return e?"open":"closed"}function Cg(e){return e==="indeterminate"}function X2(e){return Cg(e)?"indeterminate":e?"checked":"unchecked"}function l$(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function c$(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function d$(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let l=c$(e,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function u$(e,t){const{x:r,y:s}=e;let a=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i],c=t[l],d=o.x,u=o.y,m=c.x,x=c.y;u>s!=x>s&&r<(m-d)*(s-u)/(x-u)+d&&(a=!a)}return a}function h$(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return u$(r,t)}function Of(e){return t=>t.pointerType==="mouse"?e(t):void 0}var f$=dE,m$=H2,p$=hE,g$=fE,x$=K2,v$=mE,y$=kx,b$=gE,w$=vE,N$=bE,j$=NE,S$=jE,_$=SE,C$=CE,k$=PE,Px="DropdownMenu",[P$,R3]=Ea(Px,[lE]),zs=lE(),[A$,EE]=P$(Px),LE=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=e,c=zs(t),d=p.useRef(null),[u,m]=Oo({prop:a,defaultProp:i??!1,onChange:l,caller:Px});return n.jsx(A$,{scope:t,triggerId:ms(),triggerRef:d,contentId:ms(),open:u,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(x=>!x),[m]),modal:o,children:n.jsx(f$,{...c,open:u,onOpenChange:m,dir:s,modal:o,children:r})})};LE.displayName=Px;var TE="DropdownMenuTrigger",DE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,i=EE(TE,r),l=zs(r);return n.jsx(m$,{asChild:!0,...l,children:n.jsx(bt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Fo(t,i.triggerRef),onPointerDown:Je(e.onPointerDown,o=>{!s&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Je(e.onKeyDown,o=>{s||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});DE.displayName=TE;var E$="DropdownMenuPortal",RE=e=>{const{__scopeDropdownMenu:t,...r}=e,s=zs(t);return n.jsx(p$,{...s,...r})};RE.displayName=E$;var IE="DropdownMenuContent",ME=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=EE(IE,r),i=zs(r),l=p.useRef(!1);return n.jsx(g$,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:Je(e.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:Je(e.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ME.displayName=IE;var L$="DropdownMenuGroup",T$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(x$,{...a,...s,ref:t})});T$.displayName=L$;var D$="DropdownMenuLabel",FE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(v$,{...a,...s,ref:t})});FE.displayName=D$;var R$="DropdownMenuItem",OE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(y$,{...a,...s,ref:t})});OE.displayName=R$;var I$="DropdownMenuCheckboxItem",BE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(b$,{...a,...s,ref:t})});BE.displayName=I$;var M$="DropdownMenuRadioGroup",F$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(w$,{...a,...s,ref:t})});F$.displayName=M$;var O$="DropdownMenuRadioItem",UE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(N$,{...a,...s,ref:t})});UE.displayName=O$;var B$="DropdownMenuItemIndicator",$E=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(j$,{...a,...s,ref:t})});$E.displayName=B$;var U$="DropdownMenuSeparator",zE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(S$,{...a,...s,ref:t})});zE.displayName=U$;var $$="DropdownMenuArrow",z$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(_$,{...a,...s,ref:t})});z$.displayName=$$;var q$="DropdownMenuSubTrigger",qE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(C$,{...a,...s,ref:t})});qE.displayName=q$;var V$="DropdownMenuSubContent",VE=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=zs(r);return n.jsx(k$,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VE.displayName=V$;var H$=LE,W$=DE,G$=RE,HE=ME,WE=FE,GE=OE,YE=BE,KE=UE,QE=$E,XE=zE,JE=qE,ZE=VE;const Y$=H$,K$=W$,Q$=p.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(JE,{ref:a,className:ht("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(m2,{className:"ml-auto h-4 w-4"})]}));Q$.displayName=JE.displayName;const X$=p.forwardRef(({className:e,...t},r)=>n.jsx(ZE,{ref:r,className:ht("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));X$.displayName=ZE.displayName;const e6=p.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(G$,{children:n.jsx(HE,{ref:s,sideOffset:t,className:ht("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));e6.displayName=HE.displayName;const Yh=p.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(GE,{ref:s,className:ht("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Yh.displayName=GE.displayName;const J$=p.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(YE,{ref:a,className:ht("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(QE,{children:n.jsx(ra,{className:"h-4 w-4"})})}),t]}));J$.displayName=YE.displayName;const Z$=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(KE,{ref:s,className:ht("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(QE,{children:n.jsx(AI,{className:"h-2 w-2 fill-current"})})}),t]}));Z$.displayName=KE.displayName;const ez=p.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(WE,{ref:s,className:ht("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));ez.displayName=WE.displayName;const tz=p.forwardRef(({className:e,...t},r)=>n.jsx(XE,{ref:r,className:ht("-mx-1 my-1 h-px bg-muted",e),...t}));tz.displayName=XE.displayName;class rz{constructor(){ar(this,"baseUrl","/api/pharmacy")}async getInventory(t){try{const r=await fetch(`${this.baseUrl}/inventory/${t}`);if(!r.ok)throw new Error("Failed to fetch inventory");return await r.json()}catch(r){throw console.error("Error fetching inventory:",r),r}}async addInventoryItem(t){try{const r=await fetch(`${this.baseUrl}/inventory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to add inventory item");return await r.json()}catch(r){throw console.error("Error adding inventory item:",r),r}}async updateInventoryItem(t,r){try{const s=await fetch(`${this.baseUrl}/inventory/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error("Failed to update inventory item");return await s.json()}catch(s){throw console.error("Error updating inventory item:",s),s}}async getDispensingHistory(t){try{const r=await fetch(`${this.baseUrl}/dispensing/${t}`);if(!r.ok)throw new Error("Failed to fetch dispensing history");return await r.json()}catch(r){throw console.error("Error fetching dispensing history:",r),r}}async addDispensingRecord(t){try{const r=await fetch(`${this.baseUrl}/dispensing`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to add dispensing record");return await r.json()}catch(r){throw console.error("Error adding dispensing record:",r),r}}async getPatients(t){try{const r=await fetch(`/api/patients/clinic/${t}`);if(!r.ok)throw new Error("Failed to fetch patients");return await r.json()}catch(r){throw console.error("Error fetching patients:",r),r}}async getPrescriptions(t){try{const r=await fetch(`${this.baseUrl}/prescriptions/${t}`);if(!r.ok)throw new Error("Failed to fetch prescriptions");return await r.json()}catch(r){throw console.error("Error fetching prescriptions:",r),r}}async findActivePatientBill(t,r){try{const s=await fetch(`/api/patient-bills/active/${t}/${r}`);if(!s.ok){if(s.status===404)return null;throw new Error("Failed to find active patient bill")}return await s.json()}catch(s){return console.error("Error finding active patient bill:",s),null}}async createOrUpdatePatientBill(t){try{const r=await fetch("/api/patient-bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create/update patient bill");return await r.json()}catch(r){throw console.error("Error creating/updating patient bill:",r),r}}async addServicesToBill(t,r){try{const s=await fetch(`/api/patient-bills/${t}/add-services`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({services:r})});if(!s.ok)throw new Error("Failed to add services to bill");return await s.json()}catch(s){throw console.error("Error adding services to bill:",s),s}}async createPharmacyReceipt(t){try{const r=await fetch("/api/pharmacy/receipts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create pharmacy receipt");return await r.json()}catch(r){throw console.error("Error creating pharmacy receipt:",r),r}}async getPatientBills(t,r){try{const s=r?`/api/patient-bills/clinic/${t}?patientId=${r}`:`/api/patient-bills/clinic/${t}`,a=await fetch(s);if(!a.ok)throw new Error("Failed to fetch patient bills");return await a.json()}catch(s){throw console.error("Error fetching patient bills:",s),s}}}const nz=()=>{var Vs;const{user:e}=qn(),t=new rz,[r,s]=p.useState([]),[a,i]=p.useState([]),[l,o]=p.useState([]),[c,d]=p.useState([]),[u,m]=p.useState(null),[x,f]=p.useState({from:"",to:""}),[y,v]=p.useState("all"),[S,b]=p.useState([]),[j,w]=p.useState(!0),[k,R]=p.useState(""),[W,O]=p.useState(!1),[q,D]=p.useState(!1),[J,A]=p.useState(null),[M,ee]=p.useState(!1),[E,ae]=p.useState(!1),[Y,de]=p.useState(null),[T,V]=p.useState(!1),[re,he]=p.useState([]),[C,F]=p.useState(!1),[L,$]=p.useState(null),[K,I]=p.useState(!1),[X,ne]=p.useState(""),[ue,xe]=p.useState([]),[ke,Re]=p.useState(!1),[We,Z]=p.useState(!1),[Ge,Lt]=p.useState("cash"),[Me,Ee]=p.useState(""),[it,et]=p.useState(!1),[dt,lt]=p.useState(!1),[jt,Ht]=p.useState(null),[ut,Mt]=p.useState(""),[Gt,st]=p.useState(!1),[se,ve]=p.useState("all"),[Pe,Fe]=p.useState(""),[pe,ze]=p.useState({drug_name:"",generic_name:"",current_stock:"",unit_of_measure:"Tablets",reorder_level:"",expiry_date:"",batch_number:"",date_received:new Date().toISOString().split("T")[0],unit_cost:"",margin_percentage:"",selling_price:""}),qe=(ce,Be)=>{const He=parseFloat(ce),Ye=parseFloat(Be);return!isNaN(He)&&!isNaN(Ye)&&He>0&&Ye>=0?(He+He*Ye/100).toFixed(2):""},Ve=(ce,Be)=>{const He=parseFloat(ce),Ye=parseFloat(Be);return!isNaN(He)&&!isNaN(Ye)&&He>0&&Ye>=He?((Ye-He)/He*100).toFixed(1):""},Yt=()=>{const ce=new Date,Be=ce.getFullYear().toString().slice(-2),He=(ce.getMonth()+1).toString().padStart(2,"0"),Ye=ce.getDate().toString().padStart(2,"0"),tt=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`BATCH-${Be}${He}${Ye}-${tt}`};p.useEffect(()=>{W&&!M&&!pe.batch_number&&ze(ce=>({...ce,batch_number:Yt()}))},[W,M]);const xt=ce=>{var tt,ct;A(ce),ee(!0);const Be=((tt=ce.unit_cost)==null?void 0:tt.toString())||"",He=((ct=ce.selling_price)==null?void 0:ct.toString())||"",Ye=Be&&He?Ve(Be,He):"";ze({drug_name:ce.drug_name,generic_name:ce.generic_name||"",current_stock:ce.current_stock.toString(),unit_of_measure:ce.unit_of_measure||"Tablets",reorder_level:ce.reorder_level.toString(),expiry_date:ce.expiry_date||"",batch_number:ce.batch_number||"",date_received:ce.date_received||new Date().toISOString().split("T")[0],unit_cost:Be,margin_percentage:Ye,selling_price:He}),O(!0)},pt=()=>{A(null),ee(!1),ze({drug_name:"",generic_name:"",current_stock:"",unit_of_measure:"Tablets",reorder_level:"",expiry_date:"",batch_number:"",date_received:new Date().toISOString().split("T")[0],unit_cost:"",margin_percentage:"",selling_price:""}),O(!0)},cr=ce=>{if(!ce||ce.trim()==="")return new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0];if(/^\d{4}-\d{2}-\d{2}$/.test(ce))return ce;const Be={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",juk:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12"},He=ce.toLowerCase().trim().split("-");if(He.length===2){const Ye=He[0],tt=He[1],ct=Be[Ye];if(ct){const qt=tt.length===2?`20${tt}`:tt,mt=new Date(parseInt(qt),parseInt(ct),0).getDate();return`${qt}-${ct}-${mt.toString().padStart(2,"0")}`}}return new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0]},Wt=()=>{const ce=["drug_name","generic_name","current_stock","unit_of_measure","reorder_level","expiry_date","batch_number","date_received","unit_cost","selling_price"],Be=["Paracetamol 500mg","Acetaminophen","100","Tablets","20","dec-25","BATCH-260111-001","jan-26","10.00","12.50"],He=[ce.join(","),Be.join(","),ce.map(()=>"").join(",")].join(`
`),Ye=new Blob([He],{type:"text/csv"}),tt=window.URL.createObjectURL(Ye),ct=document.createElement("a");ct.href=tt,ct.download="pharmacy_inventory_template.csv",document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),window.URL.revokeObjectURL(tt),ye.success("Template downloaded successfully")},wt=ce=>{var He;const Be=(He=ce.target.files)==null?void 0:He[0];Be&&Be.type==="text/csv"?(de(Be),dr(Be)):ye.error("Please select a valid CSV file")},dr=ce=>{const Be=new FileReader;Be.onload=He=>{var mt;const tt=((mt=He.target)==null?void 0:mt.result).split(`
`).filter(Pt=>Pt.trim()),ct=tt[0].split(",").map(Pt=>Pt.trim()),qt=tt.slice(1).map(Pt=>{const $t=Pt.split(",").map(at=>at.trim()),At={};return ct.forEach((at,Ot)=>{At[at]=$t[Ot]||""}),At});he(qt)},Be.readAsText(ce)},Ft=async()=>{if(!(!Y||!(e!=null&&e.clinic)))try{V(!0);const ce=new FileReader;ce.onload=async Be=>{var Pt;const Ye=((Pt=Be.target)==null?void 0:Pt.result).split(`
`).filter($t=>$t.trim()),tt=Ye[0].split(",").map($t=>$t.trim()),ct=Ye.slice(1).map($t=>{const At=$t.split(",").map(Ot=>Ot.trim()),at={};return tt.forEach((Ot,Sr)=>{at[Ot]=At[Sr]||""}),{drug_name:at.drug_name,generic_name:at.generic_name||"",unit_of_measure:at.unit_of_measure||"Tablets",quantity_received:parseInt(at.current_stock)||0,current_stock:parseInt(at.current_stock)||0,expiry_date:cr(at.expiry_date),batch_number:at.batch_number||Yt(),reorder_level:parseInt(at.reorder_level)||10,clinic_id:parseInt(e.clinic),date_received:cr(at.date_received),received_by:e.uid||e.id||"system",unit_cost:parseFloat(at.unit_cost)||0,selling_price:parseFloat(at.selling_price)||0}}).filter($t=>$t.drug_name);let qt=0,mt=0;for(const $t of ct)try{await t.addInventoryItem($t),qt++}catch(At){console.error("Error importing item:",$t.drug_name,At),mt++}ye.success(`Import completed: ${qt} items added${mt>0?`, ${mt} errors`:""}`),ae(!1),de(null),he([]),Jn()},ce.readAsText(Y)}catch(ce){console.error("Error importing CSV:",ce),ye.error("Failed to import CSV file")}finally{V(!1)}},Ut=()=>{if(an.length===0){ye.error("No inventory data to export");return}try{const ce=["drug_name","current_stock","unit_of_measure","reorder_level","expiry_date","batch_number","date_received","unit_cost","selling_price","status"],Be=an.map(Pt=>[Pt.drug_name,Pt.current_stock,Pt.unit_of_measure||"Tablets",Pt.reorder_level,Pt.expiry_date||"",Pt.batch_number||"",Pt.date_received||"",Pt.unit_cost||"0.00",Pt.selling_price||"0.00",Pt.current_stock<=Pt.reorder_level?"Low Stock":Pt.expiry_date&&new Date(Pt.expiry_date)<new Date(Date.now()+7776e6)?"Expiring":"In Stock"]),He=[ce.join(","),...Be.map(Pt=>Pt.map($t=>typeof $t=="string"&&($t.includes(",")||$t.includes('"'))?`"${$t.replace(/"/g,'""')}"`:$t).join(","))].join(`
`),Ye=new Blob([He],{type:"text/csv;charset=utf-8;"}),tt=window.URL.createObjectURL(Ye),ct=document.createElement("a");ct.href=tt;const qt=new Date().toISOString().split("T")[0],mt=k?`pharmacy_inventory_filtered_${qt}.csv`:`pharmacy_inventory_${qt}.csv`;ct.download=mt,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),window.URL.revokeObjectURL(tt),ye.success(`Exported ${an.length} items to CSV`)}catch(ce){console.error("Error exporting CSV:",ce),ye.error("Failed to export CSV file")}},rr=l.filter(ce=>{var He,Ye,tt;if(!ut)return!0;const Be=ut.toLowerCase();return((He=ce.fullName)==null?void 0:He.toLowerCase().includes(Be))||((Ye=ce.patientId)==null?void 0:Ye.toLowerCase().includes(Be))||((tt=ce.phoneNumber)==null?void 0:tt.toLowerCase().includes(Be))}),$r=ce=>{$(ce),Mt(ce.fullName||""),st(!1)},ft=()=>{F(!0),$(null),I(!1),ne(""),xe([]),Z(!1),Lt("cash"),Ee(""),et(!1),Mt(""),st(!1),lt(!1),Ht(null)},sn=()=>{if(ue.length===0){ye.error("Please add items to dispense");return}if(!K&&!L){ye.error("Please select a patient or choose walk-in client");return}if(K&&!X.trim()){ye.error("Please enter walk-in client name");return}const ce=ue.reduce((Be,He)=>Be+He.totalPrice,0);Ee(ce.toFixed(2)),Z(!0)},_n=()=>{const ce=ue.reduce((He,Ye)=>He+Ye.totalPrice,0);if(parseFloat(Me)<ce){ye.error("Payment amount is insufficient");return}et(!0),ye.success("Payment received successfully")},Mr=ce=>{var tt;if(ue.find(ct=>ct.inventoryId===ce.id)){ye.error("Item already added to dispensing list");return}const He=parseFloat(((tt=ce.selling_price)==null?void 0:tt.toString())||"0"),Ye={inventoryId:ce.id,drugName:ce.drug_name,quantity:1,unitPrice:He,totalPrice:He,availableStock:ce.current_stock};xe([...ue,Ye])},Kr=(ce,Be)=>{xe(He=>He.map(Ye=>Ye.inventoryId===ce?{...Ye,quantity:Be,totalPrice:Ye.unitPrice*Be}:Ye))},zr=ce=>{xe(Be=>Be.filter(He=>He.inventoryId!==ce))},qr=async()=>{var ce,Be,He;if(e!=null&&e.clinic){if(ue.length===0){ye.error("Please add items to dispense");return}if(!K&&!L){ye.error("Please select a patient or choose walk-in client");return}if(K&&!X.trim()){ye.error("Please enter walk-in client name");return}try{Re(!0);for(const At of ue){const at=r.find(Ot=>Ot.id===At.inventoryId);if(!at||at.current_stock<At.quantity){ye.error(`Insufficient stock for ${At.drugName}`);return}}const Ye=ue.reduce((At,at)=>At+at.totalPrice,0),tt=K?`WALK-IN-${Date.now()}`:L==null?void 0:L.patientId,ct=K?X.trim():L==null?void 0:L.fullName,qt=ue.map(At=>({serviceName:At.drugName,quantity:At.quantity,unitPrice:At.unitPrice,totalPrice:At.totalPrice,serviceType:"pharmacy"}));let mt;console.log("Dispensing for patient:",{patientId:tt,patientName:ct,clinicId:e.clinic});const Pt=await t.findActivePatientBill(tt,e.clinic);if(console.log("Found existing bill:",Pt),Pt)console.log("Adding services to existing bill:",Pt.id),console.log("Existing bill services count:",((ce=Pt.services)==null?void 0:ce.length)||0),mt=await t.addServicesToBill(Pt.id,qt),console.log("Updated bill after adding services:",mt),ye.success(`Services added to existing bill #${Pt.bill_number}`);else{console.log("Creating new bill for patient:",tt);const At={patient_id:tt,patient_name:ct,clinic_id:parseInt(e.clinic),services:qt,total_amount:Ye,paid_amount:Ye,balance_amount:0,status:"pending",bill_date:new Date().toISOString(),created_by:e.displayName||e.uid||"system"};mt=await t.createOrUpdatePatientBill(At),ye.success(`New bill created #${mt.bill_number}`)}let $t=L==null?void 0:L.id;if(K){const At={patient_id:`WALK-${Date.now().toString().slice(-8)}`,first_name:X.trim(),last_name:"Walk-in",date_of_birth:"1900-01-01",gender:"other",contact_number:"N/A",clinic_id:parseInt(e.clinic),registration_date:new Date().toISOString()},at=await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(At)});at.ok&&($t=(await at.json()).id)}if($t){const At={patient_id:$t,visit_date:new Date().toISOString(),clinic_id:parseInt(e.clinic),status:"completed",chief_complaint:K?"Walk-in pharmacy dispensing":"Pharmacy dispensing"},at=await fetch("/api/visits",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(At)});if(!at.ok)throw new Error("Failed to create visit record");const Ot=await at.json();for(const Sr of ue){const on=r.find(pr=>pr.id===Sr.inventoryId),Vr=(on==null?void 0:on.unit_of_measure)||"units",Pr={drug_id:Sr.inventoryId,patient_id:$t,visit_id:Ot.id,prescription_id:null,quantity_dispensed:Sr.quantity,unit_of_measure:Vr,dosage:null,frequency:null,duration:null,instructions:null,dispensed_at:new Date().toISOString(),dispensed_by:(e==null?void 0:e.uid)||(e==null?void 0:e.id)||"system",clinic_id:parseInt(e.clinic),status:"dispensed"};await t.addDispensingRecord(Pr)}}for(const At of ue){const at=r.find(Ot=>Ot.id===At.inventoryId);if(at){const Ot={current_stock:at.current_stock-At.quantity};await t.updateInventoryItem(At.inventoryId,Ot)}}try{const At=mt.services||[];console.log("Bill services for receipt indexing:",At);const at=[],Ot=[];if(Pt){const Pr=((Be=Pt.services)==null?void 0:Be.length)||0;console.log("New services start at index:",Pr),ue.forEach((pr,aa)=>{const _t=Pr+aa;at.push(_t.toString()),Ot.push({index:_t,serviceName:pr.drugName,quantity:pr.quantity,unitPrice:pr.unitPrice,totalPrice:pr.totalPrice,department:"Pharmacy"})})}else ue.forEach((Pr,pr)=>{at.push(pr.toString()),Ot.push({index:pr,serviceName:Pr.drugName,quantity:Pr.quantity,unitPrice:Pr.unitPrice,totalPrice:Pr.totalPrice,department:"Pharmacy"})});console.log("Calculated paid service indexes:",at),console.log("Service details for receipt:",Ot),console.log("Final bill services after adding pharmacy items:",mt.services);const Sr={bill_id:mt.id,patient_id:tt,patient_name:ct,clinic_id:parseInt(e.clinic),payment_amount:Ye,payment_method:Ge,payment_date:new Date().toISOString(),paid_services:at,service_details:Ot,notes:`Pharmacy dispensing - ${ue.length} items`,from_lease:!1,cashier_name:(e==null?void 0:e.displayName)||"Unknown",cashier_id:(e==null?void 0:e.uid)||(e==null?void 0:e.id),status:"active"},on=await t.createPharmacyReceipt(Sr);console.log("Pharmacy receipt created successfully",on),console.log("Receipt data sent to API:",Sr);const Vr={...Sr,receipt_number:on.receipt_number||`RCP-${Date.now().toString().slice(-8)}`,bill_number:mt.bill_number||mt.billNumber,dispensingItems:ue};console.log("Setting receipt data for display:",Vr),Ht(Vr)}catch(At){console.error("Error creating pharmacy receipt:",At);const at=[],Ot=[];if(Pt){const on=((He=Pt.services)==null?void 0:He.length)||0;ue.forEach((Vr,Pr)=>{const pr=on+Pr;at.push(pr.toString()),Ot.push({index:pr,serviceName:Vr.drugName,quantity:Vr.quantity,unitPrice:Vr.unitPrice,totalPrice:Vr.totalPrice,department:"Pharmacy"})})}else ue.forEach((on,Vr)=>{at.push(Vr.toString()),Ot.push({index:Vr,serviceName:on.drugName,quantity:on.quantity,unitPrice:on.unitPrice,totalPrice:on.totalPrice,department:"Pharmacy"})});const Sr={bill_id:mt.id,patient_id:tt,patient_name:ct,clinic_id:parseInt(e.clinic),payment_amount:Ye,payment_method:Ge,payment_date:new Date().toISOString(),paid_services:at,service_details:Ot,notes:`Pharmacy dispensing - ${ue.length} items`,from_lease:!1,cashier_name:(e==null?void 0:e.displayName)||"Unknown",cashier_id:(e==null?void 0:e.uid)||(e==null?void 0:e.id),status:"active",receipt_number:`RCP-${Date.now().toString().slice(-8)}`,bill_number:mt.bill_number||mt.billNumber,dispensingItems:ue};console.log("Using fallback receipt data:",Sr),Ht(Sr)}if(u){try{const At=u.split(",");for(const at of At)(await fetch(`/api/pharmacy/prescriptions/${at}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed"})})).ok&&console.log("Prescription status updated to dispensed:",at)}catch(At){console.error("Error updating prescription status:",At)}m(null)}ye.success(`Medicine dispensed successfully. Payment of SSP ${Ye.toFixed(2)} received. Bill #${mt.bill_number||mt.billNumber}`),console.log("About to close dispense modal and show receipt"),F(!1),setTimeout(()=>{console.log("Setting showReceipt to true"),lt(!0)},100),Jn()}catch(Ye){console.error("Error dispensing medicine:",Ye),ye.error("Failed to dispense medicine")}finally{Re(!1)}}},Ir=()=>{if(!jt)return;const ce=window.open("","_blank");if(!ce){ye.error("Please allow popups to print the receipt");return}const Be=new Date,He=jt.receipt_number,Ye=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt</title>
        <style>
          @media print {
            @page {
              size: 80mm auto;
              margin: 0;
            }
            body {
              margin: 0;
              padding: 0;
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.2;
            }
            .thermal-receipt {
              width: 80mm !important;
              max-width: none !important;
            }
          }
          body {
            margin: 0;
            padding: 8px;
            font-family: 'Courier New', monospace;
          }
        </style>
      </head>
      <body>
        <div class="thermal-receipt" style="
          width: 100%;
          max-width: 302px;
          font-family: monospace;
          font-size: 11px;
          line-height: 1.3;
          color: #000;
          background-color: #fff;
          padding: 12px;
          margin: 0 auto;
          box-sizing: border-box;
        ">
          <!-- Header -->
          <div style="text-align: center; margin-bottom: 12px;">
            <div style="font-size: 16px; font-weight: bold; margin-bottom: 2px;">
              UNIVERSAL HOSPITAL
            </div>
            <div style="font-size: 9px; margin-bottom: 1px; color: #666;">
              Hai Jerusalem, Juba, South Sudan
            </div>
            <div style="font-size: 9px; margin-bottom: 1px; color: #666;">
              Tel: 0922123463
            </div>
            <div style="font-size: 9px; margin-bottom: 6px; color: #666;">
              Email: info@universalhospital.com
            </div>
            <div style="font-size: 11px; font-weight: bold; margin-bottom: 2px;">
              PHARMACY RECEIPT
            </div>
            <div style="font-size: 10px;">
              ${Be.toLocaleDateString("en-GB")} ${Be.toLocaleTimeString("en-GB")}
            </div>
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Receipt Info -->
          <div style="margin-bottom: 12px; font-size: 11px;">
            <div style="display: flex; justify-content: space-between;">
              <span>Receipt No:</span>
              <span style="font-weight: bold;">${He}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>Bill No:</span>
              <span>${jt.bill_number}</span>
            </div>
          </div>

          <!-- Patient Info -->
          <div style="margin-bottom: 12px; font-size: 11px;">
            <div style="font-weight: bold; margin-bottom: 2px;">PATIENT DETAILS:</div>
            <div>Name: ${jt.patient_name}</div>
            <div>ID: ${jt.patient_id}</div>
            <div>Date: ${new Date(jt.payment_date).toLocaleDateString("en-GB")}</div>
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Medications -->
          <div style="margin-bottom: 12px; font-size: 10px;">
            <div style="font-weight: bold; margin-bottom: 4px;">MEDICATIONS:</div>
            ${jt.dispensingItems?jt.dispensingItems.map(tt=>`
                <div style="margin-bottom: 3px;">
                  <div style="display: flex; justify-content: space-between;">
                    <span style="flex: 1; padding-right: 4px;">
                      ${tt.drugName.toUpperCase()}
                    </span>
                    <span style="min-width: 60px; text-align: right;">
                      SSP ${tt.totalPrice.toFixed(2)}
                    </span>
                  </div>
                  <div style="font-size: 9px; color: #666; padding-left: 4px;">
                    ${tt.quantity} x SSP ${tt.unitPrice.toFixed(2)}
                  </div>
                </div>
              `).join(""):"<div>No medication details available</div>"}
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Payment Details -->
          <div style="margin-bottom: 12px; font-size: 11px;">
            <div style="font-weight: bold; margin-bottom: 2px;">PAYMENT DETAILS:</div>
            <div style="display: flex; justify-content: space-between;">
              <span>Method:</span>
              <span style="text-transform: capitalize;">${jt.payment_method}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span>Date:</span>
              <span>${new Date(jt.payment_date).toLocaleDateString("en-GB")}</span>
            </div>
            <div style="border-top: 1px solid #000; padding-top: 2px; margin-top: 4px;">
              <div style="display: flex; justify-content: space-between; font-weight: bold;">
                <span>TOTAL AMOUNT:</span>
                <span>SSP ${jt.payment_amount.toFixed(2)}</span>
              </div>
            </div>
            ${jt.notes?`
              <div style="margin-top: 4px;">
                <div style="font-weight: bold; font-size: 10px;">Notes:</div>
                <div style="font-size: 9px; word-wrap: break-word;">
                  ${jt.notes}
                </div>
              </div>
            `:""}
          </div>

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Cashier Information -->
          ${jt.cashier_name?`
            <div style="margin-bottom: 12px; font-size: 10px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
                <span style="font-weight: bold;">DISPENSED BY:</span>
                <span style="font-weight: bold;">${jt.cashier_name}</span>
              </div>
            </div>
          `:""}

          <!-- Divider -->
          <div style="border-top: 1px dashed #000; margin: 8px 0;"></div>

          <!-- Footer -->
          <div style="text-align: center; font-size: 10px; margin-top: 12px;">
            <div style="margin-bottom: 4px;">
              Thank you for your payment!
            </div>
            <div style="font-size: 9px; color: #666;">
              Keep this receipt for your records
            </div>
            <div style="font-size: 9px; color: #666; margin-top: 4px;">
              Department: Pharmacy
            </div>
          </div>

          <!-- Bottom spacing for tear-off -->
          <div style="height: 20px;"></div>
        </div>
        
        <script>
          window.onload = function() {
            window.print();
            setTimeout(function() {
              window.close();
            }, 1000);
          };
        <\/script>
      </body>
      </html>
    `;ce.document.write(Ye),ce.document.close()},ei=()=>{lt(!1),Ht(null)},Ps=()=>{if(a.length===0){ye.error("No dispensing data to export");return}try{const ce=a.filter(at=>{if(x.from||x.to){const Ot=new Date(at.dispensed_at);if(x.from){const Sr=new Date(x.from);if(Ot<Sr)return!1}if(x.to){const Sr=new Date(x.to);if(Sr.setHours(23,59,59,999),Ot>Sr)return!1}}return!(y!=="all"&&(at.dispensed_by_name||at.dispensed_by)!==y)});if(ce.length===0){ye.error("No records match the selected filters");return}const Be=ce.reduce((at,Ot)=>{const Sr=Ot.drug_name||Ot.drug_id||"Unknown",on=Ot.unit_of_measure||"units",Vr=`${Sr}_${on}`;return at[Vr]||(at[Vr]={drug_name:Sr,unit_of_measure:on,total_quantity:0,dispensing_count:0,last_dispensed:Ot.dispensed_at}),at[Vr].total_quantity+=parseInt(Ot.quantity_dispensed)||0,at[Vr].dispensing_count+=1,new Date(Ot.dispensed_at)>new Date(at[Vr].last_dispensed)&&(at[Vr].last_dispensed=Ot.dispensed_at),at},{}),He=Object.values(Be),Ye=["Drug Name","Total Quantity Dispensed","Unit","Times Dispensed","Last Dispensed"],tt=He.map(at=>[at.drug_name,at.total_quantity,at.unit_of_measure,at.dispensing_count,at.last_dispensed?new Date(at.last_dispensed).toLocaleDateString("en-US"):"-"]),ct=[Ye.join(","),...tt.map(at=>at.map(Ot=>typeof Ot=="string"&&(Ot.includes(",")||Ot.includes('"'))?`"${Ot.replace(/"/g,'""')}"`:Ot).join(","))].join(`
`),qt=new Blob([ct],{type:"text/csv;charset=utf-8;"}),mt=window.URL.createObjectURL(qt),Pt=document.createElement("a");Pt.href=mt;let At=`dispensing_report_${new Date().toISOString().split("T")[0]}`;(x.from||x.to)&&(At+=`_${x.from||"start"}_to_${x.to||"end"}`),y!=="all"&&(At+=`_${y}`),At+=".csv",Pt.download=At,document.body.appendChild(Pt),Pt.click(),document.body.removeChild(Pt),window.URL.revokeObjectURL(mt),ye.success(`Exported ${ce.length} dispensing records to CSV`)}catch(ce){console.error("Error exporting dispensing report:",ce),ye.error("Failed to export dispensing report")}};p.useEffect(()=>{e!=null&&e.clinic&&Jn()},[e==null?void 0:e.clinic]);const Jn=async()=>{if(e!=null&&e.clinic){w(!0);try{const[ce,Be,He,Ye]=await Promise.all([t.getInventory(e.clinic),t.getDispensingHistory(e.clinic),t.getPatients(e.clinic),t.getPrescriptions(e.clinic)]);s(ce),i(Array.isArray(Be)?Be:[]),d(Array.isArray(Ye)?Ye:[]);const tt=Array.isArray(Be)?[...new Set(Be.map(qt=>qt.dispensed_by_name||qt.dispensed_by).filter(Boolean))]:[];b(tt);const ct=He.map(qt=>{const mt=qt.first_name||"",Pt=qt.last_name||"",$t=mt&&Pt?`${mt} ${Pt}`.trim():mt||Pt||qt.full_name||qt.name||"Unknown Patient";return{id:qt.id,patientId:qt.patient_id,fullName:$t.trim(),firstName:mt,lastName:Pt,age:qt.age||0,phoneNumber:qt.phone||qt.phone_number||"",clinic:e.clinic}});console.log("Transformed patients:",ct),o(ct)}catch(ce){console.error("Error fetching pharmacy data:",ce),ye.error("Failed to load pharmacy data")}finally{w(!1)}}},qs=async ce=>{if(ce.preventDefault(),!!(e!=null&&e.clinic))try{D(!0);const Be={drug_name:pe.drug_name.trim(),generic_name:pe.generic_name.trim()||null,unit_of_measure:pe.unit_of_measure,quantity_received:parseInt(pe.current_stock),current_stock:parseInt(pe.current_stock),expiry_date:pe.expiry_date||new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],batch_number:pe.batch_number,reorder_level:parseInt(pe.reorder_level),clinic_id:parseInt(e.clinic),date_received:pe.date_received,received_by:e.uid||e.id||"system",unit_cost:pe.unit_cost?parseFloat(pe.unit_cost):0,selling_price:pe.selling_price?parseFloat(pe.selling_price):0};console.log("Sending stock data:",Be),M&&J?(await t.updateInventoryItem(J.id,Be),ye.success("Stock updated successfully")):(await t.addInventoryItem(Be),ye.success("Stock added successfully")),O(!1),ee(!1),A(null),ze({drug_name:"",generic_name:"",current_stock:"",unit_of_measure:"Tablets",reorder_level:"",expiry_date:"",batch_number:"",date_received:new Date().toISOString().split("T")[0],unit_cost:"",margin_percentage:"",selling_price:""}),Jn()}catch(Be){console.error("Error saving stock:",Be),ye.error(`Failed to ${M?"update":"add"} stock. Please check all required fields.`)}finally{D(!1)}},an=r.filter(ce=>{if(!ce.drug_name.toLowerCase().includes(k.toLowerCase()))return!1;if(se==="all")return!0;if(se==="expiring"){if(!ce.expiry_date)return!1;const He=new Date(ce.expiry_date),Ye=new Date;Ye.setMonth(Ye.getMonth()+3);const tt=new Date;return tt.setHours(0,0,0,0),He<=Ye||He<tt}return se==="low-stock"?ce.current_stock>0&&ce.current_stock<=ce.reorder_level:se==="out-of-stock"?ce.current_stock===0:!0}),Qt=r.filter(ce=>ce.current_stock<=ce.reorder_level),Qr=r.filter(ce=>{if(!ce.expiry_date)return!1;const Be=new Date(ce.expiry_date),He=new Date;return He.setMonth(He.getMonth()+3),new Date().setHours(0,0,0,0),Be<=He});return j?n.jsx(Xn,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading pharmacy data..."})]})})}):n.jsx(Xn,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Pharmacy Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Complete medication inventory and dispensing system"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Total Items"}),n.jsx(Th,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Active medications in stock"})]})]}),n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Low Stock Alerts"}),n.jsx(_1,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Qt.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Items below reorder level"})]})]}),n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Expiring Soon"}),n.jsx(ZC,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:Qr.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Items expiring within 3 months"})]})]}),n.jsxs(Ur,{children:[n.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Today's Dispensing"}),n.jsx(ya,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Array.isArray(a)?a.filter(ce=>{const Be=new Date(ce.dispensed_at||ce.date||""),He=new Date;return Be.toDateString()===He.toDateString()}).length:0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Medications dispensed today"})]})]})]}),n.jsxs(U2,{defaultValue:"inventory",className:"space-y-4",children:[n.jsxs(jx,{className:"grid w-full grid-cols-5",children:[n.jsxs(Va,{value:"inventory",className:"flex items-center gap-2",children:[n.jsx(Th,{className:"w-4 h-4"}),"Inventory"]}),n.jsxs(Va,{value:"prescriptions",className:"flex items-center gap-2",children:[n.jsx(hn,{className:"w-4 h-4"}),"Prescriptions (",c.length,")"]}),n.jsxs(Va,{value:"dispensing-report",className:"flex items-center gap-2",children:[n.jsx(ya,{className:"w-4 h-4"}),"Dispensing Report"]}),n.jsxs(Va,{value:"inventory-report",className:"flex items-center gap-2",children:[n.jsx(Xd,{className:"w-4 h-4"}),"Inventory Report"]})]}),n.jsx(Ha,{value:"inventory",className:"space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Drug Inventory"})}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(In,{className:"w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:"Search drugs...",value:k,onChange:ce=>R(ce.target.value),className:"max-w-md"})]}),n.jsxs(Y$,{children:[n.jsx(K$,{asChild:!0,children:n.jsxs(_e,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(LI,{className:"w-4 h-4"}),se==="all"&&`All Items (${r.length})`,se==="expiring"&&`Expiring (${Qr.length})`,se==="low-stock"&&`Low Stock (${Qt.filter(ce=>ce.current_stock>0).length})`,se==="out-of-stock"&&`Out of Stock (${r.filter(ce=>ce.current_stock===0).length})`,n.jsx(Dc,{className:"w-4 h-4"})]})}),n.jsxs(e6,{align:"end",className:"w-56",children:[n.jsxs(Yh,{onClick:()=>ve("all"),className:"gap-2",children:[n.jsx(Th,{className:"w-4 h-4"}),n.jsxs("span",{children:["All Items (",r.length,")"]})]}),n.jsxs(Yh,{onClick:()=>ve("expiring"),className:"gap-2",children:[n.jsx(_1,{className:"w-4 h-4"}),n.jsxs("span",{children:["Expiring Soon (",Qr.length,")"]})]}),n.jsxs(Yh,{onClick:()=>ve("low-stock"),className:"gap-2",children:[n.jsx(BI,{className:"w-4 h-4"}),n.jsxs("span",{children:["Low Stock (",Qt.filter(ce=>ce.current_stock>0).length,")"]})]}),n.jsxs(Yh,{onClick:()=>ve("out-of-stock"),className:"gap-2",children:[n.jsx(PI,{className:"w-4 h-4"}),n.jsxs("span",{children:["Out of Stock (",r.filter(ce=>ce.current_stock===0).length,")"]})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(_e,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>ae(!0),children:[n.jsx(iu,{className:"w-4 h-4"}),"Import CSV"]}),n.jsxs(_e,{variant:"outline",size:"sm",className:"gap-2",onClick:Ut,children:[n.jsx(Eo,{className:"w-4 h-4"}),"Export"]}),n.jsxs(_e,{variant:"outline",size:"sm",className:"gap-2",onClick:ft,children:[n.jsx(ya,{className:"w-4 h-4"}),"Dispense Medicine"]}),n.jsxs(_e,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(Th,{className:"w-4 h-4"}),"Accept Return"]}),n.jsxs(_e,{size:"sm",className:"gap-2",onClick:pt,children:[n.jsx(kr,{className:"w-4 h-4"}),"Add Stock"]})]})]}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm",children:an.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:n.jsx(Th,{className:"w-8 h-8 text-muted-foreground"})}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:k?"No drugs found":"No drugs in inventory"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:k?"Try adjusting your search terms or clear the search to see all drugs.":"Get started by adding your first drug to inventory."}),!k&&n.jsxs(_e,{onClick:pt,className:"mt-2",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add First Drug"]})]}):n.jsx("div",{className:"overflow-x-auto max-h-[480px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Drug Name"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Generic Name"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Current Stock"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Unit"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Reorder Level"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Expiry Date"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Batch Number"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Received Date"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Status"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:an.map((ce,Be)=>n.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-semibold text-foreground uppercase",children:ce.drug_name})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:ce.generic_name||"-"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-foreground",children:ce.current_stock})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:ce.unit_of_measure})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:ce.reorder_level})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:ce.expiry_date?new Date(ce.expiry_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:ce.batch_number||"N/A"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:ce.date_received?new Date(ce.date_received).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"})}),n.jsx("td",{className:"py-3 px-4",children:ce.current_stock<=ce.reorder_level?n.jsx(lr,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Low Stock"}):new Date(ce.expiry_date||"")<new Date(Date.now()+90*24*60*60*1e3)?n.jsx(lr,{variant:"destructive",children:"Expiring"}):n.jsx(lr,{variant:"secondary",className:"bg-green-100 text-green-800",children:"In Stock"})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsx(_e,{variant:"ghost",size:"sm",className:"hover:bg-muted/50",onClick:()=>xt(ce),title:"Edit Item",children:n.jsx(ji,{className:"w-4 h-4"})})})]},ce.id))})]})})})]})}),n.jsx(Ha,{value:"prescriptions",className:"space-y-4",children:n.jsxs(Ur,{children:[n.jsxs(en,{children:[n.jsxs(tn,{children:["Prescriptions (",c.length,")"]}),n.jsx($l,{children:"Manage patient prescriptions"})]}),n.jsx(Gr,{children:c.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No prescriptions available"}):(()=>{const ce=c.reduce((He,Ye)=>{const tt=Ye.patient_id;return He[tt]||(He[tt]={patient_id:Ye.patient_id,patient_name:Ye.patient_name,prescribed_by:Ye.prescribed_by,prescribed_at:Ye.prescribed_at,prescriptions:[]}),He[tt].prescriptions.push(Ye),He},{}),Be=Object.values(ce);return n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-3 font-semibold",children:"Patient"}),n.jsx("th",{className:"text-left p-3 font-semibold",children:"Medications"}),n.jsx("th",{className:"text-left p-3 font-semibold",children:"Prescribed By"}),n.jsx("th",{className:"text-left p-3 font-semibold",children:"Date"}),n.jsx("th",{className:"text-left p-3 font-semibold",children:"Status"}),n.jsx("th",{className:"text-left p-3 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:Be.map(He=>{const Ye=He.prescriptions.every(ct=>ct.status==="dispensed"),tt=He.prescriptions.some(ct=>ct.status!=="dispensed");return n.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[n.jsxs("td",{className:"p-3",children:[n.jsx("div",{className:"font-medium",children:He.patient_name}),n.jsx("div",{className:"text-sm text-muted-foreground",children:He.patient_id})]}),n.jsx("td",{className:"p-3",children:n.jsx("div",{className:"space-y-1",children:He.prescriptions.map((ct,qt)=>n.jsx("div",{className:"text-sm",children:n.jsxs("span",{className:"font-medium text-primary",children:[qt>0&&"... ",ct.medication_name]})},ct.id))})}),n.jsx("td",{className:"p-3 text-sm",children:He.prescribed_by}),n.jsx("td",{className:"p-3 text-sm",children:new Date(He.prescribed_at).toLocaleDateString()}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${Ye?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:Ye?"Dispensed":"Active"})}),n.jsx("td",{className:"p-3",children:tt&&n.jsxs(_e,{size:"sm",onClick:()=>{const ct=l.find(qt=>qt.id===He.patient_id);if(ct){const qt=He.prescriptions.filter($t=>$t.status!=="dispensed"),mt=[],Pt=[];for(const $t of qt){const At=r.find(at=>at.drug_name.toLowerCase()===$t.medication_name.toLowerCase());At?(mt.push({inventoryId:At.id,drugName:At.drug_name,quantity:parseInt($t.quantity)||1,unitPrice:parseFloat(At.selling_price)||0,totalPrice:(parseInt($t.quantity)||1)*(parseFloat(At.selling_price)||0),availableStock:At.current_stock}),Pt.push($t.id)):ye.error(`Drug "${$t.medication_name}" not found in inventory`)}mt.length>0&&($(ct),I(!1),m(Pt.join(",")),xe(mt),F(!0))}else ye.error("Patient not found")},className:"bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(ya,{className:"w-4 h-4 mr-1"}),"Dispense All"]})})]},He.patient_id)})})]})})})()})]})}),n.jsx(Ha,{value:"dispensing-report",className:"space-y-4",children:n.jsxs(Ur,{children:[n.jsxs(en,{children:[n.jsx(tn,{children:"Dispensing Report"}),n.jsx($l,{children:"Track medication dispensing activities"})]}),n.jsxs(Gr,{children:[n.jsxs("div",{className:"mb-4 flex flex-wrap gap-4 items-end",children:[n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx(Ce,{className:"text-sm font-medium mb-2",children:"From Date"}),n.jsx(Oe,{type:"date",value:x.from,onChange:ce=>f({...x,from:ce.target.value}),className:"w-full"})]}),n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx(Ce,{className:"text-sm font-medium mb-2",children:"To Date"}),n.jsx(Oe,{type:"date",value:x.to,onChange:ce=>f({...x,to:ce.target.value}),className:"w-full"})]}),n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx(Ce,{className:"text-sm font-medium mb-2",children:"Dispensed By"}),n.jsxs("select",{value:y,onChange:ce=>v(ce.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Users"}),S.map(ce=>n.jsx("option",{value:ce,children:ce},ce))]})]}),n.jsx(_e,{onClick:()=>{f({from:"",to:""}),v("all")},variant:"outline",className:"gap-2",children:"Clear Filters"}),n.jsxs(_e,{onClick:Ps,className:"gap-2",children:[n.jsx(Eo,{className:"w-4 h-4"}),"Export CSV"]})]}),(()=>{const Be=a.filter(Ye=>{if(x.from||x.to){const tt=new Date(Ye.dispensed_at);if(x.from){const ct=new Date(x.from);if(tt<ct)return!1}if(x.to){const ct=new Date(x.to);if(ct.setHours(23,59,59,999),tt>ct)return!1}}return!(y!=="all"&&(Ye.dispensed_by_name||Ye.dispensed_by)!==y)}).reduce((Ye,tt)=>{const ct=tt.drug_name||tt.drug_id||"Unknown",qt=tt.unit_of_measure||"units",mt=`${ct}_${qt}`;return Ye[mt]||(Ye[mt]={drug_name:ct,unit_of_measure:qt,total_quantity:0,dispensing_count:0,last_dispensed:tt.dispensed_at}),Ye[mt].total_quantity+=parseInt(tt.quantity_dispensed)||0,Ye[mt].dispensing_count+=1,new Date(tt.dispensed_at)>new Date(Ye[mt].last_dispensed)&&(Ye[mt].last_dispensed=tt.dispensed_at),Ye},{}),He=Object.values(Be);return He.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No dispensing records found"}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-muted/50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 font-medium",children:"Drug Name"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Total Quantity Dispensed"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Unit"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Times Dispensed"}),n.jsx("th",{className:"text-left p-3 font-medium",children:"Last Dispensed"})]})}),n.jsx("tbody",{className:"divide-y",children:He.map((Ye,tt)=>n.jsxs("tr",{className:"hover:bg-muted/20",children:[n.jsx("td",{className:"p-3 font-medium uppercase",children:Ye.drug_name}),n.jsx("td",{className:"p-3 text-lg font-bold text-primary",children:Ye.total_quantity}),n.jsx("td",{className:"p-3",children:Ye.unit_of_measure}),n.jsx("td",{className:"p-3",children:Ye.dispensing_count}),n.jsx("td",{className:"p-3",children:Ye.last_dispensed?new Date(Ye.last_dispensed).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"})]},tt))})]})})})()]})]})}),n.jsxs(Ha,{value:"inventory-report",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(Ur,{children:[n.jsx(en,{className:"pb-2",children:n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Total Items"})}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r.length}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Unique drugs"})]})]}),n.jsxs(Ur,{children:[n.jsx(en,{className:"pb-2",children:n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Stock Value"})}),n.jsxs(Gr,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["SSP ",r.reduce((ce,Be)=>ce+Be.current_stock*parseFloat(Be.selling_price||"0"),0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total value"})]})]}),n.jsxs(Ur,{children:[n.jsx(en,{className:"pb-2",children:n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Low Stock"})}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.filter(ce=>ce.current_stock<=ce.reorder_level).length}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Need reorder"})]})]}),n.jsxs(Ur,{children:[n.jsx(en,{className:"pb-2",children:n.jsx(tn,{className:"text-sm font-medium text-muted-foreground",children:"Out of Stock"})}),n.jsxs(Gr,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.filter(ce=>ce.current_stock===0).length}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Unavailable"})]})]})]}),n.jsxs(Ur,{children:[n.jsx(en,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(tn,{children:"Complete Inventory Report"}),n.jsx($l,{children:"All inventory items with stock levels and values"})]}),n.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>{const Be=[["Drug Name","Generic Name","Current Stock","Unit","Reorder Level","Unit Cost (Purchase)","Selling Price","Stock Value","Batch Number","Expiry Date","Status"].join(",")];r.forEach(mt=>{const Pt=mt.current_stock*parseFloat(mt.selling_price||"0"),$t=mt.current_stock<=mt.reorder_level,at=mt.current_stock===0?"Out of Stock":$t?"Low Stock":"In Stock",Ot=[`"${mt.drug_name}"`,`"${mt.generic_name||"-"}"`,mt.current_stock,mt.unit_of_measure,mt.reorder_level,parseFloat(mt.unit_cost||"0").toFixed(2),parseFloat(mt.selling_price||"0").toFixed(2),Pt.toFixed(2),`"${mt.batch_number||"-"}"`,mt.expiry_date?new Date(mt.expiry_date).toLocaleDateString():"-",at];Be.push(Ot.join(","))});const He=Be.join(`
`),Ye=new Blob([He],{type:"text/csv"}),tt=window.URL.createObjectURL(Ye),ct=document.createElement("a");ct.href=tt;const qt=new Date().toISOString().split("T")[0];ct.download=`inventory_report_${qt}.csv`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),window.URL.revokeObjectURL(tt),ye.success("Inventory report exported successfully")},className:"gap-2",children:[n.jsx(Eo,{className:"w-4 h-4"}),"Export CSV"]})]})}),n.jsx(Gr,{children:r.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inventory items"}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b bg-muted/50",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Drug Name"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Generic"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Stock"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Unit"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Reorder"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Unit Cost"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Selling"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Value"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Batch"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Expiry"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Status"})]})}),n.jsx("tbody",{children:r.map(ce=>{const Be=ce.current_stock*parseFloat(ce.selling_price||"0"),He=ce.current_stock<=ce.reorder_level,Ye=ce.current_stock===0;return n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-medium",children:ce.drug_name}),n.jsx("td",{className:"p-2 text-muted-foreground",children:ce.generic_name||"-"}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`font-semibold ${Ye?"text-red-600":He?"text-orange-600":"text-green-600"}`,children:ce.current_stock})}),n.jsx("td",{className:"p-2",children:ce.unit_of_measure}),n.jsx("td",{className:"p-2",children:ce.reorder_level}),n.jsxs("td",{className:"p-2",children:["SSP ",parseFloat(ce.unit_cost||"0").toFixed(2)]}),n.jsxs("td",{className:"p-2",children:["SSP ",parseFloat(ce.selling_price||"0").toFixed(2)]}),n.jsxs("td",{className:"p-2 font-semibold",children:["SSP ",Be.toFixed(2)]}),n.jsx("td",{className:"p-2 text-xs",children:ce.batch_number||"-"}),n.jsx("td",{className:"p-2 text-xs",children:ce.expiry_date?new Date(ce.expiry_date).toLocaleDateString():"-"}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${Ye?"bg-red-100 text-red-800":He?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:Ye?"Out":He?"Low":"In Stock"})})]},ce.id)})})]})})})]})]})]}),n.jsx(wr,{open:W,onOpenChange:O,children:n.jsxs(xr,{className:"sm:max-w-2xl",children:[n.jsx(Nr,{children:n.jsx(vr,{className:"flex items-center gap-2",children:M?n.jsxs(n.Fragment,{children:[n.jsx(ji,{className:"w-5 h-5 text-primary"}),"Edit Stock Item"]}):n.jsxs(n.Fragment,{children:[n.jsx(kr,{className:"w-5 h-5 text-primary"}),"Add New Stock"]})})}),n.jsxs("form",{onSubmit:qs,className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Drug Name *"}),n.jsx(Oe,{value:pe.drug_name,onChange:ce=>ze({...pe,drug_name:ce.target.value}),placeholder:"Enter drug name",className:"h-9",required:!0})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Generic Name"}),n.jsx(Oe,{value:pe.generic_name,onChange:ce=>ze({...pe,generic_name:ce.target.value}),placeholder:"Enter generic name",className:"h-9"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Current Stock *"}),n.jsx(Oe,{type:"number",value:pe.current_stock,onChange:ce=>ze({...pe,current_stock:ce.target.value}),placeholder:"Enter current stock",className:"h-9",required:!0})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Unit of Measure"}),n.jsxs("select",{value:pe.unit_of_measure,onChange:ce=>ze({...pe,unit_of_measure:ce.target.value}),className:"w-full h-9 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",children:[n.jsx("option",{value:"Tablets",children:"Tablets"}),n.jsx("option",{value:"Capsules",children:"Capsules"}),n.jsx("option",{value:"Strips",children:"Strips"}),n.jsx("option",{value:"Sachets",children:"Sachets"}),n.jsx("option",{value:"Bottles",children:"Bottles"}),n.jsx("option",{value:"Vials",children:"Vials"}),n.jsx("option",{value:"Ampoules",children:"Ampoules"}),n.jsx("option",{value:"Tubes",children:"Tubes"}),n.jsx("option",{value:"Boxes",children:"Boxes"}),n.jsx("option",{value:"Packs",children:"Packs"}),n.jsx("option",{value:"Rolls",children:"Rolls"}),n.jsx("option",{value:"Pieces",children:"Pieces"}),n.jsx("option",{value:"Units",children:"Units"}),n.jsx("option",{value:"Drops",children:"Drops"}),n.jsx("option",{value:"Sprays",children:"Sprays"}),n.jsx("option",{value:"Patches",children:"Patches"}),n.jsx("option",{value:"Injections",children:"Injections"}),n.jsx("option",{value:"Syringes",children:"Syringes"}),n.jsx("option",{value:"ml",children:"ml (milliliters)"}),n.jsx("option",{value:"L",children:"L (liters)"}),n.jsx("option",{value:"mg",children:"mg (milligrams)"}),n.jsx("option",{value:"g",children:"g (grams)"}),n.jsx("option",{value:"kg",children:"kg (kilograms)"}),n.jsx("option",{value:"mcg",children:"mcg (micrograms)"}),n.jsx("option",{value:"IU",children:"IU (International Units)"}),n.jsx("option",{value:"mEq",children:"mEq (milliequivalents)"})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Reorder Level *"}),n.jsx(Oe,{type:"number",value:pe.reorder_level,onChange:ce=>ze({...pe,reorder_level:ce.target.value}),placeholder:"Minimum stock level",className:"h-9",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Expiry Date"}),n.jsx(Oe,{type:"date",value:pe.expiry_date,onChange:ce=>ze({...pe,expiry_date:ce.target.value}),className:"h-9"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Batch Number"}),n.jsx(Oe,{value:pe.batch_number||"",onChange:ce=>ze({...pe,batch_number:ce.target.value}),placeholder:"Auto-generated",readOnly:!0,className:"bg-muted/50 h-9"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Received Date"}),n.jsx(Oe,{type:"date",value:pe.date_received||new Date().toISOString().split("T")[0],onChange:ce=>ze({...pe,date_received:ce.target.value}),className:"h-9"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Unit Cost ($) *"}),n.jsx(Oe,{type:"number",step:"0.01",value:pe.unit_cost,onChange:ce=>{const Be=ce.target.value,He=qe(Be,pe.margin_percentage);ze({...pe,unit_cost:Be,selling_price:He})},placeholder:"0.00",className:"h-9",required:!0})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Margin %"}),n.jsx(Oe,{type:"number",step:"0.1",min:"0",value:pe.margin_percentage,onChange:ce=>{const Be=ce.target.value,He=qe(pe.unit_cost,Be);ze({...pe,margin_percentage:Be,selling_price:He})},placeholder:"e.g., 25",className:"h-9"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Selling Price ($) *"}),n.jsx(Oe,{type:"number",step:"0.01",value:pe.selling_price,onChange:ce=>{const Be=ce.target.value,He=Ve(pe.unit_cost,Be);ze({...pe,selling_price:Be,margin_percentage:He})},placeholder:"Auto-calculated",className:"h-9",required:!0})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>O(!1),className:"flex-1",disabled:q,children:"Cancel"}),n.jsx(_e,{type:"submit",className:"flex-1",disabled:q,children:q?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),M?"Updating...":"Adding..."]}):n.jsx(n.Fragment,{children:M?n.jsxs(n.Fragment,{children:[n.jsx(ji,{className:"w-4 h-4 mr-2"}),"Update Stock"]}):n.jsxs(n.Fragment,{children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add Stock"]})})})]})]})]})}),n.jsx(wr,{open:E,onOpenChange:ae,children:n.jsxs(xr,{className:"sm:max-w-4xl",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(iu,{className:"w-5 h-5 text-primary"}),"Import Inventory from CSV"]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-foreground",children:"Need a template?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Download our CSV template to get started"})]}),n.jsxs(_e,{variant:"outline",onClick:Wt,className:"gap-2",children:[n.jsx(Eo,{className:"w-4 h-4"}),"Download Template"]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Select CSV File"}),n.jsx("div",{className:"mt-2",children:n.jsx("input",{type:"file",accept:".csv",onChange:wt,className:"block w-full text-sm text-muted-foreground file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"})}),Y&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Selected: ",Y.name]})]}),re.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ce,{className:"text-sm font-medium",children:["Preview (",re.length," rows)"]}),n.jsx("div",{className:"border rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto max-h-64",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 font-medium",children:"Drug Name"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Generic Name"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Stock"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Unit"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Reorder Level"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Unit Cost"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Selling Price"})]})}),n.jsx("tbody",{className:"divide-y",children:re.map((ce,Be)=>n.jsxs("tr",{className:"hover:bg-muted/20",children:[n.jsx("td",{className:"p-2 uppercase",children:ce.drug_name||"-"}),n.jsx("td",{className:"p-2",children:ce.generic_name||"-"}),n.jsx("td",{className:"p-2",children:ce.current_stock||"-"}),n.jsx("td",{className:"p-2",children:ce.unit_of_measure||"-"}),n.jsx("td",{className:"p-2",children:ce.reorder_level||"-"}),n.jsx("td",{className:"p-2",children:ce.unit_cost||"-"}),n.jsx("td",{className:"p-2",children:ce.selling_price||"-"})]},Be))})]})})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>{ae(!1),de(null),he([])},className:"flex-1",disabled:T,children:"Cancel"}),n.jsx(_e,{onClick:Ft,className:"flex-1",disabled:!Y||T,children:T?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(iu,{className:"w-4 h-4 mr-2"}),"Import ",re.length>0?`${re.length}`:""," Items"]})})]})]})]})}),n.jsx(wr,{open:C,onOpenChange:ce=>{F(ce),ce||m(null)},children:n.jsxs(xr,{className:"sm:max-w-6xl",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(ya,{className:"w-5 h-5 text-primary"}),"Dispense Medicine"]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium text-foreground",children:"Patient Selection"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",checked:!K,onChange:()=>I(!1),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Existing Patient"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",checked:K,onChange:()=>I(!0),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Walk-in Client"})]})]}),K?n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Client Name"}),n.jsx(Oe,{value:X,onChange:ce=>ne(ce.target.value),placeholder:"Enter client name",className:"h-9"})]}):n.jsxs("div",{className:"relative",children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Select Patient"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{value:ut,onChange:ce=>{Mt(ce.target.value),st(!0),ce.target.value||$(null)},onFocus:()=>st(!0),placeholder:l.length===0?"No patients found...":"Search patients...",className:"h-9",disabled:l.length===0}),n.jsx(In,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Gt&&rr.length>0&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:rr.map(ce=>n.jsxs("div",{onClick:()=>$r(ce),className:"px-3 py-2 hover:bg-muted cursor-pointer border-b border-border last:border-b-0",children:[n.jsx("div",{className:"font-medium text-sm",children:ce.fullName||"Unnamed Patient"}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",ce.patientId||"No ID","  Phone: ",ce.phoneNumber||"No phone"]})]},ce.id))}),Gt&&ut&&rr.length===0&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-lg shadow-lg p-3",children:n.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:['No patients found matching "',ut,'"']})})]}),L&&n.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm",children:[n.jsxs("div",{className:"font-medium text-green-800",children:["Selected: ",L.fullName]}),n.jsxs("div",{className:"text-green-600 text-xs",children:["ID: ",L.patientId,"  Phone: ",L.phoneNumber]})]}),l.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"No patients found. Please register patients first."})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsx("h3",{className:"font-medium text-foreground",children:"Available Medicines"}),n.jsxs("div",{className:"flex items-center space-x-2 w-64",children:[n.jsx(In,{className:"w-4 h-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:"Search medicines...",value:Pe,onChange:ce=>Fe(ce.target.value),className:"h-8 text-sm"})]})]}),n.jsx("div",{className:"border rounded-lg max-h-64 min-h-64 overflow-y-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-muted/50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 font-medium",children:"Drug Name"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Stock"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Price"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y",children:an.filter(ce=>ce.current_stock>0).filter(ce=>Pe===""||ce.drug_name.toLowerCase().includes(Pe.toLowerCase())||ce.generic_name&&ce.generic_name.toLowerCase().includes(Pe.toLowerCase())).map(ce=>n.jsxs("tr",{className:"hover:bg-muted/20",children:[n.jsx("td",{className:"p-2 font-medium",children:ce.drug_name}),n.jsx("td",{className:"p-2",children:ce.current_stock}),n.jsx("td",{className:"p-2",children:ce.unit_of_measure||"-"}),n.jsx("td",{className:"p-2",children:n.jsx(_e,{size:"sm",variant:"outline",onClick:()=>Mr(ce),disabled:ue.some(Be=>Be.inventoryId===ce.id),className:"h-7 px-2 text-xs",children:ue.some(Be=>Be.inventoryId===ce.id)?"Added":"Add"})})]},ce.id))})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"font-medium text-foreground",children:"Items to Dispense"}),ue.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(ya,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No items selected for dispensing"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"border rounded-lg",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 font-medium",children:"Drug"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Qty"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Price"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Total"}),n.jsx("th",{className:"text-left p-2 font-medium",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y",children:ue.map(ce=>n.jsxs("tr",{children:[n.jsx("td",{className:"p-2 font-medium uppercase",children:ce.drugName}),n.jsx("td",{className:"p-2",children:n.jsx(Oe,{type:"number",min:"1",max:ce.availableStock,value:ce.quantity,onChange:Be=>Kr(ce.inventoryId,parseInt(Be.target.value)||1),className:"h-7 w-16 text-xs"})}),n.jsxs("td",{className:"p-2",children:["SSP ",ce.unitPrice.toFixed(2)]}),n.jsxs("td",{className:"p-2 font-medium",children:["SSP ",ce.totalPrice.toFixed(2)]}),n.jsx("td",{className:"p-2",children:n.jsx(_e,{size:"sm",variant:"ghost",onClick:()=>zr(ce.inventoryId),className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Nn,{className:"w-4 h-4"})})})]},ce.inventoryId))})]})}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Total Amount:"}),n.jsxs("span",{className:"text-lg font-bold",children:["SSP ",ue.reduce((ce,Be)=>ce+Be.totalPrice,0).toFixed(2)]})]})})]}),We&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Payment Processing"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Payment Method"}),n.jsxs("select",{value:Ge,onChange:ce=>Lt(ce.target.value),className:"w-full h-9 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent",children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"transfer",children:"Bank Transfer"}),n.jsx("option",{value:"mobile",children:"Mobile Money"})]})]}),n.jsxs("div",{children:[n.jsx(Ce,{className:"text-sm font-medium",children:"Amount Received ($)"}),n.jsx(Oe,{type:"number",step:"0.01",value:Me,onChange:ce=>Ee(ce.target.value),className:"h-9",placeholder:"0.00"})]})]}),!it&&n.jsx(_e,{onClick:_n,className:"mt-3 w-full",disabled:!Me||parseFloat(Me)<=0,children:"Confirm Payment Received"}),it&&n.jsx("div",{className:"mt-3 p-2 bg-green-100 text-green-800 rounded text-sm text-center",children:" Payment confirmed - Ready to dispense"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>{F(!1),$(null),I(!1),ne(""),m(null),xe([]),Z(!1),et(!1),Mt(""),st(!1)},className:"flex-1",disabled:ke,children:"Cancel"}),We?n.jsx(_e,{onClick:qr,className:"flex-1",disabled:ke||!it,children:ke?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),"Dispensing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ya,{className:"w-4 h-4 mr-2"}),"Dispense Medicine"]})}):n.jsxs(_e,{onClick:sn,className:"flex-1",disabled:ue.length===0,children:[n.jsx(ya,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]})]})]})]})]})}),n.jsx(wr,{open:dt,onOpenChange:ce=>{console.log("Receipt modal open state changed:",ce),lt(ce)},children:n.jsxs(xr,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(Nr,{className:"flex-shrink-0",children:[n.jsx(vr,{children:"Pharmacy Receipt"}),n.jsx(_s,{children:"Payment processed successfully"})]}),jt&&n.jsxs("div",{className:"flex flex-col space-y-4 flex-1 min-h-0",children:[n.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg p-4 bg-muted/20",children:n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"text-center border-b pb-3",children:[n.jsx("h3",{className:"font-bold text-lg",children:"UNIVERSAL HOSPITAL"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pharmacy Department"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Receipt #",jt.receipt_number]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Patient:"}),n.jsx("span",{className:"font-medium",children:jt.patient_name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Patient ID:"}),n.jsx("span",{children:jt.patient_id})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Bill Number:"}),n.jsx("span",{children:jt.bill_number})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"}),n.jsx("span",{children:new Date(jt.payment_date).toLocaleDateString()})]})]}),n.jsxs("div",{className:"border-t pt-3",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Medications Dispensed:"}),n.jsx("div",{className:"space-y-2",children:(Vs=jt.dispensingItems)==null?void 0:Vs.map((ce,Be)=>n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium uppercase",children:ce.drugName}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[ce.quantity,"  SSP ",ce.unitPrice.toFixed(2)]})]}),n.jsxs("div",{className:"font-medium",children:["SSP ",ce.totalPrice.toFixed(2)]})]},Be))})]}),n.jsxs("div",{className:"border-t pt-3 space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Payment Method:"}),n.jsx("span",{className:"capitalize",children:jt.payment_method})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total Amount:"}),n.jsxs("span",{children:["SSP ",jt.payment_amount.toFixed(2)]})]})]}),n.jsxs("div",{className:"border-t pt-3 text-center text-xs text-muted-foreground",children:[n.jsxs("p",{children:["Dispensed by: ",jt.cashier_name]}),n.jsx("p",{children:"Thank you for your payment!"})]})]})}),n.jsxs("div",{className:"flex justify-between gap-3 flex-shrink-0",children:[n.jsx(_e,{variant:"outline",onClick:ei,className:"flex-1",children:"Close"}),n.jsxs(_e,{onClick:Ir,className:"flex-1 gap-2",children:[n.jsx(p2,{className:"w-4 h-4"}),"Print Receipt"]})]})]})]})})]})})},sz="modulepreload",az=function(e){return"/"+e},y5={},Wv=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=az(c),c in y5)return;y5[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":sz,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((x,f)=>{m.addEventListener("load",x),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function Dr(e){"@babel/helpers - typeof";return Dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(e)}var ki=Uint8Array,Na=Uint16Array,J2=Int32Array,Z2=new ki([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eb=new ki([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),b5=new ki([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t6=function(e,t){for(var r=new Na(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var a=new J2(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)a[i]=i-r[s]<<5|s;return{b:r,r:a}},r6=t6(Z2,2),iz=r6.b,H1=r6.r;iz[28]=258,H1[258]=28;var oz=t6(eb,0),w5=oz.r,W1=new Na(32768);for(var rn=0;rn<32768;++rn){var ul=(rn&43690)>>1|(rn&21845)<<1;ul=(ul&52428)>>2|(ul&13107)<<2,ul=(ul&61680)>>4|(ul&3855)<<4,W1[rn]=((ul&65280)>>8|(ul&255)<<8)>>1}var cf=function(e,t,r){for(var s=e.length,a=0,i=new Na(t);a<s;++a)e[a]&&++i[e[a]-1];var l=new Na(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var o;if(r){o=new Na(1<<t);var c=15-t;for(a=0;a<s;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],m=l[e[a]-1]++<<u,x=m|(1<<u)-1;m<=x;++m)o[W1[m]>>c]=d}else for(o=new Na(s),a=0;a<s;++a)e[a]&&(o[a]=W1[l[e[a]-1]++]>>15-e[a]);return o},nd=new ki(288);for(var rn=0;rn<144;++rn)nd[rn]=8;for(var rn=144;rn<256;++rn)nd[rn]=9;for(var rn=256;rn<280;++rn)nd[rn]=7;for(var rn=280;rn<288;++rn)nd[rn]=8;var kg=new ki(32);for(var rn=0;rn<32;++rn)kg[rn]=5;var lz=cf(nd,9,0),cz=cf(kg,5,0),n6=function(e){return(e+7)/8|0},dz=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ki(e.subarray(t,r))},yo=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},Fh=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},Gv=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var a=r.length,i=r.slice();if(!a)return{t:a6,l:0};if(a==1){var l=new ki(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(R,W){return R.f-W.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],d=0,u=1,m=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=a-1;)o=r[r[d].f<r[m].f?d++:m++],c=r[d!=u&&r[d].f<r[m].f?d++:m++],r[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var x=i[0].s,s=1;s<a;++s)i[s].s>x&&(x=i[s].s);var f=new Na(x+1),y=G1(r[u-1],f,0);if(y>t){var s=0,v=0,S=y-t,b=1<<S;for(i.sort(function(W,O){return f[O.s]-f[W.s]||W.f-O.f});s<a;++s){var j=i[s].s;if(f[j]>t)v+=b-(1<<y-f[j]),f[j]=t;else break}for(v>>=S;v>0;){var w=i[s].s;f[w]<t?v-=1<<t-f[w]++-1:++s}for(;s>=0&&v;--s){var k=i[s].s;f[k]==t&&(--f[k],++v)}y=t}return{t:new ki(f),l:y}},G1=function(e,t,r){return e.s==-1?Math.max(G1(e.l,t,r+1),G1(e.r,t,r+1)):t[e.s]=r},N5=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Na(++t),s=0,a=e[0],i=1,l=function(c){r[s++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[o]}return{c:r.subarray(0,s),n:t}},Oh=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},s6=function(e,t,r){var s=r.length,a=n6(t+2);e[a]=s&255,e[a+1]=s>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<s;++i)e[a+i+4]=r[i];return(a+4+s)*8},j5=function(e,t,r,s,a,i,l,o,c,d,u){yo(t,u++,r),++a[256];for(var m=Gv(a,15),x=m.t,f=m.l,y=Gv(i,15),v=y.t,S=y.l,b=N5(x),j=b.c,w=b.n,k=N5(v),R=k.c,W=k.n,O=new Na(19),q=0;q<j.length;++q)++O[j[q]&31];for(var q=0;q<R.length;++q)++O[R[q]&31];for(var D=Gv(O,7),J=D.t,A=D.l,M=19;M>4&&!J[b5[M-1]];--M);var ee=d+5<<3,E=Oh(a,nd)+Oh(i,kg)+l,ae=Oh(a,x)+Oh(i,v)+l+14+3*M+Oh(O,J)+2*O[16]+3*O[17]+7*O[18];if(c>=0&&ee<=E&&ee<=ae)return s6(t,u,e.subarray(c,c+d));var Y,de,T,V;if(yo(t,u,1+(ae<E)),u+=2,ae<E){Y=cf(x,f,0),de=x,T=cf(v,S,0),V=v;var re=cf(J,A,0);yo(t,u,w-257),yo(t,u+5,W-1),yo(t,u+10,M-4),u+=14;for(var q=0;q<M;++q)yo(t,u+3*q,J[b5[q]]);u+=3*M;for(var he=[j,R],C=0;C<2;++C)for(var F=he[C],q=0;q<F.length;++q){var L=F[q]&31;yo(t,u,re[L]),u+=J[L],L>15&&(yo(t,u,F[q]>>5&127),u+=F[q]>>12)}}else Y=lz,de=nd,T=cz,V=kg;for(var q=0;q<o;++q){var $=s[q];if($>255){var L=$>>18&31;Fh(t,u,Y[L+257]),u+=de[L+257],L>7&&(yo(t,u,$>>23&31),u+=Z2[L]);var K=$&31;Fh(t,u,T[K]),u+=V[K],K>3&&(Fh(t,u,$>>5&8191),u+=eb[K])}else Fh(t,u,Y[$]),u+=de[$]}return Fh(t,u,Y[256]),u+de[256]},uz=new J2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),a6=new ki(0),hz=function(e,t,r,s,a,i){var l=i.z||e.length,o=new ki(s+l+5*(1+Math.ceil(l/7e3))+a),c=o.subarray(s,o.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var m=uz[t-1],x=m>>13,f=m&8191,y=(1<<r)-1,v=i.p||new Na(32768),S=i.h||new Na(y+1),b=Math.ceil(r/3),j=2*b,w=function(We){return(e[We]^e[We+1]<<b^e[We+2]<<j)&y},k=new J2(25e3),R=new Na(288),W=new Na(32),O=0,q=0,D=i.i||0,J=0,A=i.w||0,M=0;D+2<l;++D){var ee=w(D),E=D&32767,ae=S[ee];if(v[E]=ae,S[ee]=E,A<=D){var Y=l-D;if((O>7e3||J>24576)&&(Y>423||!d)){u=j5(e,c,0,k,R,W,q,J,M,D-M,u),J=O=q=0,M=D;for(var de=0;de<286;++de)R[de]=0;for(var de=0;de<30;++de)W[de]=0}var T=2,V=0,re=f,he=E-ae&32767;if(Y>2&&ee==w(D-he))for(var C=Math.min(x,Y)-1,F=Math.min(32767,D),L=Math.min(258,Y);he<=F&&--re&&E!=ae;){if(e[D+T]==e[D+T-he]){for(var $=0;$<L&&e[D+$]==e[D+$-he];++$);if($>T){if(T=$,V=he,$>C)break;for(var K=Math.min(he,$-2),I=0,de=0;de<K;++de){var X=D-he+de&32767,ne=v[X],ue=X-ne&32767;ue>I&&(I=ue,ae=X)}}}E=ae,ae=v[E],he+=E-ae&32767}if(V){k[J++]=268435456|H1[T]<<18|w5[V];var xe=H1[T]&31,ke=w5[V]&31;q+=Z2[xe]+eb[ke],++R[257+xe],++W[ke],A=D+T,++O}else k[J++]=e[D],++R[e[D]]}}for(D=Math.max(D,A);D<l;++D)k[J++]=e[D],++R[e[D]];u=j5(e,c,d,k,R,W,q,J,M,D-M,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=S,i.p=v,i.i=D,i.w=A)}else{for(var D=i.w||0;D<l+d;D+=65535){var Re=D+65535;Re>=l&&(c[u/8|0]=d,Re=l),u=s6(c,u+1,e.subarray(D,Re))}i.i=l}return dz(o,0,s+n6(u)+a)},i6=function(){var e=1,t=0;return{p:function(r){for(var s=e,a=t,i=r.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)a+=s+=r[l];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}e=s,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},fz=function(e,t,r,s,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new ki(i.length+e.length);l.set(i),l.set(e,i.length),e=l,a.w=i.length}return hz(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,s,a)},o6=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},mz=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=i6();a.p(t.dictionary),o6(e,2,a.d())}};function Y1(e,t){t||(t={});var r=i6();r.p(e);var s=fz(e,t,t.dictionary?6:2,4);return mz(s,t),o6(s,s.length-4,r.d()),s}var pz=typeof TextDecoder<"u"&&new TextDecoder,gz=0;try{pz.decode(a6,{stream:!0}),gz=1}catch{}function xz(e){if(Array.isArray(e))return e}function vz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function S5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function yz(e,t){if(e){if(typeof e=="string")return S5(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S5(e,t):void 0}}function bz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _5(e,t){return xz(e)||vz(e,t)||yz(e,t)||bz()}function C5(e,t="utf8"){return new TextDecoder(t).decode(e)}const wz=new TextEncoder;function Nz(e){return wz.encode(e)}const jz=1024*8,Sz=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Yv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class tb{constructor(t=jz,r={}){ar(this,"buffer");ar(this,"byteLength");ar(this,"byteOffset");ar(this,"length");ar(this,"offset");ar(this,"lastWrittenByte");ar(this,"littleEndian");ar(this,"_data");ar(this,"_mark");ar(this,"_marks");let s=!1;typeof t=="number"?t=new ArrayBuffer(t):(s=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let l=a;(ArrayBuffer.isView(t)||t instanceof tb)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+a),t=t.buffer),s?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const s=(this.offset+t)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const s=Yv[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+s);if(this.littleEndian===Sz&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+s));o.reverse();const c=new Yv[r](o.buffer);return this.offset+=s,c.reverse(),c}const l=new Yv[r](i);return this.offset+=s,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let s=0;s<t;s++)r+=this.readChar();return r}readUtf8(t=1){return C5(this.readBytes(t))}decodeText(t=1,r="utf8"){return C5(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Nz(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const _z=4,k5=0,P5=1,Cz=2;function Qu(e){let t=e.length;for(;--t>=0;)e[t]=0}const kz=0,l6=1,Pz=2,Az=3,Ez=258,rb=29,cm=256,Bf=cm+1+rb,du=30,nb=19,c6=2*Bf+1,Rc=15,Kv=16,Lz=7,sb=256,d6=16,u6=17,h6=18,K1=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Mp=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Tz=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),f6=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dz=512,_o=new Array((Bf+2)*2);Qu(_o);const df=new Array(du*2);Qu(df);const Uf=new Array(Dz);Qu(Uf);const $f=new Array(Ez-Az+1);Qu($f);const ab=new Array(rb);Qu(ab);const Pg=new Array(du);Qu(Pg);function Qv(e,t,r,s,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=s,this.max_length=a,this.has_stree=e&&e.length}let m6,p6,g6;function Xv(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const x6=e=>e<256?Uf[e]:Uf[256+(e>>>7)],zf=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Js=(e,t,r)=>{e.bi_valid>Kv-r?(e.bi_buf|=t<<e.bi_valid&65535,zf(e,e.bi_buf),e.bi_buf=t>>Kv-e.bi_valid,e.bi_valid+=r-Kv):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Wi=(e,t,r)=>{Js(e,r[t*2],r[t*2+1])},v6=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},Rz=e=>{e.bi_valid===16?(zf(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Iz=(e,t)=>{const r=t.dyn_tree,s=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,u,m,x,f,y,v=0;for(x=0;x<=Rc;x++)e.bl_count[x]=0;for(r[e.heap[e.heap_max]*2+1]=0,d=e.heap_max+1;d<c6;d++)u=e.heap[d],x=r[r[u*2+1]*2+1]+1,x>c&&(x=c,v++),r[u*2+1]=x,!(u>s)&&(e.bl_count[x]++,f=0,u>=o&&(f=l[u-o]),y=r[u*2],e.opt_len+=y*(x+f),i&&(e.static_len+=y*(a[u*2+1]+f)));if(v!==0){do{for(x=c-1;e.bl_count[x]===0;)x--;e.bl_count[x]--,e.bl_count[x+1]+=2,e.bl_count[c]--,v-=2}while(v>0);for(x=c;x!==0;x--)for(u=e.bl_count[x];u!==0;)m=e.heap[--d],!(m>s)&&(r[m*2+1]!==x&&(e.opt_len+=(x-r[m*2+1])*r[m*2],r[m*2+1]=x),u--)}},y6=(e,t,r)=>{const s=new Array(Rc+1);let a=0,i,l;for(i=1;i<=Rc;i++)a=a+r[i-1]<<1,s[i]=a;for(l=0;l<=t;l++){let o=e[l*2+1];o!==0&&(e[l*2]=v6(s[o]++,o))}},Mz=()=>{let e,t,r,s,a;const i=new Array(Rc+1);for(r=0,s=0;s<rb-1;s++)for(ab[s]=r,e=0;e<1<<K1[s];e++)$f[r++]=s;for($f[r-1]=s,a=0,s=0;s<16;s++)for(Pg[s]=a,e=0;e<1<<Mp[s];e++)Uf[a++]=s;for(a>>=7;s<du;s++)for(Pg[s]=a<<7,e=0;e<1<<Mp[s]-7;e++)Uf[256+a++]=s;for(t=0;t<=Rc;t++)i[t]=0;for(e=0;e<=143;)_o[e*2+1]=8,e++,i[8]++;for(;e<=255;)_o[e*2+1]=9,e++,i[9]++;for(;e<=279;)_o[e*2+1]=7,e++,i[7]++;for(;e<=287;)_o[e*2+1]=8,e++,i[8]++;for(y6(_o,Bf+1,i),e=0;e<du;e++)df[e*2+1]=5,df[e*2]=v6(e,5);m6=new Qv(_o,K1,cm+1,Bf,Rc),p6=new Qv(df,Mp,0,du,Rc),g6=new Qv(new Array(0),Tz,0,nb,Lz)},b6=e=>{let t;for(t=0;t<Bf;t++)e.dyn_ltree[t*2]=0;for(t=0;t<du;t++)e.dyn_dtree[t*2]=0;for(t=0;t<nb;t++)e.bl_tree[t*2]=0;e.dyn_ltree[sb*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},w6=e=>{e.bi_valid>8?zf(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},A5=(e,t,r,s)=>{const a=t*2,i=r*2;return e[a]<e[i]||e[a]===e[i]&&s[t]<=s[r]},Jv=(e,t,r)=>{const s=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&A5(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!A5(t,s,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=s},E5=(e,t,r)=>{let s,a,i=0,l,o;if(e.sym_next!==0)do s=e.pending_buf[e.sym_buf+i++]&255,s+=(e.pending_buf[e.sym_buf+i++]&255)<<8,a=e.pending_buf[e.sym_buf+i++],s===0?Wi(e,a,t):(l=$f[a],Wi(e,l+cm+1,t),o=K1[l],o!==0&&(a-=ab[l],Js(e,a,o)),s--,l=x6(s),Wi(e,l,r),o=Mp[l],o!==0&&(s-=Pg[l],Js(e,s,o)));while(i<e.sym_next);Wi(e,sb,t)},Q1=(e,t)=>{const r=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let l,o,c=-1,d;for(e.heap_len=0,e.heap_max=c6,l=0;l<i;l++)r[l*2]!==0?(e.heap[++e.heap_len]=c=l,e.depth[l]=0):r[l*2+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=c<2?++c:0,r[d*2]=1,e.depth[d]=0,e.opt_len--,a&&(e.static_len-=s[d*2+1]);for(t.max_code=c,l=e.heap_len>>1;l>=1;l--)Jv(e,r,l);d=i;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Jv(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=o,r[d*2]=r[l*2]+r[o*2],e.depth[d]=(e.depth[l]>=e.depth[o]?e.depth[l]:e.depth[o])+1,r[l*2+1]=r[o*2+1]=d,e.heap[1]=d++,Jv(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Iz(e,t),y6(r,c,e.bl_count)},L5=(e,t,r)=>{let s,a=-1,i,l=t[0*2+1],o=0,c=7,d=4;for(l===0&&(c=138,d=3),t[(r+1)*2+1]=65535,s=0;s<=r;s++)i=l,l=t[(s+1)*2+1],!(++o<c&&i===l)&&(o<d?e.bl_tree[i*2]+=o:i!==0?(i!==a&&e.bl_tree[i*2]++,e.bl_tree[d6*2]++):o<=10?e.bl_tree[u6*2]++:e.bl_tree[h6*2]++,o=0,a=i,l===0?(c=138,d=3):i===l?(c=6,d=3):(c=7,d=4))},T5=(e,t,r)=>{let s,a=-1,i,l=t[0*2+1],o=0,c=7,d=4;for(l===0&&(c=138,d=3),s=0;s<=r;s++)if(i=l,l=t[(s+1)*2+1],!(++o<c&&i===l)){if(o<d)do Wi(e,i,e.bl_tree);while(--o!==0);else i!==0?(i!==a&&(Wi(e,i,e.bl_tree),o--),Wi(e,d6,e.bl_tree),Js(e,o-3,2)):o<=10?(Wi(e,u6,e.bl_tree),Js(e,o-3,3)):(Wi(e,h6,e.bl_tree),Js(e,o-11,7));o=0,a=i,l===0?(c=138,d=3):i===l?(c=6,d=3):(c=7,d=4)}},Fz=e=>{let t;for(L5(e,e.dyn_ltree,e.l_desc.max_code),L5(e,e.dyn_dtree,e.d_desc.max_code),Q1(e,e.bl_desc),t=nb-1;t>=3&&e.bl_tree[f6[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Oz=(e,t,r,s)=>{let a;for(Js(e,t-257,5),Js(e,r-1,5),Js(e,s-4,4),a=0;a<s;a++)Js(e,e.bl_tree[f6[a]*2+1],3);T5(e,e.dyn_ltree,t-1),T5(e,e.dyn_dtree,r-1)},Bz=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return k5;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return P5;for(r=32;r<cm;r++)if(e.dyn_ltree[r*2]!==0)return P5;return k5};let D5=!1;const Uz=e=>{D5||(Mz(),D5=!0),e.l_desc=new Xv(e.dyn_ltree,m6),e.d_desc=new Xv(e.dyn_dtree,p6),e.bl_desc=new Xv(e.bl_tree,g6),e.bi_buf=0,e.bi_valid=0,b6(e)},N6=(e,t,r,s)=>{Js(e,(kz<<1)+(s?1:0),3),w6(e),zf(e,r),zf(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},$z=e=>{Js(e,l6<<1,3),Wi(e,sb,_o),Rz(e)},zz=(e,t,r,s)=>{let a,i,l=0;e.level>0?(e.strm.data_type===Cz&&(e.strm.data_type=Bz(e)),Q1(e,e.l_desc),Q1(e,e.d_desc),l=Fz(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=r+5,r+4<=a&&t!==-1?N6(e,t,r,s):e.strategy===_z||i===a?(Js(e,(l6<<1)+(s?1:0),3),E5(e,_o,df)):(Js(e,(Pz<<1)+(s?1:0),3),Oz(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),E5(e,e.dyn_ltree,e.dyn_dtree)),b6(e),s&&w6(e)},qz=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[($f[r]+cm+1)*2]++,e.dyn_dtree[x6(t)*2]++),e.sym_next===e.sym_end);var Vz=Uz,Hz=N6,Wz=zz,Gz=qz,Yz=$z,Kz={_tr_init:Vz,_tr_stored_block:Hz,_tr_flush_block:Wz,_tr_tally:Gz,_tr_align:Yz};const Qz=(e,t,r,s)=>{let a=e&65535|0,i=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do a=a+t[s++]|0,i=i+a|0;while(--l);a%=65521,i%=65521}return a|i<<16|0};var qf=Qz;const Xz=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var s=0;s<8;s++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Jz=new Uint32Array(Xz()),Zz=(e,t,r,s)=>{const a=Jz,i=s+r;e^=-1;for(let l=s;l<i;l++)e=e>>>8^a[(e^t[l])&255];return e^-1};var Zn=Zz,Iu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:eq,_tr_stored_block:X1,_tr_flush_block:tq,_tr_tally:ql,_tr_align:rq}=Kz,{Z_NO_FLUSH:Vl,Z_PARTIAL_FLUSH:nq,Z_FULL_FLUSH:sq,Z_FINISH:Wa,Z_BLOCK:R5,Z_OK:hs,Z_STREAM_END:I5,Z_STREAM_ERROR:Zi,Z_DATA_ERROR:aq,Z_BUF_ERROR:Zv,Z_DEFAULT_COMPRESSION:iq,Z_FILTERED:oq,Z_HUFFMAN_ONLY:lp,Z_RLE:lq,Z_FIXED:cq,Z_DEFAULT_STRATEGY:dq,Z_UNKNOWN:uq,Z_DEFLATED:Ax}=dm,hq=9,fq=15,mq=8,pq=29,gq=256,J1=gq+1+pq,xq=30,vq=19,yq=2*J1+1,bq=15,fr=3,El=258,eo=El+fr+1,wq=32,Mu=42,ib=57,Z1=69,ey=73,ty=91,ry=103,Ic=113,Kh=666,Os=1,Xu=2,sd=3,Ju=4,Nq=3,Mc=(e,t)=>(e.msg=Iu[t],t),M5=e=>e*2-(e>4?9:0),bl=e=>{let t=e.length;for(;--t>=0;)e[t]=0},jq=e=>{let t,r,s,a=e.w_size;t=e.hash_size,s=t;do r=e.head[--s],e.head[s]=r>=a?r-a:0;while(--t);t=a,s=t;do r=e.prev[--s],e.prev[s]=r>=a?r-a:0;while(--t)};let Sq=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,Hl=Sq;const xa=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},ja=(e,t)=>{tq(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xa(e.strm)},Cr=(e,t)=>{e.pending_buf[e.pending++]=t},Bh=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},ny=(e,t,r,s)=>{let a=e.avail_in;return a>s&&(a=s),a===0?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),e.state.wrap===1?e.adler=qf(e.adler,t,a,r):e.state.wrap===2&&(e.adler=Zn(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},j6=(e,t)=>{let r=e.max_chain_length,s=e.strstart,a,i,l=e.prev_length,o=e.nice_match;const c=e.strstart>e.w_size-eo?e.strstart-(e.w_size-eo):0,d=e.window,u=e.w_mask,m=e.prev,x=e.strstart+El;let f=d[s+l-1],y=d[s+l];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do if(a=t,!(d[a+l]!==y||d[a+l-1]!==f||d[a]!==d[s]||d[++a]!==d[s+1])){s+=2,a++;do;while(d[++s]===d[++a]&&d[++s]===d[++a]&&d[++s]===d[++a]&&d[++s]===d[++a]&&d[++s]===d[++a]&&d[++s]===d[++a]&&d[++s]===d[++a]&&d[++s]===d[++a]&&s<x);if(i=El-(x-s),s=x-El,i>l){if(e.match_start=t,l=i,i>=o)break;f=d[s+l-1],y=d[s+l]}}while((t=m[t&u])>c&&--r!==0);return l<=e.lookahead?l:e.lookahead},Fu=e=>{const t=e.w_size;let r,s,a;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-eo)&&(e.window.set(e.window.subarray(t,t+t-s),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),jq(e),s+=t),e.strm.avail_in===0)break;if(r=ny(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=fr)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=Hl(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=Hl(e,e.ins_h,e.window[a+fr-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<fr)););}while(e.lookahead<eo&&e.strm.avail_in!==0)},S6=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s,a,i,l=0,o=e.strm.avail_in;do{if(s=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,a=e.strstart-e.block_start,s>a+e.strm.avail_in&&(s=a+e.strm.avail_in),s>i&&(s=i),s<r&&(s===0&&t!==Wa||t===Vl||s!==a+e.strm.avail_in)))break;l=t===Wa&&s===a+e.strm.avail_in?1:0,X1(e,0,0,l),e.pending_buf[e.pending-4]=s,e.pending_buf[e.pending-3]=s>>8,e.pending_buf[e.pending-2]=~s,e.pending_buf[e.pending-1]=~s>>8,xa(e.strm),a&&(a>s&&(a=s),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,s-=a),s&&(ny(e.strm,e.strm.output,e.strm.next_out,s),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s)}while(l===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),l?Ju:t!==Vl&&t!==Wa&&e.strm.avail_in===0&&e.strstart===e.block_start?Xu:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(ny(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,r=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=r||(a||t===Wa)&&t!==Vl&&e.strm.avail_in===0&&a<=i)&&(s=a>i?i:a,l=t===Wa&&e.strm.avail_in===0&&s===a?1:0,X1(e,e.block_start,s,l),e.block_start+=s,xa(e.strm)),l?sd:Os)},e0=(e,t)=>{let r,s;for(;;){if(e.lookahead<eo){if(Fu(e),e.lookahead<eo&&t===Vl)return Os;if(e.lookahead===0)break}if(r=0,e.lookahead>=fr&&(e.ins_h=Hl(e,e.ins_h,e.window[e.strstart+fr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-eo&&(e.match_length=j6(e,r)),e.match_length>=fr)if(s=ql(e,e.strstart-e.match_start,e.match_length-fr),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=fr){e.match_length--;do e.strstart++,e.ins_h=Hl(e,e.ins_h,e.window[e.strstart+fr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Hl(e,e.ins_h,e.window[e.strstart+1]);else s=ql(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(ja(e,!1),e.strm.avail_out===0))return Os}return e.insert=e.strstart<fr-1?e.strstart:fr-1,t===Wa?(ja(e,!0),e.strm.avail_out===0?sd:Ju):e.sym_next&&(ja(e,!1),e.strm.avail_out===0)?Os:Xu},Ld=(e,t)=>{let r,s,a;for(;;){if(e.lookahead<eo){if(Fu(e),e.lookahead<eo&&t===Vl)return Os;if(e.lookahead===0)break}if(r=0,e.lookahead>=fr&&(e.ins_h=Hl(e,e.ins_h,e.window[e.strstart+fr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=fr-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-eo&&(e.match_length=j6(e,r),e.match_length<=5&&(e.strategy===oq||e.match_length===fr&&e.strstart-e.match_start>4096)&&(e.match_length=fr-1)),e.prev_length>=fr&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-fr,s=ql(e,e.strstart-1-e.prev_match,e.prev_length-fr),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=Hl(e,e.ins_h,e.window[e.strstart+fr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=fr-1,e.strstart++,s&&(ja(e,!1),e.strm.avail_out===0))return Os}else if(e.match_available){if(s=ql(e,0,e.window[e.strstart-1]),s&&ja(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Os}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=ql(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<fr-1?e.strstart:fr-1,t===Wa?(ja(e,!0),e.strm.avail_out===0?sd:Ju):e.sym_next&&(ja(e,!1),e.strm.avail_out===0)?Os:Xu},_q=(e,t)=>{let r,s,a,i;const l=e.window;for(;;){if(e.lookahead<=El){if(Fu(e),e.lookahead<=El&&t===Vl)return Os;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=fr&&e.strstart>0&&(a=e.strstart-1,s=l[a],s===l[++a]&&s===l[++a]&&s===l[++a])){i=e.strstart+El;do;while(s===l[++a]&&s===l[++a]&&s===l[++a]&&s===l[++a]&&s===l[++a]&&s===l[++a]&&s===l[++a]&&s===l[++a]&&a<i);e.match_length=El-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=fr?(r=ql(e,1,e.match_length-fr),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=ql(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ja(e,!1),e.strm.avail_out===0))return Os}return e.insert=0,t===Wa?(ja(e,!0),e.strm.avail_out===0?sd:Ju):e.sym_next&&(ja(e,!1),e.strm.avail_out===0)?Os:Xu},Cq=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(Fu(e),e.lookahead===0)){if(t===Vl)return Os;break}if(e.match_length=0,r=ql(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ja(e,!1),e.strm.avail_out===0))return Os}return e.insert=0,t===Wa?(ja(e,!0),e.strm.avail_out===0?sd:Ju):e.sym_next&&(ja(e,!1),e.strm.avail_out===0)?Os:Xu};function Oi(e,t,r,s,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=s,this.func=a}const Qh=[new Oi(0,0,0,0,S6),new Oi(4,4,8,4,e0),new Oi(4,5,16,8,e0),new Oi(4,6,32,32,e0),new Oi(4,4,16,16,Ld),new Oi(8,16,32,32,Ld),new Oi(8,16,128,128,Ld),new Oi(8,32,128,256,Ld),new Oi(32,128,258,1024,Ld),new Oi(32,258,258,4096,Ld)],kq=e=>{e.window_size=2*e.w_size,bl(e.head),e.max_lazy_match=Qh[e.level].max_lazy,e.good_match=Qh[e.level].good_length,e.nice_match=Qh[e.level].nice_length,e.max_chain_length=Qh[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=fr-1,e.match_available=0,e.ins_h=0};function Pq(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ax,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(yq*2),this.dyn_dtree=new Uint16Array((2*xq+1)*2),this.bl_tree=new Uint16Array((2*vq+1)*2),bl(this.dyn_ltree),bl(this.dyn_dtree),bl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(bq+1),this.heap=new Uint16Array(2*J1+1),bl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*J1+1),bl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const um=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Mu&&t.status!==ib&&t.status!==Z1&&t.status!==ey&&t.status!==ty&&t.status!==ry&&t.status!==Ic&&t.status!==Kh?1:0},_6=e=>{if(um(e))return Mc(e,Zi);e.total_in=e.total_out=0,e.data_type=uq;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?ib:t.wrap?Mu:Ic,e.adler=t.wrap===2?0:1,t.last_flush=-2,eq(t),hs},C6=e=>{const t=_6(e);return t===hs&&kq(e.state),t},Aq=(e,t)=>um(e)||e.state.wrap!==2?Zi:(e.state.gzhead=t,hs),k6=(e,t,r,s,a,i)=>{if(!e)return Zi;let l=1;if(t===iq&&(t=6),s<0?(l=0,s=-s):s>15&&(l=2,s-=16),a<1||a>hq||r!==Ax||s<8||s>15||t<0||t>9||i<0||i>cq||s===8&&l!==1)return Mc(e,Zi);s===8&&(s=9);const o=new Pq;return e.state=o,o.strm=e,o.status=Mu,o.wrap=l,o.gzhead=null,o.w_bits=s,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+fr-1)/fr),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=r,C6(e)},Eq=(e,t)=>k6(e,t,Ax,fq,mq,dq),Lq=(e,t)=>{if(um(e)||t>R5||t<0)return e?Mc(e,Zi):Zi;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===Kh&&t!==Wa)return Mc(e,e.avail_out===0?Zv:Zi);const s=r.last_flush;if(r.last_flush=t,r.pending!==0){if(xa(e),e.avail_out===0)return r.last_flush=-1,hs}else if(e.avail_in===0&&M5(t)<=M5(s)&&t!==Wa)return Mc(e,Zv);if(r.status===Kh&&e.avail_in!==0)return Mc(e,Zv);if(r.status===Mu&&r.wrap===0&&(r.status=Ic),r.status===Mu){let a=Ax+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=lp||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,a|=i<<6,r.strstart!==0&&(a|=wq),a+=31-a%31,Bh(r,a),r.strstart!==0&&(Bh(r,e.adler>>>16),Bh(r,e.adler&65535)),e.adler=1,r.status=Ic,xa(e),r.pending!==0)return r.last_flush=-1,hs}if(r.status===ib){if(e.adler=0,Cr(r,31),Cr(r,139),Cr(r,8),r.gzhead)Cr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Cr(r,r.gzhead.time&255),Cr(r,r.gzhead.time>>8&255),Cr(r,r.gzhead.time>>16&255),Cr(r,r.gzhead.time>>24&255),Cr(r,r.level===9?2:r.strategy>=lp||r.level<2?4:0),Cr(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Cr(r,r.gzhead.extra.length&255),Cr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Zn(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Z1;else if(Cr(r,0),Cr(r,0),Cr(r,0),Cr(r,0),Cr(r,0),Cr(r,r.level===9?2:r.strategy>=lp||r.level<2?4:0),Cr(r,Nq),r.status=Ic,xa(e),r.pending!==0)return r.last_flush=-1,hs}if(r.status===Z1){if(r.gzhead.extra){let a=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let o=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=o,xa(e),r.pending!==0)return r.last_flush=-1,hs;a=0,i-=o}let l=new Uint8Array(r.gzhead.extra);r.pending_buf.set(l.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>a&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=ey}if(r.status===ey){if(r.gzhead.name){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-a,a)),xa(e),r.pending!==0)return r.last_flush=-1,hs;a=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,Cr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=ty}if(r.status===ty){if(r.gzhead.comment){let a=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-a,a)),xa(e),r.pending!==0)return r.last_flush=-1,hs;a=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,Cr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-a,a))}r.status=ry}if(r.status===ry){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(xa(e),r.pending!==0))return r.last_flush=-1,hs;Cr(r,e.adler&255),Cr(r,e.adler>>8&255),e.adler=0}if(r.status=Ic,xa(e),r.pending!==0)return r.last_flush=-1,hs}if(e.avail_in!==0||r.lookahead!==0||t!==Vl&&r.status!==Kh){let a=r.level===0?S6(r,t):r.strategy===lp?Cq(r,t):r.strategy===lq?_q(r,t):Qh[r.level].func(r,t);if((a===sd||a===Ju)&&(r.status=Kh),a===Os||a===sd)return e.avail_out===0&&(r.last_flush=-1),hs;if(a===Xu&&(t===nq?rq(r):t!==R5&&(X1(r,0,0,!1),t===sq&&(bl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),xa(e),e.avail_out===0))return r.last_flush=-1,hs}return t!==Wa?hs:r.wrap<=0?I5:(r.wrap===2?(Cr(r,e.adler&255),Cr(r,e.adler>>8&255),Cr(r,e.adler>>16&255),Cr(r,e.adler>>24&255),Cr(r,e.total_in&255),Cr(r,e.total_in>>8&255),Cr(r,e.total_in>>16&255),Cr(r,e.total_in>>24&255)):(Bh(r,e.adler>>>16),Bh(r,e.adler&65535)),xa(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?hs:I5)},Tq=e=>{if(um(e))return Zi;const t=e.state.status;return e.state=null,t===Ic?Mc(e,aq):hs},Dq=(e,t)=>{let r=t.length;if(um(e))return Zi;const s=e.state,a=s.wrap;if(a===2||a===1&&s.status!==Mu||s.lookahead)return Zi;if(a===1&&(e.adler=qf(e.adler,t,r,0)),s.wrap=0,r>=s.w_size){a===0&&(bl(s.head),s.strstart=0,s.block_start=0,s.insert=0);let c=new Uint8Array(s.w_size);c.set(t.subarray(r-s.w_size,r),0),t=c,r=s.w_size}const i=e.avail_in,l=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Fu(s);s.lookahead>=fr;){let c=s.strstart,d=s.lookahead-(fr-1);do s.ins_h=Hl(s,s.ins_h,s.window[c+fr-1]),s.prev[c&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=c,c++;while(--d);s.strstart=c,s.lookahead=fr-1,Fu(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=fr-1,s.match_available=0,e.next_in=l,e.input=o,e.avail_in=i,s.wrap=a,hs};var Rq=Eq,Iq=k6,Mq=C6,Fq=_6,Oq=Aq,Bq=Lq,Uq=Tq,$q=Dq,zq="pako deflate (from Nodeca project)",uf={deflateInit:Rq,deflateInit2:Iq,deflateReset:Mq,deflateResetKeep:Fq,deflateSetHeader:Oq,deflate:Bq,deflateEnd:Uq,deflateSetDictionary:$q,deflateInfo:zq};const qq=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Vq=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const s in r)qq(r,s)&&(e[s]=r[s])}}return e},Hq=e=>{let t=0;for(let s=0,a=e.length;s<a;s++)t+=e[s].length;const r=new Uint8Array(t);for(let s=0,a=0,i=e.length;s<i;s++){let l=e[s];r.set(l,a),a+=l.length}return r},Ex={assign:Vq,flattenChunks:Hq};let P6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{P6=!1}const Vf=new Uint8Array(256);for(let e=0;e<256;e++)Vf[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Vf[254]=Vf[254]=1;var Wq=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,s,a,i,l=e.length,o=0;for(a=0;a<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<l&&(s=e.charCodeAt(a+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<l&&(s=e.charCodeAt(a+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const Gq=(e,t)=>{if(t<65534&&e.subarray&&P6)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r};var Yq=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s,a;const i=new Array(r*2);for(a=0,s=0;s<r;){let l=e[s++];if(l<128){i[a++]=l;continue}let o=Vf[l];if(o>4){i[a++]=65533,s+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&s<r;)l=l<<6|e[s++]&63,o--;if(o>1){i[a++]=65533;continue}l<65536?i[a++]=l:(l-=65536,i[a++]=55296|l>>10&1023,i[a++]=56320|l&1023)}return Gq(i,a)},Kq=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Vf[e[r]]>t?r:t},Hf={string2buf:Wq,buf2string:Yq,utf8border:Kq};function Qq(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var A6=Qq;const E6=Object.prototype.toString,{Z_NO_FLUSH:Xq,Z_SYNC_FLUSH:Jq,Z_FULL_FLUSH:Zq,Z_FINISH:eV,Z_OK:Ag,Z_STREAM_END:tV,Z_DEFAULT_COMPRESSION:rV,Z_DEFAULT_STRATEGY:nV,Z_DEFLATED:sV}=dm;function ob(e){this.options=Ex.assign({level:rV,method:sV,chunkSize:16384,windowBits:15,memLevel:8,strategy:nV},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A6,this.strm.avail_out=0;let r=uf.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Ag)throw new Error(Iu[r]);if(t.header&&uf.deflateSetHeader(this.strm,t.header),t.dictionary){let s;if(typeof t.dictionary=="string"?s=Hf.string2buf(t.dictionary):E6.call(t.dictionary)==="[object ArrayBuffer]"?s=new Uint8Array(t.dictionary):s=t.dictionary,r=uf.deflateSetDictionary(this.strm,s),r!==Ag)throw new Error(Iu[r]);this._dict_set=!0}}ob.prototype.push=function(e,t){const r=this.strm,s=this.options.chunkSize;let a,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?eV:Xq,typeof e=="string"?r.input=Hf.string2buf(e):E6.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),(i===Jq||i===Zq)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=uf.deflate(r,i),a===tV)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=uf.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Ag;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};ob.prototype.onData=function(e){this.chunks.push(e)};ob.prototype.onEnd=function(e){e===Ag&&(this.result=Ex.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const cp=16209,aV=16191;var iV=function(t,r){let s,a,i,l,o,c,d,u,m,x,f,y,v,S,b,j,w,k,R,W,O,q,D,J;const A=t.state;s=t.next_in,D=t.input,a=s+(t.avail_in-5),i=t.next_out,J=t.output,l=i-(r-t.avail_out),o=i+(t.avail_out-257),c=A.dmax,d=A.wsize,u=A.whave,m=A.wnext,x=A.window,f=A.hold,y=A.bits,v=A.lencode,S=A.distcode,b=(1<<A.lenbits)-1,j=(1<<A.distbits)-1;e:do{y<15&&(f+=D[s++]<<y,y+=8,f+=D[s++]<<y,y+=8),w=v[f&b];t:for(;;){if(k=w>>>24,f>>>=k,y-=k,k=w>>>16&255,k===0)J[i++]=w&65535;else if(k&16){R=w&65535,k&=15,k&&(y<k&&(f+=D[s++]<<y,y+=8),R+=f&(1<<k)-1,f>>>=k,y-=k),y<15&&(f+=D[s++]<<y,y+=8,f+=D[s++]<<y,y+=8),w=S[f&j];r:for(;;){if(k=w>>>24,f>>>=k,y-=k,k=w>>>16&255,k&16){if(W=w&65535,k&=15,y<k&&(f+=D[s++]<<y,y+=8,y<k&&(f+=D[s++]<<y,y+=8)),W+=f&(1<<k)-1,W>c){t.msg="invalid distance too far back",A.mode=cp;break e}if(f>>>=k,y-=k,k=i-l,W>k){if(k=W-k,k>u&&A.sane){t.msg="invalid distance too far back",A.mode=cp;break e}if(O=0,q=x,m===0){if(O+=d-k,k<R){R-=k;do J[i++]=x[O++];while(--k);O=i-W,q=J}}else if(m<k){if(O+=d+m-k,k-=m,k<R){R-=k;do J[i++]=x[O++];while(--k);if(O=0,m<R){k=m,R-=k;do J[i++]=x[O++];while(--k);O=i-W,q=J}}}else if(O+=m-k,k<R){R-=k;do J[i++]=x[O++];while(--k);O=i-W,q=J}for(;R>2;)J[i++]=q[O++],J[i++]=q[O++],J[i++]=q[O++],R-=3;R&&(J[i++]=q[O++],R>1&&(J[i++]=q[O++]))}else{O=i-W;do J[i++]=J[O++],J[i++]=J[O++],J[i++]=J[O++],R-=3;while(R>2);R&&(J[i++]=J[O++],R>1&&(J[i++]=J[O++]))}}else if(k&64){t.msg="invalid distance code",A.mode=cp;break e}else{w=S[(w&65535)+(f&(1<<k)-1)];continue r}break}}else if(k&64)if(k&32){A.mode=aV;break e}else{t.msg="invalid literal/length code",A.mode=cp;break e}else{w=v[(w&65535)+(f&(1<<k)-1)];continue t}break}}while(s<a&&i<o);R=y>>3,s-=R,y-=R<<3,f&=(1<<y)-1,t.next_in=s,t.next_out=i,t.avail_in=s<a?5+(a-s):5-(s-a),t.avail_out=i<o?257+(o-i):257-(i-o),A.hold=f,A.bits=y};const Td=15,F5=852,O5=592,B5=0,t0=1,U5=2,oV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uV=(e,t,r,s,a,i,l,o)=>{const c=o.bits;let d=0,u=0,m=0,x=0,f=0,y=0,v=0,S=0,b=0,j=0,w,k,R,W,O,q=null,D;const J=new Uint16Array(Td+1),A=new Uint16Array(Td+1);let M=null,ee,E,ae;for(d=0;d<=Td;d++)J[d]=0;for(u=0;u<s;u++)J[t[r+u]]++;for(f=c,x=Td;x>=1&&J[x]===0;x--);if(f>x&&(f=x),x===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,o.bits=1,0;for(m=1;m<x&&J[m]===0;m++);for(f<m&&(f=m),S=1,d=1;d<=Td;d++)if(S<<=1,S-=J[d],S<0)return-1;if(S>0&&(e===B5||x!==1))return-1;for(A[1]=0,d=1;d<Td;d++)A[d+1]=A[d]+J[d];for(u=0;u<s;u++)t[r+u]!==0&&(l[A[t[r+u]]++]=u);if(e===B5?(q=M=l,D=20):e===t0?(q=oV,M=lV,D=257):(q=cV,M=dV,D=0),j=0,u=0,d=m,O=i,y=f,v=0,R=-1,b=1<<f,W=b-1,e===t0&&b>F5||e===U5&&b>O5)return 1;for(;;){ee=d-v,l[u]+1<D?(E=0,ae=l[u]):l[u]>=D?(E=M[l[u]-D],ae=q[l[u]-D]):(E=96,ae=0),w=1<<d-v,k=1<<y,m=k;do k-=w,a[O+(j>>v)+k]=ee<<24|E<<16|ae|0;while(k!==0);for(w=1<<d-1;j&w;)w>>=1;if(w!==0?(j&=w-1,j+=w):j=0,u++,--J[d]===0){if(d===x)break;d=t[r+l[u]]}if(d>f&&(j&W)!==R){for(v===0&&(v=f),O+=m,y=d-v,S=1<<y;y+v<x&&(S-=J[y+v],!(S<=0));)y++,S<<=1;if(b+=1<<y,e===t0&&b>F5||e===U5&&b>O5)return 1;R=j&W,a[R]=f<<24|y<<16|O-i|0}}return j!==0&&(a[O+j]=d-v<<24|64<<16|0),o.bits=f,0};var hf=uV;const hV=0,L6=1,T6=2,{Z_FINISH:$5,Z_BLOCK:fV,Z_TREES:dp,Z_OK:ad,Z_STREAM_END:mV,Z_NEED_DICT:pV,Z_STREAM_ERROR:Ja,Z_DATA_ERROR:D6,Z_MEM_ERROR:R6,Z_BUF_ERROR:gV,Z_DEFLATED:z5}=dm,Lx=16180,q5=16181,V5=16182,H5=16183,W5=16184,G5=16185,Y5=16186,K5=16187,Q5=16188,X5=16189,Eg=16190,bo=16191,r0=16192,J5=16193,n0=16194,Z5=16195,ej=16196,tj=16197,rj=16198,up=16199,hp=16200,nj=16201,sj=16202,aj=16203,ij=16204,oj=16205,s0=16206,lj=16207,cj=16208,ln=16209,I6=16210,M6=16211,xV=852,vV=592,yV=15,bV=yV,dj=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function wV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const fd=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Lx||t.mode>M6?1:0},F6=e=>{if(fd(e))return Ja;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Lx,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(xV),t.distcode=t.distdyn=new Int32Array(vV),t.sane=1,t.back=-1,ad},O6=e=>{if(fd(e))return Ja;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,F6(e)},B6=(e,t)=>{let r;if(fd(e))return Ja;const s=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ja:(s.window!==null&&s.wbits!==t&&(s.window=null),s.wrap=r,s.wbits=t,O6(e))},U6=(e,t)=>{if(!e)return Ja;const r=new wV;e.state=r,r.strm=e,r.window=null,r.mode=Lx;const s=B6(e,t);return s!==ad&&(e.state=null),s},NV=e=>U6(e,bV);let uj=!0,a0,i0;const jV=e=>{if(uj){a0=new Int32Array(512),i0=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(hf(L6,e.lens,0,288,a0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;hf(T6,e.lens,0,32,i0,0,e.work,{bits:5}),uj=!1}e.lencode=a0,e.lenbits=9,e.distcode=i0,e.distbits=5},$6=(e,t,r,s)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),s>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>s&&(a=s),i.window.set(t.subarray(r-s,r-s+a),i.wnext),s-=a,s?(i.window.set(t.subarray(r-s,r),0),i.wnext=s,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},SV=(e,t)=>{let r,s,a,i,l,o,c,d,u,m,x,f,y,v,S=0,b,j,w,k,R,W,O,q;const D=new Uint8Array(4);let J,A;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(fd(e)||!e.output||!e.input&&e.avail_in!==0)return Ja;r=e.state,r.mode===bo&&(r.mode=r0),l=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,s=e.input,o=e.avail_in,d=r.hold,u=r.bits,m=o,x=c,q=ad;e:for(;;)switch(r.mode){case Lx:if(r.wrap===0){r.mode=r0;break}for(;u<16;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,D[0]=d&255,D[1]=d>>>8&255,r.check=Zn(r.check,D,2,0),d=0,u=0,r.mode=q5;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=ln;break}if((d&15)!==z5){e.msg="unknown compression method",r.mode=ln;break}if(d>>>=4,u-=4,O=(d&15)+8,r.wbits===0&&(r.wbits=O),O>15||O>r.wbits){e.msg="invalid window size",r.mode=ln;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?X5:bo,d=0,u=0;break;case q5:for(;u<16;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(r.flags=d,(r.flags&255)!==z5){e.msg="unknown compression method",r.mode=ln;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=ln;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,r.check=Zn(r.check,D,2,0)),d=0,u=0,r.mode=V5;case V5:for(;u<32;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,D[2]=d>>>16&255,D[3]=d>>>24&255,r.check=Zn(r.check,D,4,0)),d=0,u=0,r.mode=H5;case H5:for(;u<16;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,r.check=Zn(r.check,D,2,0)),d=0,u=0,r.mode=W5;case W5:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(D[0]=d&255,D[1]=d>>>8&255,r.check=Zn(r.check,D,2,0)),d=0,u=0}else r.head&&(r.head.extra=null);r.mode=G5;case G5:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(s.subarray(i,i+f),O)),r.flags&512&&r.wrap&4&&(r.check=Zn(r.check,s,f,i)),o-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Y5;case Y5:if(r.flags&2048){if(o===0)break e;f=0;do O=s[i+f++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Zn(r.check,s,f,i)),o-=f,i+=f,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=K5;case K5:if(r.flags&4096){if(o===0)break e;f=0;do O=s[i+f++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Zn(r.check,s,f,i)),o-=f,i+=f,O)break e}else r.head&&(r.head.comment=null);r.mode=Q5;case Q5:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=ln;break}d=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=bo;break;case X5:for(;u<32;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}e.adler=r.check=dj(d),d=0,u=0,r.mode=Eg;case Eg:if(r.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=d,r.bits=u,pV;e.adler=r.check=1,r.mode=bo;case bo:if(t===fV||t===dp)break e;case r0:if(r.last){d>>>=u&7,u-=u&7,r.mode=s0;break}for(;u<3;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}switch(r.last=d&1,d>>>=1,u-=1,d&3){case 0:r.mode=J5;break;case 1:if(jV(r),r.mode=up,t===dp){d>>>=2,u-=2;break e}break;case 2:r.mode=ej;break;case 3:e.msg="invalid block type",r.mode=ln}d>>>=2,u-=2;break;case J5:for(d>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=ln;break}if(r.length=d&65535,d=0,u=0,r.mode=n0,t===dp)break e;case n0:r.mode=Z5;case Z5:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;a.set(s.subarray(i,i+f),l),o-=f,i+=f,c-=f,l+=f,r.length-=f;break}r.mode=bo;break;case ej:for(;u<14;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(r.nlen=(d&31)+257,d>>>=5,u-=5,r.ndist=(d&31)+1,d>>>=5,u-=5,r.ncode=(d&15)+4,d>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=ln;break}r.have=0,r.mode=tj;case tj:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}r.lens[M[r.have++]]=d&7,d>>>=3,u-=3}for(;r.have<19;)r.lens[M[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,J={bits:r.lenbits},q=hf(hV,r.lens,0,19,r.lencode,0,r.work,J),r.lenbits=J.bits,q){e.msg="invalid code lengths set",r.mode=ln;break}r.have=0,r.mode=rj;case rj:for(;r.have<r.nlen+r.ndist;){for(;S=r.lencode[d&(1<<r.lenbits)-1],b=S>>>24,j=S>>>16&255,w=S&65535,!(b<=u);){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(w<16)d>>>=b,u-=b,r.lens[r.have++]=w;else{if(w===16){for(A=b+2;u<A;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(d>>>=b,u-=b,r.have===0){e.msg="invalid bit length repeat",r.mode=ln;break}O=r.lens[r.have-1],f=3+(d&3),d>>>=2,u-=2}else if(w===17){for(A=b+3;u<A;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}d>>>=b,u-=b,O=0,f=3+(d&7),d>>>=3,u-=3}else{for(A=b+7;u<A;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}d>>>=b,u-=b,O=0,f=11+(d&127),d>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=ln;break}for(;f--;)r.lens[r.have++]=O}}if(r.mode===ln)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=ln;break}if(r.lenbits=9,J={bits:r.lenbits},q=hf(L6,r.lens,0,r.nlen,r.lencode,0,r.work,J),r.lenbits=J.bits,q){e.msg="invalid literal/lengths set",r.mode=ln;break}if(r.distbits=6,r.distcode=r.distdyn,J={bits:r.distbits},q=hf(T6,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,J),r.distbits=J.bits,q){e.msg="invalid distances set",r.mode=ln;break}if(r.mode=up,t===dp)break e;case up:r.mode=hp;case hp:if(o>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=d,r.bits=u,iV(e,x),l=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,s=e.input,o=e.avail_in,d=r.hold,u=r.bits,r.mode===bo&&(r.back=-1);break}for(r.back=0;S=r.lencode[d&(1<<r.lenbits)-1],b=S>>>24,j=S>>>16&255,w=S&65535,!(b<=u);){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(j&&!(j&240)){for(k=b,R=j,W=w;S=r.lencode[W+((d&(1<<k+R)-1)>>k)],b=S>>>24,j=S>>>16&255,w=S&65535,!(k+b<=u);){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}d>>>=k,u-=k,r.back+=k}if(d>>>=b,u-=b,r.back+=b,r.length=w,j===0){r.mode=oj;break}if(j&32){r.back=-1,r.mode=bo;break}if(j&64){e.msg="invalid literal/length code",r.mode=ln;break}r.extra=j&15,r.mode=nj;case nj:if(r.extra){for(A=r.extra;u<A;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=sj;case sj:for(;S=r.distcode[d&(1<<r.distbits)-1],b=S>>>24,j=S>>>16&255,w=S&65535,!(b<=u);){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(!(j&240)){for(k=b,R=j,W=w;S=r.distcode[W+((d&(1<<k+R)-1)>>k)],b=S>>>24,j=S>>>16&255,w=S&65535,!(k+b<=u);){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}d>>>=k,u-=k,r.back+=k}if(d>>>=b,u-=b,r.back+=b,j&64){e.msg="invalid distance code",r.mode=ln;break}r.offset=w,r.extra=j&15,r.mode=aj;case aj:if(r.extra){for(A=r.extra;u<A;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=ln;break}r.mode=ij;case ij:if(c===0)break e;if(f=x-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=ln;break}f>r.wnext?(f-=r.wnext,y=r.wsize-f):y=r.wnext-f,f>r.length&&(f=r.length),v=r.window}else v=a,y=l-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do a[l++]=v[y++];while(--f);r.length===0&&(r.mode=hp);break;case oj:if(c===0)break e;a[l++]=r.length,c--,r.mode=hp;break;case s0:if(r.wrap){for(;u<32;){if(o===0)break e;o--,d|=s[i++]<<u,u+=8}if(x-=c,e.total_out+=x,r.total+=x,r.wrap&4&&x&&(e.adler=r.check=r.flags?Zn(r.check,a,x,l-x):qf(r.check,a,x,l-x)),x=c,r.wrap&4&&(r.flags?d:dj(d))!==r.check){e.msg="incorrect data check",r.mode=ln;break}d=0,u=0}r.mode=lj;case lj:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,d+=s[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=ln;break}d=0,u=0}r.mode=cj;case cj:q=mV;break e;case ln:q=D6;break e;case I6:return R6;case M6:default:return Ja}return e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=d,r.bits=u,(r.wsize||x!==e.avail_out&&r.mode<ln&&(r.mode<s0||t!==$5))&&$6(e,e.output,e.next_out,x-e.avail_out),m-=e.avail_in,x-=e.avail_out,e.total_in+=m,e.total_out+=x,r.total+=x,r.wrap&4&&x&&(e.adler=r.check=r.flags?Zn(r.check,a,x,e.next_out-x):qf(r.check,a,x,e.next_out-x)),e.data_type=r.bits+(r.last?64:0)+(r.mode===bo?128:0)+(r.mode===up||r.mode===n0?256:0),(m===0&&x===0||t===$5)&&q===ad&&(q=gV),q},_V=e=>{if(fd(e))return Ja;let t=e.state;return t.window&&(t.window=null),e.state=null,ad},CV=(e,t)=>{if(fd(e))return Ja;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,ad):Ja},kV=(e,t)=>{const r=t.length;let s,a,i;return fd(e)||(s=e.state,s.wrap!==0&&s.mode!==Eg)?Ja:s.mode===Eg&&(a=1,a=qf(a,t,r,0),a!==s.check)?D6:(i=$6(e,t,r,r),i?(s.mode=I6,R6):(s.havedict=1,ad))};var PV=O6,AV=B6,EV=F6,LV=NV,TV=U6,DV=SV,RV=_V,IV=CV,MV=kV,FV="pako inflate (from Nodeca project)",Co={inflateReset:PV,inflateReset2:AV,inflateResetKeep:EV,inflateInit:LV,inflateInit2:TV,inflate:DV,inflateEnd:RV,inflateGetHeader:IV,inflateSetDictionary:MV,inflateInfo:FV};function OV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var BV=OV;const z6=Object.prototype.toString,{Z_NO_FLUSH:UV,Z_FINISH:$V,Z_OK:Wf,Z_STREAM_END:o0,Z_NEED_DICT:l0,Z_STREAM_ERROR:zV,Z_DATA_ERROR:hj,Z_MEM_ERROR:qV}=dm;function hm(e){this.options=Ex.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A6,this.strm.avail_out=0;let r=Co.inflateInit2(this.strm,t.windowBits);if(r!==Wf)throw new Error(Iu[r]);if(this.header=new BV,Co.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Hf.string2buf(t.dictionary):z6.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Co.inflateSetDictionary(this.strm,t.dictionary),r!==Wf)))throw new Error(Iu[r])}hm.prototype.push=function(e,t){const r=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let i,l,o;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?$V:UV,z6.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),i=Co.inflate(r,l),i===l0&&a&&(i=Co.inflateSetDictionary(r,a),i===Wf?i=Co.inflate(r,l):i===hj&&(i=l0));r.avail_in>0&&i===o0&&r.state.wrap>0&&e[r.next_in]!==0;)Co.inflateReset(r),i=Co.inflate(r,l);switch(i){case zV:case hj:case l0:case qV:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===o0))if(this.options.to==="string"){let c=Hf.utf8border(r.output,r.next_out),d=r.next_out-c,u=Hf.buf2string(r.output,c);r.next_out=d,r.avail_out=s-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Wf&&o===0)){if(i===o0)return i=Co.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};hm.prototype.onData=function(e){this.chunks.push(e)};hm.prototype.onEnd=function(e){e===Wf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ex.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function lb(e,t){const r=new hm(t);if(r.push(e),r.err)throw r.msg||Iu[r.err];return r.result}function VV(e,t){return t=t||{},t.raw=!0,lb(e,t)}var HV=hm,WV=lb,GV=VV,YV=lb,KV=dm,QV={Inflate:HV,inflate:WV,inflateRaw:GV,ungzip:YV,constants:KV};const{Inflate:XV,inflate:JV,inflateRaw:I3,ungzip:M3}=QV;var fj=XV,ZV=JV;const q6=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;q6[e]=t}const mj=4294967295;function eH(e,t,r){let s=e;for(let a=0;a<r;a++)s=q6[(s^t[a])&255]^s>>>8;return s}function tH(e,t){return(eH(mj,e,t)^mj)>>>0}function pj(e,t,r){const s=e.readUint32(),a=tH(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==s)throw new Error(`CRC mismatch for chunk ${r}. Expected ${s}, found ${a}`)}function V6(e,t,r){for(let s=0;s<r;s++)t[s]=e[s]}function H6(e,t,r,s){let a=0;for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-s]&255}function W6(e,t,r,s){let a=0;if(r.length===0)for(;a<s;a++)t[a]=e[a];else for(;a<s;a++)t[a]=e[a]+r[a]&255}function G6(e,t,r,s,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<s;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<s;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function Y6(e,t,r,s,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<s;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<s;i++)t[i]=e[i]+rH(t[i-a],r[i],r[i-a])&255}}function rH(e,t,r){const s=e+t-r,a=Math.abs(s-e),i=Math.abs(s-t),l=Math.abs(s-r);return a<=i&&a<=l?e:i<=l?t:r}function nH(e,t,r,s,a,i){switch(e){case 0:V6(t,r,a);break;case 1:H6(t,r,a,i);break;case 2:W6(t,r,s,a);break;case 3:G6(t,r,s,a,i);break;case 4:Y6(t,r,s,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const sH=new Uint16Array([255]),aH=new Uint8Array(sH.buffer),iH=aH[0]===255;function oH(e){const{data:t,width:r,height:s,channels:a,depth:i}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*a,c=new Uint8Array(s*r*o);let d=0;for(let u=0;u<7;u++){const m=l[u],x=Math.ceil((r-m.x)/m.xStep),f=Math.ceil((s-m.y)/m.yStep);if(x<=0||f<=0)continue;const y=x*o,v=new Uint8Array(y);for(let S=0;S<f;S++){const b=t[d++],j=t.subarray(d,d+y);d+=y;const w=new Uint8Array(y);nH(b,j,w,v,y,o),v.set(w);for(let k=0;k<x;k++){const R=m.x+k*m.xStep,W=m.y+S*m.yStep;if(!(R>=r||W>=s))for(let O=0;O<o;O++)c[(W*r+R)*o+O]=w[k*o+O]}}}if(i===16){const u=new Uint16Array(c.buffer);if(iH)for(let m=0;m<u.length;m++)u[m]=lH(u[m]);return u}else return c}function lH(e){return(e&255)<<8|e>>8&255}const cH=new Uint16Array([255]),dH=new Uint8Array(cH.buffer),uH=dH[0]===255,hH=new Uint8Array(0);function gj(e){const{data:t,width:r,height:s,channels:a,depth:i}=e,l=Math.ceil(i/8)*a,o=Math.ceil(i/8*a*r),c=new Uint8Array(s*o);let d=hH,u=0,m,x;for(let f=0;f<s;f++){switch(m=t.subarray(u+1,u+1+o),x=c.subarray(f*o,(f+1)*o),t[u]){case 0:V6(m,x,o);break;case 1:H6(m,x,o,l);break;case 2:W6(m,x,d,o);break;case 3:G6(m,x,d,o,l);break;case 4:Y6(m,x,d,o,l);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}d=x,u+=o+1}if(i===16){const f=new Uint16Array(c.buffer);if(uH)for(let y=0;y<f.length;y++)f[y]=fH(f[y]);return f}else return c}function fH(e){return(e&255)<<8|e>>8&255}const Fp=Uint8Array.of(137,80,78,71,13,10,26,10);function xj(e){if(!mH(e.readBytes(Fp.length)))throw new Error("wrong PNG signature")}function mH(e){if(e.length<Fp.length)return!1;for(let t=0;t<Fp.length;t++)if(e[t]!==Fp[t])return!1;return!0}const pH="tEXt",gH=0,K6=new TextDecoder("latin1");function xH(e){if(yH(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const vH=/^[\u0000-\u00FF]*$/;function yH(e){if(!vH.test(e))throw new Error("invalid latin1 text")}function bH(e,t,r){const s=Q6(t);e[s]=wH(t,r-s.length-1)}function Q6(e){for(e.mark();e.readByte()!==gH;);const t=e.offset;e.reset();const r=K6.decode(e.readBytes(t-e.offset-1));return e.skip(1),xH(r),r}function wH(e,t){return K6.decode(e.readBytes(t))}const ga={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},c0={UNKNOWN:-1,DEFLATE:0},vj={UNKNOWN:-1,ADAPTIVE:0},d0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},fp={NONE:0,BACKGROUND:1,PREVIOUS:2},u0={SOURCE:0,OVER:1};class NH extends tb{constructor(r,s={}){super(r);ar(this,"_checkCrc");ar(this,"_inflator");ar(this,"_png");ar(this,"_apng");ar(this,"_end");ar(this,"_hasPalette");ar(this,"_palette");ar(this,"_hasTransparency");ar(this,"_transparency");ar(this,"_compressionMethod");ar(this,"_filterMethod");ar(this,"_interlaceMethod");ar(this,"_colorType");ar(this,"_isAnimated");ar(this,"_numberOfFrames");ar(this,"_numberOfPlays");ar(this,"_frames");ar(this,"_writingDataChunks");const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new fj,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=c0.UNKNOWN,this._filterMethod=vj.UNKNOWN,this._interlaceMethod=d0.UNKNOWN,this._colorType=ga.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(xj(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeChunk(r,s)}return this.decodeImage(),this._png}decodeApng(){for(xj(this);!this._end;){const r=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(r,s)}return this.decodeApngImage(),this._apng}decodeChunk(r,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case pH:bH(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?pj(this,r+4,s):this.skip(4)}decodeApngChunk(r,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,s),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?pj(this,r+4,s):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=jH(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case ga.GREYSCALE:a=1;break;case ga.TRUECOLOUR:a=3;break;case ga.INDEXED_COLOUR:a=1;break;case ga.GREYSCALE_ALPHA:a=2;break;case ga.TRUECOLOUR_ALPHA:a=4;break;case ga.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==c0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const s=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<s;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const s=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let s=r,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ga.GREYSCALE:case ga.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let s=0;s<r/2;s++)this._transparency[s]=this.readUint16();break}case ga.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let s=0;for(;s<r;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case ga.UNKNOWN:case ga.GREYSCALE_ALPHA:case ga.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const s=Q6(this),a=this.readUint8();if(a!==c0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:ZV(i)}}decodepHYs(){const r=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const s={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=gj({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(r,s,a){switch(r.disposeOp){case fp.NONE:break;case fp.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let l=0;l<this._png.width;l++){const o=(i*r.width+l)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[o+c]=0}break;case fp.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,s){const a=1<<this._png.depth,i=(l,o)=>{const c=((l+s.yOffset)*this._png.width+s.xOffset+o)*this._png.channels,d=(l*s.width+o)*this._png.channels;return{index:c,frameIndex:d}};switch(s.blendOp){case u0.SOURCE:for(let l=0;l<s.height;l++)for(let o=0;o<s.width;o++){const{index:c,frameIndex:d}=i(l,o);for(let u=0;u<this._png.channels;u++)r.data[c+u]=s.data[d+u]}break;case u0.OVER:for(let l=0;l<s.height;l++)for(let o=0;o<s.width;o++){const{index:c,frameIndex:d}=i(l,o);for(let u=0;u<this._png.channels;u++){const m=s.data[d+this._png.channels-1]/a,x=u%(this._png.channels-1)===0?1:s.data[d+u],f=Math.floor(m*x+(1-m)*r.data[c+u]);r.data[c+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var s;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((s=this._frames)==null?void 0:s.at(0)).data:this._inflator.result;if(this._filterMethod!==vj.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===d0.NO_INTERLACE)this._png.data=gj({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===d0.ADAM7)this._png.data=oH({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,s=this._frames.at(-1);s?s.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:fp.NONE,blendOp:u0.SOURCE,data:r}),this._inflator=new fj,this._writingDataChunks=!1}}function jH(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var yj;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(yj||(yj={}));function SH(e,t){return new NH(e,t).decode()}var Kt=function(){return typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:this}();function h0(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var Br={log:h0,warn:function(e){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):h0.call(null,arguments))},error:function(e){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):h0(e))}};function f0(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Pc(s.response,t,r)},s.onerror=function(){Br.error("could not download file")},s.send()}function bj(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function mp(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Pc=Kt.saveAs||((typeof window>"u"?"undefined":Dr(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Kt.URL||Kt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?bj(a.href)?f0(e,t,r):mp(a,a.target="_blank"):mp(a)):(a.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){mp(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(bj(e))f0(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){mp(s)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Dr(i)!=="object"&&(Br.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return f0(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Kt.HTMLElement)||Kt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&i)&&(typeof FileReader>"u"?"undefined":Dr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=l?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},o.readAsDataURL(e)}else{var c=Kt.URL||Kt.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function X6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],s=0;s<r.length;s++){var a=r[s].re,i=r[s].process,l=a.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var Op=Kt.atob.bind(Kt),wj=Kt.btoa.bind(Kt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function m0(e,t){var r=e[0],s=e[1],a=e[2],i=e[3];r=bs(r,s,a,i,t[0],7,-680876936),i=bs(i,r,s,a,t[1],12,-389564586),a=bs(a,i,r,s,t[2],17,606105819),s=bs(s,a,i,r,t[3],22,-1044525330),r=bs(r,s,a,i,t[4],7,-176418897),i=bs(i,r,s,a,t[5],12,1200080426),a=bs(a,i,r,s,t[6],17,-1473231341),s=bs(s,a,i,r,t[7],22,-45705983),r=bs(r,s,a,i,t[8],7,1770035416),i=bs(i,r,s,a,t[9],12,-1958414417),a=bs(a,i,r,s,t[10],17,-42063),s=bs(s,a,i,r,t[11],22,-1990404162),r=bs(r,s,a,i,t[12],7,1804603682),i=bs(i,r,s,a,t[13],12,-40341101),a=bs(a,i,r,s,t[14],17,-1502002290),r=ws(r,s=bs(s,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=ws(i,r,s,a,t[6],9,-1069501632),a=ws(a,i,r,s,t[11],14,643717713),s=ws(s,a,i,r,t[0],20,-373897302),r=ws(r,s,a,i,t[5],5,-701558691),i=ws(i,r,s,a,t[10],9,38016083),a=ws(a,i,r,s,t[15],14,-660478335),s=ws(s,a,i,r,t[4],20,-405537848),r=ws(r,s,a,i,t[9],5,568446438),i=ws(i,r,s,a,t[14],9,-1019803690),a=ws(a,i,r,s,t[3],14,-187363961),s=ws(s,a,i,r,t[8],20,1163531501),r=ws(r,s,a,i,t[13],5,-1444681467),i=ws(i,r,s,a,t[2],9,-51403784),a=ws(a,i,r,s,t[7],14,1735328473),r=Ns(r,s=ws(s,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ns(i,r,s,a,t[8],11,-2022574463),a=Ns(a,i,r,s,t[11],16,1839030562),s=Ns(s,a,i,r,t[14],23,-35309556),r=Ns(r,s,a,i,t[1],4,-1530992060),i=Ns(i,r,s,a,t[4],11,1272893353),a=Ns(a,i,r,s,t[7],16,-155497632),s=Ns(s,a,i,r,t[10],23,-1094730640),r=Ns(r,s,a,i,t[13],4,681279174),i=Ns(i,r,s,a,t[0],11,-358537222),a=Ns(a,i,r,s,t[3],16,-722521979),s=Ns(s,a,i,r,t[6],23,76029189),r=Ns(r,s,a,i,t[9],4,-640364487),i=Ns(i,r,s,a,t[12],11,-421815835),a=Ns(a,i,r,s,t[15],16,530742520),r=js(r,s=Ns(s,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=js(i,r,s,a,t[7],10,1126891415),a=js(a,i,r,s,t[14],15,-1416354905),s=js(s,a,i,r,t[5],21,-57434055),r=js(r,s,a,i,t[12],6,1700485571),i=js(i,r,s,a,t[3],10,-1894986606),a=js(a,i,r,s,t[10],15,-1051523),s=js(s,a,i,r,t[1],21,-2054922799),r=js(r,s,a,i,t[8],6,1873313359),i=js(i,r,s,a,t[15],10,-30611744),a=js(a,i,r,s,t[6],15,-1560198380),s=js(s,a,i,r,t[13],21,1309151649),r=js(r,s,a,i,t[4],6,-145523070),i=js(i,r,s,a,t[11],10,-1120210379),a=js(a,i,r,s,t[2],15,718787259),s=js(s,a,i,r,t[9],21,-343485551),e[0]=Ll(r,e[0]),e[1]=Ll(s,e[1]),e[2]=Ll(a,e[2]),e[3]=Ll(i,e[3])}function Tx(e,t,r,s,a,i){return t=Ll(Ll(t,e),Ll(s,i)),Ll(t<<a|t>>>32-a,r)}function bs(e,t,r,s,a,i,l){return Tx(t&r|~t&s,e,t,a,i,l)}function ws(e,t,r,s,a,i,l){return Tx(t&s|r&~s,e,t,a,i,l)}function Ns(e,t,r,s,a,i,l){return Tx(t^r^s,e,t,a,i,l)}function js(e,t,r,s,a,i,l){return Tx(r^(t|~s),e,t,a,i,l)}function J6(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)m0(s,_H(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(m0(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,m0(s,a),s}function _H(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var Nj="0123456789abcdef".split("");function CH(e){for(var t="",r=0;r<4;r++)t+=Nj[e>>8*r+4&15]+Nj[e>>8*r&15];return t}function kH(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function sy(e){return J6(e).map(kH).join("")}var PH=function(e){for(var t=0;t<e.length;t++)e[t]=CH(e[t]);return e.join("")}(J6("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ll(e,t){if(PH){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ay(e,t){var r,s,a,i;if(e!==r){for(var l=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var u=o[c];d=(d+u+l.charCodeAt(c))%256,o[c]=o[d],o[d]=u}r=e,s=o}else o=s;var m=t.length,x=0,f=0,y="";for(c=0;c<m;c++)f=(f+(u=o[x=(x+1)%256]))%256,o[x]=o[f],o[f]=u,l=o[(o[x]+o[f])%256],y+=String.fromCharCode(t.charCodeAt(c)^l);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var jj={print:4,modify:8,copy:16,"annot-forms":32};function Id(e,t,r,s){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(jj.perm!==void 0)throw new Error("Invalid permission: "+o);a+=jj[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^a)),this.encryptionKey=sy(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=ay(this.encryptionKey,this.padding)}function Md(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var a=e.charCodeAt(s);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[s]}return t}function Sj(e){if(Dr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,a){if(a=a||!1,typeof r!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[s,!!a],i},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var l=t[r][i];try{l[0].apply(e,s)}catch(o){Kt.console&&Br.error("jsPDF PubSub Error",o.message,o)}l[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Lg(e){if(!(this instanceof Lg))return new Lg(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Z6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ac(e,t,r,s,a){if(!(this instanceof Ac))return new Ac(e,t,r,s,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Z6.call(this,s,a)}function Jd(e,t,r,s,a){if(!(this instanceof Jd))return new Jd(e,t,r,s,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Z6.call(this,s,a)}function Rt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],l=[],o=1,c=16,d="S",u=null;Dr(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),s=s||"mm",r=(""+(r||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,x={},f={internal:{},__private__:{}};f.__private__.PubSub=Sj;var y="1.3",v=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(N){y=N};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return S};var b=f.__private__.getPageFormat=function(N){return S[N]};a=a||"a4";var j="compat",w="advanced",k=j;function R(){this.saveGraphicsState(),Z(new ft(se,0,0,-se,0,lo()*se).toString()+" cm"),this.setFontSize(this.getFontSize()/se),d="n",k=w}function W(){this.restoreGraphicsState(),d="S",k=j}var O=f.__private__.combineFontStyleAndFontWeight=function(N,U){if(N=="bold"&&U=="normal"||N=="bold"&&U==400||N=="normal"&&U=="italic"||N=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(N=U==400||U==="normal"?N==="italic"?"italic":"normal":U!=700&&U!=="bold"||N!=="normal"?(U==700?"bold":U)+""+N:"bold"),N};f.advancedAPI=function(N){var U=k===j;return U&&R.call(this),typeof N!="function"||(N(this),U&&W.call(this)),this},f.compatAPI=function(N){var U=k===w;return U&&W.call(this),typeof N!="function"||(N(this),U&&R.call(this)),this},f.isAdvancedAPI=function(){return k===w};var q,D=function(N){if(k!==w)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=f.roundToPrecision=f.__private__.roundToPrecision=function(N,U){var le=t||U;if(isNaN(N)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(le).replace(/0+$/,"")};q=f.hpf=f.__private__.hpf=typeof c=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return J(N,c)}:c==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return J(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return J(N,16)};var A=f.f2=f.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return J(N,2)},M=f.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return J(N,3)},ee=f.scale=f.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return k===j?N*se:k===w?N:void 0},E=function(N){return ee(function(U){return k===j?lo()-U:k===w?U:void 0}(N))};f.__private__.setPrecision=f.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(t=parseInt(N,10))};var ae,Y="00000000000000000000000000000000",de=f.__private__.getFileId=function(){return Y},T=f.__private__.setFileId=function(N){return Y=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(pn=new Id(u.userPermissions,u.userPassword,u.ownerPassword,Y)),Y};f.setFileId=function(N){return T(N),this},f.getFileId=function(){return de()};var V=f.__private__.convertDateToPDFDate=function(N){var U=N.getTimezoneOffset(),le=U<0?"+":"-",fe=Math.floor(Math.abs(U/60)),be=Math.abs(U%60),Te=[le,L(fe),"'",L(be),"'"].join("");return["D:",N.getFullYear(),L(N.getMonth()+1),L(N.getDate()),L(N.getHours()),L(N.getMinutes()),L(N.getSeconds()),Te].join("")},re=f.__private__.convertPDFDateToDate=function(N){var U=parseInt(N.substr(2,4),10),le=parseInt(N.substr(6,2),10)-1,fe=parseInt(N.substr(8,2),10),be=parseInt(N.substr(10,2),10),Te=parseInt(N.substr(12,2),10),Ue=parseInt(N.substr(14,2),10);return new Date(U,le,fe,be,Te,Ue,0)},he=f.__private__.setCreationDate=function(N){var U;if(N===void 0&&(N=new Date),N instanceof Date)U=V(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=N}return ae=U},C=f.__private__.getCreationDate=function(N){var U=ae;return N==="jsDate"&&(U=re(ae)),U};f.setCreationDate=function(N){return he(N),this},f.getCreationDate=function(N){return C(N)};var F,L=f.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},$=f.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},K=0,I=[],X=[],ne=0,ue=[],xe=[],ke=!1,Re=X;f.__private__.setCustomOutputDestination=function(N){ke=!0,Re=N};var We=function(N){ke||(Re=N)};f.__private__.resetCustomOutputDestination=function(){ke=!1,Re=X};var Z=f.__private__.out=function(N){return N=N.toString(),ne+=N.length+1,Re.push(N),Re},Ge=f.__private__.write=function(N){return Z(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},Lt=f.__private__.getArrayBuffer=function(N){for(var U=N.length,le=new ArrayBuffer(U),fe=new Uint8Array(le);U--;)fe[U]=N.charCodeAt(U);return le},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Me};var Ee=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(N){return Ee=k===w?N/se:N,this};var it,et=f.__private__.getFontSize=f.getFontSize=function(){return k===j?Ee:Ee*se},dt=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(N){return dt=N,this},f.__private__.getR2L=f.getR2L=function(){return dt};var lt,jt=f.__private__.setZoomMode=function(N){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))it=N;else if(isNaN(N)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');it=N}else it=parseInt(N,10)};f.__private__.getZoomMode=function(){return it};var Ht,ut=f.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');lt=N};f.__private__.getPageMode=function(){return lt};var Mt=f.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Ht=N};f.__private__.getLayoutMode=function(){return Ht},f.__private__.setDisplayMode=f.setDisplayMode=function(N,U,le){return jt(N),Mt(U),ut(le),this};var Gt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(N){if(Object.keys(Gt).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Gt[N]},f.__private__.getDocumentProperties=function(){return Gt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(N){for(var U in Gt)Gt.hasOwnProperty(U)&&N[U]&&(Gt[U]=N[U]);return this},f.__private__.setDocumentProperty=function(N,U){if(Object.keys(Gt).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Gt[N]=U};var st,se,ve,Pe,Fe,pe={},ze={},qe=[],Ve={},Yt={},xt={},pt={},cr=null,Wt=0,wt=[],dr=new Sj(f),Ft=e.hotfixes||[],Ut={},rr={},$r=[],ft=function N(U,le,fe,be,Te,Ue){if(!(this instanceof N))return new N(U,le,fe,be,Te,Ue);isNaN(U)&&(U=1),isNaN(le)&&(le=0),isNaN(fe)&&(fe=0),isNaN(be)&&(be=1),isNaN(Te)&&(Te=0),isNaN(Ue)&&(Ue=0),this._matrix=[U,le,fe,be,Te,Ue]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(N)},ft.prototype.multiply=function(N){var U=N.sx*this.sx+N.shy*this.shx,le=N.sx*this.shy+N.shy*this.sy,fe=N.shx*this.sx+N.sy*this.shx,be=N.shx*this.shy+N.sy*this.sy,Te=N.tx*this.sx+N.ty*this.shx+this.tx,Ue=N.tx*this.shy+N.ty*this.sy+this.ty;return new ft(U,le,fe,be,Te,Ue)},ft.prototype.decompose=function(){var N=this.sx,U=this.shy,le=this.shx,fe=this.sy,be=this.tx,Te=this.ty,Ue=Math.sqrt(N*N+U*U),Nt=(N/=Ue)*le+(U/=Ue)*fe;le-=N*Nt,fe-=U*Nt;var Et=Math.sqrt(le*le+fe*fe);return Nt/=Et,N*(fe/=Et)<U*(le/=Et)&&(N=-N,U=-U,Nt=-Nt,Ue=-Ue),{scale:new ft(Ue,0,0,Et,0,0),translate:new ft(1,0,0,1,be,Te),rotate:new ft(N,U,-U,N,0,0),skew:new ft(1,0,Nt,1,0,0)}},ft.prototype.toString=function(N){return this.join(" ")},ft.prototype.inversed=function(){var N=this.sx,U=this.shy,le=this.shx,fe=this.sy,be=this.tx,Te=this.ty,Ue=1/(N*fe-U*le),Nt=fe*Ue,Et=-U*Ue,Xt=-le*Ue,tr=N*Ue;return new ft(Nt,Et,Xt,tr,-Nt*be-Xt*Te,-Et*be-tr*Te)},ft.prototype.applyToPoint=function(N){var U=N.x*this.sx+N.y*this.shx+this.tx,le=N.x*this.shy+N.y*this.sy+this.ty;return new oa(U,le)},ft.prototype.applyToRectangle=function(N){var U=this.applyToPoint(N),le=this.applyToPoint(new oa(N.x+N.w,N.y+N.h));return new Ho(U.x,U.y,le.x-U.x,le.y-U.y)},ft.prototype.clone=function(){var N=this.sx,U=this.shy,le=this.shx,fe=this.sy,be=this.tx,Te=this.ty;return new ft(N,U,le,fe,be,Te)},f.Matrix=ft;var sn=f.matrixMult=function(N,U){return U.multiply(N)},_n=new ft(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=_n;var Mr=function(N,U){if(!Yt[N]){var le=(U instanceof Ac?"Sh":"P")+(Object.keys(Ve).length+1).toString(10);U.id=le,Yt[N]=le,Ve[le]=U,dr.publish("addPattern",U)}};f.ShadingPattern=Ac,f.TilingPattern=Jd,f.addShadingPattern=function(N,U){return D("addShadingPattern()"),Mr(N,U),this},f.beginTilingPattern=function(N){D("beginTilingPattern()"),ni(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},f.endTilingPattern=function(N,U){D("endTilingPattern()"),U.stream=xe[F].join(`
`),Mr(N,U),dr.publish("endTilingPattern",U),$r.pop().restore()};var Kr,zr=f.__private__.newObject=function(){var N=qr();return Ir(N,!0),N},qr=f.__private__.newObjectDeferred=function(){return K++,I[K]=function(){return ne},K},Ir=function(N,U){return U=typeof U=="boolean"&&U,I[N]=ne,U&&Z(N+" 0 obj"),N},ei=f.__private__.newAdditionalObject=function(){var N={objId:qr(),content:""};return ue.push(N),N},Ps=qr(),Jn=qr(),qs=f.__private__.decodeColorString=function(N){var U=N.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length!==5||U[4]!=="k"&&U[4]!=="K"||(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var le=parseFloat(U[0]);U=[le,le,le,"r"]}for(var fe="#",be=0;be<3;be++)fe+=("0"+Math.floor(255*parseFloat(U[be])).toString(16)).slice(-2);return fe},an=f.__private__.encodeColorString=function(N){var U;typeof N=="string"&&(N={ch1:N});var le=N.ch1,fe=N.ch2,be=N.ch3,Te=N.ch4,Ue=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var Nt=new X6(le);if(Nt.ok)le=Nt.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var Et=parseInt(le.substr(1),16);le=Et>>16&255,fe=Et>>8&255,be=255&Et}if(fe===void 0||Te===void 0&&le===fe&&fe===be)U=typeof le=="string"?le+" "+Ue[0]:N.precision===2?A(le/255)+" "+Ue[0]:M(le/255)+" "+Ue[0];else if(Te===void 0||Dr(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return["1.","1.","1.",Ue[1]].join(" ");U=typeof le=="string"?[le,fe,be,Ue[1]].join(" "):N.precision===2?[A(le/255),A(fe/255),A(be/255),Ue[1]].join(" "):[M(le/255),M(fe/255),M(be/255),Ue[1]].join(" ")}else U=typeof le=="string"?[le,fe,be,Te,Ue[2]].join(" "):N.precision===2?[A(le),A(fe),A(be),A(Te),Ue[2]].join(" "):[M(le),M(fe),M(be),M(Te),Ue[2]].join(" ");return U},Qt=f.__private__.getFilters=function(){return l},Qr=f.__private__.putStream=function(N){var U=(N=N||{}).data||"",le=N.filters||Qt(),fe=N.alreadyAppliedFilters||[],be=N.addLength1||!1,Te=U.length,Ue=N.objectId,Nt=function(Vn){return Vn};if(u!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Nt=pn.encryptor(Ue,0));var Et={};le===!0&&(le=["FlateEncode"]);var Xt=N.additionalKeyValues||[],tr=(Et=Rt.API.processDataByFilters!==void 0?Rt.API.processDataByFilters(U,le):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(Et.data.length!==0&&(Xt.push({key:"Length",value:Et.data.length}),be===!0&&Xt.push({key:"Length1",value:Te})),tr.length!=0)if(tr.split("/").length-1==1)Xt.push({key:"Filter",value:tr});else{Xt.push({key:"Filter",value:"["+tr+"]"});for(var yr=0;yr<Xt.length;yr+=1)if(Xt[yr].key==="DecodeParms"){for(var dn=[],Bn=0;Bn<Et.reverseChain.split("/").length-1;Bn+=1)dn.push("null");dn.push(Xt[yr].value),Xt[yr].value="["+dn.join(" ")+"]"}}Z("<<");for(var Hr=0;Hr<Xt.length;Hr++)Z("/"+Xt[Hr].key+" "+Xt[Hr].value);Z(">>"),Et.data.length!==0&&(Z("stream"),Z(Nt(Et.data)),Z("endstream"))},Vs=f.__private__.putPage=function(N){var U=N.number,le=N.data,fe=N.objId,be=N.contentsObjId;Ir(fe,!0),Z("<</Type /Page"),Z("/Parent "+N.rootDictionaryObjId+" 0 R"),Z("/Resources "+N.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(q(N.mediaBox.bottomLeftX))+" "+parseFloat(q(N.mediaBox.bottomLeftY))+" "+q(N.mediaBox.topRightX)+" "+q(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&Z("/CropBox ["+q(N.cropBox.bottomLeftX)+" "+q(N.cropBox.bottomLeftY)+" "+q(N.cropBox.topRightX)+" "+q(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&Z("/BleedBox ["+q(N.bleedBox.bottomLeftX)+" "+q(N.bleedBox.bottomLeftY)+" "+q(N.bleedBox.topRightX)+" "+q(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&Z("/TrimBox ["+q(N.trimBox.bottomLeftX)+" "+q(N.trimBox.bottomLeftY)+" "+q(N.trimBox.topRightX)+" "+q(N.trimBox.topRightY)+"]"),N.artBox!==null&&Z("/ArtBox ["+q(N.artBox.bottomLeftX)+" "+q(N.artBox.bottomLeftY)+" "+q(N.artBox.topRightX)+" "+q(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&Z("/UserUnit "+N.userUnit),dr.publish("putPage",{objId:fe,pageContext:wt[U],pageNumber:U,page:le}),Z("/Contents "+be+" 0 R"),Z(">>"),Z("endobj");var Te=le.join(`
`);return k===w&&(Te+=`
Q`),Ir(be,!0),Qr({data:Te,filters:Qt(),objectId:be}),Z("endobj"),fe},ce=f.__private__.putPages=function(){var N,U,le=[];for(N=1;N<=Wt;N++)wt[N].objId=qr(),wt[N].contentsObjId=qr();for(N=1;N<=Wt;N++)le.push(Vs({number:N,data:xe[N],objId:wt[N].objId,contentsObjId:wt[N].contentsObjId,mediaBox:wt[N].mediaBox,cropBox:wt[N].cropBox,bleedBox:wt[N].bleedBox,trimBox:wt[N].trimBox,artBox:wt[N].artBox,userUnit:wt[N].userUnit,rootDictionaryObjId:Ps,resourceDictionaryObjId:Jn}));Ir(Ps,!0),Z("<</Type /Pages");var fe="/Kids [";for(U=0;U<Wt;U++)fe+=le[U]+" 0 R ";Z(fe+"]"),Z("/Count "+Wt),Z(">>"),Z("endobj"),dr.publish("postPutPages")},Be=function(N){dr.publish("putFont",{font:N,out:Z,newObject:zr,putStream:Qr}),N.isAlreadyPutted!==!0&&(N.objectNumber=zr(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+Md(N.postScriptName)),Z("/Subtype /Type1"),typeof N.encoding=="string"&&Z("/Encoding /"+N.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},He=function(N){N.objectNumber=zr();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[q(N.x),q(N.y),q(N.x+N.width),q(N.y+N.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var le=N.pages[1].join(`
`);Qr({data:le,additionalKeyValues:U,objectId:N.objectNumber}),Z("endobj")},Ye=function(N,U){U||(U=21);var le=zr(),fe=function(Ue,Nt){var Et,Xt=[],tr=1/(Nt-1);for(Et=0;Et<1;Et+=tr)Xt.push(Et);if(Xt.push(1),Ue[0].offset!=0){var yr={offset:0,color:Ue[0].color};Ue.unshift(yr)}if(Ue[Ue.length-1].offset!=1){var dn={offset:1,color:Ue[Ue.length-1].color};Ue.push(dn)}for(var Bn="",Hr=0,Vn=0;Vn<Xt.length;Vn++){for(Et=Xt[Vn];Et>Ue[Hr+1].offset;)Hr++;var Un=Ue[Hr].offset,is=(Et-Un)/(Ue[Hr+1].offset-Un),co=Ue[Hr].color,ai=Ue[Hr+1].color;Bn+=$(Math.round((1-is)*co[0]+is*ai[0]).toString(16))+$(Math.round((1-is)*co[1]+is*ai[1]).toString(16))+$(Math.round((1-is)*co[2]+is*ai[2]).toString(16))}return Bn.trim()}(N.colors,U),be=[];be.push({key:"FunctionType",value:"0"}),be.push({key:"Domain",value:"[0.0 1.0]"}),be.push({key:"Size",value:"["+U+"]"}),be.push({key:"BitsPerSample",value:"8"}),be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qr({data:fe,additionalKeyValues:be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),Z("endobj"),N.objectNumber=zr(),Z("<< /ShadingType "+N.type),Z("/ColorSpace /DeviceRGB");var Te="/Coords ["+q(parseFloat(N.coords[0]))+" "+q(parseFloat(N.coords[1]))+" ";N.type===2?Te+=q(parseFloat(N.coords[2]))+" "+q(parseFloat(N.coords[3])):Te+=q(parseFloat(N.coords[2]))+" "+q(parseFloat(N.coords[3]))+" "+q(parseFloat(N.coords[4]))+" "+q(parseFloat(N.coords[5])),Z(Te+="]"),N.matrix&&Z("/Matrix ["+N.matrix.toString()+"]"),Z("/Function "+le+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},tt=function(N,U){var le=qr(),fe=zr();U.push({resourcesOid:le,objectOid:fe}),N.objectNumber=fe;var be=[];be.push({key:"Type",value:"/Pattern"}),be.push({key:"PatternType",value:"1"}),be.push({key:"PaintType",value:"1"}),be.push({key:"TilingType",value:"1"}),be.push({key:"BBox",value:"["+N.boundingBox.map(q).join(" ")+"]"}),be.push({key:"XStep",value:q(N.xStep)}),be.push({key:"YStep",value:q(N.yStep)}),be.push({key:"Resources",value:le+" 0 R"}),N.matrix&&be.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),Qr({data:N.stream,additionalKeyValues:be,objectId:N.objectNumber}),Z("endobj")},ct=function(N){for(var U in N.objectNumber=zr(),Z("<<"),N)switch(U){case"opacity":Z("/ca "+A(N[U]));break;case"stroke-opacity":Z("/CA "+A(N[U]))}Z(">>"),Z("endobj")},qt=function(N){Ir(N.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var U in Z("/Font <<"),pe)pe.hasOwnProperty(U)&&(m===!1||m===!0&&x.hasOwnProperty(U))&&Z("/"+U+" "+pe[U].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(Ve).length>0){for(var U in Z("/Shading <<"),Ve)Ve.hasOwnProperty(U)&&Ve[U]instanceof Ac&&Ve[U].objectNumber>=0&&Z("/"+U+" "+Ve[U].objectNumber+" 0 R");dr.publish("putShadingPatternDict"),Z(">>")}}(),function(U){if(Object.keys(Ve).length>0){for(var le in Z("/Pattern <<"),Ve)Ve.hasOwnProperty(le)&&Ve[le]instanceof f.TilingPattern&&Ve[le].objectNumber>=0&&Ve[le].objectNumber<U&&Z("/"+le+" "+Ve[le].objectNumber+" 0 R");dr.publish("putTilingPatternDict"),Z(">>")}}(N.objectOid),function(){if(Object.keys(xt).length>0){var U;for(U in Z("/ExtGState <<"),xt)xt.hasOwnProperty(U)&&xt[U].objectNumber>=0&&Z("/"+U+" "+xt[U].objectNumber+" 0 R");dr.publish("putGStateDict"),Z(">>")}}(),function(){for(var U in Z("/XObject <<"),Ut)Ut.hasOwnProperty(U)&&Ut[U].objectNumber>=0&&Z("/"+U+" "+Ut[U].objectNumber+" 0 R");dr.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},mt=function(N){ze[N.fontName]=ze[N.fontName]||{},ze[N.fontName][N.fontStyle]=N.id},Pt=function(N,U,le,fe,be){var Te={id:"F"+(Object.keys(pe).length+1).toString(10),postScriptName:N,fontName:U,fontStyle:le,encoding:fe,isStandardFont:be||!1,metadata:{}};return dr.publish("addFont",{font:Te,instance:this}),pe[Te.id]=Te,mt(Te),Te.id},$t=f.__private__.pdfEscape=f.pdfEscape=function(N,U){return function(le,fe){var be,Te,Ue,Nt,Et,Xt,tr,yr,dn;if(Ue=(fe=fe||{}).sourceEncoding||"Unicode",Et=fe.outputEncoding,(fe.autoencode||Et)&&pe[st].metadata&&pe[st].metadata[Ue]&&pe[st].metadata[Ue].encoding&&(Nt=pe[st].metadata[Ue].encoding,!Et&&pe[st].encoding&&(Et=pe[st].encoding),!Et&&Nt.codePages&&(Et=Nt.codePages[0]),typeof Et=="string"&&(Et=Nt[Et]),Et)){for(tr=!1,Xt=[],be=0,Te=le.length;be<Te;be++)(yr=Et[le.charCodeAt(be)])?Xt.push(String.fromCharCode(yr)):Xt.push(le[be]),Xt[be].charCodeAt(0)>>8&&(tr=!0);le=Xt.join("")}for(be=le.length;tr===void 0&&be!==0;)le.charCodeAt(be-1)>>8&&(tr=!0),be--;if(!tr)return le;for(Xt=fe.noBOM?[]:[254,255],be=0,Te=le.length;be<Te;be++){if((dn=(yr=le.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+le+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xt.push(dn),Xt.push(yr-(dn<<8))}return String.fromCharCode.apply(void 0,Xt)}(N,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},At=f.__private__.beginPage=function(N){xe[++Wt]=[],wt[Wt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},Sr(Wt),We(xe[F])},at=function(N,U){var le,fe,be;switch(r=U||r,typeof N=="string"&&(le=b(N.toLowerCase()),Array.isArray(le)&&(fe=le[0],be=le[1])),Array.isArray(N)&&(fe=N[0]*se,be=N[1]*se),isNaN(fe)&&(fe=a[0],be=a[1]),(fe>14400||be>14400)&&(Br.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),be=Math.min(14400,be)),a=[fe,be],r.substr(0,1)){case"l":be>fe&&(a=[be,fe]);break;case"p":fe>be&&(a=[be,fe])}At(a),Vt(fc),Z(Ti),Bt!==0&&Z(Bt+" J"),rt!==0&&Z(rt+" j"),dr.publish("addPage",{pageNumber:Wt})},Ot=function(N){N>0&&N<=Wt&&(xe.splice(N,1),wt.splice(N,1),Wt--,F>Wt&&(F=Wt),this.setPage(F))},Sr=function(N){N>0&&N<=Wt&&(F=N)},on=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return xe.length-1},Vr=function(N,U,le){var fe,be=void 0;return le=le||{},N=N!==void 0?N:pe[st].fontName,U=U!==void 0?U:pe[st].fontStyle,fe=N.toLowerCase(),ze[fe]!==void 0&&ze[fe][U]!==void 0?be=ze[fe][U]:ze[N]!==void 0&&ze[N][U]!==void 0?be=ze[N][U]:le.disableWarning===!1&&Br.warn("Unable to look up font label for font '"+N+"', '"+U+"'. Refer to getFontList() for available fonts."),be||le.noFallback||(be=ze.times[U])==null&&(be=ze.times.normal),be},Pr=f.__private__.putInfo=function(){var N=zr(),U=function(fe){return fe};for(var le in u!==null&&(U=pn.encryptor(N,0)),Z("<<"),Z("/Producer ("+$t(U("jsPDF "+Rt.version))+")"),Gt)Gt.hasOwnProperty(le)&&Gt[le]&&Z("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+$t(U(Gt[le]))+")");Z("/CreationDate ("+$t(U(ae))+")"),Z(">>"),Z("endobj")},pr=f.__private__.putCatalog=function(N){var U=(N=N||{}).rootDictionaryObjId||Ps;switch(zr(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+U+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+it;le.substr(le.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+A(it)+"]")}switch(Ht||(Ht="continuous"),Ht){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}lt&&Z("/PageMode /"+lt),dr.publish("putCatalog"),Z(">>"),Z("endobj")},aa=f.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(K+1)),Z("/Root "+K+" 0 R"),Z("/Info "+(K-1)+" 0 R"),u!==null&&Z("/Encrypt "+pn.oid+" 0 R"),Z("/ID [ <"+Y+"> <"+Y+"> ]"),Z(">>")},_t=f.__private__.putHeader=function(){Z("%PDF-"+y),Z("%")},dc=f.__private__.putXRef=function(){var N="0000000000";Z("xref"),Z("0 "+(K+1)),Z("0000000000 65535 f ");for(var U=1;U<=K;U++)typeof I[U]=="function"?Z((N+I[U]()).slice(-10)+" 00000 n "):I[U]!==void 0?Z((N+I[U]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},La=f.__private__.buildDocument=function(){var N;K=0,ne=0,X=[],I=[],ue=[],Ps=qr(),Jn=qr(),We(X),dr.publish("buildDocument"),_t(),ce(),function(){dr.publish("putAdditionalObjects");for(var le=0;le<ue.length;le++){var fe=ue[le];Ir(fe.objId,!0),Z(fe.content),Z("endobj")}dr.publish("postPutAdditionalObjects")}(),N=[],function(){for(var le in pe)pe.hasOwnProperty(le)&&(m===!1||m===!0&&x.hasOwnProperty(le))&&Be(pe[le])}(),function(){var le;for(le in xt)xt.hasOwnProperty(le)&&ct(xt[le])}(),function(){for(var le in Ut)Ut.hasOwnProperty(le)&&He(Ut[le])}(),function(le){var fe;for(fe in Ve)Ve.hasOwnProperty(fe)&&(Ve[fe]instanceof Ac?Ye(Ve[fe]):Ve[fe]instanceof Jd&&tt(Ve[fe],le))}(N),dr.publish("putResources"),N.forEach(qt),qt({resourcesOid:Jn,objectOid:Number.MAX_SAFE_INTEGER}),dr.publish("postPutResources"),u!==null&&(pn.oid=zr(),Z("<<"),Z("/Filter /Standard"),Z("/V "+pn.v),Z("/R "+pn.r),Z("/U <"+pn.toHexString(pn.U)+">"),Z("/O <"+pn.toHexString(pn.O)+">"),Z("/P "+pn.P),Z(">>"),Z("endobj")),Pr(),pr();var U=ne;return dc(),aa(),Z("startxref"),Z(""+U),Z("%%EOF"),We(xe[F]),X.join(`
`)},ao=f.__private__.getBlob=function(N){return new Blob([Lt(N)],{type:"application/pdf"})},pd=f.output=f.__private__.output=(Kr=function(N,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",N){case void 0:return La();case"save":f.save(U.filename);break;case"arraybuffer":return Lt(La());case"blob":return ao(La());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(ao(La()))||void 0;Br.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",fe=La();try{le=wj(fe)}catch{le=wj(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+U.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(be=U.pdfObjectUrl,Te="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+be+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",Nt=Kt.open();return Nt!==null&&Nt.document.write(Ue),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',Xt=Kt.open();if(Xt!==null){Xt.document.write(Et);var tr=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=U.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tr.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',dn=Kt.open();if(dn!==null&&(dn.document.write(yr),dn.document.title=U.filename),dn||typeof safari>"u")return dn;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",U);default:return null}},Kr.foo=function(){try{return Kr.apply(this,arguments)}catch(le){var N=le.stack||"";~N.indexOf(" at ")&&(N=N.split(" at ")[1]);var U="Error in function "+N.split(`
`)[0].split("<")[0]+": "+le.message;if(!Kt.console)throw new Error(U);Kt.console.error(U,le),Kt.alert&&alert(U)}},Kr.foo.bar=Kr,Kr.foo),Hs=function(N){return Array.isArray(Ft)===!0&&Ft.indexOf(N)>-1};switch(s){case"pt":se=1;break;case"mm":se=72/25.4;break;case"cm":se=72/2.54;break;case"in":se=72;break;case"px":se=Hs("px_scaling")==1?.75:96/72;break;case"pc":case"em":se=12;break;case"ex":se=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);se=s}var pn=null;he(),T();var ti=f.__private__.getPageInfo=f.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[N].objId,pageNumber:N,pageContext:wt[N]}},Ws=f.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in wt)if(wt[U].objId===N)break;return ti(U)},Zu=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:wt[F].objId,pageNumber:F,pageContext:wt[F]}};f.addPage=function(){return at.apply(this,arguments),this},f.setPage=function(){return Sr.apply(this,arguments),We.call(this,xe[F]),this},f.insertPage=function(N){return this.addPage(),this.movePage(F,N),this},f.movePage=function(N,U){var le,fe;if(N>U){le=xe[N],fe=wt[N];for(var be=N;be>U;be--)xe[be]=xe[be-1],wt[be]=wt[be-1];xe[U]=le,wt[U]=fe,this.setPage(U)}else if(N<U){le=xe[N],fe=wt[N];for(var Te=N;Te<U;Te++)xe[Te]=xe[Te+1],wt[Te]=wt[Te+1];xe[U]=le,wt[U]=fe,this.setPage(U)}return this},f.deletePage=function(){return Ot.apply(this,arguments),this},f.__private__.text=f.text=function(N,U,le,fe,be){var Te,Ue,Nt,Et,Xt,tr,yr,dn,Bn,Hr=(fe=fe||{}).scope||this;if(typeof N=="number"&&typeof U=="number"&&(typeof le=="string"||Array.isArray(le))){var Vn=le;le=U,U=N,N=Vn}if(arguments[3]instanceof ft==0?(Nt=arguments[4],Et=arguments[5],Dr(yr=arguments[3])==="object"&&yr!==null||(typeof Nt=="string"&&(Et=Nt,Nt=null),typeof yr=="string"&&(Et=yr,yr=null),typeof yr=="number"&&(Nt=yr,yr=null),fe={flags:yr,angle:Nt,align:Et})):(D("The transform parameter of text() with a Matrix value"),Bn=be),isNaN(U)||isNaN(le)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Hr;var Un,is="",co=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:oo,ai=Hr.internal.scaleFactor;function uo(Ar){return Ar=Ar.split("	").join(Array(fe.TabLen||9).join(" ")),$t(Ar,yr)}function oh(Ar){for(var Fr,kn=Ar.concat(),Hn=[],mo=kn.length;mo--;)typeof(Fr=kn.shift())=="string"?Hn.push(Fr):Array.isArray(Ar)&&(Fr.length===1||Fr[1]===void 0&&Fr[2]===void 0)?Hn.push(Fr[0]):Hn.push([Fr[0],Fr[1],Fr[2]]);return Hn}function wd(Ar,Fr){var kn;if(typeof Ar=="string")kn=Fr(Ar)[0];else if(Array.isArray(Ar)){for(var Hn,mo,xh=Ar.concat(),Sd=[],vm=xh.length;vm--;)typeof(Hn=xh.shift())=="string"?Sd.push(Fr(Hn)[0]):Array.isArray(Hn)&&typeof Hn[0]=="string"&&(mo=Fr(Hn[0],Hn[1],Hn[2]),Sd.push([mo[0],mo[1],mo[2]]));kn=Sd}return kn}var Wo=!1,pc=!0;if(typeof N=="string")Wo=!0;else if(Array.isArray(N)){var gc=N.concat();Ue=[];for(var Go,os=gc.length;os--;)(typeof(Go=gc.shift())!="string"||Array.isArray(Go)&&typeof Go[0]!="string")&&(pc=!1);Wo=pc}if(Wo===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var xc=Ee/Hr.internal.scaleFactor,vc=xc*(co-1);switch(fe.baseline){case"bottom":le-=vc;break;case"top":le+=xc-vc;break;case"hanging":le+=xc-2*vc;break;case"middle":le+=xc/2-vc}if((tr=fe.maxWidth||0)>0&&(typeof N=="string"?N=Hr.splitTextToSize(N,tr):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(Ar,Fr){return Ar.concat(Hr.splitTextToSize(Fr,tr))},[]))),Te={text:N,x:U,y:le,options:fe,mutex:{pdfEscape:$t,activeFontKey:st,fonts:pe,activeFontSize:Ee}},dr.publish("preProcessText",Te),N=Te.text,Nt=(fe=Te.options).angle,Bn instanceof ft==0&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,fe.rotationDirection===0&&(Nt=-Nt),k===w&&(Nt=-Nt);var lh=Math.cos(Nt),ch=Math.sin(Nt);Bn=new ft(lh,ch,-ch,lh,0,0)}else Nt&&Nt instanceof ft&&(Bn=Nt);k!==w||Bn||(Bn=_n),(Xt=fe.charSpace||zt)!==void 0&&(is+=q(ee(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(dn=fe.horizontalScale)!==void 0&&(is+=q(100*dn)+` Tz
`),fe.lang;var As=-1,ho=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,Nd=Hr.internal.getCurrentPageInfo().pageContext;switch(ho){case 0:case!1:case"fill":As=0;break;case 1:case!0:case"stroke":As=1;break;case 2:case"fillThenStroke":As=2;break;case 3:case"invisible":As=3;break;case 4:case"fillAndAddForClipping":As=4;break;case 5:case"strokeAndAddPathForClipping":As=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":As=6;break;case 7:case"addToPathForClipping":As=7}var gm=Nd.usedRenderingMode!==void 0?Nd.usedRenderingMode:-1;As!==-1?is+=As+` Tr
`:gm!==-1&&(is+=`0 Tr
`),As!==-1&&(Nd.usedRenderingMode=As),Et=fe.align||"left";var Ma,yc=Ee*co,dh=Hr.internal.pageSize.getWidth(),uh=pe[st];Xt=fe.charSpace||zt,tr=fe.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var Yo=[],bc=function(Ar){return Hr.getStringUnitWidth(Ar,{font:uh,charSpace:Xt,fontSize:Ee,doKerning:!1})*Ee/ai};if(Object.prototype.toString.call(N)==="[object Array]"){var la;Ue=oh(N),Et!=="left"&&(Ma=Ue.map(bc));var ca,Ko=0;if(Et==="right"){U-=Ma[0],N=[],os=Ue.length;for(var fo=0;fo<os;fo++)fo===0?(ca=ri(U),la=Da(le)):(ca=ee(Ko-Ma[fo]),la=-yc),N.push([Ue[fo],ca,la]),Ko=Ma[fo]}else if(Et==="center"){U-=Ma[0]/2,N=[],os=Ue.length;for(var Qo=0;Qo<os;Qo++)Qo===0?(ca=ri(U),la=Da(le)):(ca=ee((Ko-Ma[Qo])/2),la=-yc),N.push([Ue[Qo],ca,la]),Ko=Ma[Qo]}else if(Et==="left"){N=[],os=Ue.length;for(var hh=0;hh<os;hh++)N.push(Ue[hh])}else if(Et==="justify"&&uh.encoding==="Identity-H"){N=[],os=Ue.length,tr=tr!==0?tr:dh;for(var jd=0,Cn=0;Cn<os;Cn++)if(la=Cn===0?Da(le):-yc,ca=Cn===0?ri(U):jd,Cn<os-1){var xm=ee((tr-Ma[Cn])/(Ue[Cn].split(" ").length-1)),Ri=Ue[Cn].split(" ");N.push([Ri[0]+" ",ca,la]),jd=0;for(var Ii=1;Ii<Ri.length;Ii++){var fh=(bc(Ri[Ii-1]+" "+Ri[Ii])-bc(Ri[Ii]))*ai+xm;Ii==Ri.length-1?N.push([Ri[Ii],fh,0]):N.push([Ri[Ii]+" ",fh,0]),jd-=fh}}else N.push([Ue[Cn],ca,la]);N.push(["",jd,0])}else{if(Et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],os=Ue.length,tr=tr!==0?tr:dh,Cn=0;Cn<os;Cn++){la=Cn===0?Da(le):-yc,ca=Cn===0?ri(U):0;var mh=Ue[Cn].split(" ").length-1,ph=mh>0?(tr-Ma[Cn])/mh:0;Cn<os-1?Yo.push(q(ee(ph))):Yo.push(0),N.push([Ue[Cn],ca,la])}}}(typeof fe.R2L=="boolean"?fe.R2L:dt)===!0&&(N=wd(N,function(Ar,Fr,kn){return[Ar.split("").reverse().join(""),Fr,kn]})),Te={text:N,x:U,y:le,options:fe,mutex:{pdfEscape:$t,activeFontKey:st,fonts:pe,activeFontSize:Ee}},dr.publish("postProcessText",Te),N=Te.text,Un=Te.mutex.isHex||!1;var gh=pe[st].encoding;gh!=="WinAnsiEncoding"&&gh!=="StandardEncoding"||(N=wd(N,function(Ar,Fr,kn){return[uo(Ar),Fr,kn]})),Ue=oh(N),N=[];for(var Xo,Jo,Zo,wc=Array.isArray(Ue[0])?1:0,el="",Nc=function(Ar,Fr,kn){var Hn="";return kn instanceof ft?(kn=typeof fe.angle=="number"?sn(kn,new ft(1,0,0,1,Ar,Fr)):sn(new ft(1,0,0,1,Ar,Fr),kn),k===w&&(kn=sn(new ft(1,0,0,-1,0,0),kn)),Hn=kn.join(" ")+` Tm
`):Hn=q(Ar)+" "+q(Fr)+` Td
`,Hn},Fa=0;Fa<Ue.length;Fa++){switch(el="",wc){case 1:Zo=(Un?"<":"(")+Ue[Fa][0]+(Un?">":")"),Xo=parseFloat(Ue[Fa][1]),Jo=parseFloat(Ue[Fa][2]);break;case 0:Zo=(Un?"<":"(")+Ue[Fa]+(Un?">":")"),Xo=ri(U),Jo=Da(le)}Yo!==void 0&&Yo[Fa]!==void 0&&(el=Yo[Fa]+` Tw
`),Fa===0?N.push(el+Nc(Xo,Jo,Bn)+Zo):wc===0?N.push(el+Zo):wc===1&&N.push(el+Nc(Xo,Jo,Bn)+Zo)}N=wc===0?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var Mi=`BT
/`;return Mi+=st+" "+Ee+` Tf
`,Mi+=q(Ee*co)+` TL
`,Mi+=Ne+`
`,Mi+=is,Mi+=N,Z(Mi+="ET"),x[st]=!0,Hr};var eh=f.__private__.clip=f.clip=function(N){return Z(N==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return eh("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Z("n"),this};var Ta=f.__private__.isValidStyle=function(N){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(U=!0),U};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(N){return Ta(N)&&(d=N),this};var gd=f.__private__.getStyle=f.getStyle=function(N){var U=d;switch(N){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=N}return U},xd=f.close=function(){return Z("h"),this};f.stroke=function(){return Z("S"),this},f.fill=function(N){return zo("f",N),this},f.fillEvenOdd=function(N){return zo("f*",N),this},f.fillStroke=function(N){return zo("B",N),this},f.fillStrokeEvenOdd=function(N){return zo("B*",N),this};var zo=function(N,U){Dr(U)==="object"?qo(U,N):Z(N)},io=function(N){N===null||k===w&&N===void 0||(N=gd(N),Z(N))};function th(N,U,le,fe,be){var Te=new Jd(U||this.boundingBox,le||this.xStep,fe||this.yStep,this.gState,be||this.matrix);Te.stream=this.stream;var Ue=N+"$$"+this.cloneIndex+++"$$";return Mr(Ue,Te),Te}var qo=function(N,U){var le=Yt[N.key],fe=Ve[le];if(fe instanceof Ac)Z("q"),Z(rh(U)),fe.gState&&f.setGState(fe.gState),Z(N.matrix.toString()+" cm"),Z("/"+le+" sh"),Z("Q");else if(fe instanceof Jd){var be=new ft(1,0,0,-1,0,lo());N.matrix&&(be=be.multiply(N.matrix||_n),le=th.call(fe,N.key,N.boundingBox,N.xStep,N.yStep,be).id),Z("q"),Z("/Pattern cs"),Z("/"+le+" scn"),fe.gState&&f.setGState(fe.gState),Z(U),Z("Q")}},rh=function(N){switch(N){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},uc=f.moveTo=function(N,U){return Z(q(ee(N))+" "+q(E(U))+" m"),this},hc=f.lineTo=function(N,U){return Z(q(ee(N))+" "+q(E(U))+" l"),this},ia=f.curveTo=function(N,U,le,fe,be,Te){return Z([q(ee(N)),q(E(U)),q(ee(le)),q(E(fe)),q(ee(be)),q(E(Te)),"c"].join(" ")),this};f.__private__.line=f.line=function(N,U,le,fe,be){if(isNaN(N)||isNaN(U)||isNaN(le)||isNaN(fe)||!Ta(be))throw new Error("Invalid arguments passed to jsPDF.line");return k===j?this.lines([[le-N,fe-U]],N,U,[1,1],be||"S"):this.lines([[le-N,fe-U]],N,U,[1,1]).stroke()},f.__private__.lines=f.lines=function(N,U,le,fe,be,Te){var Ue,Nt,Et,Xt,tr,yr,dn,Bn,Hr,Vn,Un,is;if(typeof N=="number"&&(is=le,le=U,U=N,N=is),fe=fe||[1,1],Te=Te||!1,isNaN(U)||isNaN(le)||!Array.isArray(N)||!Array.isArray(fe)||!Ta(be)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(uc(U,le),Ue=fe[0],Nt=fe[1],Xt=N.length,Vn=U,Un=le,Et=0;Et<Xt;Et++)(tr=N[Et]).length===2?(Vn=tr[0]*Ue+Vn,Un=tr[1]*Nt+Un,hc(Vn,Un)):(yr=tr[0]*Ue+Vn,dn=tr[1]*Nt+Un,Bn=tr[2]*Ue+Vn,Hr=tr[3]*Nt+Un,Vn=tr[4]*Ue+Vn,Un=tr[5]*Nt+Un,ia(yr,dn,Bn,Hr,Vn,Un));return Te&&xd(),io(be),this},f.path=function(N){for(var U=0;U<N.length;U++){var le=N[U],fe=le.c;switch(le.op){case"m":uc(fe[0],fe[1]);break;case"l":hc(fe[0],fe[1]);break;case"c":ia.apply(this,fe);break;case"h":xd()}}return this},f.__private__.rect=f.rect=function(N,U,le,fe,be){if(isNaN(N)||isNaN(U)||isNaN(le)||isNaN(fe)||!Ta(be))throw new Error("Invalid arguments passed to jsPDF.rect");return k===j&&(fe=-fe),Z([q(ee(N)),q(E(U)),q(ee(le)),q(ee(fe)),"re"].join(" ")),io(be),this},f.__private__.triangle=f.triangle=function(N,U,le,fe,be,Te,Ue){if(isNaN(N)||isNaN(U)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(Te)||!Ta(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-N,fe-U],[be-le,Te-fe],[N-be,U-Te]],N,U,[1,1],Ue,!0),this},f.__private__.roundedRect=f.roundedRect=function(N,U,le,fe,be,Te,Ue){if(isNaN(N)||isNaN(U)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(Te)||!Ta(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return be=Math.min(be,.5*le),Te=Math.min(Te,.5*fe),this.lines([[le-2*be,0],[be*Nt,0,be,Te-Te*Nt,be,Te],[0,fe-2*Te],[0,Te*Nt,-be*Nt,Te,-be,Te],[2*be-le,0],[-be*Nt,0,-be,-Te*Nt,-be,-Te],[0,2*Te-fe],[0,-Te*Nt,be*Nt,-Te,be,-Te]],N+be,U,[1,1],Ue,!0),this},f.__private__.ellipse=f.ellipse=function(N,U,le,fe,be){if(isNaN(N)||isNaN(U)||isNaN(le)||isNaN(fe)||!Ta(be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*le,Ue=4/3*(Math.SQRT2-1)*fe;return uc(N+le,U),ia(N+le,U-Ue,N+Te,U-fe,N,U-fe),ia(N-Te,U-fe,N-le,U-Ue,N-le,U),ia(N-le,U+Ue,N-Te,U+fe,N,U+fe),ia(N+Te,U+fe,N+le,U+Ue,N+le,U),io(be),this},f.__private__.circle=f.circle=function(N,U,le,fe){if(isNaN(N)||isNaN(U)||isNaN(le)||!Ta(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,U,le,le,fe)},f.setFont=function(N,U,le){return le&&(U=O(U,le)),st=Vr(N,U,{disableWarning:!1}),this};var nh=f.__private__.getFont=f.getFont=function(){return pe[Vr.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var N,U,le={};for(N in ze)if(ze.hasOwnProperty(N))for(U in le[N]=[],ze[N])ze[N].hasOwnProperty(U)&&le[N].push(U);return le},f.addFont=function(N,U,le,fe,be){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?be=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(le=O(le,fe)),Pt.call(this,N,U,le,be=be||"Identity-H")};var oo,fc=e.lineWidth||.200025,vd=f.__private__.getLineWidth=f.getLineWidth=function(){return fc},Vt=f.__private__.setLineWidth=f.setLineWidth=function(N){return fc=N,Z(q(ee(N))+" w"),this};f.__private__.setLineDash=Rt.API.setLineDash=Rt.API.setLineDashPattern=function(N,U){if(N=N||[],U=U||0,isNaN(U)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(le){return q(ee(le))}).join(" "),U=q(ee(U)),Z("["+N+"] "+U+" d"),this};var sh=f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*oo};f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*oo};var yd=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(oo=N),this},ah=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return oo};yd(e.lineHeight);var ri=f.__private__.getHorizontalCoordinate=function(N){return ee(N)},Da=f.__private__.getVerticalCoordinate=function(N){return k===w?N:wt[F].mediaBox.topRightY-wt[F].mediaBox.bottomLeftY-ee(N)},mc=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(N){return q(ri(N))},Vo=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(N){return q(Da(N))},Ti=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return qs(Ti)},f.__private__.setStrokeColor=f.setDrawColor=function(N,U,le,fe){return Ti=an({ch1:N,ch2:U,ch3:le,ch4:fe,pdfColorType:"draw",precision:2}),Z(Ti),this};var B=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return qs(B)},f.__private__.setFillColor=f.setFillColor=function(N,U,le,fe){return B=an({ch1:N,ch2:U,ch3:le,ch4:fe,pdfColorType:"fill",precision:2}),Z(B),this};var Ne=e.textColor||"0 g",Xe=f.__private__.getTextColor=f.getTextColor=function(){return qs(Ne)};f.__private__.setTextColor=f.setTextColor=function(N,U,le,fe){return Ne=an({ch1:N,ch2:U,ch3:le,ch4:fe,pdfColorType:"text",precision:3}),this};var zt=e.charSpace,It=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(zt||0)};f.__private__.setCharSpace=f.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return zt=N,this};var Bt=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(N){var U=f.CapJoinStyles[N];if(U===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bt=U,Z(U+" J"),this};var rt=0;f.__private__.setLineJoin=f.setLineJoin=function(N){var U=f.CapJoinStyles[N];if(U===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rt=U,Z(U+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(q(ee(N))+" M"),this},f.GState=Lg,f.setGState=function(N){(N=typeof N=="string"?xt[pt[N]]:Tt(null,N)).equals(cr)||(Z("/"+N.id+" gs"),cr=N)};var Tt=function(N,U){if(!N||!pt[N]){var le=!1;for(var fe in xt)if(xt.hasOwnProperty(fe)&&xt[fe].equals(U)){le=!0;break}if(le)U=xt[fe];else{var be="GS"+(Object.keys(xt).length+1).toString(10);xt[be]=U,U.id=be}return N&&(pt[N]=U.id),dr.publish("addGState",U),U}};f.addGState=function(N,U){return Tt(N,U),this},f.saveGraphicsState=function(){return Z("q"),qe.push({key:st,size:Ee,color:Ne}),this},f.restoreGraphicsState=function(){Z("Q");var N=qe.pop();return st=N.key,Ee=N.size,Ne=N.color,cr=null,this},f.setCurrentTransformationMatrix=function(N){return Z(N.toString()+" cm"),this},f.comment=function(N){return Z("#"+N),this};var oa=function(N,U){var le=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(Te){isNaN(Te)||(le=parseFloat(Te))}});var fe=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Te){isNaN(Te)||(fe=parseFloat(Te))}});var be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return be},set:function(Te){be=Te.toString()}}),this},Ho=function(N,U,le,fe){oa.call(this,N,U),this.type="rect";var be=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return be},set:function(Ue){isNaN(Ue)||(be=parseFloat(Ue))}});var Te=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function(Ue){isNaN(Ue)||(Te=parseFloat(Ue))}}),this},Ra=function(){this.page=Wt,this.currentPage=F,this.pages=xe.slice(0),this.pagesContext=wt.slice(0),this.x=ve,this.y=Pe,this.matrix=Fe,this.width=as(F),this.height=ih(F),this.outputDestination=Re,this.id="",this.objectNumber=-1};Ra.prototype.restore=function(){Wt=this.page,F=this.currentPage,wt=this.pagesContext,xe=this.pages,ve=this.x,Pe=this.y,Fe=this.matrix,bd(F,this.width),Ia(F,this.height),Re=this.outputDestination};var ni=function(N,U,le,fe,be){$r.push(new Ra),Wt=F=0,xe=[],ve=N,Pe=U,Fe=be,At([le,fe])};for(var gn in f.beginFormObject=function(N,U,le,fe,be){return ni(N,U,le,fe,be),this},f.endFormObject=function(N){return function(U){if(rr[U])$r.pop().restore();else{var le=new Ra,fe="Xo"+(Object.keys(Ut).length+1).toString(10);le.id=fe,rr[U]=fe,Ut[fe]=le,dr.publish("addFormObject",le),$r.pop().restore()}}(N),this},f.doFormObject=function(N,U){var le=Ut[rr[N]];return Z("q"),Z(U.toString()+" cm"),Z("/"+le.id+" Do"),Z("Q"),this},f.getFormObject=function(N){var U=Ut[rr[N]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},f.save=function(N,U){return N=N||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(Pc(ao(La()),N),typeof Pc.unload=="function"&&Kt.setTimeout&&setTimeout(Pc.unload,911),this):new Promise(function(le,fe){try{var be=Pc(ao(La()),N);typeof Pc.unload=="function"&&Kt.setTimeout&&setTimeout(Pc.unload,911),le(be)}catch(Te){fe(Te.message)}})},Rt.API)Rt.API.hasOwnProperty(gn)&&(gn==="events"&&Rt.API.events.length?function(N,U){var le,fe,be;for(be=U.length-1;be!==-1;be--)le=U[be][0],fe=U[be][1],N.subscribe.apply(N,[le].concat(typeof fe=="function"?[fe]:fe))}(dr,Rt.API.events):f[gn]=Rt.API[gn]);function as(N){return wt[N].mediaBox.topRightX-wt[N].mediaBox.bottomLeftX}function bd(N,U){wt[N].mediaBox.topRightX=U+wt[N].mediaBox.bottomLeftX}function ih(N){return wt[N].mediaBox.topRightY-wt[N].mediaBox.bottomLeftY}function Ia(N,U){wt[N].mediaBox.topRightY=U+wt[N].mediaBox.bottomLeftY}var Di=f.getPageWidth=function(N){return as(N=N||F)/se},si=f.setPageWidth=function(N,U){bd(N,U*se)},lo=f.getPageHeight=function(N){return ih(N=N||F)/se},pm=f.setPageHeight=function(N,U){Ia(N,U*se)};return f.internal={pdfEscape:$t,getStyle:gd,getFont:nh,getFontSize:et,getCharSpace:It,getTextColor:Xe,getLineHeight:sh,getLineHeightFactor:ah,getLineWidth:vd,write:Ge,getHorizontalCoordinate:ri,getVerticalCoordinate:Da,getCoordinateString:mc,getVerticalCoordinateString:Vo,collections:{},newObject:zr,newAdditionalObject:ei,newObjectDeferred:qr,newObjectDeferredBegin:Ir,getFilters:Qt,putStream:Qr,events:dr,scaleFactor:se,pageSize:{getWidth:function(){return Di(F)},setWidth:function(N){si(F,N)},getHeight:function(){return lo(F)},setHeight:function(N){pm(F,N)}},encryptionOptions:u,encryption:pn,getEncryptor:function(N){return u!==null?pn.encryptor(N,0):function(U){return U}},output:pd,getNumberOfPages:on,get pages(){return xe},out:Z,f2:A,f3:M,getPageInfo:ti,getPageInfoByObjId:Ws,getCurrentPageInfo:Zu,getPDFVersion:v,Point:oa,Rectangle:Ho,Matrix:ft,hasHotfix:Hs},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Di(F)},set:function(N){si(F,N)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return lo(F)},set:function(N){pm(F,N)},enumerable:!0,configurable:!0}),(function(N){for(var U=0,le=Me.length;U<le;U++){var fe=Pt.call(this,N[U][0],N[U][1],N[U][2],Me[U][3],!0);m===!1&&(x[fe]=!0);var be=N[U][0].split("-");mt({id:fe,fontName:be[0],fontStyle:be[1]||""})}dr.publish("addFonts",{fonts:pe,dictionary:ze})}).call(f,Me),st="F1",at(a,r),dr.publish("initialized"),f}Id.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Id.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Id.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Id.prototype.processOwnerPassword=function(e,t){return ay(sy(t).substr(0,5),e)},Id.prototype.encryptor=function(e,t){var r=sy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return ay(r,s)}},Lg.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Dr(e)!==Dr(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Rt.API={events:[]},Rt.version="3.0.4";var bn=Rt.API,cb=1,md=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(e){return e.toFixed(2)},hl=function(e){return e.toFixed(5)};bn.__acroform__={};var na=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_j=function(e){return e*cb},Bi=function(e){var t=new t8,r=yt.internal.getHeight(e)||0,s=yt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jt(s)),Number(Jt(r))],t},AH=bn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},EH=bn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},LH=bn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ln=bn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return LH(e,t-1)},Tn=bn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return AH(e,t-1)},Dn=bn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return EH(e,t-1)},TH=bn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,a=e[0],i=e[1],l=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=s(i+o)||0,c.upperRight_X=r(a+l)||0,c.upperRight_Y=s(i)||0,[Number(Jt(c.lowerLeft_X)),Number(Jt(c.lowerLeft_Y)),Number(Jt(c.upperRight_X)),Number(Jt(c.upperRight_Y))]},DH=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=iy(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Jt(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Bi(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},iy=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(A){return A.split(`
`)}):a.map(function(A){return[A]});var i=r,l=yt.internal.getHeight(e)||0;l=l<0?-l:l;var o=yt.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(A,M,ee){if(A+1<a.length){var E=M+" "+a[A+1][0];return pp(E,e,ee).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,m=pp("3",e,i).height,x=e.multiline?l-i:(l-m)/2,f=x+=2,y=0,v=0,S=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+pp(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var b="",j=0,w=0;w<a.length;w++)if(a.hasOwnProperty(w)){var k=!1;if(a[w].length!==1&&S!==a[w].length-1){if((m+2)*(j+2)+2>l)continue e;b+=a[w][S],k=!0,v=w,w--}else{b=(b+=a[w][S]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var R=parseInt(w),W=c(R,b,i),O=w>=a.length-1;if(W&&!O){b+=" ",S=0;continue}if(W||O){if(O)v=R;else if(e.multiline&&(m+2)*(j+2)+2>l)continue e}else{if(!e.multiline||(m+2)*(j+2)+2>l)continue e;v=R}}for(var q="",D=y;D<=v;D++){var J=a[D];if(e.multiline){if(D===v){q+=J[S]+" ",S=(S+1)%J.length;continue}if(D===y){q+=J[J.length-1]+" ";continue}}q+=J[0]+" "}switch(q=q.substr(q.length-1)==" "?q.substr(0,q.length-1):q,u=pp(q,e,i).width,e.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}t+=Jt(d)+" "+Jt(f)+` Td
`,t+="("+md(q)+`) Tj
`,t+=-Jt(d)+` 0 Td
`,f=-(i+2),u=0,y=k?v:v+1,j++,b=""}break}return s.text=t,s.fontSize=i,s},pp=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},RH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},IH=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},MH=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ei.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(RH)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");cb=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new r8,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i.objId=void 0,i.hasAnnotation&&IH(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,a){var i=!s;for(var l in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(l)){var o=s[l],c=[],d=o.Rect;if(o.Rect&&(o.Rect=TH(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=yt.createDefaultAppearanceStream(o),Dr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=DH(o);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var m="";for(var x in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(x)){var f=o.appearanceStreamContent[x];if(m+="/"+x+" ",m+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var l in f)if(f.hasOwnProperty(l)){var y=f[l];typeof y=="function"&&(y=y.call(a,o)),m+="/"+l+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(a,o)),m+="/"+l+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}i&&function(v,S){for(var b in v)if(v.hasOwnProperty(b)){var j=b,w=v[b];S.internal.newObjectDeferredBegin(w.objId,!0),Dr(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete v[j]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},e8=bn.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(l){return l};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Dr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),a+="("+md(s(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},p0=function(e,t,r){var s=function(a){return a};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+md(s(e))+")"},Yi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yi.prototype.toString=function(){return this.objId+" 0 R"},Yi.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Yi.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],a=this[s];a&&(Array.isArray(a)?e.push({key:s,value:e8(a,this.objId,this.scope)}):a instanceof Yi?(a.scope=this.scope,e.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:s,value:a}))}return e};var t8=function(){Yi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};na(t8,Yi);var r8=function(){Yi.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+md(r(e))+")"}},set:function(r){e=r}})};na(r8,Yi);var Ei=function e(){Yi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ln(t,3)},set:function(b){b?this.F=Tn(t,3):this.F=Dn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(b){s=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(b){s[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(b){s[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(b){s[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(b){s[3]=b}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Tg)return;i="FieldObject"+e.FieldNum++}var b=function(j){return j};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+md(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/cb:d},set:function(b){d=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Tg||this instanceof Wc))return p0(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=b}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ts==0?p0(x,this.objId,this.scope):x},set:function(b){b=b.toString(),x=this instanceof ts==0?b.substr(0,1)==="("?Dd(b.substr(1,b.length-2)):Dd(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?Dd(x.substr(1,x.length-1)):x},set:function(b){b=b.toString(),x=this instanceof ts==1?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ts==0?p0(f,this.objId,this.scope):f},set:function(b){b=b.toString(),f=this instanceof ts==0?b.substr(0,1)==="("?Dd(b.substr(1,b.length-2)):Dd(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?Dd(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof ts==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,1)},set:function(b){b?this.Ff=Tn(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,2)},set:function(b){b?this.Ff=Tn(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,3)},set:function(b){b?this.Ff=Tn(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');S=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(S){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};na(Ei,Yi);var uu=function(){Ei.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return e8(t,this.objId,this.scope)},set:function(r){var s,a;a=[],typeof(s=r)=="string"&&(a=function(i,l,o){o||(o=1);for(var c,d=[];c=l.exec(i);)d.push(c[o]);return d}(s,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,18)},set:function(r){r?this.Ff=Tn(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Tn(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,20)},set:function(r){r?(this.Ff=Tn(this.Ff,20),t.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,22)},set:function(r){r?this.Ff=Tn(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,23)},set:function(r){r?this.Ff=Tn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,27)},set:function(r){r?this.Ff=Tn(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};na(uu,Ei);var hu=function(){uu.call(this),this.fontName="helvetica",this.combo=!1};na(hu,uu);var fu=function(){hu.call(this),this.combo=!0};na(fu,hu);var Bp=function(){fu.call(this),this.edit=!0};na(Bp,fu);var ts=function(){Ei.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,15)},set:function(r){r?this.Ff=Tn(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,16)},set:function(r){r?this.Ff=Tn(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,17)},set:function(r){r?this.Ff=Tn(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,26)},set:function(r){r?this.Ff=Tn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,a=[];for(s in a.push("<<"),t)a.push("/"+s+" ("+md(r(t[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Dr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};na(ts,Ei);var Up=function(){ts.call(this),this.pushButton=!0};na(Up,ts);var mu=function(){ts.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};na(mu,ts);var Tg=function(){var e,t;Ei.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),s)l.push("/"+i+" ("+md(a(s[i]))+")");return l.push(">>"),l.join(`
`)},set:function(a){Dr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};na(Tg,Ei),mu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},mu.prototype.createOption=function(e){var t=new Tg;return t.Parent=this,t.optionName=e,this.Kids.push(t),FH.call(this.scope,t),t};var $p=function(){ts.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};na($p,ts);var Wc=function(){Ei.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,13)},set:function(t){t?this.Ff=Tn(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,21)},set:function(t){t?this.Ff=Tn(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,23)},set:function(t){t?this.Ff=Tn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,24)},set:function(t){t?this.Ff=Tn(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,25)},set:function(t){t?this.Ff=Tn(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,26)},set:function(t){t?this.Ff=Tn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};na(Wc,Ei);var zp=function(){Wc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ln(this.Ff,14)},set:function(e){e?this.Ff=Tn(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};na(zp,Wc);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Bi(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=iy(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jt(yt.internal.getWidth(e))+" "+Jt(yt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Jt(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Bi(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=[],i=yt.internal.getHeight(e),l=yt.internal.getWidth(e),o=iy(e,e.caption);return a.push("1 g"),a.push("0 0 "+Jt(l)+" "+Jt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jt(l-1)+" "+Jt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Jt(o.fontSize)+" Tf "+s),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Bi(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jt(yt.internal.getWidth(e))+" "+Jt(yt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=yt.RadioButton.Circle.YesNormal,t.D[e]=yt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Bi(e);t.scope=e.scope;var r=[],s=yt.internal.getWidth(e)<=yt.internal.getHeight(e)?yt.internal.getWidth(e)/4:yt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=yt.internal.Bezier_C,i=Number((s*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+hl(yt.internal.getWidth(e)/2)+" "+hl(yt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Bi(e);t.scope=e.scope;var r=[],s=yt.internal.getWidth(e)<=yt.internal.getHeight(e)?yt.internal.getWidth(e)/4:yt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*yt.internal.Bezier_C).toFixed(5)),l=Number((s*yt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+hl(yt.internal.getWidth(e)/2)+" "+hl(yt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+hl(yt.internal.getWidth(e)/2)+" "+hl(yt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),r.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),r.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),r.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Bi(e);t.scope=e.scope;var r=[],s=yt.internal.getWidth(e)<=yt.internal.getHeight(e)?yt.internal.getWidth(e)/4:yt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),i=Number((a*yt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+hl(yt.internal.getWidth(e)/2)+" "+hl(yt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=yt.RadioButton.Cross.YesNormal,t.D[e]=yt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Bi(e);t.scope=e.scope;var r=[],s=yt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jt(yt.internal.getWidth(e)-2)+" "+Jt(yt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jt(s.x1.x)+" "+Jt(s.x1.y)+" m"),r.push(Jt(s.x2.x)+" "+Jt(s.x2.y)+" l"),r.push(Jt(s.x4.x)+" "+Jt(s.x4.y)+" m"),r.push(Jt(s.x3.x)+" "+Jt(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Bi(e);t.scope=e.scope;var r=yt.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Jt(yt.internal.getWidth(e))+" "+Jt(yt.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Jt(yt.internal.getWidth(e)-2)+" "+Jt(yt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Jt(r.x1.x)+" "+Jt(r.x1.y)+" m"),s.push(Jt(r.x2.x)+" "+Jt(r.x2.y)+" l"),s.push(Jt(r.x4.x)+" "+Jt(r.x4.y)+" m"),s.push(Jt(r.x3.x)+" "+Jt(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Bi(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jt(yt.internal.getWidth(e))+" "+Jt(yt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};yt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=yt.internal.getWidth(e),r=yt.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},yt.internal.getWidth=function(e){var t=0;return Dr(e)==="object"&&(t=_j(e.Rect[2])),t},yt.internal.getHeight=function(e){var t=0;return Dr(e)==="object"&&(t=_j(e.Rect[3])),t};var FH=bn.addField=function(e){if(MH(this,e),!(e instanceof Ei))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};bn.AcroFormChoiceField=uu,bn.AcroFormListBox=hu,bn.AcroFormComboBox=fu,bn.AcroFormEditBox=Bp,bn.AcroFormButton=ts,bn.AcroFormPushButton=Up,bn.AcroFormRadioButton=mu,bn.AcroFormCheckBox=$p,bn.AcroFormTextField=Wc,bn.AcroFormPasswordField=zp,bn.AcroFormAppearance=yt,bn.AcroForm={ChoiceField:uu,ListBox:hu,ComboBox:fu,EditBox:Bp,Button:ts,PushButton:Up,RadioButton:mu,CheckBox:$p,TextField:Wc,PasswordField:zp,Appearance:yt},Rt.AcroForm={ChoiceField:uu,ListBox:hu,ComboBox:fu,EditBox:Bp,Button:ts,PushButton:Up,RadioButton:mu,CheckBox:$p,TextField:Wc,PasswordField:zp,Appearance:yt};function n8(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(A,M){var ee,E,ae,Y,de,T=r;if((M=M||r)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(W(A))for(de in s)for(ae=s[de],ee=0;ee<ae.length;ee+=1){for(Y=!0,E=0;E<ae[ee].length;E+=1)if(ae[ee][E]!==void 0&&ae[ee][E]!==A[E]){Y=!1;break}if(Y===!0){T=de;break}}else for(de in s)for(ae=s[de],ee=0;ee<ae.length;ee+=1){for(Y=!0,E=0;E<ae[ee].length;E+=1)if(ae[ee][E]!==void 0&&ae[ee][E]!==A.charCodeAt(E)){Y=!1;break}if(Y===!0){T=de;break}}return T===r&&M!==r&&(T=M),T},i=function A(M){for(var ee=this.internal.write,E=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:M.width}),Y.push({key:"Height",value:M.height}),M.colorSpace===b.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===b.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)&&M.transparency.length>0){for(var de="",T=0,V=M.transparency.length;T<V;T++)de+=M.transparency[T]+" "+M.transparency[T]+" ";Y.push({key:"Mask",value:"["+de+"]"})}M.sMask!==void 0&&Y.push({key:"SMask",value:M.objectId+1+" 0 R"});var re=M.filter!==void 0?["/"+M.filter]:void 0;if(E({data:M.data,additionalKeyValues:Y,alreadyAppliedFilters:re,objectId:M.objectId}),ee("endobj"),"sMask"in M&&M.sMask!==void 0){var he,C=(he=M.sMaskBitsPerComponent)!==null&&he!==void 0?he:M.bitsPerComponent,F={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:C,data:M.sMask};"filter"in M&&(F.decodeParameters="/Predictor ".concat(M.predictor," /Colors 1 /BitsPerComponent ").concat(C," /Columns ").concat(M.width),F.filter=M.filter),A.call(this,F)}if(M.colorSpace===b.INDEXED){var L=this.internal.newObject();E({data:q(new Uint8Array(M.palette)),objectId:L}),ee("endobj")}},l=function(){var A=this.internal.collections[t+"images"];for(var M in A)i.call(this,A[M])},o=function(){var A,M=this.internal.collections[t+"images"],ee=this.internal.write;for(var E in M)ee("/I"+(A=M[E]).index,A.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var A=this.internal.collections[t+"images"];return c.call(this),A},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},m=function(A){return typeof e["process"+A.toUpperCase()]=="function"},x=function(A){return Dr(A)==="object"&&A.nodeType===1},f=function(A,M){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var ee=""+A.getAttribute("src");if(ee.indexOf("data:image/")===0)return Op(unescape(ee).split("base64,").pop());var E=e.loadFile(ee,!0);if(E!==void 0)return E}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var ae;switch(M){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return Op(A.toDataURL(ae,1).split("base64,").pop())}},y=function(A){var M=this.internal.collections[t+"images"];if(M){for(var ee in M)if(A===M[ee].alias)return M[ee]}},v=function(A,M,ee){return A||M||(A=-96,M=-96),A<0&&(A=-1*ee.width*72/A/this.internal.scaleFactor),M<0&&(M=-1*ee.height*72/M/this.internal.scaleFactor),A===0&&(A=M*ee.width/ee.height),M===0&&(M=A*ee.height/ee.width),[A,M]},S=function(A,M,ee,E,ae,Y){var de=v.call(this,ee,E,ae),T=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,re=d.call(this);if(ee=de[0],E=de[1],re[ae.index]=ae,Y){Y*=Math.PI/180;var he=Math.cos(Y),C=Math.sin(Y),F=function($){return $.toFixed(4)},L=[F(he),F(C),F(-1*C),F(he),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,T(A),V(M+E),"cm"].join(" ")),this.internal.write(L.join(" ")),this.internal.write([T(ee),"0","0",T(E),"0","0","cm"].join(" "))):this.internal.write([T(ee),"0","0",T(E),T(A),V(M+E),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(A){var M,ee,E=0;if(typeof A=="string")for(ee=A.length,M=0;M<ee;M++)E=(E<<5)-E+A.charCodeAt(M),E|=0;else if(W(A))for(ee=A.byteLength/2,M=0;M<ee;M++)E=(E<<5)-E+A[M],E|=0;return E},k=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var M=!0;return A.length===0&&(M=!1),A.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(M=!1),M},R=e.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var M=A.indexOf(",");return M<0?null:A.substring(0,M).trim().endsWith("base64")?A.substring(M+1):null};e.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},O=e.__addimage__.binaryStringToUint8Array=function(A){for(var M=A.length,ee=new Uint8Array(M),E=0;E<M;E++)ee[E]=A.charCodeAt(E);return ee},q=e.__addimage__.arrayBufferToBinaryString=function(A){for(var M="",ee=W(A)?A:new Uint8Array(A),E=0;E<ee.length;E+=8192)M+=String.fromCharCode.apply(null,ee.subarray(E,E+8192));return M};e.addImage=function(){var A,M,ee,E,ae,Y,de,T,V;if(typeof arguments[1]=="number"?(M=r,ee=arguments[1],E=arguments[2],ae=arguments[3],Y=arguments[4],de=arguments[5],T=arguments[6],V=arguments[7]):(M=arguments[1],ee=arguments[2],E=arguments[3],ae=arguments[4],Y=arguments[5],de=arguments[6],T=arguments[7],V=arguments[8]),Dr(A=arguments[0])==="object"&&!x(A)&&"imageData"in A){var re=A;A=re.imageData,M=re.format||M||r,ee=re.x||ee||0,E=re.y||E||0,ae=re.w||re.width||ae,Y=re.h||re.height||Y,de=re.alias||de,T=re.compression||T,V=re.rotation||re.angle||V}var he=this.internal.getFilters();if(T===void 0&&he.indexOf("FlateEncode")!==-1&&(T="SLOW"),isNaN(ee)||isNaN(E))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var C=D.call(this,A,M,de,T);return S.call(this,ee,E,ae,Y,C,V),this};var D=function(A,M,ee,E){var ae,Y,de;if(typeof A=="string"&&a(A)===r){A=unescape(A);var T=J(A,!1);(T!==""||(T=e.loadFile(A,!0))!==void 0)&&(A=T)}if(x(A)&&(A=f(A,M)),M=a(A,M),!m(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((de=ee)==null||de.length===0)&&(ee=function(V){return typeof V=="string"||W(V)?w(V):W(V.data)?w(V.data):null}(A)),(ae=y.call(this,ee))||(A instanceof Uint8Array||M==="RGBA"||(Y=A,A=O(A)),ae=this["process"+M.toUpperCase()](A,u.call(this),ee,function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in e.image_compression?V:j.NONE}(E),Y)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},J=e.__addimage__.convertBase64ToBinaryString=function(A,M){M=typeof M!="boolean"||M;var ee,E="";if(typeof A=="string"){var ae;ee=(ae=R(A))!==null&&ae!==void 0?ae:A;try{E=Op(ee)}catch(Y){if(M)throw k(ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return E};e.getImageProperties=function(A){var M,ee,E="";if(x(A)&&(A=f(A)),typeof A=="string"&&a(A)===r&&((E=J(A,!1))===""&&(E=e.loadFile(A)||""),A=E),ee=a(A),!m(ee))throw new Error("addImage does not support files of type '"+ee+"', please ensure that a plugin for '"+ee+"' support is added.");if(A instanceof Uint8Array||(A=O(A)),!(M=this["process"+ee.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=ee,M}})(Rt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Rt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,a,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,m=0;m<d.length&&!u;m++)switch((s=d[m]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){s=d[x];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),j=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(s.bounds.x)+" "+o(s.bounds.y+s.bounds.h)+" "+l(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y)+"] ")+"/Contents ("+f(b(s.contents))+")",i+=" /Popup "+S.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(b(j))+") >>",v.content=i;var w=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(s.bounds.x+30)+" "+o(s.bounds.y+s.bounds.h)+" "+l(s.bounds.x+s.bounds.w+30)+" "+o(s.bounds.y)+"] ")+" /Parent "+w,s.open&&(i+=" /Open true"),i+=" >>",S.content=i,this.internal.write(v.objId,"0 R",S.objId,"0 R");break;case"freetext":a="/Rect ["+l(s.bounds.x)+" "+o(s.bounds.y)+" "+l(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y+s.bounds.h)+"] ";var k=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(y(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var R=this.annotations._nameMap[s.options.name];s.options.pageNumber=R.page,s.options.top=R.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;default:var W=o(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+W+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,a,i,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:d(s),w:c(r+a),h:d(s+i)},options:l,type:"link"})},e.textWithLink=function(r,s,a,i){var l,o,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;l=Math.ceil(d*u)}else o=c,l=d;return this.text(r,s,a,i),a+=.2*d,i.align==="center"&&(s-=c/2),i.align==="right"&&(s-=c),this.link(s,a-d,o,l,i),c},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Rt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return l(v)&&a.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return l(v)&&i(v)&&t[v.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(v){var S=0,b=r,j="",w=0;for(S=0;S<v.length;S+=1)b[v.charCodeAt(S)]!==void 0?(w++,typeof(b=b[v.charCodeAt(S)])=="number"&&(j+=String.fromCharCode(b),b=r,w=0),S===v.length-1&&(b=r,j+=v.charAt(S-(w-1)),S-=w-1,w=0)):(b=r,j+=v.charAt(S-w),S-=w,w=0);return j};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&s[v.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(v,S,b){return l(v)?i(v)===!1?-1:!d(v)||!l(S)&&!l(b)||!l(b)&&o(S)||o(v)&&!l(S)||o(v)&&c(S)||o(v)&&o(S)?0:u(v)&&l(S)&&!o(S)&&l(b)&&d(b)?3:o(v)||!l(b)?1:2:-1},f=function(v){var S=0,b=0,j=0,w="",k="",R="",W=(v=v||"").split("\\s+"),O=[];for(S=0;S<W.length;S+=1){for(O.push(""),b=0;b<W[S].length;b+=1)w=W[S][b],k=W[S][b-1],R=W[S][b+1],l(w)?(j=x(w,k,R),O[S]+=j!==-1?String.fromCharCode(t[w.charCodeAt(0)][j]):w):O[S]+=w;O[S]=m(O[S])}return O.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var v,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(S)){var j=0;for(b=[],j=0;j<S.length;j+=1)Array.isArray(S[j])?b.push([f(S[j][0]),S[j][1],S[j][2]]):b.push([f(S[j])]);v=b}else v=f(S);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",y])}(Rt.API),Rt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var a;if((r=r||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Rt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(v){x=v}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,v=0,S=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=d.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,k){return w.concat(S.splitTextToSize(k,b))},[])):c=Array.isArray(c)?c:[c];for(var j=0;j<c.length;j++)f<(v=this.getStringUnitWidth(c[j],{font:m})*u)&&(f=v);return f!==0&&(y=c.length),{w:f/=x,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,f&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,m,x){if(s.call(this),!u)throw new Error("No data for PDF table.");var f,y,v,S,b=[],j=[],w=[],k={},R={},W=[],O=[],q=(x=x||{}).autoSize||!1,D=x.printHeaders!==!1,J=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,A=x.margins||Object.assign({width:this.getPageWidth()},t),M=typeof x.padding=="number"?x.padding:3,ee=x.headerBackgroundColor||"#c8c8c8",E=x.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=ee,this.internal.__cell__.headerTextColor=E,this.setFontSize(J),m==null)j=b=Object.keys(u[0]),w=b.map(function(){return"left"});else if(Array.isArray(m)&&Dr(m[0])==="object")for(b=m.map(function(re){return re.name}),j=m.map(function(re){return re.prompt||re.name||""}),w=m.map(function(re){return re.align||"left"}),f=0;f<m.length;f+=1)R[m[f].name]=.7499990551181103*m[f].width;else Array.isArray(m)&&typeof m[0]=="string"&&(j=b=m,w=b.map(function(){return"left"}));if(q||Array.isArray(m)&&typeof m[0]=="string")for(f=0;f<b.length;f+=1){for(k[S=b[f]]=u.map(function(re){return re[S]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(j[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=k[S],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)W.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[S]=Math.max.apply(null,W)+M+M,W=[]}if(D){var ae={};for(f=0;f<b.length;f+=1)ae[b[f]]={},ae[b[f]].text=j[f],ae[b[f]].align=w[f];var Y=o.call(this,ae,R);O=b.map(function(re){return new i(c,d,R[re],Y,ae[re].text,void 0,ae[re].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var de=m.reduce(function(re,he){return re[he.name]=he.align,re},{});for(f=0;f<u.length;f+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:f,data:u[f]},this);var T=o.call(this,u[f],R);for(v=0;v<b.length;v+=1){var V=u[f][b[v]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:f,col:v,data:V},this),l.call(this,new i(c,d,R[b[v]],T,V,f+2,de[b[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var u=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*m/x+u+u},this).reduce(function(f,y){return Math.max(f,y)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,x.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,u),this.setTextColor(y)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),r=!1}}(Rt.API);var s8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],oy=n8(a8),i8=[100,200,300,400,500,600,700,800,900],OH=n8(i8);function g0(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return s8[i=i||"normal"]?i:"normal"}(e.style),s=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof oy[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,s].join(" ")}}}function Cj(e,t,r,s){var a;for(a=r;a>=0&&a<t.length;a+=s)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=s)if(e[t[a]])return e[t[a]]}var BH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kj={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Pj(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Aj(e){return e.trimLeft()}function UH(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function $H(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gp,Ej,Lj,Rd,xp,Tj,Dj,Rj,x0=["times"];function Ij(e,t,r,s,a){var i=4,l=Fj;switch(a){case Rt.API.image_compression.FAST:i=1,l=Mj;break;case Rt.API.image_compression.MEDIUM:i=6,l=Oj;break;case Rt.API.image_compression.SLOW:i=9,l=Bj}e=function(c,d,u,m){for(var x,f=c.length/d,y=new Uint8Array(c.length+f),v=[zH,Mj,Fj,Oj,Bj],S=0;S<f;S+=1){var b=S*d,j=c.subarray(b,b+d);if(m)y.set(m(j,u,x),b+S);else{for(var w=v.length,k=[],R=0;R<w;R+=1)k[R]=v[R](j,u,x);var W=VH(k.concat());y.set(k[W],b+S)}x=j}return y}(e,t,Math.ceil(r*s/8),l);var o=Y1(e,{level:i});return Rt.API.__addimage__.arrayBufferToBinaryString(o)}function zH(e){var t=Array.apply([],e);return t.unshift(0),t}function Mj(e,t){var r=e.length,s=[];s[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;s[a+1]=e[a]-i+256&255}return s}function Fj(e,t,r){var s=e.length,a=[];a[0]=2;for(var i=0;i<s;i+=1){var l=r&&r[i]||0;a[i+1]=e[i]-l+256&255}return a}function Oj(e,t,r){var s=e.length,a=[];a[0]=3;for(var i=0;i<s;i+=1){var l=e[i-t]||0,o=r&&r[i]||0;a[i+1]=e[i]+256-(l+o>>>1)&255}return a}function Bj(e,t,r){var s=e.length,a=[];a[0]=4;for(var i=0;i<s;i+=1){var l=qH(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-l+256&255}return a}function qH(e,t,r){if(e===t&&t===r)return e;var s=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return s<=a&&s<=i?e:a<=i?t:r}function VH(e){var t=e.map(function(r){return r.reduce(function(s,a){return s+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function v0(e,t,r){var s=t*r,a=Math.floor(s/8),i=16-(s-8*a+r),l=(1<<r)-1;return o8(e,a)>>i&l}function Uj(e,t,r,s){var a=r*s,i=Math.floor(a/8),l=16-(a-8*i+s),o=(1<<s)-1,c=(t&o)<<l;(function(d,u,m){if(u+1<d.byteLength)d.setUint16(u,m,!1);else{var x=m>>8&255;d.setUint8(u,x)}})(e,i,o8(e,i)&~(o<<l)&65535|c)}function o8(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function HH(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,l=1<<1+(7&a);e[t++],e[t++];var o=null,c=null;i&&(o=t,c=l,t+=3*l);var d=!0,u=[],m=0,x=null,f=0,y=null;for(this.width=r,this.height=s;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];m=e[t++]|e[t++]<<8,x=e[t++],1&v||(x=null),f=v>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var S=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,k=e[t++],R=k>>6&1,W=1<<1+(7&k),O=o,q=c,D=!1;k>>7&&(D=!0,O=t,q=W,t+=3*W);var J=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}u.push({x:S,y:b,width:j,height:w,has_local_palette:D,palette_offset:O,palette_size:q,data_offset:J,data_length:t-J,transparent_index:x,interlaced:!!R,delay:m,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(M){if(M<0||M>=u.length)throw new Error("Frame index out of range.");return u[M]},this.decodeAndBlitFrameBGRA=function(M,ee){var E=this.frameInfo(M),ae=E.width*E.height,Y=new Uint8Array(ae);$j(e,E.data_offset,Y,ae);var de=E.palette_offset,T=E.transparent_index;T===null&&(T=256);var V=E.width,re=r-V,he=V,C=4*(E.y*r+E.x),F=4*((E.y+E.height)*r+E.x),L=C,$=4*re;E.interlaced===!0&&($+=4*r*7);for(var K=8,I=0,X=Y.length;I<X;++I){var ne=Y[I];if(he===0&&(he=V,(L+=$)>=F&&($=4*re+4*r*(K-1),L=C+(V+re)*(K<<1),K>>=1)),ne===T)L+=4;else{var ue=e[de+3*ne],xe=e[de+3*ne+1],ke=e[de+3*ne+2];ee[L++]=ke,ee[L++]=xe,ee[L++]=ue,ee[L++]=255}--he}},this.decodeAndBlitFrameRGBA=function(M,ee){var E=this.frameInfo(M),ae=E.width*E.height,Y=new Uint8Array(ae);$j(e,E.data_offset,Y,ae);var de=E.palette_offset,T=E.transparent_index;T===null&&(T=256);var V=E.width,re=r-V,he=V,C=4*(E.y*r+E.x),F=4*((E.y+E.height)*r+E.x),L=C,$=4*re;E.interlaced===!0&&($+=4*r*7);for(var K=8,I=0,X=Y.length;I<X;++I){var ne=Y[I];if(he===0&&(he=V,(L+=$)>=F&&($=4*re+4*r*(K-1),L=C+(V+re)*(K<<1),K>>=1)),ne===T)L+=4;else{var ue=e[de+3*ne],xe=e[de+3*ne+1],ke=e[de+3*ne+2];ee[L++]=ue,ee[L++]=xe,ee[L++]=ke,ee[L++]=255}--he}}}function $j(e,t,r,s){for(var a=e[t++],i=1<<a,l=i+1,o=l+1,c=a+1,d=(1<<c)-1,u=0,m=0,x=0,f=e[t++],y=new Int32Array(4096),v=null;;){for(;u<16&&f!==0;)m|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<c)break;var S=m&d;if(m>>=c,u-=c,S!==i){if(S===l)break;for(var b=S<o?S:v,j=0,w=b;w>i;)w=y[w]>>8,++j;var k=w;if(x+j+(b!==S?1:0)>s)return void Br.log("Warning, gif stream longer than expected.");r[x++]=k;var R=x+=j;for(b!==S&&(r[x++]=k),w=b;j--;)w=y[w],r[--R]=255&w,w>>=8;v!==null&&o<4096&&(y[o++]=v<<8|k,o>=d+1&&c<12&&(++c,d=d<<1|1)),v=S}else o=l+1,d=(1<<(c=a+1))-1,v=null}return x!==s&&Br.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function y0(e){var t,r,s,a,i,l=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),m=new Array(65535),x=new Array(65535),f=new Array(64),y=new Array(64),v=[],S=0,b=7,j=new Array(64),w=new Array(64),k=new Array(64),R=new Array(256),W=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(C,F){for(var L=0,$=0,K=new Array,I=1;I<=16;I++){for(var X=1;X<=C[I];X++)K[F[$]]=[],K[F[$]][0]=L,K[F[$]][1]=I,$++,L++;L*=2}return K}function de(C){for(var F=C[0],L=C[1]-1;L>=0;)F&1<<L&&(S|=1<<b),L--,--b<0&&(S==255?(T(255),T(0)):T(S),b=7,S=0)}function T(C){v.push(C)}function V(C){T(C>>8&255),T(255&C)}function re(C,F,L,$,K){for(var I,X=K[0],ne=K[240],ue=function(Ee,it){var et,dt,lt,jt,Ht,ut,Mt,Gt,st,se,ve=0;for(st=0;st<8;++st){et=Ee[ve],dt=Ee[ve+1],lt=Ee[ve+2],jt=Ee[ve+3],Ht=Ee[ve+4],ut=Ee[ve+5],Mt=Ee[ve+6];var Pe=et+(Gt=Ee[ve+7]),Fe=et-Gt,pe=dt+Mt,ze=dt-Mt,qe=lt+ut,Ve=lt-ut,Yt=jt+Ht,xt=jt-Ht,pt=Pe+Yt,cr=Pe-Yt,Wt=pe+qe,wt=pe-qe;Ee[ve]=pt+Wt,Ee[ve+4]=pt-Wt;var dr=.707106781*(wt+cr);Ee[ve+2]=cr+dr,Ee[ve+6]=cr-dr;var Ft=.382683433*((pt=xt+Ve)-(wt=ze+Fe)),Ut=.5411961*pt+Ft,rr=1.306562965*wt+Ft,$r=.707106781*(Wt=Ve+ze),ft=Fe+$r,sn=Fe-$r;Ee[ve+5]=sn+Ut,Ee[ve+3]=sn-Ut,Ee[ve+1]=ft+rr,Ee[ve+7]=ft-rr,ve+=8}for(ve=0,st=0;st<8;++st){et=Ee[ve],dt=Ee[ve+8],lt=Ee[ve+16],jt=Ee[ve+24],Ht=Ee[ve+32],ut=Ee[ve+40],Mt=Ee[ve+48];var _n=et+(Gt=Ee[ve+56]),Mr=et-Gt,Kr=dt+Mt,zr=dt-Mt,qr=lt+ut,Ir=lt-ut,ei=jt+Ht,Ps=jt-Ht,Jn=_n+ei,qs=_n-ei,an=Kr+qr,Qt=Kr-qr;Ee[ve]=Jn+an,Ee[ve+32]=Jn-an;var Qr=.707106781*(Qt+qs);Ee[ve+16]=qs+Qr,Ee[ve+48]=qs-Qr;var Vs=.382683433*((Jn=Ps+Ir)-(Qt=zr+Mr)),ce=.5411961*Jn+Vs,Be=1.306562965*Qt+Vs,He=.707106781*(an=Ir+zr),Ye=Mr+He,tt=Mr-He;Ee[ve+40]=tt+ce,Ee[ve+24]=tt-ce,Ee[ve+8]=Ye+Be,Ee[ve+56]=Ye-Be,ve++}for(st=0;st<64;++st)se=Ee[st]*it[st],f[st]=se>0?se+.5|0:se-.5|0;return f}(C,F),xe=0;xe<64;++xe)y[O[xe]]=ue[xe];var ke=y[0]-L;L=y[0],ke==0?de($[0]):(de($[x[I=32767+ke]]),de(m[I]));for(var Re=63;Re>0&&y[Re]==0;)Re--;if(Re==0)return de(X),L;for(var We,Z=1;Z<=Re;){for(var Ge=Z;y[Z]==0&&Z<=Re;)++Z;var Lt=Z-Ge;if(Lt>=16){We=Lt>>4;for(var Me=1;Me<=We;++Me)de(ne);Lt&=15}I=32767+y[Z],de(K[(Lt<<4)+x[I]]),de(m[I]),Z++}return Re!=63&&de(X),L}function he(C){C=Math.min(Math.max(C,1),100),i!=C&&(function(F){for(var L=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var K=l((L[$]*F+50)/100);K=Math.min(Math.max(K,1),255),o[O[$]]=K}for(var I=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var ne=l((I[X]*F+50)/100);ne=Math.min(Math.max(ne,1),255),c[O[X]]=ne}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,ke=0;ke<8;ke++)for(var Re=0;Re<8;Re++)d[xe]=1/(o[O[xe]]*ue[ke]*ue[Re]*8),u[xe]=1/(c[O[xe]]*ue[ke]*ue[Re]*8),xe++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),i=C)}this.encode=function(C,F){F&&he(F),v=new Array,S=0,b=7,V(65496),V(65504),V(16),T(74),T(70),T(73),T(70),T(0),T(1),T(1),T(0),V(1),V(1),T(0),T(0),function(){V(65499),V(132),T(0);for(var dt=0;dt<64;dt++)T(o[dt]);T(1);for(var lt=0;lt<64;lt++)T(c[lt])}(),function(dt,lt){V(65472),V(17),T(8),V(lt),V(dt),T(3),T(1),T(17),T(0),T(2),T(17),T(1),T(3),T(17),T(1)}(C.width,C.height),function(){V(65476),V(418),T(0);for(var dt=0;dt<16;dt++)T(q[dt+1]);for(var lt=0;lt<=11;lt++)T(D[lt]);T(16);for(var jt=0;jt<16;jt++)T(J[jt+1]);for(var Ht=0;Ht<=161;Ht++)T(A[Ht]);T(1);for(var ut=0;ut<16;ut++)T(M[ut+1]);for(var Mt=0;Mt<=11;Mt++)T(ee[Mt]);T(17);for(var Gt=0;Gt<16;Gt++)T(E[Gt+1]);for(var st=0;st<=161;st++)T(ae[st])}(),V(65498),V(12),T(3),T(1),T(0),T(2),T(17),T(3),T(17),T(0),T(63),T(0);var L=0,$=0,K=0;S=0,b=7,this.encode.displayName="_encode_";for(var I,X,ne,ue,xe,ke,Re,We,Z,Ge=C.data,Lt=C.width,Me=C.height,Ee=4*Lt,it=0;it<Me;){for(I=0;I<Ee;){for(xe=Ee*it+I,Re=-1,We=0,Z=0;Z<64;Z++)ke=xe+(We=Z>>3)*Ee+(Re=4*(7&Z)),it+We>=Me&&(ke-=Ee*(it+1+We-Me)),I+Re>=Ee&&(ke-=I+Re-Ee+4),X=Ge[ke++],ne=Ge[ke++],ue=Ge[ke++],j[Z]=(W[X]+W[ne+256|0]+W[ue+512|0]>>16)-128,w[Z]=(W[X+768|0]+W[ne+1024|0]+W[ue+1280|0]>>16)-128,k[Z]=(W[X+1280|0]+W[ne+1536|0]+W[ue+1792|0]>>16)-128;L=re(j,d,L,t,s),$=re(w,u,$,r,a),K=re(k,u,K,r,a),I+=32}it+=8}if(b>=0){var et=[];et[1]=b+1,et[0]=(1<<b+1)-1,de(et)}return V(65497),new Uint8Array(v)},e=e||50,function(){for(var C=String.fromCharCode,F=0;F<256;F++)R[F]=C(F)}(),t=Y(q,D),r=Y(M,ee),s=Y(J,A),a=Y(E,ae),function(){for(var C=1,F=2,L=1;L<=15;L++){for(var $=C;$<F;$++)x[32767+$]=L,m[32767+$]=[],m[32767+$][1]=L,m[32767+$][0]=$;for(var K=-(F-1);K<=-C;K++)x[32767+K]=L,m[32767+K]=[],m[32767+K][1]=L,m[32767+K][0]=F-1+K;C<<=1,F<<=1}}(),function(){for(var C=0;C<256;C++)W[C]=19595*C,W[C+256|0]=38470*C,W[C+512|0]=7471*C+32768,W[C+768|0]=-11059*C,W[C+1024|0]=-21709*C,W[C+1280|0]=32768*C+8421375,W[C+1536|0]=-27439*C,W[C+1792|0]=-5329*C}(),he(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ui(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zj(e){function t(D){if(!D)throw Error("assert :P")}function r(D,J,A){for(var M=0;4>M;M++)if(D[J+M]!=A.charCodeAt(M))return!0;return!1}function s(D,J,A,M,ee){for(var E=0;E<ee;E++)D[J+E]=A[M+E]}function a(D,J,A,M){for(var ee=0;ee<M;ee++)D[J+ee]=A}function i(D){return new Int32Array(D)}function l(D,J){for(var A=[],M=0;M<D;M++)A.push(new J);return A}function o(D,J){var A=[];return function M(ee,E,ae){for(var Y=ae[E],de=0;de<Y&&(ee.push(ae.length>E+1?[]:new J),!(ae.length<E+1));de++)M(ee[de],E+1,ae)}(A,0,D),A}var c=function(){var D=this;function J(h,g){for(var _=1<<g-1>>>0;h&_;)_>>>=1;return _?(h&_-1)+_:h}function A(h,g,_,P,z){t(!(P%_));do h[g+(P-=_)]=z;while(0<P)}function M(h,g,_,P,z){if(t(2328>=z),512>=z)var H=i(512);else if((H=i(z))==null)return 0;return function(G,Q,te,ie,me,Se){var oe,ge,we=Q,Ae=1<<te,je=i(16),Le=i(16);for(t(me!=0),t(ie!=null),t(G!=null),t(0<te),ge=0;ge<me;++ge){if(15<ie[ge])return 0;++je[ie[ge]]}if(je[0]==me)return 0;for(Le[1]=0,oe=1;15>oe;++oe){if(je[oe]>1<<oe)return 0;Le[oe+1]=Le[oe]+je[oe]}for(ge=0;ge<me;++ge)oe=ie[ge],0<ie[ge]&&(Se[Le[oe]++]=ge);if(Le[15]==1)return(ie=new ee).g=0,ie.value=Se[0],A(G,we,1,Ae,ie),Ae;var De,Ke=-1,$e=Ae-1,Dt=0,vt=1,nr=1,Ct=1<<te;for(ge=0,oe=1,me=2;oe<=te;++oe,me<<=1){if(vt+=nr<<=1,0>(nr-=je[oe]))return 0;for(;0<je[oe];--je[oe])(ie=new ee).g=oe,ie.value=Se[ge++],A(G,we+Dt,me,Ct,ie),Dt=J(Dt,oe)}for(oe=te+1,me=2;15>=oe;++oe,me<<=1){if(vt+=nr<<=1,0>(nr-=je[oe]))return 0;for(;0<je[oe];--je[oe]){if(ie=new ee,(Dt&$e)!=Ke){for(we+=Ct,De=1<<(Ke=oe)-te;15>Ke&&!(0>=(De-=je[Ke]));)++Ke,De<<=1;Ae+=Ct=1<<(De=Ke-te),G[Q+(Ke=Dt&$e)].g=De+te,G[Q+Ke].value=we-Q-Ke}ie.g=oe-te,ie.value=Se[ge++],A(G,we+(Dt>>te),me,Ct,ie),Dt=J(Dt,oe)}}return vt!=2*Le[15]-1?0:Ae}(h,g,_,P,z,H)}function ee(){this.value=this.g=0}function E(){this.value=this.g=0}function ae(){this.G=l(5,ee),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(bc,E)}function Y(h,g,_,P){t(h!=null),t(g!=null),t(2147483648>P),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=_,h.Jd=g,h.Yc=_+P,h.Zc=4<=P?_+P-4+1:_,X(h)}function de(h,g){for(var _=0;0<g--;)_|=ue(h,128)<<g;return _}function T(h,g){var _=de(h,g);return ne(h)?-_:_}function V(h,g,_,P){var z,H=0;for(t(h!=null),t(g!=null),t(4294967288>P),h.Sb=P,h.Ra=0,h.u=0,h.h=0,4<P&&(P=4),z=0;z<P;++z)H+=g[_+z]<<8*z;h.Ra=H,h.bb=P,h.oa=g,h.pa=_}function re(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ko-8>>>0,++h.bb,h.u-=8;$(h)&&(h.h=1,h.u=0)}function he(h,g){if(t(0<=g),!h.h&&g<=ca){var _=L(h)&la[g];return h.u+=g,re(h),_}return h.h=1,h.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function L(h){return h.Ra>>>(h.u&Ko-1)>>>0}function $(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ko}function K(h,g){h.u=g,h.h=$(h)}function I(h){h.u>=fo&&(t(h.u>=fo),re(h))}function X(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ne(h){return de(h,1)}function ue(h,g){var _=h.Ca;0>h.b&&X(h);var P=h.b,z=_*g>>>8,H=(h.I>>>P>z)+0;for(H?(_-=z,h.I-=z+1<<P>>>0):_=z+1,P=_,z=0;256<=P;)z+=8,P>>=8;return P=7^z+Qo[P],h.b-=P,h.Ca=(_<<P)-1,H}function xe(h,g,_){h[g+0]=_>>24&255,h[g+1]=_>>16&255,h[g+2]=_>>8&255,h[g+3]=255&_}function ke(h,g){return h[g+0]|h[g+1]<<8}function Re(h,g){return ke(h,g)|h[g+2]<<16}function We(h,g){return ke(h,g)|ke(h,g+2)<<16}function Z(h,g){var _=1<<g;return t(h!=null),t(0<g),h.X=i(_),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function Ge(h,g){t(h!=null),t(g!=null),t(h.Xa==g.Xa),s(g.X,0,h.X,0,1<<g.Xa)}function Lt(){this.X=[],this.Xa=this.Mb=0}function Me(h,g,_,P){t(_!=null),t(P!=null);var z=_[0],H=P[0];return z==0&&(z=(h*H+g/2)/g),H==0&&(H=(g*z+h/2)/h),0>=z||0>=H?0:(_[0]=z,P[0]=H,1)}function Ee(h,g){return h+(1<<g)-1>>>g}function it(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function et(h,g){D[g]=function(_,P,z,H,G,Q,te){var ie;for(ie=0;ie<G;++ie){var me=D[h](Q[te+ie-1],z,H+ie);Q[te+ie]=it(_[P+ie],me)}}}function dt(){this.ud=this.hd=this.jd=0}function lt(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function jt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ht(h,g){return jt(h+(h-g+.5>>1))}function ut(h,g,_){return Math.abs(g-_)-Math.abs(h-_)}function Mt(h,g,_,P,z,H,G){for(P=H[G-1],_=0;_<z;++_)H[G+_]=P=it(h[g+_],P)}function Gt(h,g,_,P,z){var H;for(H=0;H<_;++H){var G=h[g+H],Q=G>>8&255,te=16711935&(te=(te=16711935&G)+((Q<<16)+Q));P[z+H]=(4278255360&G)+te>>>0}}function st(h,g){g.jd=255&h,g.hd=h>>8&255,g.ud=h>>16&255}function se(h,g,_,P,z,H){var G;for(G=0;G<P;++G){var Q=g[_+G],te=Q>>>8,ie=Q,me=255&(me=(me=Q>>>16)+((h.jd<<24>>24)*(te<<24>>24)>>>5));ie=255&(ie=(ie+=(h.hd<<24>>24)*(te<<24>>24)>>>5)+((h.ud<<24>>24)*(me<<24>>24)>>>5)),z[H+G]=(4278255360&Q)+(me<<16)+ie}}function ve(h,g,_,P,z){D[g]=function(H,G,Q,te,ie,me,Se,oe,ge){for(te=Se;te<oe;++te)for(Se=0;Se<ge;++Se)ie[me++]=z(Q[P(H[G++])])},D[h]=function(H,G,Q,te,ie,me,Se){var oe=8>>H.b,ge=H.Ea,we=H.K[0],Ae=H.w;if(8>oe)for(H=(1<<H.b)-1,Ae=(1<<oe)-1;G<Q;++G){var je,Le=0;for(je=0;je<ge;++je)je&H||(Le=P(te[ie++])),me[Se++]=z(we[Le&Ae]),Le>>=oe}else D["VP8LMapColor"+_](te,ie,we,Ae,me,Se,G,Q,ge)}}function Pe(h,g,_,P,z){for(_=g+_;g<_;){var H=h[g++];P[z++]=H>>16&255,P[z++]=H>>8&255,P[z++]=255&H}}function Fe(h,g,_,P,z){for(_=g+_;g<_;){var H=h[g++];P[z++]=H>>16&255,P[z++]=H>>8&255,P[z++]=255&H,P[z++]=H>>24&255}}function pe(h,g,_,P,z){for(_=g+_;g<_;){var H=(G=h[g++])>>16&240|G>>12&15,G=240&G|G>>28&15;P[z++]=H,P[z++]=G}}function ze(h,g,_,P,z){for(_=g+_;g<_;){var H=(G=h[g++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;P[z++]=H,P[z++]=G}}function qe(h,g,_,P,z){for(_=g+_;g<_;){var H=h[g++];P[z++]=255&H,P[z++]=H>>8&255,P[z++]=H>>16&255}}function Ve(h,g,_,P,z,H){if(H==0)for(_=g+_;g<_;)xe(P,((H=h[g++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),z+=32;else s(P,z,h,g,_)}function Yt(h,g){D[g][0]=D[h+"0"],D[g][1]=D[h+"1"],D[g][2]=D[h+"2"],D[g][3]=D[h+"3"],D[g][4]=D[h+"4"],D[g][5]=D[h+"5"],D[g][6]=D[h+"6"],D[g][7]=D[h+"7"],D[g][8]=D[h+"8"],D[g][9]=D[h+"9"],D[g][10]=D[h+"10"],D[g][11]=D[h+"11"],D[g][12]=D[h+"12"],D[g][13]=D[h+"13"],D[g][14]=D[h+"0"],D[g][15]=D[h+"0"]}function xt(h){return h==Fx||h==Ox||h==Sm||h==Bx}function pt(){this.eb=[],this.size=this.A=this.fb=0}function cr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pt,this.f.kb=new cr,this.sd=null}function wt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ft(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Ut(h,g){var _=h.T,P=g.ba.f.RGBA,z=P.eb,H=P.fb+h.ka*P.A,G=Ba[g.ba.S],Q=h.y,te=h.O,ie=h.f,me=h.N,Se=h.ea,oe=h.W,ge=g.cc,we=g.dc,Ae=g.Mc,je=g.Nc,Le=h.ka,De=h.ka+h.T,Ke=h.U,$e=Ke+1>>1;for(Le==0?G(Q,te,null,null,ie,me,Se,oe,ie,me,Se,oe,z,H,null,null,Ke):(G(g.ec,g.fc,Q,te,ge,we,Ae,je,ie,me,Se,oe,z,H-P.A,z,H,Ke),++_);Le+2<De;Le+=2)ge=ie,we=me,Ae=Se,je=oe,me+=h.Rc,oe+=h.Rc,H+=2*P.A,G(Q,(te+=2*h.fa)-h.fa,Q,te,ge,we,Ae,je,ie,me,Se,oe,z,H-P.A,z,H,Ke);return te+=h.fa,h.j+De<h.o?(s(g.ec,g.fc,Q,te,Ke),s(g.cc,g.dc,ie,me,$e),s(g.Mc,g.Nc,Se,oe,$e),_--):1&De||G(Q,te,null,null,ie,me,Se,oe,ie,me,Se,oe,z,H+P.A,null,null,Ke),_}function rr(h,g,_){var P=h.F,z=[h.J];if(P!=null){var H=h.U,G=g.ba.S,Q=G==jm||G==Sm;g=g.ba.f.RGBA;var te=[0],ie=h.ka;te[0]=h.T,h.Kb&&(ie==0?--te[0]:(--ie,z[0]-=h.width),h.j+h.ka+h.T==h.o&&(te[0]=h.o-h.j-ie));var me=g.eb;ie=g.fb+ie*g.A,h=bb(P,z[0],h.width,H,te,me,ie+(Q?0:3),g.A),t(_==te),h&&xt(G)&&vh(me,ie,Q,H,te,g.A)}return 0}function $r(h){var g=h.ma,_=g.ba.S,P=11>_,z=_==wm||_==Nm||_==jm||_==Mx||_==12||xt(_);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!dh(g.Oa,h,z?11:12))return 0;if(z&&xt(_)&&oh(),h.da)alert("todo:use_scaling");else{if(P){if(g.Ib=Ft,h.Kb){if(_=h.U+1>>1,g.memory=i(h.U+2*_),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+_,g.Ib=Ut,oh()}}else alert("todo:EmitYUV");z&&(g.Jb=rr,P&&ai())}if(P&&!Fb){for(h=0;256>h;++h)Z8[h]=89858*(h-128)+Cm>>_m,rL[h]=-22014*(h-128)+Cm,tL[h]=-45773*(h-128),eL[h]=113618*(h-128)+Cm>>_m;for(h=bh;h<zx;++h)g=76283*(h-16)+Cm>>_m,nL[h-bh]=Pr(g,255),sL[h-bh]=Pr(g+8>>4,15);Fb=1}return 1}function ft(h){var g=h.ma,_=h.U,P=h.T;return t(!(1&h.ka)),0>=_||0>=P?0:(_=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,_),g.Dc+=_,1)}function sn(h){h.ma.memory=null}function _n(h,g,_,P){return he(h,8)!=47?0:(g[0]=he(h,14)+1,_[0]=he(h,14)+1,P[0]=he(h,1),he(h,3)!=0?0:!h.h)}function Mr(h,g){if(4>h)return h+1;var _=h-2>>1;return(2+(1&h)<<_)+he(g,_)+1}function Kr(h,g){return 120<g?g-120:1<=(_=((_=B8[g-1])>>4)*h+(8-(15&_)))?_:1;var _}function zr(h,g,_){var P=L(_),z=h[g+=255&P].g-8;return 0<z&&(K(_,_.u+8),P=L(_),g+=h[g].value,g+=P&(1<<z)-1),K(_,_.u+h[g].g),h[g].value}function qr(h,g,_){return _.g+=h.g,_.value+=h.value<<g>>>0,t(8>=_.g),h.g}function Ir(h,g,_){var P=h.xc;return t((g=P==0?0:h.vc[h.md*(_>>P)+(g>>P)])<h.Wb),h.Ya[g]}function ei(h,g,_,P){var z=h.ab,H=h.c*g,G=h.C;g=G+g;var Q=_,te=P;for(P=h.Ta,_=h.Ua;0<z--;){var ie=h.gc[z],me=G,Se=g,oe=Q,ge=te,we=(te=P,Q=_,ie.Ea);switch(t(me<Se),t(Se<=ie.nc),ie.hc){case 2:Cn(oe,ge,(Se-me)*we,te,Q);break;case 0:var Ae=me,je=Se,Le=te,De=Q,Ke=(Ct=ie).Ea;Ae==0&&(hh(oe,ge,null,null,1,Le,De),Mt(oe,ge+1,0,0,Ke-1,Le,De+1),ge+=Ke,De+=Ke,++Ae);for(var $e=1<<Ct.b,Dt=$e-1,vt=Ee(Ke,Ct.b),nr=Ct.K,Ct=Ct.w+(Ae>>Ct.b)*vt;Ae<je;){var hr=nr,Wn=Ct,sr=1;for(jd(oe,ge,Le,De-Ke,1,Le,De);sr<Ke;){var kt=(sr&~Dt)+$e;kt>Ke&&(kt=Ke),(0,mh[hr[Wn++]>>8&15])(oe,ge+ +sr,Le,De+sr-Ke,kt-sr,Le,De+sr),sr=kt}ge+=Ke,De+=Ke,++Ae&Dt||(Ct+=vt)}Se!=ie.nc&&s(te,Q-we,te,Q+(Se-me-1)*we,we);break;case 1:for(we=oe,je=ge,Ke=(oe=ie.Ea)-(De=oe&~(Le=(ge=1<<ie.b)-1)),Ae=Ee(oe,ie.b),$e=ie.K,ie=ie.w+(me>>ie.b)*Ae;me<Se;){for(Dt=$e,vt=ie,nr=new dt,Ct=je+De,hr=je+oe;je<Ct;)st(Dt[vt++],nr),ph(nr,we,je,ge,te,Q),je+=ge,Q+=ge;je<hr&&(st(Dt[vt++],nr),ph(nr,we,je,Ke,te,Q),je+=Ke,Q+=Ke),++me&Le||(ie+=Ae)}break;case 3:if(oe==te&&ge==Q&&0<ie.b){for(je=te,oe=we=Q+(Se-me)*we-(De=(Se-me)*Ee(ie.Ea,ie.b)),ge=te,Le=Q,Ae=[],De=(Ke=De)-1;0<=De;--De)Ae[De]=ge[Le+De];for(De=Ke-1;0<=De;--De)je[oe+De]=Ae[De];xm(ie,me,Se,te,we,te,Q)}else xm(ie,me,Se,oe,ge,te,Q)}Q=P,te=_}te!=_&&s(P,_,Q,te,H)}function Ps(h,g){var _=h.V,P=h.Ba+h.c*h.C,z=g-h.C;if(t(g<=h.l.o),t(16>=z),0<z){var H=h.l,G=h.Ta,Q=h.Ua,te=H.width;if(ei(h,z,_,P),z=Q=[Q],t((_=h.C)<(P=g)),t(H.v<H.va),P>H.o&&(P=H.o),_<H.j){var ie=H.j-_;_=H.j,z[0]+=ie*te}if(_>=P?_=0:(z[0]+=4*H.v,H.ka=_-H.j,H.U=H.va-H.v,H.T=P-_,_=1),_){if(Q=Q[0],11>(_=h.ca).S){var me=_.f.RGBA,Se=(P=_.S,z=H.U,H=H.T,ie=me.eb,me.A),oe=H;for(me=me.fb+h.Ma*me.A;0<oe--;){var ge=G,we=Q,Ae=z,je=ie,Le=me;switch(P){case bm:gh(ge,we,Ae,je,Le);break;case wm:Xo(ge,we,Ae,je,Le);break;case Fx:Xo(ge,we,Ae,je,Le),vh(je,Le,0,Ae,1,0);break;case kb:wc(ge,we,Ae,je,Le);break;case Nm:Ve(ge,we,Ae,je,Le,1);break;case Ox:Ve(ge,we,Ae,je,Le,1),vh(je,Le,0,Ae,1,0);break;case jm:Ve(ge,we,Ae,je,Le,0);break;case Sm:Ve(ge,we,Ae,je,Le,0),vh(je,Le,1,Ae,1,0);break;case Mx:Jo(ge,we,Ae,je,Le);break;case Bx:Jo(ge,we,Ae,je,Le),yb(je,Le,Ae,1,0);break;case Pb:Zo(ge,we,Ae,je,Le);break;default:t(0)}Q+=te,me+=Se}h.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=_.height)}}h.C=g,t(h.C<=h.i)}function Jn(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var _=h.Ya[g].G,P=h.Ya[g].H;if(0<_[1][P[1]+0].g||0<_[2][P[2]+0].g||0<_[3][P[3]+0].g)return 0}return 1}function qs(h,g,_,P,z,H){if(h.Z!=0){var G=h.qd,Q=h.rd;for(t(rl[h.Z]!=null);g<_;++g)rl[h.Z](G,Q,P,z,P,z,H),G=P,Q=z,z+=H;h.qd=G,h.rd=Q}}function an(h,g){var _=h.l.ma,P=_.Z==0||_.Z==1?h.l.j:h.C;if(P=h.C<P?P:h.C,t(g<=h.l.o),g>P){var z=h.l.width,H=_.ca,G=_.tb+z*P,Q=h.V,te=h.Ba+h.c*P,ie=h.gc;t(h.ab==1),t(ie[0].hc==3),Ii(ie[0],P,g,Q,te,H,G),qs(_,P,g,H,G,z)}h.C=h.Ma=g}function Qt(h,g,_,P,z,H,G){var Q=h.$/P,te=h.$%P,ie=h.m,me=h.s,Se=_+h.$,oe=Se;z=_+P*z;var ge=_+P*H,we=280+me.ua,Ae=h.Pb?Q:16777216,je=0<me.ua?me.Wa:null,Le=me.wc,De=Se<ge?Ir(me,te,Q):null;t(h.C<H),t(ge<=z);var Ke=!1;e:for(;;){for(;Ke||Se<ge;){var $e=0;if(Q>=Ae){var Dt=Se-_;t((Ae=h).Pb),Ae.wd=Ae.m,Ae.xd=Dt,0<Ae.s.ua&&Ge(Ae.s.Wa,Ae.s.vb),Ae=Q+$8}if(te&Le||(De=Ir(me,te,Q)),t(De!=null),De.Qb&&(g[Se]=De.qb,Ke=!0),!Ke)if(I(ie),De.jc){$e=ie,Dt=g;var vt=Se,nr=De.pd[L($e)&bc-1];t(De.jc),256>nr.g?(K($e,$e.u+nr.g),Dt[vt]=nr.value,$e=0):(K($e,$e.u+nr.g-256),t(256<=nr.value),$e=nr.value),$e==0&&(Ke=!0)}else $e=zr(De.G[0],De.H[0],ie);if(ie.h)break;if(Ke||256>$e){if(!Ke)if(De.nd)g[Se]=(De.qb|$e<<8)>>>0;else{if(I(ie),Ke=zr(De.G[1],De.H[1],ie),I(ie),Dt=zr(De.G[2],De.H[2],ie),vt=zr(De.G[3],De.H[3],ie),ie.h)break;g[Se]=(vt<<24|Ke<<16|$e<<8|Dt)>>>0}if(Ke=!1,++Se,++te>=P&&(te=0,++Q,G!=null&&Q<=H&&!(Q%16)&&G(h,Q),je!=null))for(;oe<Se;)$e=g[oe++],je.X[(506832829*$e&4294967295)>>>je.Mb]=$e}else if(280>$e){if($e=Mr($e-256,ie),Dt=zr(De.G[4],De.H[4],ie),I(ie),Dt=Kr(P,Dt=Mr(Dt,ie)),ie.h)break;if(Se-_<Dt||z-Se<$e)break e;for(vt=0;vt<$e;++vt)g[Se+vt]=g[Se+vt-Dt];for(Se+=$e,te+=$e;te>=P;)te-=P,++Q,G!=null&&Q<=H&&!(Q%16)&&G(h,Q);if(t(Se<=z),te&Le&&(De=Ir(me,te,Q)),je!=null)for(;oe<Se;)$e=g[oe++],je.X[(506832829*$e&4294967295)>>>je.Mb]=$e}else{if(!($e<we))break e;for(Ke=$e-280,t(je!=null);oe<Se;)$e=g[oe++],je.X[(506832829*$e&4294967295)>>>je.Mb]=$e;$e=Se,t(!(Ke>>>(Dt=je).Xa)),g[$e]=Dt.X[Ke],Ke=!0}Ke||t(ie.h==$(ie))}if(h.Pb&&ie.h&&Se<z)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ge(h.s.vb,h.s.Wa);else{if(ie.h)break e;G!=null&&G(h,Q>H?H:Q),h.a=0,h.$=Se-_}return 1}return h.a=3,0}function Qr(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,t(h!=null)}function Vs(){var h=new Xt;return h==null?null:(h.a=0,h.xb=Lb,Yt("Predictor","VP8LPredictors"),Yt("Predictor","VP8LPredictors_C"),Yt("PredictorAdd","VP8LPredictorsAdd"),Yt("PredictorAdd","VP8LPredictorsAdd_C"),Cn=Gt,ph=se,gh=Pe,Xo=Fe,Jo=pe,Zo=ze,wc=qe,D.VP8LMapColor32b=Ri,D.VP8LMapColor8b=fh,h)}function ce(h,g,_,P,z){var H=1,G=[h],Q=[g],te=P.m,ie=P.s,me=null,Se=0;e:for(;;){if(_)for(;H&&he(te,1);){var oe=G,ge=Q,we=P,Ae=1,je=we.m,Le=we.gc[we.ab],De=he(je,2);if(we.Oc&1<<De)H=0;else{switch(we.Oc|=1<<De,Le.hc=De,Le.Ea=oe[0],Le.nc=ge[0],Le.K=[null],++we.ab,t(4>=we.ab),De){case 0:case 1:Le.b=he(je,3)+2,Ae=ce(Ee(Le.Ea,Le.b),Ee(Le.nc,Le.b),0,we,Le.K),Le.K=Le.K[0];break;case 3:var Ke,$e=he(je,8)+1,Dt=16<$e?0:4<$e?1:2<$e?2:3;if(oe[0]=Ee(Le.Ea,Dt),Le.b=Dt,Ke=Ae=ce($e,1,0,we,Le.K)){var vt,nr=$e,Ct=Le,hr=1<<(8>>Ct.b),Wn=i(hr);if(Wn==null)Ke=0;else{var sr=Ct.K[0],kt=Ct.w;for(Wn[0]=Ct.K[0][0],vt=1;vt<1*nr;++vt)Wn[vt]=it(sr[kt+vt],Wn[vt-1]);for(;vt<4*hr;++vt)Wn[vt]=0;Ct.K[0]=null,Ct.K[0]=Wn,Ke=1}}Ae=Ke;break;case 2:break;default:t(0)}H=Ae}}if(G=G[0],Q=Q[0],H&&he(te,1)&&!(H=1<=(Se=he(te,4))&&11>=Se)){P.a=3;break e}var nt;if(nt=H)t:{var Pn,Zt,gr,Xr=P,ls=G,Es=Q,xn=Se,gs=_,Ls=Xr.m,Gn=Xr.s,br=[null],Er=1,vn=0,Lr=U8[xn];r:for(;;){if(gs&&he(Ls,1)){var cs=he(Ls,3)+2,oi=Ee(ls,cs),An=Ee(Es,cs),Gs=oi*An;if(!ce(oi,An,0,Xr,br))break r;for(br=br[0],Gn.xc=cs,Pn=0;Pn<Gs;++Pn){var Or=br[Pn]>>8&65535;br[Pn]=Or,Or>=Er&&(Er=Or+1)}}if(Ls.h)break r;for(Zt=0;5>Zt;++Zt){var Yn=Ab[Zt];!Zt&&0<xn&&(Yn+=1<<xn),vn<Yn&&(vn=Yn)}var ua=l(Er*Lr,ee),Ts=Er,ha=l(Ts,ae);if(ha==null)var fa=null;else t(65536>=Ts),fa=ha;var Ys=i(vn);if(fa==null||Ys==null||ua==null){Xr.a=1;break r}var ma=ua;for(Pn=gr=0;Pn<Er;++Pn){var Wr=fa[Pn],pa=Wr.G,li=Wr.H,jc=0,go=1,ds=0;for(Zt=0;5>Zt;++Zt){Yn=Ab[Zt],pa[Zt]=ma,li[Zt]=gr,!Zt&&0<xn&&(Yn+=1<<xn);s:{var Pm,qx=Yn,Am=Xr,wh=Ys,oL=ma,lL=gr,Vx=0,nl=Am.m,cL=he(nl,1);if(a(wh,0,0,qx),cL){var dL=he(nl,1)+1,uL=he(nl,1),Ub=he(nl,uL==0?1:8);wh[Ub]=1,dL==2&&(wh[Ub=he(nl,8)]=1);var Em=1}else{var $b=i(19),zb=he(nl,4)+4;if(19<zb){Am.a=3;var Lm=0;break s}for(Pm=0;Pm<zb;++Pm)$b[O8[Pm]]=he(nl,3);var Hx=void 0,Nh=void 0,qb=Am,hL=$b,Tm=qx,Vb=wh,Wx=0,sl=qb.m,Hb=8,Wb=l(128,ee);n:for(;M(Wb,0,7,hL,19);){if(he(sl,1)){var fL=2+2*he(sl,3);if((Hx=2+he(sl,fL))>Tm)break n}else Hx=Tm;for(Nh=0;Nh<Tm&&Hx--;){I(sl);var Gb=Wb[0+(127&L(sl))];K(sl,sl.u+Gb.g);var _d=Gb.value;if(16>_d)Vb[Nh++]=_d,_d!=0&&(Hb=_d);else{var mL=_d==16,Yb=_d-16,pL=M8[Yb],Kb=he(sl,I8[Yb])+pL;if(Nh+Kb>Tm)break n;for(var gL=mL?Hb:0;0<Kb--;)Vb[Nh++]=gL}}Wx=1;break n}Wx||(qb.a=3),Em=Wx}(Em=Em&&!nl.h)&&(Vx=M(oL,lL,8,wh,qx)),Em&&Vx!=0?Lm=Vx:(Am.a=3,Lm=0)}if(Lm==0)break r;if(go&&F8[Zt]==1&&(go=ma[gr].g==0),jc+=ma[gr].g,gr+=Lm,3>=Zt){var jh,Gx=Ys[0];for(jh=1;jh<Yn;++jh)Ys[jh]>Gx&&(Gx=Ys[jh]);ds+=Gx}}if(Wr.nd=go,Wr.Qb=0,go&&(Wr.qb=(pa[3][li[3]+0].value<<24|pa[1][li[1]+0].value<<16|pa[2][li[2]+0].value)>>>0,jc==0&&256>pa[0][li[0]+0].value&&(Wr.Qb=1,Wr.qb+=pa[0][li[0]+0].value<<8)),Wr.jc=!Wr.Qb&&6>ds,Wr.jc){var Dm,xo=Wr;for(Dm=0;Dm<bc;++Dm){var al=Dm,il=xo.pd[al],Rm=xo.G[0][xo.H[0]+al];256<=Rm.value?(il.g=Rm.g+256,il.value=Rm.value):(il.g=0,il.value=0,al>>=qr(Rm,8,il),al>>=qr(xo.G[1][xo.H[1]+al],16,il),al>>=qr(xo.G[2][xo.H[2]+al],0,il),qr(xo.G[3][xo.H[3]+al],24,il))}}}Gn.vc=br,Gn.Wb=Er,Gn.Ya=fa,Gn.yc=ua,nt=1;break t}nt=0}if(!(H=nt)){P.a=3;break e}if(0<Se){if(ie.ua=1<<Se,!Z(ie.Wa,Se)){P.a=1,H=0;break e}}else ie.ua=0;var Yx=P,Qb=G,xL=Q,Kx=Yx.s,Qx=Kx.xc;if(Yx.c=Qb,Yx.i=xL,Kx.md=Ee(Qb,Qx),Kx.wc=Qx==0?-1:(1<<Qx)-1,_){P.xb=Y8;break e}if((me=i(G*Q))==null){P.a=1,H=0;break e}H=(H=Qt(P,me,0,G,Q,Q,null))&&!te.h;break e}return H?(z!=null?z[0]=me:(t(me==null),t(_)),P.$=0,_||Qr(ie)):Qr(ie),H}function Be(h,g){var _=h.c*h.i,P=_+g+16*g;return t(h.c<=g),h.V=i(P),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+_+g,1)}function He(h,g){var _=h.C,P=g-_,z=h.V,H=h.Ba+h.c*_;for(t(g<=h.l.o);0<P;){var G=16<P?16:P,Q=h.l.ma,te=h.l.width,ie=te*G,me=Q.ca,Se=Q.tb+te*_,oe=h.Ta,ge=h.Ua;ei(h,G,z,H),wb(oe,ge,me,Se,ie),qs(Q,_,_+G,me,Se,te),P-=G,z+=G*h.c,_+=G}t(_==g),h.C=h.Ma=g}function Ye(){this.ub=this.yd=this.td=this.Rb=0}function tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function qt(){this.Yb=function(){var h=[];return function g(_,P,z){for(var H=z[P],G=0;G<H&&(_.push(z.length>P+1?[]:0),!(z.length<P+1));G++)g(_[G],P+1,z)}(h,0,[3,11]),h}()}function mt(){this.jb=i(3),this.Wc=o([4,8],qt),this.Xc=o([4,17],qt)}function Pt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function $t(){this.ld=this.La=this.dd=this.tc=0}function At(){this.Na=this.la=0}function at(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ot(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sr(){this.uc=this.M=this.Nb=0,this.wa=Array(new $t),this.Y=0,this.ya=Array(new Ot),this.aa=0,this.l=new pr}function on(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Vr(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new Ye,this.Kc=new tt,this.ed=new Pt,this.Qa=new ct,this.Ic=this.$c=this.Aa=0,this.D=new Sr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,C),this.ia=0,this.pb=l(4,at),this.Pa=new mt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new on),this.Hd=0,this.rb=Array(new At),this.sb=0,this.wa=Array(new $t),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ot),this.L=this.aa=0,this.gd=o([4,2],$t),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pr(h,g){return 0>h?0:h>g?g:h}function pr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function aa(){var h=new Vr;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,yh||(yh=ao)),h}function _t(h,g,_){return h.a==0&&(h.a=g,h.sc=_,h.cb=0),0}function dc(h,g,_){return 3<=_&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function La(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return _t(h,2,"null VP8Io passed to VP8GetHeaders()");var _=g.data,P=g.w,z=g.ha;if(4>z)return _t(h,7,"Truncated header.");var H=_[P+0]|_[P+1]<<8|_[P+2]<<16,G=h.Od;if(G.Rb=!(1&H),G.td=H>>1&7,G.yd=H>>4&1,G.ub=H>>5,3<G.td)return _t(h,3,"Incorrect keyframe parameters.");if(!G.yd)return _t(h,4,"Frame not displayable.");P+=3,z-=3;var Q=h.Kc;if(G.Rb){if(7>z)return _t(h,7,"cannot parse picture header");if(!dc(_,P,z))return _t(h,3,"Bad code word");Q.c=16383&(_[P+4]<<8|_[P+3]),Q.Td=_[P+4]>>6,Q.i=16383&(_[P+6]<<8|_[P+5]),Q.Ud=_[P+6]>>6,P+=7,z-=7,h.za=Q.c+15>>4,h.Ub=Q.i+15>>4,g.width=Q.c,g.height=Q.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,a((H=h.Pa).jb,0,255,H.jb.length),t((H=h.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,a(H.Zb,0,0,H.Zb.length),a(H.Lb,0,0,H.Lb)}if(G.ub>z)return _t(h,7,"bad partition length");Y(H=h.m,_,P,G.ub),P+=G.ub,z-=G.ub,G.Rb&&(Q.Ld=ne(H),Q.Kd=ne(H)),Q=h.Qa;var te,ie=h.Pa;if(t(H!=null),t(Q!=null),Q.Cb=ne(H),Q.Cb){if(Q.Bb=ne(H),ne(H)){for(Q.Fb=ne(H),te=0;4>te;++te)Q.Zb[te]=ne(H)?T(H,7):0;for(te=0;4>te;++te)Q.Lb[te]=ne(H)?T(H,6):0}if(Q.Bb)for(te=0;3>te;++te)ie.jb[te]=ne(H)?de(H,8):255}else Q.Bb=0;if(H.Ka)return _t(h,3,"cannot parse segment header");if((Q=h.ed).zd=ne(H),Q.Tb=de(H,6),Q.wb=de(H,3),Q.Pc=ne(H),Q.Pc&&ne(H)){for(ie=0;4>ie;++ie)ne(H)&&(Q.vd[ie]=T(H,6));for(ie=0;4>ie;++ie)ne(H)&&(Q.od[ie]=T(H,6))}if(h.L=Q.Tb==0?0:Q.zd?1:2,H.Ka)return _t(h,3,"cannot parse filter header");var me=z;if(z=te=P,P=te+me,Q=me,h.Xb=(1<<de(h.m,2))-1,me<3*(ie=h.Xb))_=7;else{for(te+=3*ie,Q-=3*ie,me=0;me<ie;++me){var Se=_[z+0]|_[z+1]<<8|_[z+2]<<16;Se>Q&&(Se=Q),Y(h.Jc[+me],_,te,Se),te+=Se,Q-=Se,z+=3}Y(h.Jc[+ie],_,te,Q),_=te<P?0:5}if(_!=0)return _t(h,_,"cannot parse partitions");for(_=de(te=h.m,7),z=ne(te)?T(te,4):0,P=ne(te)?T(te,4):0,Q=ne(te)?T(te,4):0,ie=ne(te)?T(te,4):0,te=ne(te)?T(te,4):0,me=h.Qa,Se=0;4>Se;++Se){if(me.Cb){var oe=me.Zb[Se];me.Fb||(oe+=_)}else{if(0<Se){h.pb[Se]=h.pb[0];continue}oe=_}var ge=h.pb[Se];ge.Sc[0]=Ux[Pr(oe+z,127)],ge.Sc[1]=$x[Pr(oe+0,127)],ge.Eb[0]=2*Ux[Pr(oe+P,127)],ge.Eb[1]=101581*$x[Pr(oe+Q,127)]>>16,8>ge.Eb[1]&&(ge.Eb[1]=8),ge.Qc[0]=Ux[Pr(oe+ie,117)],ge.Qc[1]=$x[Pr(oe+te,127)],ge.lc=oe+te}if(!G.Rb)return _t(h,4,"Not a key frame.");for(ne(H),G=h.Pa,_=0;4>_;++_){for(z=0;8>z;++z)for(P=0;3>P;++P)for(Q=0;11>Q;++Q)ie=ue(H,W8[_][z][P][Q])?de(H,8):V8[_][z][P][Q],G.Wc[_][z].Yb[P][Q]=ie;for(z=0;17>z;++z)G.Xc[_][z]=G.Wc[_][G8[z]]}return h.kc=ne(H),h.kc&&(h.Bd=de(H,8)),h.cb=1}function ao(h,g,_,P,z,H,G){var Q=g[z].Yb[_];for(_=0;16>z;++z){if(!ue(h,Q[_+0]))return z;for(;!ue(h,Q[_+1]);)if(Q=g[++z].Yb[0],_=0,z==16)return 16;var te=g[z+1].Yb;if(ue(h,Q[_+2])){var ie=h,me=0;if(ue(ie,(oe=Q)[(Se=_)+3]))if(ue(ie,oe[Se+6])){for(Q=0,Se=2*(me=ue(ie,oe[Se+8]))+(oe=ue(ie,oe[Se+9+me])),me=0,oe=z8[Se];oe[Q];++Q)me+=me+ue(ie,oe[Q]);me+=3+(8<<Se)}else ue(ie,oe[Se+7])?(me=7+2*ue(ie,165),me+=ue(ie,145)):me=5+ue(ie,159);else me=ue(ie,oe[Se+4])?3+ue(ie,oe[Se+5]):2;Q=te[2]}else me=1,Q=te[1];te=G+q8[z],0>(ie=h).b&&X(ie);var Se,oe=ie.b,ge=(Se=ie.Ca>>1)-(ie.I>>oe)>>31;--ie.b,ie.Ca+=ge,ie.Ca|=1,ie.I-=(Se+1&ge)<<oe,H[te]=((me^ge)-ge)*P[(0<z)+0]}return 16}function pd(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function Hs(h,g,_,P,z){z=h[g+_+32*P]+(z>>3),h[g+_+32*P]=-256&z?0>z?0:255:z}function pn(h,g,_,P,z,H){Hs(h,g,0,_,P+z),Hs(h,g,1,_,P+H),Hs(h,g,2,_,P-H),Hs(h,g,3,_,P-z)}function ti(h){return(20091*h>>16)+h}function Ws(h,g,_,P){var z,H=0,G=i(16);for(z=0;4>z;++z){var Q=h[g+0]+h[g+8],te=h[g+0]-h[g+8],ie=(35468*h[g+4]>>16)-ti(h[g+12]),me=ti(h[g+4])+(35468*h[g+12]>>16);G[H+0]=Q+me,G[H+1]=te+ie,G[H+2]=te-ie,G[H+3]=Q-me,H+=4,g++}for(z=H=0;4>z;++z)Q=(h=G[H+0]+4)+G[H+8],te=h-G[H+8],ie=(35468*G[H+4]>>16)-ti(G[H+12]),Hs(_,P,0,0,Q+(me=ti(G[H+4])+(35468*G[H+12]>>16))),Hs(_,P,1,0,te+ie),Hs(_,P,2,0,te-ie),Hs(_,P,3,0,Q-me),H++,P+=32}function Zu(h,g,_,P){var z=h[g+0]+4,H=35468*h[g+4]>>16,G=ti(h[g+4]),Q=35468*h[g+1]>>16;pn(_,P,0,z+G,h=ti(h[g+1]),Q),pn(_,P,1,z+H,h,Q),pn(_,P,2,z-H,h,Q),pn(_,P,3,z-G,h,Q)}function eh(h,g,_,P,z){Ws(h,g,_,P),z&&Ws(h,g+16,_,P+4)}function Ta(h,g,_,P){Nc(h,g+0,_,P,1),Nc(h,g+32,_,P+128,1)}function gd(h,g,_,P){var z;for(h=h[g+0]+4,z=0;4>z;++z)for(g=0;4>g;++g)Hs(_,P,g,z,h)}function xd(h,g,_,P){h[g+0]&&Ar(h,g+0,_,P),h[g+16]&&Ar(h,g+16,_,P+4),h[g+32]&&Ar(h,g+32,_,P+128),h[g+48]&&Ar(h,g+48,_,P+128+4)}function zo(h,g,_,P){var z,H=i(16);for(z=0;4>z;++z){var G=h[g+0+z]+h[g+12+z],Q=h[g+4+z]+h[g+8+z],te=h[g+4+z]-h[g+8+z],ie=h[g+0+z]-h[g+12+z];H[0+z]=G+Q,H[8+z]=G-Q,H[4+z]=ie+te,H[12+z]=ie-te}for(z=0;4>z;++z)G=(h=H[0+4*z]+3)+H[3+4*z],Q=H[1+4*z]+H[2+4*z],te=H[1+4*z]-H[2+4*z],ie=h-H[3+4*z],_[P+0]=G+Q>>3,_[P+16]=ie+te>>3,_[P+32]=G-Q>>3,_[P+48]=ie-te>>3,P+=64}function io(h,g,_){var P,z=g-32,H=da,G=255-h[z-1];for(P=0;P<_;++P){var Q,te=H,ie=G+h[g-1];for(Q=0;Q<_;++Q)h[g+Q]=te[ie+h[z+Q]];g+=32}}function th(h,g){io(h,g,4)}function qo(h,g){io(h,g,8)}function rh(h,g){io(h,g,16)}function uc(h,g){var _;for(_=0;16>_;++_)s(h,g+32*_,h,g-32,16)}function hc(h,g){var _;for(_=16;0<_;--_)a(h,g,h[g-1],16),g+=32}function ia(h,g,_){var P;for(P=0;16>P;++P)a(g,_+32*P,h,16)}function nh(h,g){var _,P=16;for(_=0;16>_;++_)P+=h[g-1+32*_]+h[g+_-32];ia(P>>5,h,g)}function oo(h,g){var _,P=8;for(_=0;16>_;++_)P+=h[g-1+32*_];ia(P>>4,h,g)}function fc(h,g){var _,P=8;for(_=0;16>_;++_)P+=h[g+_-32];ia(P>>4,h,g)}function vd(h,g){ia(128,h,g)}function Vt(h,g,_){return h+2*g+_+2>>2}function sh(h,g){var _,P=g-32;for(P=new Uint8Array([Vt(h[P-1],h[P+0],h[P+1]),Vt(h[P+0],h[P+1],h[P+2]),Vt(h[P+1],h[P+2],h[P+3]),Vt(h[P+2],h[P+3],h[P+4])]),_=0;4>_;++_)s(h,g+32*_,P,0,P.length)}function yd(h,g){var _=h[g-1],P=h[g-1+32],z=h[g-1+64],H=h[g-1+96];xe(h,g+0,16843009*Vt(h[g-1-32],_,P)),xe(h,g+32,16843009*Vt(_,P,z)),xe(h,g+64,16843009*Vt(P,z,H)),xe(h,g+96,16843009*Vt(z,H,H))}function ah(h,g){var _,P=4;for(_=0;4>_;++_)P+=h[g+_-32]+h[g-1+32*_];for(P>>=3,_=0;4>_;++_)a(h,g+32*_,P,4)}function ri(h,g){var _=h[g-1+0],P=h[g-1+32],z=h[g-1+64],H=h[g-1-32],G=h[g+0-32],Q=h[g+1-32],te=h[g+2-32],ie=h[g+3-32];h[g+0+96]=Vt(P,z,h[g-1+96]),h[g+1+96]=h[g+0+64]=Vt(_,P,z),h[g+2+96]=h[g+1+64]=h[g+0+32]=Vt(H,_,P),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=Vt(G,H,_),h[g+3+64]=h[g+2+32]=h[g+1+0]=Vt(Q,G,H),h[g+3+32]=h[g+2+0]=Vt(te,Q,G),h[g+3+0]=Vt(ie,te,Q)}function Da(h,g){var _=h[g+1-32],P=h[g+2-32],z=h[g+3-32],H=h[g+4-32],G=h[g+5-32],Q=h[g+6-32],te=h[g+7-32];h[g+0+0]=Vt(h[g+0-32],_,P),h[g+1+0]=h[g+0+32]=Vt(_,P,z),h[g+2+0]=h[g+1+32]=h[g+0+64]=Vt(P,z,H),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=Vt(z,H,G),h[g+3+32]=h[g+2+64]=h[g+1+96]=Vt(H,G,Q),h[g+3+64]=h[g+2+96]=Vt(G,Q,te),h[g+3+96]=Vt(Q,te,te)}function mc(h,g){var _=h[g-1+0],P=h[g-1+32],z=h[g-1+64],H=h[g-1-32],G=h[g+0-32],Q=h[g+1-32],te=h[g+2-32],ie=h[g+3-32];h[g+0+0]=h[g+1+64]=H+G+1>>1,h[g+1+0]=h[g+2+64]=G+Q+1>>1,h[g+2+0]=h[g+3+64]=Q+te+1>>1,h[g+3+0]=te+ie+1>>1,h[g+0+96]=Vt(z,P,_),h[g+0+64]=Vt(P,_,H),h[g+0+32]=h[g+1+96]=Vt(_,H,G),h[g+1+32]=h[g+2+96]=Vt(H,G,Q),h[g+2+32]=h[g+3+96]=Vt(G,Q,te),h[g+3+32]=Vt(Q,te,ie)}function Vo(h,g){var _=h[g+0-32],P=h[g+1-32],z=h[g+2-32],H=h[g+3-32],G=h[g+4-32],Q=h[g+5-32],te=h[g+6-32],ie=h[g+7-32];h[g+0+0]=_+P+1>>1,h[g+1+0]=h[g+0+64]=P+z+1>>1,h[g+2+0]=h[g+1+64]=z+H+1>>1,h[g+3+0]=h[g+2+64]=H+G+1>>1,h[g+0+32]=Vt(_,P,z),h[g+1+32]=h[g+0+96]=Vt(P,z,H),h[g+2+32]=h[g+1+96]=Vt(z,H,G),h[g+3+32]=h[g+2+96]=Vt(H,G,Q),h[g+3+64]=Vt(G,Q,te),h[g+3+96]=Vt(Q,te,ie)}function Ti(h,g){var _=h[g-1+0],P=h[g-1+32],z=h[g-1+64],H=h[g-1+96];h[g+0+0]=_+P+1>>1,h[g+2+0]=h[g+0+32]=P+z+1>>1,h[g+2+32]=h[g+0+64]=z+H+1>>1,h[g+1+0]=Vt(_,P,z),h[g+3+0]=h[g+1+32]=Vt(P,z,H),h[g+3+32]=h[g+1+64]=Vt(z,H,H),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=H}function B(h,g){var _=h[g-1+0],P=h[g-1+32],z=h[g-1+64],H=h[g-1+96],G=h[g-1-32],Q=h[g+0-32],te=h[g+1-32],ie=h[g+2-32];h[g+0+0]=h[g+2+32]=_+G+1>>1,h[g+0+32]=h[g+2+64]=P+_+1>>1,h[g+0+64]=h[g+2+96]=z+P+1>>1,h[g+0+96]=H+z+1>>1,h[g+3+0]=Vt(Q,te,ie),h[g+2+0]=Vt(G,Q,te),h[g+1+0]=h[g+3+32]=Vt(_,G,Q),h[g+1+32]=h[g+3+64]=Vt(P,_,G),h[g+1+64]=h[g+3+96]=Vt(z,P,_),h[g+1+96]=Vt(H,z,P)}function Ne(h,g){var _;for(_=0;8>_;++_)s(h,g+32*_,h,g-32,8)}function Xe(h,g){var _;for(_=0;8>_;++_)a(h,g,h[g-1],8),g+=32}function zt(h,g,_){var P;for(P=0;8>P;++P)a(g,_+32*P,h,8)}function It(h,g){var _,P=8;for(_=0;8>_;++_)P+=h[g+_-32]+h[g-1+32*_];zt(P>>4,h,g)}function Bt(h,g){var _,P=4;for(_=0;8>_;++_)P+=h[g+_-32];zt(P>>3,h,g)}function rt(h,g){var _,P=4;for(_=0;8>_;++_)P+=h[g-1+32*_];zt(P>>3,h,g)}function Tt(h,g){zt(128,h,g)}function oa(h,g,_){var P=h[g-_],z=h[g+0],H=3*(z-P)+Ix[1020+h[g-2*_]-h[g+_]],G=ym[112+(H+4>>3)];h[g-_]=da[255+P+ym[112+(H+3>>3)]],h[g+0]=da[255+z-G]}function Ho(h,g,_,P){var z=h[g+0],H=h[g+_];return Oa[255+h[g-2*_]-h[g-_]]>P||Oa[255+H-z]>P}function Ra(h,g,_,P){return 4*Oa[255+h[g-_]-h[g+0]]+Oa[255+h[g-2*_]-h[g+_]]<=P}function ni(h,g,_,P,z){var H=h[g-3*_],G=h[g-2*_],Q=h[g-_],te=h[g+0],ie=h[g+_],me=h[g+2*_],Se=h[g+3*_];return 4*Oa[255+Q-te]+Oa[255+G-ie]>P?0:Oa[255+h[g-4*_]-H]<=z&&Oa[255+H-G]<=z&&Oa[255+G-Q]<=z&&Oa[255+Se-me]<=z&&Oa[255+me-ie]<=z&&Oa[255+ie-te]<=z}function gn(h,g,_,P){var z=2*P+1;for(P=0;16>P;++P)Ra(h,g+P,_,z)&&oa(h,g+P,_)}function as(h,g,_,P){var z=2*P+1;for(P=0;16>P;++P)Ra(h,g+P*_,1,z)&&oa(h,g+P*_,1)}function bd(h,g,_,P){var z;for(z=3;0<z;--z)gn(h,g+=4*_,_,P)}function ih(h,g,_,P){var z;for(z=3;0<z;--z)as(h,g+=4,_,P)}function Ia(h,g,_,P,z,H,G,Q){for(H=2*H+1;0<z--;){if(ni(h,g,_,H,G))if(Ho(h,g,_,Q))oa(h,g,_);else{var te=h,ie=g,me=_,Se=te[ie-2*me],oe=te[ie-me],ge=te[ie+0],we=te[ie+me],Ae=te[ie+2*me],je=27*(De=Ix[1020+3*(ge-oe)+Ix[1020+Se-we]])+63>>7,Le=18*De+63>>7,De=9*De+63>>7;te[ie-3*me]=da[255+te[ie-3*me]+De],te[ie-2*me]=da[255+Se+Le],te[ie-me]=da[255+oe+je],te[ie+0]=da[255+ge-je],te[ie+me]=da[255+we-Le],te[ie+2*me]=da[255+Ae-De]}g+=P}}function Di(h,g,_,P,z,H,G,Q){for(H=2*H+1;0<z--;){if(ni(h,g,_,H,G))if(Ho(h,g,_,Q))oa(h,g,_);else{var te=h,ie=g,me=_,Se=te[ie-me],oe=te[ie+0],ge=te[ie+me],we=ym[112+(4+(Ae=3*(oe-Se))>>3)],Ae=ym[112+(Ae+3>>3)],je=we+1>>1;te[ie-2*me]=da[255+te[ie-2*me]+je],te[ie-me]=da[255+Se+Ae],te[ie+0]=da[255+oe-we],te[ie+me]=da[255+ge-je]}g+=P}}function si(h,g,_,P,z,H){Ia(h,g,_,1,16,P,z,H)}function lo(h,g,_,P,z,H){Ia(h,g,1,_,16,P,z,H)}function pm(h,g,_,P,z,H){var G;for(G=3;0<G;--G)Di(h,g+=4*_,_,1,16,P,z,H)}function N(h,g,_,P,z,H){var G;for(G=3;0<G;--G)Di(h,g+=4,1,_,16,P,z,H)}function U(h,g,_,P,z,H,G,Q){Ia(h,g,z,1,8,H,G,Q),Ia(_,P,z,1,8,H,G,Q)}function le(h,g,_,P,z,H,G,Q){Ia(h,g,1,z,8,H,G,Q),Ia(_,P,1,z,8,H,G,Q)}function fe(h,g,_,P,z,H,G,Q){Di(h,g+4*z,z,1,8,H,G,Q),Di(_,P+4*z,z,1,8,H,G,Q)}function be(h,g,_,P,z,H,G,Q){Di(h,g+4,1,z,8,H,G,Q),Di(_,P+4,1,z,8,H,G,Q)}function Te(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Et(){this.ua=0,this.Wa=new Lt,this.vb=new Lt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new ee}function Xt(){this.xb=this.a=0,this.l=new pr,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Et,this.ab=0,this.gc=l(4,Nt),this.Oc=0}function tr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(h,g,_,P,z,H,G){for(h=h==null?0:h[g+0],g=0;g<G;++g)z[H+g]=h+_[P+g]&255,h=z[H+g]}function dn(h,g,_,P,z,H,G){var Q;if(h==null)yr(null,null,_,P,z,H,G);else for(Q=0;Q<G;++Q)z[H+Q]=h[g+Q]+_[P+Q]&255}function Bn(h,g,_,P,z,H,G){if(h==null)yr(null,null,_,P,z,H,G);else{var Q,te=h[g+0],ie=te,me=te;for(Q=0;Q<G;++Q)ie=me+(te=h[g+Q])-ie,me=_[P+Q]+(-256&ie?0>ie?0:255:ie)&255,ie=te,z[H+Q]=me}}function Hr(h,g,_,P){var z=g.width,H=g.o;if(t(h!=null&&g!=null),0>_||0>=P||_+P>H)return null;if(!h.Cc){if(h.ga==null){var G;if(h.ga=new tr,(G=h.ga==null)||(G=g.width*g.o,t(h.Gb.length==0),h.Gb=i(G),h.Uc=0,h.Gb==null?G=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,G=1),G=!G),!G){G=h.ga;var Q=h.Fa,te=h.P,ie=h.qc,me=h.mb,Se=h.nb,oe=te+1,ge=ie-1,we=G.l;if(t(Q!=null&&me!=null&&g!=null),rl[0]=null,rl[1]=yr,rl[2]=dn,rl[3]=Bn,G.ca=me,G.tb=Se,G.c=g.width,G.i=g.height,t(0<G.c&&0<G.i),1>=ie)g=0;else if(G.$a=3&Q[te+0],G.Z=Q[te+0]>>2&3,G.Lc=Q[te+0]>>4&3,te=Q[te+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||te)g=0;else if(we.put=ft,we.ac=$r,we.bc=sn,we.ma=G,we.width=g.width,we.height=g.height,we.Da=g.Da,we.v=g.v,we.va=g.va,we.j=g.j,we.o=g.o,G.$a)e:{t(G.$a==1),g=Vs();t:for(;;){if(g==null){g=0;break e}if(t(G!=null),G.mc=g,g.c=G.c,g.i=G.i,g.l=G.l,g.l.ma=G,g.l.width=G.c,g.l.height=G.i,g.a=0,V(g.m,Q,oe,ge),!ce(G.c,G.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&Jn(g.s)?(G.ic=1,Q=g.c*g.i,g.Ta=null,g.Ua=0,g.V=i(Q),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(G.ic=0,g=Be(g,G.c)),!g))break t;g=1;break e}G.mc=null,g=0}else g=ge>=G.c*G.i;G=!g}if(G)return null;h.ga.Lc!=1?h.Ga=0:P=H-_}t(h.ga!=null),t(_+P<=H);e:{if(g=(Q=h.ga).c,H=Q.l.o,Q.$a==0){if(oe=h.rc,ge=h.Vc,we=h.Fa,te=h.P+1+_*g,ie=h.mb,me=h.nb+_*g,t(te<=h.P+h.qc),Q.Z!=0)for(t(rl[Q.Z]!=null),G=0;G<P;++G)rl[Q.Z](oe,ge,we,te,ie,me,g),oe=ie,ge=me,me+=g,te+=g;else for(G=0;G<P;++G)s(ie,me,we,te,g),oe=ie,ge=me,me+=g,te+=g;h.rc=oe,h.Vc=ge}else{if(t(Q.mc!=null),g=_+P,t((G=Q.mc)!=null),t(g<=G.i),G.C>=g)g=1;else if(Q.ic||ai(),Q.ic){Q=G.V,oe=G.Ba,ge=G.c;var Ae=G.i,je=(we=1,te=G.$/ge,ie=G.$%ge,me=G.m,Se=G.s,G.$),Le=ge*Ae,De=ge*g,Ke=Se.wc,$e=je<De?Ir(Se,ie,te):null;t(je<=Le),t(g<=Ae),t(Jn(Se));t:for(;;){for(;!me.h&&je<De;){if(ie&Ke||($e=Ir(Se,ie,te)),t($e!=null),I(me),256>(Ae=zr($e.G[0],$e.H[0],me)))Q[oe+je]=Ae,++je,++ie>=ge&&(ie=0,++te<=g&&!(te%16)&&an(G,te));else{if(!(280>Ae)){we=0;break t}Ae=Mr(Ae-256,me);var Dt,vt=zr($e.G[4],$e.H[4],me);if(I(me),!(je>=(vt=Kr(ge,vt=Mr(vt,me)))&&Le-je>=Ae)){we=0;break t}for(Dt=0;Dt<Ae;++Dt)Q[oe+je+Dt]=Q[oe+je+Dt-vt];for(je+=Ae,ie+=Ae;ie>=ge;)ie-=ge,++te<=g&&!(te%16)&&an(G,te);je<De&&ie&Ke&&($e=Ir(Se,ie,te))}t(me.h==$(me))}an(G,te>g?g:te);break t}!we||me.h&&je<Le?(we=0,G.a=me.h?5:3):G.$=je,g=we}else g=Qt(G,G.V,G.Ba,G.c,G.i,g,He);if(!g){P=0;break e}}_+P>=H&&(h.Cc=1),P=1}if(!P)return null;if(h.Cc&&((P=h.ga)!=null&&(P.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+_*z}function Vn(h,g,_,P,z,H){for(;0<z--;){var G,Q=h,te=g+(_?1:0),ie=h,me=g+(_?0:3);for(G=0;G<P;++G){var Se=ie[me+4*G];Se!=255&&(Se*=32897,Q[te+4*G+0]=Q[te+4*G+0]*Se>>23,Q[te+4*G+1]=Q[te+4*G+1]*Se>>23,Q[te+4*G+2]=Q[te+4*G+2]*Se>>23)}g+=H}}function Un(h,g,_,P,z){for(;0<P--;){var H;for(H=0;H<_;++H){var G=h[g+2*H+0],Q=15&(ie=h[g+2*H+1]),te=4369*Q,ie=(240&ie|ie>>4)*te>>16;h[g+2*H+0]=(240&G|G>>4)*te>>16&240|(15&G|G<<4)*te>>16>>4&15,h[g+2*H+1]=240&ie|Q}g+=z}}function is(h,g,_,P,z,H,G,Q){var te,ie,me=255;for(ie=0;ie<z;++ie){for(te=0;te<P;++te){var Se=h[g+te];H[G+4*te]=Se,me&=Se}g+=_,G+=Q}return me!=255}function co(h,g,_,P,z){var H;for(H=0;H<z;++H)_[P+H]=h[g+H]>>8}function ai(){vh=Vn,yb=Un,bb=is,wb=co}function uo(h,g,_){D[h]=function(P,z,H,G,Q,te,ie,me,Se,oe,ge,we,Ae,je,Le,De,Ke){var $e,Dt=Ke-1>>1,vt=Q[te+0]|ie[me+0]<<16,nr=Se[oe+0]|ge[we+0]<<16;t(P!=null);var Ct=3*vt+nr+131074>>2;for(g(P[z+0],255&Ct,Ct>>16,Ae,je),H!=null&&(Ct=3*nr+vt+131074>>2,g(H[G+0],255&Ct,Ct>>16,Le,De)),$e=1;$e<=Dt;++$e){var hr=Q[te+$e]|ie[me+$e]<<16,Wn=Se[oe+$e]|ge[we+$e]<<16,sr=vt+hr+nr+Wn+524296,kt=sr+2*(hr+nr)>>3;Ct=kt+vt>>1,vt=(sr=sr+2*(vt+Wn)>>3)+hr>>1,g(P[z+2*$e-1],255&Ct,Ct>>16,Ae,je+(2*$e-1)*_),g(P[z+2*$e-0],255&vt,vt>>16,Ae,je+(2*$e-0)*_),H!=null&&(Ct=sr+nr>>1,vt=kt+Wn>>1,g(H[G+2*$e-1],255&Ct,Ct>>16,Le,De+(2*$e-1)*_),g(H[G+2*$e+0],255&vt,vt>>16,Le,De+(2*$e+0)*_)),vt=hr,nr=Wn}1&Ke||(Ct=3*vt+nr+131074>>2,g(P[z+Ke-1],255&Ct,Ct>>16,Ae,je+(Ke-1)*_),H!=null&&(Ct=3*nr+vt+131074>>2,g(H[G+Ke-1],255&Ct,Ct>>16,Le,De+(Ke-1)*_)))}}function oh(){Ba[bm]=K8,Ba[wm]=Tb,Ba[kb]=Q8,Ba[Nm]=Db,Ba[jm]=Rb,Ba[Mx]=Ib,Ba[Pb]=X8,Ba[Fx]=Tb,Ba[Ox]=Db,Ba[Sm]=Rb,Ba[Bx]=Ib}function wd(h){return h&~J8?0>h?0:255:h>>Mb}function Wo(h,g){return wd((19077*h>>8)+(26149*g>>8)-14234)}function pc(h,g,_){return wd((19077*h>>8)-(6419*g>>8)-(13320*_>>8)+8708)}function gc(h,g){return wd((19077*h>>8)+(33050*g>>8)-17685)}function Go(h,g,_,P,z){P[z+0]=Wo(h,_),P[z+1]=pc(h,g,_),P[z+2]=gc(h,g)}function os(h,g,_,P,z){P[z+0]=gc(h,g),P[z+1]=pc(h,g,_),P[z+2]=Wo(h,_)}function xc(h,g,_,P,z){var H=pc(h,g,_);g=H<<3&224|gc(h,g)>>3,P[z+0]=248&Wo(h,_)|H>>5,P[z+1]=g}function vc(h,g,_,P,z){var H=240&gc(h,g)|15;P[z+0]=240&Wo(h,_)|pc(h,g,_)>>4,P[z+1]=H}function lh(h,g,_,P,z){P[z+0]=255,Go(h,g,_,P,z+1)}function ch(h,g,_,P,z){os(h,g,_,P,z),P[z+3]=255}function As(h,g,_,P,z){Go(h,g,_,P,z),P[z+3]=255}function ho(h,g,_){D[h]=function(P,z,H,G,Q,te,ie,me,Se){for(var oe=me+(-2&Se)*_;me!=oe;)g(P[z+0],H[G+0],Q[te+0],ie,me),g(P[z+1],H[G+0],Q[te+0],ie,me+_),z+=2,++G,++te,me+=2*_;1&Se&&g(P[z+0],H[G+0],Q[te+0],ie,me)}}function Nd(h,g,_){return _==0?h==0?g==0?6:5:g==0?4:0:_}function gm(h,g,_,P,z){switch(h>>>30){case 3:Nc(g,_,P,z,0);break;case 2:Fa(g,_,P,z);break;case 1:Ar(g,_,P,z)}}function Ma(h,g){var _,P,z=g.M,H=g.Nb,G=h.oc,Q=h.pc+40,te=h.oc,ie=h.pc+584,me=h.oc,Se=h.pc+600;for(_=0;16>_;++_)G[Q+32*_-1]=129;for(_=0;8>_;++_)te[ie+32*_-1]=129,me[Se+32*_-1]=129;for(0<z?G[Q-1-32]=te[ie-1-32]=me[Se-1-32]=129:(a(G,Q-32-1,127,21),a(te,ie-32-1,127,9),a(me,Se-32-1,127,9)),P=0;P<h.za;++P){var oe=g.ya[g.aa+P];if(0<P){for(_=-1;16>_;++_)s(G,Q+32*_-4,G,Q+32*_+12,4);for(_=-1;8>_;++_)s(te,ie+32*_-4,te,ie+32*_+4,4),s(me,Se+32*_-4,me,Se+32*_+4,4)}var ge=h.Gd,we=h.Hd+P,Ae=oe.ad,je=oe.Hc;if(0<z&&(s(G,Q-32,ge[we].y,0,16),s(te,ie-32,ge[we].f,0,8),s(me,Se-32,ge[we].ea,0,8)),oe.Za){var Le=G,De=Q-32+16;for(0<z&&(P>=h.za-1?a(Le,De,ge[we].y[15],4):s(Le,De,ge[we+1].y,0,4)),_=0;4>_;_++)Le[De+128+_]=Le[De+256+_]=Le[De+384+_]=Le[De+0+_];for(_=0;16>_;++_,je<<=2)Le=G,De=Q+Ob[_],ii[oe.Ob[_]](Le,De),gm(je,Ae,16*+_,Le,De)}else if(Le=Nd(P,z,oe.Ob[0]),tl[Le](G,Q),je!=0)for(_=0;16>_;++_,je<<=2)gm(je,Ae,16*+_,G,Q+Ob[_]);for(_=oe.Gc,Le=Nd(P,z,oe.Dd),po[Le](te,ie),po[Le](me,Se),je=Ae,Le=te,De=ie,255&(oe=0|_)&&(170&oe?Mi(je,256,Le,De):Fr(je,256,Le,De)),oe=me,je=Se,255&(_>>=8)&&(170&_?Mi(Ae,320,oe,je):Fr(Ae,320,oe,je)),z<h.Ub-1&&(s(ge[we].y,0,G,Q+480,16),s(ge[we].f,0,te,ie+224,8),s(ge[we].ea,0,me,Se+224,8)),_=8*H*h.B,ge=h.sa,we=h.ta+16*P+16*H*h.R,Ae=h.qa,oe=h.ra+8*P+_,je=h.Ha,Le=h.Ia+8*P+_,_=0;16>_;++_)s(ge,we+_*h.R,G,Q+32*_,16);for(_=0;8>_;++_)s(Ae,oe+_*h.B,te,ie+32*_,8),s(je,Le+_*h.B,me,Se+32*_,8)}}function yc(h,g,_,P,z,H,G,Q,te){var ie=[0],me=[0],Se=0,oe=te!=null?te.kd:0,ge=te??new Ue;if(h==null||12>_)return 7;ge.data=h,ge.w=g,ge.ha=_,g=[g],_=[_],ge.gb=[ge.gb];e:{var we=g,Ae=_,je=ge.gb;if(t(h!=null),t(Ae!=null),t(je!=null),je[0]=0,12<=Ae[0]&&!r(h,we[0],"RIFF")){if(r(h,we[0]+8,"WEBP")){je=3;break e}var Le=We(h,we[0]+4);if(12>Le||4294967286<Le){je=3;break e}if(oe&&Le>Ae[0]-8){je=7;break e}je[0]=Le,we[0]+=12,Ae[0]-=12}je=0}if(je!=0)return je;for(Le=0<ge.gb[0],_=_[0];;){e:{var De=h;Ae=g,je=_;var Ke=ie,$e=me,Dt=we=[0];if((Ct=Se=[Se])[0]=0,8>je[0])je=7;else{if(!r(De,Ae[0],"VP8X")){if(We(De,Ae[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var vt=We(De,Ae[0]+8),nr=1+Re(De,Ae[0]+12);if(2147483648<=nr*(De=1+Re(De,Ae[0]+15))){je=3;break e}Dt!=null&&(Dt[0]=vt),Ke!=null&&(Ke[0]=nr),$e!=null&&($e[0]=De),Ae[0]+=18,je[0]-=18,Ct[0]=1}je=0}}if(Se=Se[0],we=we[0],je!=0)return je;if(Ae=!!(2&we),!Le&&Se)return 3;if(H!=null&&(H[0]=!!(16&we)),G!=null&&(G[0]=Ae),Q!=null&&(Q[0]=0),G=ie[0],we=me[0],Se&&Ae&&te==null){je=0;break}if(4>_){je=7;break}if(Le&&Se||!Le&&!Se&&!r(h,g[0],"ALPH")){_=[_],ge.na=[ge.na],ge.P=[ge.P],ge.Sa=[ge.Sa];e:{vt=h,je=g,Le=_;var Ct=ge.gb;Ke=ge.na,$e=ge.P,Dt=ge.Sa,nr=22,t(vt!=null),t(Le!=null),De=je[0];var hr=Le[0];for(t(Ke!=null),t(Dt!=null),Ke[0]=null,$e[0]=null,Dt[0]=0;;){if(je[0]=De,Le[0]=hr,8>hr){je=7;break e}var Wn=We(vt,De+4);if(4294967286<Wn){je=3;break e}var sr=8+Wn+1&-2;if(nr+=sr,0<Ct&&nr>Ct){je=3;break e}if(!r(vt,De,"VP8 ")||!r(vt,De,"VP8L")){je=0;break e}if(hr[0]<sr){je=7;break e}r(vt,De,"ALPH")||(Ke[0]=vt,$e[0]=De+8,Dt[0]=Wn),De+=sr,hr-=sr}}if(_=_[0],ge.na=ge.na[0],ge.P=ge.P[0],ge.Sa=ge.Sa[0],je!=0)break}_=[_],ge.Ja=[ge.Ja],ge.xa=[ge.xa];e:if(Ct=h,je=g,Le=_,Ke=ge.gb[0],$e=ge.Ja,Dt=ge.xa,vt=je[0],De=!r(Ct,vt,"VP8 "),nr=!r(Ct,vt,"VP8L"),t(Ct!=null),t(Le!=null),t($e!=null),t(Dt!=null),8>Le[0])je=7;else{if(De||nr){if(Ct=We(Ct,vt+4),12<=Ke&&Ct>Ke-12){je=3;break e}if(oe&&Ct>Le[0]-8){je=7;break e}$e[0]=Ct,je[0]+=8,Le[0]-=8,Dt[0]=nr}else Dt[0]=5<=Le[0]&&Ct[vt+0]==47&&!(Ct[vt+4]>>5),$e[0]=Le[0];je=0}if(_=_[0],ge.Ja=ge.Ja[0],ge.xa=ge.xa[0],g=g[0],je!=0)break;if(4294967286<ge.Ja)return 3;if(Q==null||Ae||(Q[0]=ge.xa?2:1),G=[G],we=[we],ge.xa){if(5>_){je=7;break}Q=G,oe=we,Ae=H,h==null||5>_?h=0:5<=_&&h[g+0]==47&&!(h[g+4]>>5)?(Le=[0],Ct=[0],Ke=[0],V($e=new F,h,g,_),_n($e,Le,Ct,Ke)?(Q!=null&&(Q[0]=Le[0]),oe!=null&&(oe[0]=Ct[0]),Ae!=null&&(Ae[0]=Ke[0]),h=1):h=0):h=0}else{if(10>_){je=7;break}Q=we,h==null||10>_||!dc(h,g+3,_-3)?h=0:(oe=h[g+0]|h[g+1]<<8|h[g+2]<<16,Ae=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=ge.Ja||!Ae||!h?h=0:(G&&(G[0]=Ae),Q&&(Q[0]=h),h=1))}if(!h||(G=G[0],we=we[0],Se&&(ie[0]!=G||me[0]!=we)))return 3;te!=null&&(te[0]=ge,te.offset=g-te.w,t(4294967286>g-te.w),t(te.offset==te.ha-_));break}return je==0||je==7&&Se&&te==null?(H!=null&&(H[0]|=ge.na!=null&&0<ge.na.length),P!=null&&(P[0]=G),z!=null&&(z[0]=we),0):je}function dh(h,g,_){var P=g.width,z=g.height,H=0,G=0,Q=P,te=z;if(g.Da=h!=null&&0<h.Da,g.Da&&(Q=h.cd,te=h.bd,H=h.v,G=h.j,11>_||(H&=-2,G&=-2),0>H||0>G||0>=Q||0>=te||H+Q>P||G+te>z))return 0;if(g.v=H,g.j=G,g.va=H+Q,g.o=G+te,g.U=Q,g.T=te,g.da=h!=null&&0<h.da,g.da){if(!Me(Q,te,_=[h.ib],H=[h.hb]))return 0;g.ib=_[0],g.hb=H[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*P/4&&g.hb<3*z/4,g.Kb=0),1}function uh(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function Yo(h,g,_,P){if(P==null||0>=h||0>=g)return 2;if(_!=null){if(_.Da){var z=_.cd,H=_.bd,G=-2&_.v,Q=-2&_.j;if(0>G||0>Q||0>=z||0>=H||G+z>h||Q+H>g)return 2;h=z,g=H}if(_.da){if(!Me(h,g,z=[_.ib],H=[_.hb]))return 2;h=z[0],g=H[0]}}P.width=h,P.height=g;e:{var te=P.width,ie=P.height;if(h=P.S,0>=te||0>=ie||!(h>=bm&&13>h))h=2;else{if(0>=P.Rd&&P.sd==null){G=H=z=g=0;var me=(Q=te*Bb[h])*ie;if(11>h||(H=(ie+1)/2*(g=(te+1)/2),h==12&&(G=(z=te)*ie)),(ie=i(me+2*H+G))==null){h=1;break e}P.sd=ie,11>h?((te=P.f.RGBA).eb=ie,te.fb=0,te.A=Q,te.size=me):((te=P.f.kb).y=ie,te.O=0,te.fa=Q,te.Fd=me,te.f=ie,te.N=0+me,te.Ab=g,te.Cd=H,te.ea=ie,te.W=0+me+H,te.Db=g,te.Ed=H,h==12&&(te.F=ie,te.J=0+me+2*H),te.Tc=G,te.lb=z)}if(g=1,z=P.S,H=P.width,G=P.height,z>=bm&&13>z)if(11>z)h=P.f.RGBA,g&=(Q=Math.abs(h.A))*(G-1)+H<=h.size,g&=Q>=H*Bb[z],g&=h.eb!=null;else{h=P.f.kb,Q=(H+1)/2,me=(G+1)/2,te=Math.abs(h.fa),ie=Math.abs(h.Ab);var Se=Math.abs(h.Db),oe=Math.abs(h.lb),ge=oe*(G-1)+H;g&=te*(G-1)+H<=h.Fd,g&=ie*(me-1)+Q<=h.Cd,g=(g&=Se*(me-1)+Q<=h.Ed)&te>=H&ie>=Q&Se>=Q,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,z==12&&(g&=oe>=H,g&=ge<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||_!=null&&_.fd&&(h=uh(P)),h}var bc=64,la=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ca=24,Ko=32,fo=8,Qo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(h){return h},D.Predictor2=function(h,g,_){return g[_+0]},D.Predictor3=function(h,g,_){return g[_+1]},D.Predictor4=function(h,g,_){return g[_-1]},D.Predictor5=function(h,g,_){return lt(lt(h,g[_+1]),g[_+0])},D.Predictor6=function(h,g,_){return lt(h,g[_-1])},D.Predictor7=function(h,g,_){return lt(h,g[_+0])},D.Predictor8=function(h,g,_){return lt(g[_-1],g[_+0])},D.Predictor9=function(h,g,_){return lt(g[_+0],g[_+1])},D.Predictor10=function(h,g,_){return lt(lt(h,g[_-1]),lt(g[_+0],g[_+1]))},D.Predictor11=function(h,g,_){var P=g[_+0];return 0>=ut(P>>24&255,h>>24&255,(g=g[_-1])>>24&255)+ut(P>>16&255,h>>16&255,g>>16&255)+ut(P>>8&255,h>>8&255,g>>8&255)+ut(255&P,255&h,255&g)?P:h},D.Predictor12=function(h,g,_){var P=g[_+0];return(jt((h>>24&255)+(P>>24&255)-((g=g[_-1])>>24&255))<<24|jt((h>>16&255)+(P>>16&255)-(g>>16&255))<<16|jt((h>>8&255)+(P>>8&255)-(g>>8&255))<<8|jt((255&h)+(255&P)-(255&g)))>>>0},D.Predictor13=function(h,g,_){var P=g[_-1];return(Ht((h=lt(h,g[_+0]))>>24&255,P>>24&255)<<24|Ht(h>>16&255,P>>16&255)<<16|Ht(h>>8&255,P>>8&255)<<8|Ht(255&h,255&P))>>>0};var hh=D.PredictorAdd0;D.PredictorAdd1=Mt,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var jd=D.PredictorAdd2;ve("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Cn,xm=D.ColorIndexInverseTransform,Ri=D.MapARGB,Ii=D.VP8LColorIndexInverseTransformAlpha,fh=D.MapAlpha,mh=D.VP8LPredictorsAdd=[];mh.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var ph,gh,Xo,Jo,Zo,wc,el,Nc,Fa,Mi,Ar,Fr,kn,Hn,mo,xh,Sd,vm,fb,mb,pb,gb,xb,vb,vh,yb,bb,wb,Nb=i(511),jb=i(2041),Sb=i(225),_b=i(767),Cb=0,Ix=jb,ym=Sb,da=_b,Oa=Nb,bm=0,wm=1,kb=2,Nm=3,jm=4,Mx=5,Pb=6,Fx=7,Ox=8,Sm=9,Bx=10,I8=[2,3,7],M8=[3,3,11],Ab=[280,256,256,256,40],F8=[0,1,1,1,0],O8=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],B8=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],U8=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$8=8,Ux=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$x=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yh=null,z8=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],q8=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Eb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],V8=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],H8=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],W8=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],G8=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],tl=[],ii=[],po=[],Y8=1,Lb=2,rl=[],Ba=[];uo("UpsampleRgbLinePair",Go,3),uo("UpsampleBgrLinePair",os,3),uo("UpsampleRgbaLinePair",As,4),uo("UpsampleBgraLinePair",ch,4),uo("UpsampleArgbLinePair",lh,4),uo("UpsampleRgba4444LinePair",vc,2),uo("UpsampleRgb565LinePair",xc,2);var K8=D.UpsampleRgbLinePair,Q8=D.UpsampleBgrLinePair,Tb=D.UpsampleRgbaLinePair,Db=D.UpsampleBgraLinePair,Rb=D.UpsampleArgbLinePair,Ib=D.UpsampleRgba4444LinePair,X8=D.UpsampleRgb565LinePair,_m=16,Cm=1<<_m-1,bh=-227,zx=482,Mb=6,J8=(256<<Mb)-1,Fb=0,Z8=i(256),eL=i(256),tL=i(256),rL=i(256),nL=i(zx-bh),sL=i(zx-bh);ho("YuvToRgbRow",Go,3),ho("YuvToBgrRow",os,3),ho("YuvToRgbaRow",As,4),ho("YuvToBgraRow",ch,4),ho("YuvToArgbRow",lh,4),ho("YuvToRgba4444Row",vc,2),ho("YuvToRgb565Row",xc,2);var Ob=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],km=[0,2,8],aL=[8,7,6,4,4,2,2,2,1,1,1,1],iL=1;this.WebPDecodeRGBA=function(h,g,_,P,z){var H=wm,G=new Te,Q=new Wt;G.ba=Q,Q.S=H,Q.width=[Q.width],Q.height=[Q.height];var te=Q.width,ie=Q.height,me=new wt;if(me==null||h==null)var Se=2;else t(me!=null),Se=yc(h,g,_,me.width,me.height,me.Pd,me.Qd,me.format,null);if(Se!=0?te=0:(te!=null&&(te[0]=me.width[0]),ie!=null&&(ie[0]=me.height[0]),te=1),te){Q.width=Q.width[0],Q.height=Q.height[0],P!=null&&(P[0]=Q.width),z!=null&&(z[0]=Q.height);e:{if(P=new pr,(z=new Ue).data=h,z.w=g,z.ha=_,z.kd=1,g=[0],t(z!=null),((h=yc(z.data,z.w,z.ha,null,null,null,g,null,z))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(t(G!=null),P.data=z.data,P.w=z.w+z.offset,P.ha=z.ha-z.offset,P.put=ft,P.ac=$r,P.bc=sn,P.ma=G,z.xa){if((h=Vs())==null){G=1;break e}if(function(oe,ge){var we=[0],Ae=[0],je=[0];t:for(;;){if(oe==null)return 0;if(ge==null)return oe.a=2,0;if(oe.l=ge,oe.a=0,V(oe.m,ge.data,ge.w,ge.ha),!_n(oe.m,we,Ae,je)){oe.a=3;break t}if(oe.xb=Lb,ge.width=we[0],ge.height=Ae[0],!ce(we[0],Ae[0],1,oe,null))break t;return 1}return t(oe.a!=0),0}(h,P)){if(P=(g=Yo(P.width,P.height,G.Oa,G.ba))==0){t:{P=h;r:for(;;){if(P==null){P=0;break t}if(t(P.s.yc!=null),t(P.s.Ya!=null),t(0<P.s.Wb),t((_=P.l)!=null),t((z=_.ma)!=null),P.xb!=0){if(P.ca=z.ba,P.tb=z.tb,t(P.ca!=null),!dh(z.Oa,_,Nm)){P.a=2;break r}if(!Be(P,_.width)||_.da)break r;if((_.da||xt(P.ca.S))&&ai(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ai()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!Z(P.s.vb,P.s.Wa.Xa)){P.a=1;break r}P.xb=0}if(!Qt(P,P.V,P.Ba,P.c,P.i,_.o,Ps))break r;z.Dc=P.Ma,P=1;break t}t(P.a!=0),P=0}P=!P}P&&(g=h.a)}else g=h.a}else{if((h=new aa)==null){G=1;break e}if(h.Fa=z.na,h.P=z.P,h.qc=z.Sa,La(h,P)){if((g=Yo(P.width,P.height,G.Oa,G.ba))==0){if(h.Aa=0,_=G.Oa,t((z=h)!=null),_!=null){if(0<(te=0>(te=_.Md)?0:100<te?255:255*te/100)){for(ie=me=0;4>ie;++ie)12>(Se=z.pb[ie]).lc&&(Se.ia=te*aL[0>Se.lc?0:Se.lc]>>3),me|=Se.ia;me&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=_.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(oe,ge){if(oe==null)return 0;if(ge==null)return _t(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!La(oe,ge))return 0;if(t(oe.cb),ge.ac==null||ge.ac(ge)){ge.ob&&(oe.L=0);var we=km[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=ge.v-we>>4,oe.zb=ge.j-we>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=ge.o+15+we>>4,oe.Hb=ge.va+15+we>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var Ae=oe.ed;for(we=0;4>we;++we){var je;if(oe.Qa.Cb){var Le=oe.Qa.Lb[we];oe.Qa.Fb||(Le+=Ae.Tb)}else Le=Ae.Tb;for(je=0;1>=je;++je){var De=oe.gd[we][je],Ke=Le;if(Ae.Pc&&(Ke+=Ae.vd[0],je&&(Ke+=Ae.od[0])),0<(Ke=0>Ke?0:63<Ke?63:Ke)){var $e=Ke;0<Ae.wb&&($e=4<Ae.wb?$e>>2:$e>>1)>9-Ae.wb&&($e=9-Ae.wb),1>$e&&($e=1),De.dd=$e,De.tc=2*Ke+$e,De.ld=40<=Ke?2:15<=Ke?1:0}else De.tc=0;De.La=je}}}we=0}else _t(oe,6,"Frame setup failed"),we=oe.a;if(we=we==0){if(we){oe.$c=0,0<oe.Aa||(oe.Ic=iL);t:{we=oe.Ic,Ae=4*($e=oe.za);var Dt=32*$e,vt=$e+1,nr=0<oe.L?$e*(0<oe.Aa?2:1):0,Ct=(oe.Aa==2?2:1)*$e;if((De=Ae+832+(je=3*(16*we+km[oe.L])/2*Dt)+(Le=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=De)we=0;else{if(De>oe.Vb){if(oe.Vb=0,oe.Ec=i(De),oe.Fc=0,oe.Ec==null){we=_t(oe,1,"no memory during frame initialization.");break t}oe.Vb=De}De=oe.Ec,Ke=oe.Fc,oe.Ac=De,oe.Bc=Ke,Ke+=Ae,oe.Gd=l(Dt,on),oe.Hd=0,oe.rb=l(vt+1,At),oe.sb=1,oe.wa=nr?l(nr,$t):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=$e),t(!0),oe.oc=De,oe.pc=Ke,Ke+=832,oe.ya=l(Ct,Ot),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=$e),oe.R=16*$e,oe.B=8*$e,$e=(Dt=km[oe.L])*oe.R,Dt=Dt/2*oe.B,oe.sa=De,oe.ta=Ke+$e,oe.qa=oe.sa,oe.ra=oe.ta+16*we*oe.R+Dt,oe.Ha=oe.qa,oe.Ia=oe.ra+8*we*oe.B+Dt,oe.$c=0,Ke+=je,oe.mb=Le?De:null,oe.nb=Le?Ke:null,t(Ke+Le<=oe.Fc+oe.Vb),pd(oe),a(oe.Ac,oe.Bc,0,Ae),we=1}}if(we){if(ge.ka=0,ge.y=oe.sa,ge.O=oe.ta,ge.f=oe.qa,ge.N=oe.ra,ge.ea=oe.Ha,ge.Vd=oe.Ia,ge.fa=oe.R,ge.Rc=oe.B,ge.F=null,ge.J=0,!Cb){for(we=-255;255>=we;++we)Nb[255+we]=0>we?-we:we;for(we=-1020;1020>=we;++we)jb[1020+we]=-128>we?-128:127<we?127:we;for(we=-112;112>=we;++we)Sb[112+we]=-16>we?-16:15<we?15:we;for(we=-255;510>=we;++we)_b[255+we]=0>we?0:255<we?255:we;Cb=1}el=zo,Nc=eh,Mi=Ta,Ar=gd,Fr=xd,Fa=Zu,kn=si,Hn=lo,mo=U,xh=le,Sd=pm,vm=N,fb=fe,mb=be,pb=gn,gb=as,xb=bd,vb=ih,ii[0]=ah,ii[1]=th,ii[2]=sh,ii[3]=yd,ii[4]=ri,ii[5]=mc,ii[6]=Da,ii[7]=Vo,ii[8]=B,ii[9]=Ti,tl[0]=nh,tl[1]=rh,tl[2]=uc,tl[3]=hc,tl[4]=oo,tl[5]=fc,tl[6]=vd,po[0]=It,po[1]=qo,po[2]=Ne,po[3]=Xe,po[4]=rt,po[5]=Bt,po[6]=Tt,we=1}else we=0}we&&(we=function(hr,Wn){for(hr.M=0;hr.M<hr.Va;++hr.M){var sr,kt=hr.Jc[hr.M&hr.Xb],nt=hr.m,Pn=hr;for(sr=0;sr<Pn.za;++sr){var Zt=nt,gr=Pn,Xr=gr.Ac,ls=gr.Bc+4*sr,Es=gr.zc,xn=gr.ya[gr.aa+sr];if(gr.Qa.Bb?xn.$b=ue(Zt,gr.Pa.jb[0])?2+ue(Zt,gr.Pa.jb[2]):ue(Zt,gr.Pa.jb[1]):xn.$b=0,gr.kc&&(xn.Ad=ue(Zt,gr.Bd)),xn.Za=!ue(Zt,145)+0,xn.Za){var gs=xn.Ob,Ls=0;for(gr=0;4>gr;++gr){var Gn,br=Es[0+gr];for(Gn=0;4>Gn;++Gn){br=H8[Xr[ls+Gn]][br];for(var Er=Eb[ue(Zt,br[0])];0<Er;)Er=Eb[2*Er+ue(Zt,br[Er])];br=-Er,Xr[ls+Gn]=br}s(gs,Ls,Xr,ls,4),Ls+=4,Es[0+gr]=br}}else br=ue(Zt,156)?ue(Zt,128)?1:3:ue(Zt,163)?2:0,xn.Ob[0]=br,a(Xr,ls,br,4),a(Es,0,br,4);xn.Dd=ue(Zt,142)?ue(Zt,114)?ue(Zt,183)?1:3:2:0}if(Pn.m.Ka)return _t(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(Pn=kt,Zt=(nt=hr).rb[nt.sb-1],Xr=nt.rb[nt.sb+nt.ja],sr=nt.ya[nt.aa+nt.ja],ls=nt.kc?sr.Ad:0)Zt.la=Xr.la=0,sr.Za||(Zt.Na=Xr.Na=0),sr.Hc=0,sr.Gc=0,sr.ia=0;else{var vn,Lr;if(Zt=Xr,Xr=Pn,ls=nt.Pa.Xc,Es=nt.ya[nt.aa+nt.ja],xn=nt.pb[Es.$b],gr=Es.ad,gs=0,Ls=nt.rb[nt.sb-1],br=Gn=0,a(gr,gs,0,384),Es.Za)var cs=0,oi=ls[3];else{Er=i(16);var An=Zt.Na+Ls.Na;if(An=yh(Xr,ls[1],An,xn.Eb,0,Er,0),Zt.Na=Ls.Na=(0<An)+0,1<An)el(Er,0,gr,gs);else{var Gs=Er[0]+3>>3;for(Er=0;256>Er;Er+=16)gr[gs+Er]=Gs}cs=1,oi=ls[0]}var Or=15&Zt.la,Yn=15&Ls.la;for(Er=0;4>Er;++Er){var ua=1&Yn;for(Gs=Lr=0;4>Gs;++Gs)Or=Or>>1|(ua=(An=yh(Xr,oi,An=ua+(1&Or),xn.Sc,cs,gr,gs))>cs)<<7,Lr=Lr<<2|(3<An?3:1<An?2:gr[gs+0]!=0),gs+=16;Or>>=4,Yn=Yn>>1|ua<<7,Gn=(Gn<<8|Lr)>>>0}for(oi=Or,cs=Yn>>4,vn=0;4>vn;vn+=2){for(Lr=0,Or=Zt.la>>4+vn,Yn=Ls.la>>4+vn,Er=0;2>Er;++Er){for(ua=1&Yn,Gs=0;2>Gs;++Gs)An=ua+(1&Or),Or=Or>>1|(ua=0<(An=yh(Xr,ls[2],An,xn.Qc,0,gr,gs)))<<3,Lr=Lr<<2|(3<An?3:1<An?2:gr[gs+0]!=0),gs+=16;Or>>=2,Yn=Yn>>1|ua<<5}br|=Lr<<4*vn,oi|=Or<<4<<vn,cs|=(240&Yn)<<vn}Zt.la=oi,Ls.la=cs,Es.Hc=Gn,Es.Gc=br,Es.ia=43690&br?0:xn.ia,ls=!(Gn|br)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[sr.$b][sr.Za],nt.wa[nt.Y+nt.ja].La|=!ls),Pn.Ka)return _t(hr,7,"Premature end-of-file encountered.")}if(pd(hr),nt=Wn,Pn=1,sr=(kt=hr).D,Zt=0<kt.L&&kt.M>=kt.zb&&kt.M<=kt.Va,kt.Aa==0)t:{if(sr.M=kt.M,sr.uc=Zt,Ma(kt,sr),Pn=1,sr=(Lr=kt.D).Nb,Zt=(br=km[kt.L])*kt.R,Xr=br/2*kt.B,Er=16*sr*kt.R,Gs=8*sr*kt.B,ls=kt.sa,Es=kt.ta-Zt+Er,xn=kt.qa,gr=kt.ra-Xr+Gs,gs=kt.Ha,Ls=kt.Ia-Xr+Gs,Yn=(Or=Lr.M)==0,Gn=Or>=kt.Va-1,kt.Aa==2&&Ma(kt,Lr),Lr.uc)for(ua=(An=kt).D.M,t(An.D.uc),Lr=An.yb;Lr<An.Hb;++Lr){cs=Lr,oi=ua;var Ts=(ha=(ds=An).D).Nb;vn=ds.R;var ha=ha.wa[ha.Y+cs],fa=ds.sa,Ys=ds.ta+16*Ts*vn+16*cs,ma=ha.dd,Wr=ha.tc;if(Wr!=0)if(t(3<=Wr),ds.L==1)0<cs&&gb(fa,Ys,vn,Wr+4),ha.La&&vb(fa,Ys,vn,Wr),0<oi&&pb(fa,Ys,vn,Wr+4),ha.La&&xb(fa,Ys,vn,Wr);else{var pa=ds.B,li=ds.qa,jc=ds.ra+8*Ts*pa+8*cs,go=ds.Ha,ds=ds.Ia+8*Ts*pa+8*cs;Ts=ha.ld,0<cs&&(Hn(fa,Ys,vn,Wr+4,ma,Ts),xh(li,jc,go,ds,pa,Wr+4,ma,Ts)),ha.La&&(vm(fa,Ys,vn,Wr,ma,Ts),mb(li,jc,go,ds,pa,Wr,ma,Ts)),0<oi&&(kn(fa,Ys,vn,Wr+4,ma,Ts),mo(li,jc,go,ds,pa,Wr+4,ma,Ts)),ha.La&&(Sd(fa,Ys,vn,Wr,ma,Ts),fb(li,jc,go,ds,pa,Wr,ma,Ts))}}if(kt.ia&&alert("todo:DitherRow"),nt.put!=null){if(Lr=16*Or,Or=16*(Or+1),Yn?(nt.y=kt.sa,nt.O=kt.ta+Er,nt.f=kt.qa,nt.N=kt.ra+Gs,nt.ea=kt.Ha,nt.W=kt.Ia+Gs):(Lr-=br,nt.y=ls,nt.O=Es,nt.f=xn,nt.N=gr,nt.ea=gs,nt.W=Ls),Gn||(Or-=br),Or>nt.o&&(Or=nt.o),nt.F=null,nt.J=null,kt.Fa!=null&&0<kt.Fa.length&&Lr<Or&&(nt.J=Hr(kt,nt,Lr,Or-Lr),nt.F=kt.mb,nt.F==null&&nt.F.length==0)){Pn=_t(kt,3,"Could not decode alpha data.");break t}Lr<nt.j&&(br=nt.j-Lr,Lr=nt.j,t(!(1&br)),nt.O+=kt.R*br,nt.N+=kt.B*(br>>1),nt.W+=kt.B*(br>>1),nt.F!=null&&(nt.J+=nt.width*br)),Lr<Or&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=Lr-nt.j,nt.U=nt.va-nt.v,nt.T=Or-Lr,Pn=nt.put(nt))}sr+1!=kt.Ic||Gn||(s(kt.sa,kt.ta-Zt,ls,Es+16*kt.R,Zt),s(kt.qa,kt.ra-Xr,xn,gr+8*kt.B,Xr),s(kt.Ha,kt.Ia-Xr,gs,Ls+8*kt.B,Xr))}if(!Pn)return _t(hr,6,"Output aborted.")}return 1}(oe,ge)),ge.bc!=null&&ge.bc(ge),we&=1}return we?(oe.cb=0,we):0})(h,P)||(g=h.a)}}else g=h.a}g==0&&G.Oa!=null&&G.Oa.fd&&(g=uh(G.ba))}G=g}H=G!=0?null:11>H?Q.f.RGBA.eb:Q.f.kb.y}else H=null;return H};var Bb=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(D,J){for(var A="",M=0;M<4;M++)A+=String.fromCharCode(D[J++]);return A}function u(D,J){return D[J+0]|D[J+1]<<8}function m(D,J){return(D[J+0]|D[J+1]<<8|D[J+2]<<16)>>>0}function x(D,J){return(D[J+0]|D[J+1]<<8|D[J+2]<<16|D[J+3]<<24)>>>0}new c;var f=[0],y=[0],v=[],S=new c,b=e,j=function(D,J){var A={},M=0,ee=!1,E=0,ae=0;if(A.frames=[],!function(C,F){for(var L=0;L<4;L++)if(C[F+L]!="RIFF".charCodeAt(L))return!0;return!1}(D,J)){for(x(D,J+=4),J+=8;J<D.length;){var Y=d(D,J),de=x(D,J+=4);J+=4;var T=de+(1&de);switch(Y){case"VP8 ":case"VP8L":A.frames[M]===void 0&&(A.frames[M]={}),(he=A.frames[M]).src_off=ee?ae:J-8,he.src_size=E+de+8,M++,ee&&(ee=!1,E=0,ae=0);break;case"VP8X":(he=A.header={}).feature_flags=D[J];var V=J+4;he.canvas_width=1+m(D,V),V+=3,he.canvas_height=1+m(D,V),V+=3;break;case"ALPH":ee=!0,E=T+8,ae=J-8;break;case"ANIM":(he=A.header).bgcolor=x(D,J),V=J+4,he.loop_count=u(D,V),V+=2;break;case"ANMF":var re,he;(he=A.frames[M]={}).offset_x=2*m(D,J),J+=3,he.offset_y=2*m(D,J),J+=3,he.width=1+m(D,J),J+=3,he.height=1+m(D,J),J+=3,he.duration=m(D,J),J+=3,re=D[J++],he.dispose=1&re,he.blend=re>>1&1}Y!="ANMF"&&(J+=T)}return A}}(b,0);j.response=b,j.rgbaoutput=!0,j.dataurl=!1;var w=j.header?j.header:null,k=j.frames?j.frames:null;if(w){w.loop_counter=w.loop_count,f=[w.canvas_height],y=[w.canvas_width];for(var R=0;R<k.length&&k[R].blend!=0;R++);}var W=k[0],O=S.WebPDecodeRGBA(b,W.src_off,W.src_size,y,f);W.rgba=O,W.imgwidth=y[0],W.imgheight=f[0];for(var q=0;q<y[0]*f[0]*4;q++)v[q]=O[q];return this.width=y,this.height=f,this.data=v,this}(function(e){var t,r,s,a,i,l,o,c,d,u=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new c,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new l,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new l,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var m=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=C;Object.defineProperty(this,"pdf",{get:function(){return F}});var L=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return L},set:function(Z){L=!!Z}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(Z){$=!!Z}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(Z){isNaN(Z)||(K=Z)}});var I=0;Object.defineProperty(this,"posY",{get:function(){return I},set:function(Z){isNaN(Z)||(I=Z)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Z){var Ge;typeof Z=="number"?Ge=[Z,Z,Z,Z]:((Ge=new Array(4))[0]=Z[0],Ge[1]=Z.length>=2?Z[1]:Ge[0],Ge[2]=Z.length>=3?Z[2]:Ge[0],Ge[3]=Z.length>=4?Z[3]:Ge[1]),d.margin=Ge}});var X=!1;Object.defineProperty(this,"autoPaging",{get:function(){return X},set:function(Z){X=Z}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(Z){ne=Z}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(Z){ue=Z}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Z){Z instanceof u&&(d=Z)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Z){d.path=Z}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(Z){xe=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var Ge;Ge=x(Z),this.ctx.fillStyle=Ge.style,this.ctx.isFillTransparent=Ge.a===0,this.ctx.fillOpacity=Ge.a,this.pdf.setFillColor(Ge.r,Ge.g,Ge.b,{a:Ge.a}),this.pdf.setTextColor(Ge.r,Ge.g,Ge.b,{a:Ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var Ge=x(Z);this.ctx.strokeStyle=Ge.style,this.ctx.isStrokeTransparent=Ge.a===0,this.ctx.strokeOpacity=Ge.a,Ge.a===0?this.pdf.setDrawColor(255,255,255):(Ge.a,this.pdf.setDrawColor(Ge.r,Ge.g,Ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var ke=null,Re=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(Z){ke=null,Re=null,We=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var Ge;if(this.ctx.font=Z,(Ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Z))!==null){var Lt=Ge[1];Ge[2];var Me=Ge[3],Ee=Ge[4];Ge[5];var it=Ge[6],et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ee)[2];Ee=Math.floor(et==="px"?parseFloat(Ee)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(Ee)*this.pdf.getFontSize():parseFloat(Ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ee);var dt=function(ve){var Pe,Fe,pe=[],ze=ve.trim();if(ze==="")return x0;if(ze in kj)return[kj[ze]];for(;ze!=="";){switch(Fe=null,Pe=(ze=Aj(ze)).charAt(0)){case'"':case"'":Fe=UH(ze.substring(1),Pe);break;default:Fe=$H(ze)}if(Fe===null||(pe.push(Fe[0]),(ze=Aj(Fe[1]))!==""&&ze.charAt(0)!==","))return x0;ze=ze.replace(/^,/,"")}return pe}(it);if(this.fontFaces){var lt=function(ve,Pe){var Fe=ve.getFontList(),pe=JSON.stringify(Fe);if(ke===null||Re!==pe){var ze=function(qe){var Ve=[];return Object.keys(qe).forEach(function(Yt){qe[Yt].forEach(function(xt){var pt=null;switch(xt){case"bold":pt={family:Yt,weight:"bold"};break;case"italic":pt={family:Yt,style:"italic"};break;case"bolditalic":pt={family:Yt,weight:"bold",style:"italic"};break;case"":case"normal":pt={family:Yt}}pt!==null&&(pt.ref={name:Yt,style:xt},Ve.push(pt))})}),Ve}(Fe);ke=function(qe){for(var Ve={},Yt=0;Yt<qe.length;++Yt){var xt=g0(qe[Yt]),pt=xt.family,cr=xt.stretch,Wt=xt.style,wt=xt.weight;Ve[pt]=Ve[pt]||{},Ve[pt][cr]=Ve[pt][cr]||{},Ve[pt][cr][Wt]=Ve[pt][cr][Wt]||{},Ve[pt][cr][Wt][wt]=xt}return Ve}(ze.concat(Pe)),Re=pe}return ke}(this.pdf,this.fontFaces),jt=dt.map(function(ve){return{family:ve,stretch:"normal",weight:Me,style:Lt}}),Ht=function(ve,Pe,Fe){for(var pe=(Fe=Fe||{}).defaultFontFamily||"times",ze=Object.assign({},BH,Fe.genericFontFamilies||{}),qe=null,Ve=null,Yt=0;Yt<Pe.length;++Yt)if(ze[(qe=g0(Pe[Yt])).family]&&(qe.family=ze[qe.family]),ve.hasOwnProperty(qe.family)){Ve=ve[qe.family];break}if(!(Ve=Ve||ve[pe]))throw new Error("Could not find a font-family for the rule '"+Pj(qe)+"' and default family '"+pe+"'.");if(Ve=function(xt,pt){if(pt[xt])return pt[xt];var cr=oy[xt],Wt=cr<=oy.normal?-1:1,wt=Cj(pt,a8,cr,Wt);if(!wt)throw new Error("Could not find a matching font-stretch value for "+xt);return wt}(qe.stretch,Ve),Ve=function(xt,pt){if(pt[xt])return pt[xt];for(var cr=s8[xt],Wt=0;Wt<cr.length;++Wt)if(pt[cr[Wt]])return pt[cr[Wt]];throw new Error("Could not find a matching font-style for "+xt)}(qe.style,Ve),!(Ve=function(xt,pt){if(pt[xt])return pt[xt];if(xt===400&&pt[500])return pt[500];if(xt===500&&pt[400])return pt[400];var cr=OH[xt],Wt=Cj(pt,i8,cr,xt<400?-1:1);if(!Wt)throw new Error("Could not find a matching font-weight for value "+xt);return Wt}(qe.weight,Ve)))throw new Error("Failed to resolve a font for the rule '"+Pj(qe)+"'.");return Ve}(lt,jt);this.pdf.setFont(Ht.ref.name,Ht.ref.style)}else{var ut="";(Me==="bold"||parseInt(Me,10)>=700||Lt==="bold")&&(ut="bold"),Lt==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var Mt="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},st=0;st<dt.length;st++){if(this.pdf.internal.getFont(dt[st],ut,{noFallback:!0,disableWarning:!0})!==void 0){Mt=dt[st];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(dt[st],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Mt=dt[st],ut="bold";else if(this.pdf.internal.getFont(dt[st],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Mt=dt[st],ut="normal";break}}if(Mt===""){for(var se=0;se<dt.length;se++)if(Gt[dt[se]]){Mt=Gt[dt[se]];break}}Mt=Mt===""?"Times":Mt,this.pdf.setFont(Mt,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,he.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,he.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};m.prototype.setLineDash=function(C){this.lineDash=C},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){k.call(this,"fill",!1)},m.prototype.stroke=function(){k.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(C,F){if(isNaN(C)||isNaN(F))throw Br.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var L=this.ctx.transform.applyToPoint(new l(C,F));this.path.push({type:"mt",x:L.x,y:L.y}),this.ctx.lastPoint=new l(C,F)},m.prototype.closePath=function(){var C=new l(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Dr(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){C=new l(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(C.x,C.y)},m.prototype.lineTo=function(C,F){if(isNaN(C)||isNaN(F))throw Br.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var L=this.ctx.transform.applyToPoint(new l(C,F));this.path.push({type:"lt",x:L.x,y:L.y}),this.ctx.lastPoint=new l(L.x,L.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},m.prototype.quadraticCurveTo=function(C,F,L,$){if(isNaN(L)||isNaN($)||isNaN(C)||isNaN(F))throw Br.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new l(L,$)),I=this.ctx.transform.applyToPoint(new l(C,F));this.path.push({type:"qct",x1:I.x,y1:I.y,x:K.x,y:K.y}),this.ctx.lastPoint=new l(K.x,K.y)},m.prototype.bezierCurveTo=function(C,F,L,$,K,I){if(isNaN(K)||isNaN(I)||isNaN(C)||isNaN(F)||isNaN(L)||isNaN($))throw Br.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var X=this.ctx.transform.applyToPoint(new l(K,I)),ne=this.ctx.transform.applyToPoint(new l(C,F)),ue=this.ctx.transform.applyToPoint(new l(L,$));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:ue.x,y2:ue.y,x:X.x,y:X.y}),this.ctx.lastPoint=new l(X.x,X.y)},m.prototype.arc=function(C,F,L,$,K,I){if(isNaN(C)||isNaN(F)||isNaN(L)||isNaN($)||isNaN(K))throw Br.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(I=!!I,!this.ctx.transform.isIdentity){var X=this.ctx.transform.applyToPoint(new l(C,F));C=X.x,F=X.y;var ne=this.ctx.transform.applyToPoint(new l(0,L)),ue=this.ctx.transform.applyToPoint(new l(0,0));L=Math.sqrt(Math.pow(ne.x-ue.x,2)+Math.pow(ne.y-ue.y,2))}Math.abs(K-$)>=2*Math.PI&&($=0,K=2*Math.PI),this.path.push({type:"arc",x:C,y:F,radius:L,startAngle:$,endAngle:K,counterclockwise:I})},m.prototype.arcTo=function(C,F,L,$,K){throw new Error("arcTo not implemented.")},m.prototype.rect=function(C,F,L,$){if(isNaN(C)||isNaN(F)||isNaN(L)||isNaN($))throw Br.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,F),this.lineTo(C+L,F),this.lineTo(C+L,F+$),this.lineTo(C,F+$),this.lineTo(C,F),this.lineTo(C+L,F),this.lineTo(C,F)},m.prototype.fillRect=function(C,F,L,$){if(isNaN(C)||isNaN(F)||isNaN(L)||isNaN($))throw Br.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,F,L,$),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},m.prototype.strokeRect=function(C,F,L,$){if(isNaN(C)||isNaN(F)||isNaN(L)||isNaN($))throw Br.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(C,F,L,$),this.stroke())},m.prototype.clearRect=function(C,F,L,$){if(isNaN(C)||isNaN(F)||isNaN(L)||isNaN($))throw Br.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,F,L,$))},m.prototype.save=function(C){C=typeof C!="boolean"||C;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,L=0;L<this.pdf.internal.getNumberOfPages();L++)this.pdf.setPage(L+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},m.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,L=0;L<this.pdf.internal.getNumberOfPages();L++)this.pdf.setPage(L+1),this.pdf.internal.out("Q");this.pdf.setPage(F),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(C){var F,L,$,K;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))F=0,L=0,$=0,K=0;else{var I=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(I!==null)F=parseInt(I[1]),L=parseInt(I[2]),$=parseInt(I[3]),K=1;else if((I=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)F=parseInt(I[1]),L=parseInt(I[2]),$=parseInt(I[3]),K=parseFloat(I[4]);else{if(K=1,typeof C=="string"&&C.charAt(0)!=="#"){var X=new X6(C);C=X.ok?X.toHex():"#000000"}C.length===4?(F=C.substring(1,2),F+=F,L=C.substring(2,3),L+=L,$=C.substring(3,4),$+=$):(F=C.substring(1,3),L=C.substring(3,5),$=C.substring(5,7)),F=parseInt(F,16),L=parseInt(L,16),$=parseInt($,16)}}return{r:F,g:L,b:$,a:K,style:C}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(C,F,L,$){if(isNaN(F)||isNaN(L)||typeof C!="string")throw Br.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!f.call(this)){var K=T(this.ctx.transform.rotation),I=this.ctx.transform.scaleX;M.call(this,{text:C,x:F,y:L,scale:I,angle:K,align:this.textAlign,maxWidth:$})}},m.prototype.strokeText=function(C,F,L,$){if(isNaN(F)||isNaN(L)||typeof C!="string")throw Br.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){$=isNaN($)?void 0:$;var K=T(this.ctx.transform.rotation),I=this.ctx.transform.scaleX;M.call(this,{text:C,x:F,y:L,scale:I,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:$})}},m.prototype.measureText=function(C){if(typeof C!="string")throw Br.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,L=this.pdf.internal.scaleFactor,$=F.internal.getFontSize(),K=F.getStringUnitWidth(C)*$/F.internal.scaleFactor;return new function(I){var X=(I=I||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return X}}),this}({width:K*=Math.round(96*L/72*1e4)/1e4})},m.prototype.scale=function(C,F){if(isNaN(C)||isNaN(F))throw Br.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var L=new c(C,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(L)},m.prototype.rotate=function(C){if(isNaN(C))throw Br.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},m.prototype.translate=function(C,F){if(isNaN(C)||isNaN(F))throw Br.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var L=new c(1,0,0,1,C,F);this.ctx.transform=this.ctx.transform.multiply(L)},m.prototype.transform=function(C,F,L,$,K,I){if(isNaN(C)||isNaN(F)||isNaN(L)||isNaN($)||isNaN(K)||isNaN(I))throw Br.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var X=new c(C,F,L,$,K,I);this.ctx.transform=this.ctx.transform.multiply(X)},m.prototype.setTransform=function(C,F,L,$,K,I){C=isNaN(C)?1:C,F=isNaN(F)?0:F,L=isNaN(L)?0:L,$=isNaN($)?1:$,K=isNaN(K)?0:K,I=isNaN(I)?0:I,this.ctx.transform=new c(C,F,L,$,K,I)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(C,F,L,$,K,I,X,ne,ue){var xe=this.pdf.getImageProperties(C),ke=1,Re=1,We=1,Z=1;$!==void 0&&ne!==void 0&&(We=ne/$,Z=ue/K,ke=xe.width/$*ne/$,Re=xe.height/K*ue/K),I===void 0&&(I=F,X=L,F=0,L=0),$!==void 0&&ne===void 0&&(ne=$,ue=K),$===void 0&&ne===void 0&&(ne=xe.width,ue=xe.height);var Ge=this.ctx.transform.decompose(),Lt=T(Ge.rotate.shx),Me=new c,Ee=(Me=(Me=(Me=Me.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new o(I-F*We,X-L*Z,$*ke,K*Re));if(this.autoPaging){for(var it,et=S.call(this,Ee),dt=[],lt=0;lt<et.length;lt+=1)dt.indexOf(et[lt])===-1&&dt.push(et[lt]);w(dt);for(var jt=dt[0],Ht=dt[dt.length-1],ut=jt;ut<Ht+1;ut++){this.pdf.setPage(ut);var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gt=ut===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=ut===1?0:st+(ut-2)*se;if(this.ctx.clip_path.length!==0){var Pe=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(it,this.posX+this.margin[3],-ve+Gt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=Pe}var Fe=JSON.parse(JSON.stringify(Ee));Fe=j([Fe],this.posX+this.margin[3],-ve+Gt+this.ctx.prevPageLastElemOffset)[0];var pe=(ut>jt||ut<Ht)&&v.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,se,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Fe.x,Fe.y,Fe.w,Fe.h,null,null,Lt),pe&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(C,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,Lt)};var S=function(C,F,L){var $=[];F=F||this.pdf.internal.pageSize.width,L=L||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":$.push(Math.floor((C.y+K)/L)+1);break;case"arc":$.push(Math.floor((C.y+K-C.radius)/L)+1),$.push(Math.floor((C.y+K+C.radius)/L)+1);break;case"qct":var I=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);$.push(Math.floor((I.y+K)/L)+1),$.push(Math.floor((I.y+I.h+K)/L)+1);break;case"bct":var X=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);$.push(Math.floor((X.y+K)/L)+1),$.push(Math.floor((X.y+X.h+K)/L)+1);break;case"rect":$.push(Math.floor((C.y+K)/L)+1),$.push(Math.floor((C.y+C.h+K)/L)+1)}for(var ne=0;ne<$.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<$[ne];)b.call(this);return $},b=function(){var C=this.fillStyle,F=this.strokeStyle,L=this.font,$=this.lineCap,K=this.lineWidth,I=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=F,this.font=L,this.lineCap=$,this.lineWidth=K,this.lineJoin=I},j=function(C,F,L){for(var $=0;$<C.length;$++)switch(C[$].type){case"bct":C[$].x2+=F,C[$].y2+=L;case"qct":C[$].x1+=F,C[$].y1+=L;default:C[$].x+=F,C[$].y+=L}return C},w=function(C){return C.sort(function(F,L){return F-L})},k=function(C,F){var L=this.fillStyle,$=this.strokeStyle,K=this.lineCap,I=this.lineWidth,X=Math.abs(I*this.ctx.transform.scaleX),ne=this.lineJoin;if(this.autoPaging){for(var ue,xe,ke=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),We=[],Z=0;Z<Re.length;Z++)if(Re[Z].x!==void 0)for(var Ge=S.call(this,Re[Z]),Lt=0;Lt<Ge.length;Lt+=1)We.indexOf(Ge[Lt])===-1&&We.push(Ge[Lt]);for(var Me=0;Me<We.length;Me++)for(;this.pdf.internal.getNumberOfPages()<We[Me];)b.call(this);w(We);for(var Ee=We[0],it=We[We.length-1],et=Ee;et<it+1;et++){this.pdf.setPage(et),this.fillStyle=L,this.strokeStyle=$,this.lineCap=K,this.lineWidth=X,this.lineJoin=ne;var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=et===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=et===1?0:jt+(et-2)*Ht;if(this.ctx.clip_path.length!==0){var Mt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(ue,this.posX+this.margin[3],-ut+lt+this.ctx.prevPageLastElemOffset),R.call(this,C,!0),this.path=Mt}if(xe=JSON.parse(JSON.stringify(ke)),this.path=j(xe,this.posX+this.margin[3],-ut+lt+this.ctx.prevPageLastElemOffset),F===!1||et===0){var Gt=(et>Ee||et<it)&&v.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Ht,null).clip().discardPath()),R.call(this,C,F),Gt&&this.pdf.restoreGraphicsState()}this.lineWidth=I}this.path=ke}else this.lineWidth=X,R.call(this,C,F),this.lineWidth=I},R=function(C,F){if((C!=="stroke"||F||!y.call(this))&&(C==="stroke"||F||!f.call(this))){for(var L,$,K=[],I=this.path,X=0;X<I.length;X++){var ne=I[X];switch(ne.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:ne,deltas:[],abs:[]});break;case"lt":var ue=K.length;if(I[X-1]&&!isNaN(I[X-1].x)&&(L=[ne.x-I[X-1].x,ne.y-I[X-1].y],ue>0)){for(;ue>=0;ue--)if(K[ue-1].close!==!0&&K[ue-1].begin!==!0){K[ue-1].deltas.push(L),K[ue-1].abs.push(ne);break}}break;case"bct":L=[ne.x1-I[X-1].x,ne.y1-I[X-1].y,ne.x2-I[X-1].x,ne.y2-I[X-1].y,ne.x-I[X-1].x,ne.y-I[X-1].y],K[K.length-1].deltas.push(L);break;case"qct":var xe=I[X-1].x+2/3*(ne.x1-I[X-1].x),ke=I[X-1].y+2/3*(ne.y1-I[X-1].y),Re=ne.x+2/3*(ne.x1-ne.x),We=ne.y+2/3*(ne.y1-ne.y),Z=ne.x,Ge=ne.y;L=[xe-I[X-1].x,ke-I[X-1].y,Re-I[X-1].x,We-I[X-1].y,Z-I[X-1].x,Ge-I[X-1].y],K[K.length-1].deltas.push(L);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(ne)}}$=F?null:C==="stroke"?"stroke":"fill";for(var Lt=!1,Me=0;Me<K.length;Me++)if(K[Me].arc)for(var Ee=K[Me].abs,it=0;it<Ee.length;it++){var et=Ee[it];et.type==="arc"?q.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,F,!Lt):ee.call(this,et.x,et.y),Lt=!0}else if(K[Me].close===!0)this.pdf.internal.out("h"),Lt=!1;else if(K[Me].begin!==!0){var dt=K[Me].start.x,lt=K[Me].start.y;E.call(this,K[Me].deltas,dt,lt),Lt=!0}$&&D.call(this,$),F&&J.call(this)}},W=function(C){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,L=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-L;case"top":return C+F-L;case"hanging":return C+F-2*L;case"middle":return C+F/2-L;default:return C}},O=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(F,L){this.colorStops.push([F,L])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var q=function(C,F,L,$,K,I,X,ne,ue){for(var xe=Y.call(this,L,$,K,I),ke=0;ke<xe.length;ke++){var Re=xe[ke];ke===0&&(ue?A.call(this,Re.x1+C,Re.y1+F):ee.call(this,Re.x1+C,Re.y1+F)),ae.call(this,C,F,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}ne?J.call(this):D.call(this,X)},D=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(C,F){this.pdf.internal.out(r(C)+" "+s(F)+" m")},M=function(C){var F;switch(C.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var L,$,K,I=this.pdf.getTextDimensions(C.text),X=W.call(this,C.y),ne=O.call(this,X)-I.h,ue=this.ctx.transform.applyToPoint(new l(C.x,X));if(this.autoPaging){var xe=this.ctx.transform.decompose(),ke=new c;ke=(ke=(ke=ke.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Re=this.ctx.transform.applyToRectangle(new o(C.x,X,I.w,I.h)),We=ke.applyToRectangle(new o(C.x,ne,I.w,I.h)),Z=S.call(this,We),Ge=[],Lt=0;Lt<Z.length;Lt+=1)Ge.indexOf(Z[Lt])===-1&&Ge.push(Z[Lt]);w(Ge);for(var Me=Ge[0],Ee=Ge[Ge.length-1],it=Me;it<Ee+1;it++){this.pdf.setPage(it);var et=it===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[2],jt=lt-this.margin[0],Ht=this.pdf.internal.pageSize.width-this.margin[1],ut=Ht-this.margin[3],Mt=it===1?0:dt+(it-2)*jt;if(this.ctx.clip_path.length!==0){var Gt=this.path;L=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(L,this.posX+this.margin[3],-1*Mt+et),R.call(this,"fill",!0),this.path=Gt}var st=j([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Mt+et+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&($=this.pdf.internal.getFontSize(),this.pdf.setFontSize($*C.scale),K=this.lineWidth,this.lineWidth=K*C.scale);var se=this.autoPaging!=="text";if(se||st.y+st.h<=lt){if(se||st.y>=et&&st.x<=Ht){var ve=se?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||Ht-st.x)[0],Pe=j([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Mt+et+this.ctx.prevPageLastElemOffset)[0],Fe=se&&(it>Me||it<Ee)&&v.call(this);Fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,jt,null).clip().discardPath()),this.pdf.text(ve,Pe.x,Pe.y,{angle:C.angle,align:F,renderingMode:C.renderingMode}),Fe&&this.pdf.restoreGraphicsState()}}else st.y<lt&&(this.ctx.prevPageLastElemOffset+=lt-st.y);C.scale>=.01&&(this.pdf.setFontSize($),this.lineWidth=K)}}else C.scale>=.01&&($=this.pdf.internal.getFontSize(),this.pdf.setFontSize($*C.scale),K=this.lineWidth,this.lineWidth=K*C.scale),this.pdf.text(C.text,ue.x+this.posX,ue.y+this.posY,{angle:C.angle,align:F,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize($),this.lineWidth=K)},ee=function(C,F,L,$){L=L||0,$=$||0,this.pdf.internal.out(r(C+L)+" "+s(F+$)+" l")},E=function(C,F,L){return this.pdf.lines(C,F,L,null,null)},ae=function(C,F,L,$,K,I,X,ne){this.pdf.internal.out([t(a(L+C)),t(i($+F)),t(a(K+C)),t(i(I+F)),t(a(X+C)),t(i(ne+F)),"c"].join(" "))},Y=function(C,F,L,$){for(var K=2*Math.PI,I=Math.PI/2;F>L;)F-=K;var X=Math.abs(L-F);X<K&&$&&(X=K-X);for(var ne=[],ue=$?-1:1,xe=F;X>1e-5;){var ke=xe+ue*Math.min(X,I);ne.push(de.call(this,C,xe,ke)),X-=Math.abs(ke-xe),xe=ke}return ne},de=function(C,F,L){var $=(L-F)/2,K=C*Math.cos($),I=C*Math.sin($),X=K,ne=-I,ue=X*X+ne*ne,xe=ue+X*K+ne*I,ke=4/3*(Math.sqrt(2*ue*xe)-xe)/(X*I-ne*K),Re=X-ke*ne,We=ne+ke*X,Z=Re,Ge=-We,Lt=$+F,Me=Math.cos(Lt),Ee=Math.sin(Lt);return{x1:C*Math.cos(F),y1:C*Math.sin(F),x2:Re*Me-We*Ee,y2:Re*Ee+We*Me,x3:Z*Me-Ge*Ee,y3:Z*Ee+Ge*Me,x4:C*Math.cos(L),y4:C*Math.sin(L)}},T=function(C){return 180*C/Math.PI},V=function(C,F,L,$,K,I){var X=C+.5*(L-C),ne=F+.5*($-F),ue=K+.5*(L-K),xe=I+.5*($-I),ke=Math.min(C,K,X,ue),Re=Math.max(C,K,X,ue),We=Math.min(F,I,ne,xe),Z=Math.max(F,I,ne,xe);return new o(ke,We,Re-ke,Z-We)},re=function(C,F,L,$,K,I,X,ne){var ue,xe,ke,Re,We,Z,Ge,Lt,Me,Ee,it,et,dt,lt,jt=L-C,Ht=$-F,ut=K-L,Mt=I-$,Gt=X-K,st=ne-I;for(xe=0;xe<41;xe++)Me=(Ge=(ke=C+(ue=xe/40)*jt)+ue*((We=L+ue*ut)-ke))+ue*(We+ue*(K+ue*Gt-We)-Ge),Ee=(Lt=(Re=F+ue*Ht)+ue*((Z=$+ue*Mt)-Re))+ue*(Z+ue*(I+ue*st-Z)-Lt),xe==0?(it=Me,et=Ee,dt=Me,lt=Ee):(it=Math.min(it,Me),et=Math.min(et,Ee),dt=Math.max(dt,Me),lt=Math.max(lt,Ee));return new o(Math.round(it),Math.round(et),Math.round(dt-it),Math.round(lt-et))},he=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,F,L=(C=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:F}));this.prevLineDash!==L&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=L)}}})(Rt.API),function(e){var t=function(l){var o,c,d,u,m,x,f,y,v,S;for(c=[],d=0,u=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;u>d;d+=4)(m=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(x=(m=((m=((m=((m=(m-(S=m%85))/85)-(v=m%85))/85)-(y=m%85))/85)-(f=m%85))/85)%85,c.push(x+33,f+33,y+33,v+33,S+33)):c.push(122);return function(b,j){for(var w=j;w>0;w--)b.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(l){var o,c,d,u,m,x=String,f="length",y=255,v="charCodeAt",S="slice",b="replace";for(l[S](-2),l=l[S](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),d=[],u=0,m=(l+=o="uuuuu"[S](l[f]%5||5))[f];m>u;u+=5)c=52200625*(l[v](u)-33)+614125*(l[v](u+1)-33)+7225*(l[v](u+2)-33)+85*(l[v](u+3)-33)+(l[v](u+4)-33),d.push(y&c>>24,y&c>>16,y&c>>8,y&c);return function(j,w){for(var k=w;k>0;k--)j.pop()}(d,o[f]),x.fromCharCode.apply(x,d)},s=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var c="",d=0;d<l.length;d+=2)c+=String.fromCharCode("0x"+(l[d]+l[d+1]));return c},i=function(l){for(var o=new Uint8Array(l.length),c=l.length;c--;)o[c]=l.charCodeAt(c);return(o=Y1(o)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(l,o){var c=0,d=l||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(Rt.API),function(e){e.loadFile=function(t,r,s){return function(a,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=function(c,d,u){var m=new XMLHttpRequest,x=0,f=function(y){var v=y.length,S=[],b=String.fromCharCode;for(x=0;x<v;x+=1)S.push(b(255&y.charCodeAt(x)));return S.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?u(f(this.responseText)):u(void 0)}),m.send(null),d&&m.status===200)return f(m.responseText)}(a,i,l)}catch{}return o}(t,r,s)},e.loadImageFile=e.loadFile}(Rt.API),function(e){function t(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):Wv(()=>import("./html2canvas.esm-DadlvMMh.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):Wv(()=>import("./purify.es-j25Co9VN.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var c=Dr(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var d=document.createElement(o);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},i=function o(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||u.appendChild(o(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},l=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),d);return(u=u.setProgress(1,o,1,[o])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,c){return o.__proto__=c||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(r).then(function(d){return this.set({src:a("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var y=u[f],v=y.src.find(function(S){return S.format==="truetype"});v&&d.addFont(v.url,y.ref.name,y.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,d.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},l.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(s(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(o,c){return this.then(function(){var d=o in l.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},l.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(o=o||Rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,c,d,u){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,c,d,u){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},l.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(u,m){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(x){return d.updateProgress(null,u),x}).then(u,m).then(function(x){return d.updateProgress(1),x})})},l.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),c&&(c=c.bind(u));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:l.convert(Object.assign({},u),Promise.prototype),x=d.call(m,o,c);return l.convert(x,u.__proto__)},l.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},l.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},l.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return l.convert(c,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Rt.getPageSize=function(o,c,d){if(Dr(o)==="object"){var u=o;o=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var m,x=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var y,v=0,S=0;if(f.hasOwnProperty(x))v=f[x][1]/m,S=f[x][0]/m;else try{v=d[1],S=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",S>v&&(y=S,S=v,v=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>S&&(y=S,S=v,v=y)}return{width:S,height:v,unit:c,k:m,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(g0):null;var d=new l(c);return c.worker?d:d.from(o).doCallback()}}(Rt.API),Rt.API.addJS=function(e){return Lj=e,this.internal.events.subscribe("postPutResources",function(){gp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ej=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Lj+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gp!==void 0&&Ej!==void 0&&this.internal.out("/Names <</JavaScript "+gp+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var l=a[i],o=s.exec(l);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var m=r.internal.newObject();u.push(m);var x=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,a,i){var l={title:a,options:i,children:[]};return s==null&&(s=this.root),s.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var l=s.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,a){for(var i=0;i<a.children.length;i++)s.count++,this.count_r(s,a.children[i]);return s.count}}])}(Rt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,a,i,l,o){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(m){for(var x,f=256*m.charCodeAt(4)+m.charCodeAt(5),y=m.length,v={width:0,height:0,numcomponents:1},S=4;S<y;S+=2){if(S+=f,t.indexOf(m.charCodeAt(S+1))!==-1){x=256*m.charCodeAt(S+5)+m.charCodeAt(S+6),v={width:256*m.charCodeAt(S+7)+m.charCodeAt(S+8),height:x,numcomponents:m.charCodeAt(S+9)};break}f=256*m.charCodeAt(S+2)+m.charCodeAt(S+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:s,alias:a}}return u}}(Rt.API),Rt.API.processPNG=function(e,t,r,s){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=SH(e,{checkCrc:!0}),l=i.width,o=i.height,c=i.channels,d=i.palette,u=i.depth;a=d&&c===1?function(q){for(var D=q.width,J=q.height,A=q.data,M=q.palette,ee=q.depth,E=!1,ae=[],Y=[],de=void 0,T=!1,V=0,re=0;re<M.length;re++){var he=_5(M[re],4),C=he[0],F=he[1],L=he[2],$=he[3];ae.push(C,F,L),$!=null&&($===0?(V++,Y.length<1&&Y.push(re)):$<255&&(T=!0))}if(T||V>1){E=!0,Y=void 0;var K=D*J;de=new Uint8Array(K);for(var I=new DataView(A.buffer),X=0;X<K;X++){var ne=v0(I,X,ee),ue=_5(M[ne],4)[3];de[X]=ue}}else V===0&&(Y=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:E?8:void 0,colorBytes:A,alphaBytes:de,needSMask:E,palette:ae,mask:Y}}(i):c===2||c===4?function(q){for(var D=q.data,J=q.width,A=q.height,M=q.channels,ee=q.depth,E=M===2?"DeviceGray":"DeviceRGB",ae=M-1,Y=J*A,de=ae,T=Y*de,V=1*Y,re=Math.ceil(T*ee/8),he=Math.ceil(V*ee/8),C=new Uint8Array(re),F=new Uint8Array(he),L=new DataView(D.buffer),$=new DataView(C.buffer),K=new DataView(F.buffer),I=!1,X=0;X<Y;X++){for(var ne=X*M,ue=0;ue<de;ue++)Uj($,v0(L,ne+ue,ee),X*de+ue,ee);var xe=v0(L,ne+de,ee);xe<(1<<ee)-1&&(I=!0),Uj(K,xe,1*X,ee)}return{colorSpace:E,colorsPerPixel:ae,sMaskBitsPerComponent:I?ee:void 0,colorBytes:C,alphaBytes:F,needSMask:I}}(i):function(q){var D=q.data,J=q.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:J,colorsPerPixel:J==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?function(A){for(var M=A.length,ee=new Uint8Array(2*M),E=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),ae=0;ae<M;ae++)E.setUint16(2*ae,A[ae],!1);return ee}(D):D,needSMask:!1}}(i);var m,x,f,y=a,v=y.colorSpace,S=y.colorsPerPixel,b=y.sMaskBitsPerComponent,j=y.colorBytes,w=y.alphaBytes,k=y.needSMask,R=y.palette,W=y.mask,O=null;return s!==Rt.API.image_compression.NONE&&typeof Y1=="function"?(O=function(q){var D;switch(q){case Rt.API.image_compression.FAST:D=11;break;case Rt.API.image_compression.MEDIUM:D=13;break;case Rt.API.image_compression.SLOW:D=14;break;default:D=12}return D}(s),m=this.decode.FLATE_DECODE,x="/Predictor ".concat(O," /Colors ").concat(S," /BitsPerComponent ").concat(u," /Columns ").concat(l),e=Ij(j,Math.ceil(l*S*u/8),S,u,s),k&&(f=Ij(w,Math.ceil(l*b/8),1,b,s))):(m=void 0,x=void 0,e=j,k&&(f=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:e,index:t,filter:m,decodeParameters:x,transparency:W,palette:R,sMask:f,predictor:O,width:l,height:o,bitsPerComponent:u,sMaskBitsPerComponent:b,colorSpace:v}}},function(e){e.processGIF89A=function(t,r,s,a){var i=new HH(t),l=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:o},u=new y0(100).encode(d,100);return e.processJPEG.call(this,u,r,s,a)},e.processGIF87A=e.processGIF89A}(Rt.API),ui.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ui.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Br.log("bit decode error:"+r)}},ui.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}r!==0&&(this.pos+=4-r)}},ui.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+2*a*4,o=i>>4,c=15&i,d=this.palette[o];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},ui.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(a<this.palette.length){var l=this.palette[a];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},ui.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=s*this.width*4+4*a;this.data[u]=c,this.data[u+1]=o,this.data[u+2]=l,this.data[u+3]=d}this.pos+=e}},ui.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,c=(l>>5&r)/r*255|0,d=(l>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},ui.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=s,this.data[l+3]=255}this.pos+=this.width%4}},ui.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=s,this.data[o+3]=l}},ui.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,a){var i=new ui(t,!1),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new y0(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}}(Rt.API),zj.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,a){var i=new zj(t),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new y0(100).encode(c,100);return e.processJPEG.call(this,d,r,s,a)}}(Rt.API),Rt.API.processRGBA=function(e,t,r){for(var s=e.data,a=s.length,i=new Uint8Array(a/4*3),l=new Uint8Array(a/4),o=0,c=0,d=0;d<a;d+=4){var u=s[d],m=s[d+1],x=s[d+2],f=s[d+3];i[o++]=u,i[o++]=m,i[o++]=x,l[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Rt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Rd=Rt.API,xp=Rd.getCharWidthsArray=function(e,t){var r,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,m=t.doKerning!==!1,x=0,f=e.length,y=0,v=o[0]||c,S=[];for(r=0;r<f;r++)s=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?S.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+l*(1e3/i)||0)/1e3):(x=m&&Dr(d[s])==="object"&&!isNaN(parseInt(d[s][y],10))?d[s][y]/u:0,S.push((o[s]||v)/c+x)),y=s;return S},Tj=Rd.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Rd.processArabic&&(e=Rd.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,a)/r:xp.apply(this,arguments).reduce(function(i,l){return i+l},0)},Dj=function(e,t,r,s){for(var a=[],i=0,l=e.length,o=0;i!==l&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var c=i;for(o=0;i!==l;)o+t[i]>s&&(a.push(e.slice(c,i)),o=0,c=i),o+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},Rj=function(e,t,r){r||(r={});var s,a,i,l,o,c,d,u=[],m=[u],x=r.textIndent||0,f=0,y=0,v=e.split(" "),S=xp.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),j=[];v.map(function(k){(k=k.split(/\s*\n/)).length>1?j=j.concat(k.map(function(R,W){return(W&&R.length?`
`:"")+R})):j.push(k[0])}),v=j,c=Tj.apply(this,[b,r])}for(i=0,l=v.length;i<l;i++){var w=0;if(s=v[i],c&&s[0]==`
`&&(s=s.substr(1),w=1),x+f+(y=(a=xp.apply(this,[s,r])).reduce(function(k,R){return k+R},0))>t||w){if(y>t){for(o=Dj.apply(this,[s,a,t-(x+f),t]),u.push(o.shift()),u=[o.pop()];o.length;)m.push([o.shift()]);y=a.slice(s.length-(u[0]?u[0].length:0)).reduce(function(k,R){return k+R},0)}else u=[s];m.push(u),x=y+c,f=S}else u.push(s),x+=f+y,f=S}return d=c?function(k,R){return(R?b:"")+k.join(" ")}:function(k){return k.join(" ")},m.map(d)},Rd.splitTextToSize=function(e,t,r){var s,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var m=this.internal.getFont(u.fontName,u.fontStyle),x="Unicode";return m.metadata[x]?{widths:m.metadata[x].widths||{0:1},kerning:m.metadata[x].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,c,d=[];for(o=0,c=s.length;o<c;o++)d=d.concat(Rj.apply(this,[s[o],l,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",s={},a={},i=0;i<16;i++)s[r[i]]=t[i],a[t[i]]=r[i];var l=function(x){return"0x"+parseInt(x,10).toString(16)},o=e.__fontmetrics__.compress=function(x){var f,y,v,S,b=["{"];for(var j in x){if(f=x[j],isNaN(parseInt(j,10))?y="'"+j+"'":(j=parseInt(j,10),y=(y=l(j).slice(2)).slice(0,-1)+a[y.slice(-1)]),typeof f=="number")f<0?(v=l(f).slice(3),S="-"):(v=l(f).slice(2),S=""),v=S+v.slice(0,-1)+a[v.slice(-1)];else{if(Dr(f)!=="object")throw new Error("Don't know what to do with value type "+Dr(f)+".");v=o(f)}b.push(y+v)}return b.push("}"),b.join("")},c=e.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,y,v,S,b={},j=1,w=b,k=[],R="",W="",O=x.length-1,q=1;q<O;q+=1)(S=x[q])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(S):S=="{"?(k.push([w,v]),w={},v=void 0):S=="}"?((y=k.pop())[0][y[1]]=w,v=void 0,w=y[0]):S=="-"?j=-1:v===void 0?s.hasOwnProperty(S)?(R+=s[S],v=parseInt(R,16)*j,j=1,R=""):R+=S:s.hasOwnProperty(S)?(W+=s[S],w[v]=parseInt(W,16)*j,j=1,v=void 0,W=""):W+=S;return b},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(x){var f=x.font,y=m.Unicode[f.postScriptName];y&&(f.metadata.Unicode={},f.metadata.Unicode.widths=y.widths,f.metadata.Unicode.kerning=y.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(Rt.API),function(e){var t=function(r){for(var s=r.length,a=new Uint8Array(s),i=0;i<s;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var s=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Op(o)),l.metadata=e.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,s)}}])}(Rt),Rt.API.addSvgAsImage=function(e,t,r,s,a,i,l,o){if(isNaN(t)||isNaN(r))throw Br.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Br.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Kt.canvg?Promise.resolve(Kt.canvg):Wv(()=>import("./index.es-Buiq3GTq.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(u)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),t,r,s,a,l,o)})},Rt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(t,r);return this},Rt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,a,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],d=0,u=0,m=0;function x(y,v){var S,b=!1;for(S=0;S<y.length;S+=1)y[S]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=o.length;for(m=0;m<f;m+=1)r[o[m]].value=r[o[m]].defaultValue,r[o[m]].explicitSet=!1}if(Dr(e)==="object"){for(a in e)if(i=e[a],x(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&x(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(s=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(s=!1);s===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+l.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+l+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Rt.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,l){for(var o,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],m=0,x=i.length;m<x;++m){if(o=l.metadata.characterToGlyph(i.charCodeAt(m)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(m),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},s=function(i){var l,o,c,d,u,m,x;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,x=(o=Object.keys(i).sort(function(f,y){return f-y})).length;m<x;m++)l=o[m],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(d=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,u=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,x=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",y=0;y<x.length;y++)f+=String.fromCharCode(x[y]);var v=d();u({data:f,addLength1:!0,objectId:v}),c("endobj");var S=d();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var b=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Md(o.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var j=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Md(o.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+Md(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+j+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,u=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,x="",f=0;f<m.length;f++)x+=String.fromCharCode(m[f]);var y=d();u({data:x,addLength1:!0,objectId:y}),c("endobj");var v=d();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var S=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Md(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Md(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var l,o=i.text||"",c=i.x,d=i.y,u=i.options||{},m=i.mutex||{},x=m.pdfEscape,f=m.activeFontKey,y=m.fonts,v=f,S="",b=0,j="",w=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:o,x:c,y:d,options:u,mutex:m};for(j=o,v=f,Array.isArray(o)&&(j=o[0]),b=0;b<j.length;b+=1)y[v].metadata.hasOwnProperty("cmap")&&(l=y[v].metadata.cmap.unicode.codeMap[j[b].charCodeAt(0)]),l||j[b].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?S+=j[b]:S+="";var k="";return parseInt(v.slice(1))<14||w==="WinAnsiEncoding"?k=x(S,v).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(k=r(S,y[v])),m.isHex=!0,{text:k,x:c,y:d,options:u,mutex:m}};t.events.push(["postProcessText",function(i){var l=i.text||"",o=[],c={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?o.push([a(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):o.push(a(Object.assign({},c,{text:l[d]})).text);i.text=o}else i.text=a(Object.assign({},c,{text:l})).text}])}(Rt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Rt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var a,i,l,o,c,d,u,m=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,w=0;this.__bidiEngine__={};var k=function(A){var M=A.charCodeAt(),ee=M>>8,E=v[ee];return E!==void 0?m[256*E+(255&M)]:ee===252||ee===253?"AL":b.test(ee)?"L":ee===8?"R":"N"},R=function(A){for(var M,ee=0;ee<A.length;ee++){if((M=k(A.charAt(ee)))==="L")return!1;if(M==="R")return!0}return!1},W=function(A,M,ee,E){var ae,Y,de,T,V=M[E];switch(V){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(V="AN");break;case"AL":j=!0,V="R";break;case"WS":case"BN":V="N";break;case"CS":E<1||E+1>=M.length||(ae=ee[E-1])!=="EN"&&ae!=="AN"||(Y=M[E+1])!=="EN"&&Y!=="AN"?V="N":j&&(Y="AN"),V=Y===ae?Y:"N";break;case"ES":V=(ae=E>0?ee[E-1]:"B")==="EN"&&E+1<M.length&&M[E+1]==="EN"?"EN":"N";break;case"ET":if(E>0&&ee[E-1]==="EN"){V="EN";break}if(j){V="N";break}for(de=E+1,T=M.length;de<T&&M[de]==="ET";)de++;V=de<T&&M[de]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(T=M.length,de=E+1;de<T&&M[de]==="NSM";)de++;if(de<T){var re=A[E],he=re>=1425&&re<=2303||re===64286;if(ae=M[de],he&&(ae==="R"||ae==="AL")){V="R";break}}}V=E<1||(ae=M[E-1])==="B"?"N":ee[E-1];break;case"B":j=!1,a=!0,V=w;break;case"S":i=!0,V="N"}return V},O=function(A,M,ee){var E=A.split("");return ee&&q(E,ee,{hiLevel:w}),E.reverse(),M&&M.reverse(),E.join("")},q=function(A,M,ee){var E,ae,Y,de,T,V=-1,re=A.length,he=0,C=[],F=w?f:x,L=[];for(j=!1,a=!1,i=!1,ae=0;ae<re;ae++)L[ae]=k(A[ae]);for(Y=0;Y<re;Y++){if(T=he,C[Y]=W(A,L,C,Y),E=240&(he=F[T][y[C[Y]]]),he&=15,M[Y]=de=F[he][5],E>0)if(E===16){for(ae=V;ae<Y;ae++)M[ae]=1;V=-1}else V=-1;if(F[he][6])V===-1&&(V=Y);else if(V>-1){for(ae=V;ae<Y;ae++)M[ae]=de;V=-1}L[Y]==="B"&&(M[Y]=0),ee.hiLevel|=de}i&&function($,K,I){for(var X=0;X<I;X++)if($[X]==="S"){K[X]=w;for(var ne=X-1;ne>=0&&$[ne]==="WS";ne--)K[ne]=w}}(L,M,re)},D=function(A,M,ee,E,ae){if(!(ae.hiLevel<A)){if(A===1&&w===1&&!a)return M.reverse(),void(ee&&ee.reverse());for(var Y,de,T,V,re=M.length,he=0;he<re;){if(E[he]>=A){for(T=he+1;T<re&&E[T]>=A;)T++;for(V=he,de=T-1;V<de;V++,de--)Y=M[V],M[V]=M[de],M[de]=Y,ee&&(Y=ee[V],ee[V]=ee[de],ee[de]=Y);he=T}he++}}},J=function(A,M,ee){var E=A.split(""),ae={hiLevel:w};return ee||(ee=[]),q(E,ee,ae),function(Y,de,T){if(T.hiLevel!==0&&u)for(var V,re=0;re<Y.length;re++)de[re]===1&&(V=S.indexOf(Y[re]))>=0&&(Y[re]=S[V+1])}(E,ee,ae),D(2,E,M,ee,ae),D(1,E,M,ee,ae),E.join("")};return this.__bidiEngine__.doBidiReorder=function(A,M,ee){if(function(ae,Y){if(Y)for(var de=0;de<ae.length;de++)Y[de]=de;o===void 0&&(o=R(ae)),d===void 0&&(d=R(ae))}(A,M),l||!c||d)if(l&&c&&o^d)w=o?1:0,A=O(A,M,ee);else if(!l&&c&&d)w=o?1:0,A=J(A,M,ee),A=O(A,M);else if(!l||o||c||d){if(l&&!c&&o^d)A=O(A,M),o?(w=0,A=J(A,M,ee)):(w=1,A=J(A,M,ee),A=O(A,M));else if(l&&o&&!c&&d)w=1,A=J(A,M,ee),A=O(A,M);else if(!l&&!c&&o^d){var E=u;o?(w=1,A=J(A,M,ee),w=0,u=!1,A=J(A,M,ee),u=E):(w=0,A=J(A,M,ee),A=O(A,M),w=1,u=!1,A=J(A,M,ee),u=E,A=O(A,M))}}else w=0,A=J(A,M,ee);else w=o?1:0,A=J(A,M,ee);return A},this.__bidiEngine__.setOptions=function(A){A&&(l=A.isInputVisual,c=A.isOutputVisual,o=A.isInputRtl,d=A.isOutputRtl,u=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var i=s.options||{};s.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(l=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?l.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):l.push([r.doBidiReorder(a[o])]);s.text=l}else s.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Rt),Rt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Jl(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new iW(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new WH(this.contents),this.head=new YH(this),this.name=new ZH(this),this.cmap=new l8(this),this.toUnicode={},this.hhea=new KH(this),this.maxp=new eW(this),this.hmtx=new tW(this),this.post=new XH(this),this.os2=new QH(this),this.loca=new aW(this),this.glyf=new rW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,d;for(d=[],l=0,o=(c=this.bbox).length;l<o;l++)t=c[l],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var a,i,l,o;for(l=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var Li,Jl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,a;for(a=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,a,i,l,o,c;return t=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*a+16777216*i+65536*l+256*o+c},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,a,i;for(i=[],s=0,a=t.length;s<a;s++)r=t[s],i.push(this.writeByte(r));return i},e}(),WH=function(){var e;function t(r){var s,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,a,i,l,o,c,d,u,m,x,f,y,v;for(v in f=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(f)/c),l=Math.floor(m/c),u=16*f-m,(a=new Jl).writeInt(this.scalarType),a.writeShort(f),a.writeShort(m),a.writeShort(l),a.writeShort(u),i=16*f,d=a.pos+i,o=null,y=[],r)for(x=r[v],a.writeString(v),a.writeInt(e(x)),a.writeInt(d),a.writeInt(x.length),y=y.concat(x),v==="head"&&(o=d),d+=x.length;d%4;)y.push(0),d++;return a.write(y),s=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(s),a.data},e=function(r){var s,a,i,l;for(r=c8.call(r);r.length%4;)r.push(0);for(i=new Jl(r),a=0,s=0,l=r.length;s<l;s=s+=4)a+=i.readUInt32();return 4294967295&a},t}(),GH={}.hasOwnProperty,so=function(e,t){for(var r in t)GH.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Li=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var YH=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Jl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),qj=function(){function e(t,r){var s,a,i,l,o,c,d,u,m,x,f,y,v,S,b,j,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),x=f/2,t.pos+=6,i=function(){var k,R;for(R=[],c=k=0;0<=x?k<x:k>x;c=0<=x?++k:--k)R.push(t.readUInt16());return R}(),t.pos+=2,v=function(){var k,R;for(R=[],c=k=0;0<=x?k<x:k>x;c=0<=x?++k:--k)R.push(t.readUInt16());return R}(),d=function(){var k,R;for(R=[],c=k=0;0<=x?k<x:k>x;c=0<=x?++k:--k)R.push(t.readUInt16());return R}(),u=function(){var k,R;for(R=[],c=k=0;0<=x?k<x:k>x;c=0<=x?++k:--k)R.push(t.readUInt16());return R}(),a=(this.length-t.pos+this.offset)/2,o=function(){var k,R;for(R=[],c=k=0;0<=a?k<a:k>a;c=0<=a?++k:--k)R.push(t.readUInt16());return R}(),c=b=0,w=i.length;b<w;c=++b)for(S=i[c],s=j=y=v[c];y<=S?j<=S:j>=S;s=y<=S?++j:--j)u[c]===0?l=s+d[c]:(l=o[u[c]/2+(s-y)-(x-c)]||0)!==0&&(l+=d[c]),this.codeMap[s]=65535&l}t.pos=m}return e.encode=function(t,r){var s,a,i,l,o,c,d,u,m,x,f,y,v,S,b,j,w,k,R,W,O,q,D,J,A,M,ee,E,ae,Y,de,T,V,re,he,C,F,L,$,K,I,X,ne,ue,xe,ke;switch(E=new Jl,l=Object.keys(t).sort(function(Re,We){return Re-We}),r){case"macroman":for(v=0,S=function(){var Re=[];for(y=0;y<256;++y)Re.push(0);return Re}(),j={0:0},i={},ae=0,V=l.length;ae<V;ae++)j[ne=t[a=l[ae]]]==null&&(j[ne]=++v),i[a]={old:t[a],new:j[t[a]]},S[a]=j[t[a]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(S),{charMap:i,subtable:E.data,maxGlyphID:v+1};case"unicode":for(M=[],m=[],w=0,j={},s={},b=d=null,Y=0,re=l.length;Y<re;Y++)j[R=t[a=l[Y]]]==null&&(j[R]=++w),s[a]={old:R,new:j[R]},o=j[R]-a,b!=null&&o===d||(b&&m.push(b),M.push(a),d=o),b=a;for(b&&m.push(b),m.push(65535),M.push(65535),J=2*(D=M.length),q=2*Math.pow(Math.log(D)/Math.LN2,2),x=Math.log(q/2)/Math.LN2,O=2*D-q,c=[],W=[],f=[],y=de=0,he=M.length;de<he;y=++de){if(A=M[y],u=m[y],A===65535){c.push(0),W.push(0);break}if(A-(ee=s[A].new)>=32768)for(c.push(0),W.push(2*(f.length+D-y)),a=T=A;A<=u?T<=u:T>=u;a=A<=u?++T:--T)f.push(s[a].new);else c.push(ee-A),W.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*D+2*f.length),E.writeUInt16(0),E.writeUInt16(J),E.writeUInt16(q),E.writeUInt16(x),E.writeUInt16(O),I=0,C=m.length;I<C;I++)a=m[I],E.writeUInt16(a);for(E.writeUInt16(0),X=0,F=M.length;X<F;X++)a=M[X],E.writeUInt16(a);for(ue=0,L=c.length;ue<L;ue++)o=c[ue],E.writeUInt16(o);for(xe=0,$=W.length;xe<$;xe++)k=W[xe],E.writeUInt16(k);for(ke=0,K=f.length;ke<K;ke++)v=f[ke],E.writeUInt16(v);return{charMap:s,subtable:E.data,maxGlyphID:w+1}}},e}(),l8=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,s,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new qj(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var s,a;return r==null&&(r="macroman"),s=qj.encode(t,r),(a=new Jl).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),KH=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),QH=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(t.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),XH=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="post",e.prototype.parse=function(t){var r,s,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(s=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 262144:return this.map=(function(){var l,o,c;for(c=[],i=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;i=0<=o?++l:--l)c.push(t.readUInt32());return c}).call(this)}},e}(),JH=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ZH=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="name",e.prototype.parse=function(t){var r,s,a,i,l,o,c,d,u,m,x;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},i=u=0,m=s.length;u<m;i=++u)a=s[i],t.pos=a.offset,d=t.readString(a.length),l=new JH(d,a),c[x=a.nameID]==null&&(c[x]=[]),c[a.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),eW=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),tW=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,s,a,i,l,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)u.push(t.readInt16());return u}(),this.widths=(function(){var d,u,m,x;for(x=[],d=0,u=(m=this.metrics).length;d<u;d++)i=m[d],x.push(i.advance);return x}).call(this),s=this.widths[this.widths.length-1],c=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),c8=[].slice,rW=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,s,a,i,l,o,c,d,u,m;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+s,l=(o=new Jl(r.read(a))).readShort(),d=o.readShort(),m=o.readShort(),c=o.readShort(),u=o.readShort(),this.cache[t]=l===-1?new sW(o,d,m,c,u):new nW(o,l,d,m,c,u),this.cache[t]))},e.prototype.encode=function(t,r,s){var a,i,l,o,c;for(l=[],i=[],o=0,c=r.length;o<c;o++)a=t[r[o]],i.push(l.length),a&&(l=l.concat(a.encode(s)));return i.push(l.length),{table:l,offsets:i}},e}(),nW=function(){function e(t,r,s,a,i,l){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=a,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),sW=function(){function e(t,r,s,a,i){var l,o;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new Jl(c8.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),aW=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return so(e,Li),e.prototype.tag="loca",e.prototype.parse=function(t){var r,s;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,l=0;l<s.length;++l)if(s[l]=a,i<r.length&&r[i]==l){++i,s[l]=a;var o=this.offsets[l],c=this.offsets[l+1]-o;c>0&&(a+=c)}for(var d=new Array(4*s.length),u=0;u<s.length;++u)d[4*u+3]=255&s[u],d[4*u+2]=(65280&s[u])>>8,d[4*u+1]=(16711680&s[u])>>16,d[4*u]=(4278190080&s[u])>>24;return d},e}(),iW=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)s=i[r],t[r]=a[s];return t},e.prototype.glyphsFor=function(t){var r,s,a,i,l,o,c;for(a={},l=0,o=t.length;l<o;l++)a[i=t[l]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(s=a[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))s=c[i],a[i]=s;return a},e.prototype.encode=function(t,r){var s,a,i,l,o,c,d,u,m,x,f,y,v,S,b;for(a in s=l8.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),f={0:0},b=s.charMap)f[(c=b[a]).old]=c.new;for(y in x=s.maxGlyphID,l)y in f||(f[y]=x++);return u=function(j){var w,k;for(w in k={},j)k[j[w]]=w;return k}(f),m=Object.keys(u).sort(function(j,w){return j-w}),v=function(){var j,w,k;for(k=[],j=0,w=m.length;j<w;j++)o=m[j],k.push(u[o]);return k}(),i=this.font.glyf.encode(l,v,f),d=this.font.loca.encode(i.offsets,v),S={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e}();Rt.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,a,i,l;if(Array.isArray(r))return"["+function(){var o,c,d;for(d=[],o=0,c=r.length;o<c;o++)s=r[o],d.push(t.convert(s));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)l=r[a],i.push("/"+a+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+r},t}();const oW=["Universal Hospital"],lW=()=>{const{user:e}=qn(),[t,r]=p.useState(!1),[s,a]=p.useState(new Date().toISOString().split("T")[0]),[i,l]=p.useState(new Date().toISOString().split("T")[0]),[o,c]=p.useState((e==null?void 0:e.clinic)||"all"),[d,u]=p.useState({totalPatients:0,under5:0,over5:0,under5Male:0,under5Female:0,over5Male:0,over5Female:0,totalMale:0,totalFemale:0,totalVisits:0,labTests:0,dispensedDrugs:0,diagnoses:[],tropicalDiseases:[],affectedSystems:[],ageGenderBreakdown:[],medicationStats:{mostPrescribed:[],fastMoving:[],leastMoving:[],totalDispensed:0}}),m=async()=>{r(!0);try{const y=o==="all"?null:o,v=new URLSearchParams({dateFrom:s,dateTo:i,...y&&{clinic:y}}),S=await fetch(`/api/reports?${v}`,{credentials:"include"});if(!S.ok)throw new Error("Failed to fetch report data");const b=await S.json();u(b)}catch(y){console.error("Error fetching report data:",y),ye.error("Failed to load report data")}finally{r(!1)}};p.useEffect(()=>{m()},[s,i,o]);const x=()=>{const v=[["UNIVERSAL HOSPITAL - HEALTH MANAGEMENT INFORMATION SYSTEM (HMIS) REPORT"],["Report Period:",`${s} to ${i}`],["Clinic/Branch:",o==="all"?"All Branches":o],["Generated On:",new Date().toLocaleDateString()],[""],["SECTION A: PATIENT STATISTICS"],["Metric","Count"],["Total Patients Registered",d.totalPatients],["Patients Under 5 Years",d.under5],["Patients Over 5 Years",d.over5],["Total Clinical Visits",d.totalVisits],["Laboratory Tests Completed",d.labTests],["Pharmacy Dispensations",d.dispensedDrugs],[""],["SECTION B: TOP 10 DIAGNOSES"],["Rank","Diagnosis","Count","Percentage of Total Visits"],...d.diagnoses.map((w,k)=>[k+1,w.diagnosis,w.count,`${(w.count/d.totalVisits*100).toFixed(1)}%`]),[""],["SECTION D: TROPICAL DISEASES SURVEILLANCE"],["Disease","Cases","Percentage"],...d.tropicalDiseases.map(w=>[w.disease,w.count,`${(w.count/d.totalVisits*100).toFixed(1)}%`]),[""],["SECTION E: AFFECTED SYSTEMS ANALYSIS"],["System","Cases","Percentage"],...d.affectedSystems.map(w=>[w.system,w.count,`${(w.count/d.totalVisits*100).toFixed(1)}%`]),[""],["SECTION F: AGE-GENDER BREAKDOWN (TOP 10 CONDITIONS)"],["Condition","Under 5 Male","Under 5 Female","Over 5 Male","Over 5 Female","Total Male","Total Female","Grand Total"],...d.ageGenderBreakdown.map(w=>[w.disease,w.under5M,w.under5F,w.over5M,w.over5F,w.totalM,w.totalF,w.total])].map(w=>w.map(k=>typeof k=="string"&&k.includes(",")?`"${k}"`:k).join(",")).join(`
`),S=new Blob([v],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),j=URL.createObjectURL(S);b.setAttribute("href",j),b.setAttribute("download",`HMIS_Report_${o==="all"?"All_Branches":o.replace(/\s+/g,"_")}_${s}_to_${i}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b),ye.success("Comprehensive CSV report downloaded successfully")},f=()=>{const y=new Rt;y.setFontSize(14),y.setFont("helvetica","bold"),y.text("REPUBLIC OF SOUTH SUDAN",105,15,{align:"center"}),y.text("MINISTRY OF HEALTH",105,25,{align:"center"}),y.text("HEALTH MANAGEMENT INFORMATION SYSTEM (HMIS)",105,35,{align:"center"}),y.setFontSize(12),y.text("UNIVERSAL HOSPITAL - MONTHLY HEALTH REPORT",105,45,{align:"center"}),y.setFontSize(9),y.setFont("helvetica","normal"),y.text(`Period: ${s} to ${i}`,20,55),y.text(`Facility: ${o==="all"?"All Clinics":o}`,20,62),y.text(`Generated: ${new Date().toLocaleDateString()}`,140,55);let v=75;const S=(T,V,re,he)=>{const C=he.reduce((K,I)=>K+I,0),F=20;let L=re;y.setFillColor(240,240,240),y.rect(F,L,C,8,"F"),y.setDrawColor(0),y.setLineWidth(.3);let $=F;return T.forEach((K,I)=>{y.rect($,L,he[I],8),y.setFont("helvetica","bold"),y.setFontSize(7),y.text(K,$+1,L+5),$+=he[I]}),L+=8,y.setFont("helvetica","normal"),V.forEach((K,I)=>{$=F,I%2===1&&(y.setFillColor(250,250,250),y.rect(F,L,C,6,"F")),K.forEach((X,ne)=>{y.rect($,L,he[ne],6),y.text(X.toString(),$+1,L+4),$+=he[ne]}),L+=6}),L+5};y.setFont("helvetica","bold"),y.setFontSize(10),y.text("Disease Breakdown by Affected Systems",20,v),v+=8;const b=["Disease/Condition","M<5","F<5","M>5","F>","M","F","M+F"],j=[60,15,15,15,15,15,15,20],w=[],k=new Map;d.ageGenderBreakdown.forEach(T=>{const V=d.affectedSystems.find(he=>{const C=he.system.toLowerCase(),F=T.disease.toLowerCase();return!!(C.includes("urogenital")&&(F.includes("sti")||F.includes("std")||F.includes("abortion")||F.includes("pih")||F.includes("placenta")||F.includes("dysmenorrhea")||F.includes("aph")||F.includes("pph")||F.includes("uti")||F.includes("pid"))||C.includes("cardiovascular")&&(F.includes("hypertension")||F.includes("anemia")||F.includes("heart failure")||F.includes("congestive"))||(C.includes("cns")||C.includes("musculoskeletal"))&&(F.includes("meningitis")||F.includes("paralysis")||F.includes("epilepsy")||F.includes("back pain")||F.includes("arthritis")||F.includes("shoulder")||F.includes("dislocation"))||C.includes("respiratory")&&(F.includes("urti")||F.includes("pneumonia")||F.includes("asthma")||F.includes("tuberculosis")||F.includes("cold"))||C.includes("digestive")&&(F.includes("diarrhea")||F.includes("gastritis")||F.includes("dysentery")||F.includes("ulcer")||F.includes("typhoid")||F.includes("hepatitis"))||(C.includes("dermatological")||C.includes("skin"))&&(F.includes("skin")||F.includes("allergy")||F.includes("dermatitis")||F.includes("fungal")||F.includes("scabies")||F.includes("cellulitis")))}),re=V?V.system:"Others";k.has(re)||k.set(re,[]),k.get(re).push(T)}),k.forEach((T,V)=>{w.push({title:V,diseases:T.map(re=>re.disease)})}),w.forEach(T=>{y.setFont("helvetica","bold"),y.setFontSize(8),y.text(T.title,20,v),v+=6;const V=T.diseases.map(he=>{const C=d.ageGenderBreakdown.find(F=>F.disease===he);return C?[he,C.under5M.toString(),C.under5F.toString(),C.over5M.toString(),C.over5F.toString(),C.totalM.toString(),C.totalF.toString(),C.total.toString()]:[he,"0","0","0","0","0","0","0"]}),re=V.reduce((he,C)=>{for(let F=1;F<8;F++)he[F]=(parseInt(he[F])+parseInt(C[F])).toString();return he},["Total","0","0","0","0","0","0","0"]);V.push(re),v=S(b,V,v,j),v+=3,v>250&&(y.addPage(),v=20)}),y.setFont("helvetica","bold"),y.setFontSize(10),y.text("Summary Statistics",20,v),v+=8;const R=["Metric","Total","Male","Female","Under 5","Over 5"],W=[["Total Patients Registered",d.totalPatients.toString(),d.totalMale.toString(),d.totalFemale.toString(),d.under5.toString(),d.over5.toString()],["Males Under 5 Years",d.under5Male.toString(),d.under5Male.toString(),"0",d.under5Male.toString(),"0"],["Females Under 5 Years",d.under5Female.toString(),"0",d.under5Female.toString(),d.under5Female.toString(),"0"],["Males Over 5 Years",d.over5Male.toString(),d.over5Male.toString(),"0","0",d.over5Male.toString()],["Females Over 5 Years",d.over5Female.toString(),"0",d.over5Female.toString(),"0",d.over5Female.toString()],["Total Clinical Visits",d.totalVisits.toString(),"-","-","-","-"],["Laboratory Tests Completed",d.labTests.toString(),"-","-","-","-"],["Pharmacy Dispensations",d.dispensedDrugs.toString(),"-","-","-","-"]];v=S(R,W,v,[60,25,20,20,20,20]),v+=5,v>200&&(y.addPage(),v=20),y.setFont("helvetica","bold"),y.setFontSize(10),y.text("Tropical Diseases Breakdown",20,v),v+=8;const O=["Disease","Cases","Percentage"],q=d.tropicalDiseases.reduce((T,V)=>T+V.count,0),D=d.tropicalDiseases.slice(0,10).map(T=>[T.disease,T.count.toString(),q>0?(T.count/q*100).toFixed(1)+"%":"0%"]);D.length>0?(D.push(["Total",q.toString(),"100%"]),v=S(O,D,v,[80,30,30]),v+=5):(y.setFont("helvetica","normal"),y.setFontSize(8),y.text("No tropical diseases recorded in this period",20,v),v+=10),v>200&&(y.addPage(),v=20),y.setFont("helvetica","bold"),y.setFontSize(10),y.text("Cases by Affected Systems Summary",20,v),v+=8;const J=["Affected System","Cases","Percentage"],A=d.affectedSystems.reduce((T,V)=>T+V.count,0),M=d.affectedSystems.map(T=>[T.system,T.count.toString(),A>0?(T.count/A*100).toFixed(1)+"%":"0%"]);M.length>0&&(M.push(["Total",A.toString(),"100%"]),v=S(J,M,v,[80,30,30]),v+=5),v>200&&(y.addPage(),v=20),y.setFont("helvetica","bold"),y.setFontSize(10),y.text("Demographics Summary",20,v),v+=8;const ee=["Category","Male","Female","Total","Percentage"],E=[["Under 5 Years",d.under5Male.toString(),d.under5Female.toString(),d.under5.toString(),d.totalPatients>0?(d.under5/d.totalPatients*100).toFixed(1)+"%":"0%"],["Over 5 Years",d.over5Male.toString(),d.over5Female.toString(),d.over5.toString(),d.totalPatients>0?(d.over5/d.totalPatients*100).toFixed(1)+"%":"0%"],["Total",d.totalMale.toString(),d.totalFemale.toString(),d.totalPatients.toString(),"100%"]];v=S(ee,E,v,[50,25,25,25,25]),v+=5,v>200&&(y.addPage(),v=20),y.setFont("helvetica","bold"),y.setFontSize(10),y.text("Top 10 Diagnoses",20,v),v+=8;const ae=["Rank","Diagnosis","M<5","F<5","M>5","F>","M","F","Total"],Y=d.diagnoses.slice(0,10).map((T,V)=>{const re=d.ageGenderBreakdown.find(he=>he.disease===T.diagnosis);return re?[(V+1).toString(),T.diagnosis.substring(0,25)+(T.diagnosis.length>25?"...":""),re.under5M.toString(),re.under5F.toString(),re.over5M.toString(),re.over5F.toString(),re.totalM.toString(),re.totalF.toString(),re.total.toString()]:[(V+1).toString(),T.diagnosis.substring(0,25)+(T.diagnosis.length>25?"...":""),"0","0","0","0","0","0",T.count.toString()]});v=S(ae,Y,v,[15,45,15,15,15,15,15,15,20]),y.setFontSize(7),y.setFont("helvetica","italic"),y.text("This report complies with MOH-RSS HMIS reporting standards",105,285,{align:"center"}),y.text("Generated by Universal Hospital Management System",105,290,{align:"center"});const de=`MOH_HMIS_Report_${o==="all"?"All_Branches":o.replace(/\s+/g,"_")}_${s}_to_${i}.pdf`;y.save(de),ye.success("MOH-standard table format PDF generated successfully")};return n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Reports"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate MOH and management reports"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_e,{variant:"outline",onClick:x,children:[n.jsx(Eo,{className:"w-4 h-4 mr-2"}),"CSV Report"]}),n.jsxs(_e,{variant:"outline",onClick:f,children:[n.jsx(hn,{className:"w-4 h-4 mr-2"}),"MOH PDF"]})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6 mb-6",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Report Filters"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Date From"}),n.jsx(Oe,{type:"date",value:s,onChange:y=>a(y.target.value)})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Date To"}),n.jsx(Oe,{type:"date",value:i,onChange:y=>l(y.target.value)})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{className:"form-label",children:"Clinic"}),n.jsxs(Mn,{value:o,onValueChange:c,children:[n.jsx(jn,{children:n.jsx(Fn,{})}),n.jsxs(Sn,{children:[n.jsx(ot,{value:"all",children:"All Clinics"}),oW.map(y=>n.jsx(ot,{value:y,children:y},y))]})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs(_e,{onClick:m,className:"w-full",disabled:t,children:[t?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(Xd,{className:"w-4 h-4 mr-2"}),"Generate"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx("div",{className:"stat-card",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:n.jsx(bi,{className:"w-5 h-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:d.totalPatients}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Patients"})]})]})}),n.jsx("div",{className:"stat-card",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center",children:n.jsx(ex,{className:"w-5 h-5 text-success"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:d.totalVisits}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Visits"})]})]})}),n.jsx("div",{className:"stat-card",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center",children:n.jsx(Kl,{className:"w-5 h-5 text-warning"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:d.labTests}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Lab Tests"})]})]})}),n.jsx("div",{className:"stat-card",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-accent/10 flex items-center justify-center",children:n.jsx(ya,{className:"w-5 h-5 text-accent"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:d.dispensedDrugs}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drugs Dispensed"})]})]})})]}),n.jsxs(U2,{defaultValue:"moh",className:"space-y-6",children:[n.jsxs(jx,{className:"grid w-full grid-cols-5",children:[n.jsx(Va,{value:"moh",children:"MOH Reports"}),n.jsx(Va,{value:"registry",children:"Patient Registry"}),n.jsx(Va,{value:"revenue",children:"Revenue"}),n.jsx(Va,{value:"inventory",children:"Inventory"}),n.jsx(Va,{value:"prescriptions",children:"Prescriptions"})]}),n.jsxs(Ha,{value:"moh",className:"space-y-8",children:[n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(Xd,{className:"w-5 h-5 text-green-600"}),"Tropical Diseases"]})}),n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Disease"}),n.jsx("th",{children:"Cases"})]})}),n.jsx("tbody",{children:d.tropicalDiseases.slice(0,5).map(y=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:y.disease}),n.jsx("td",{children:y.count})]},y.disease))})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(Xd,{className:"w-5 h-5 text-blue-600"}),"Affected Systems"]})}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"System"}),n.jsx("th",{children:"Cases"})]})}),n.jsx("tbody",{children:d.affectedSystems.map(y=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:y.system}),n.jsx("td",{children:y.count})]},y.system))})]})})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(bi,{className:"w-5 h-5 text-purple-600"}),"Age & Gender Demographics"]})}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Disease"}),n.jsx("th",{children:"M<5"}),n.jsx("th",{children:"F<5"}),n.jsx("th",{children:"M>5"}),n.jsx("th",{children:"F>5"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:d.ageGenderBreakdown.length>0?d.ageGenderBreakdown.slice(0,10).map(y=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:y.disease.length>20?y.disease.substring(0,20)+"...":y.disease}),n.jsx("td",{children:y.under5M}),n.jsx("td",{children:y.under5F}),n.jsx("td",{children:y.over5M}),n.jsx("td",{children:y.over5F}),n.jsx("td",{className:"font-medium",children:y.total})]},y.disease)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center text-muted-foreground py-4",children:"No age & gender data available for this period"})})})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[n.jsx(ya,{className:"w-6 h-6 text-accent"}),"Pharmacy & Dispensing Analytics"]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-border",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Most Prescribed Medications"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Top medications by quantity"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Medication"}),n.jsx("th",{children:"Qty"}),n.jsx("th",{children:"%"})]})}),n.jsx("tbody",{children:d.medicationStats.mostPrescribed.slice(0,8).map((y,v)=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:y.medication}),n.jsx("td",{children:y.count}),n.jsxs("td",{children:[y.percentage.toFixed(1),"%"]})]},y.medication))})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-border",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Fast Moving Items"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"1 per day average"})]}),n.jsx("div",{className:"max-h-40 overflow-y-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Medication"}),n.jsx("th",{children:"Avg/Day"})]})}),n.jsxs("tbody",{children:[d.medicationStats.fastMoving.slice(0,4).map(y=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:y.medication}),n.jsx("td",{children:n.jsx("span",{className:"text-green-600 font-medium",children:y.avgPerDay.toFixed(1)})})]},y.medication)),d.medicationStats.fastMoving.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:"text-center text-muted-foreground py-4",children:"No fast moving items"})})]})]})})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-border",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Slow Moving Items"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"<1 per day average"})]}),n.jsx("div",{className:"max-h-40 overflow-y-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Medication"}),n.jsx("th",{children:"Avg/Day"})]})}),n.jsxs("tbody",{children:[d.medicationStats.leastMoving.slice(0,4).map(y=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:y.medication}),n.jsx("td",{children:n.jsx("span",{className:"text-red-600 font-medium",children:y.avgPerDay.toFixed(2)})})]},y.medication)),d.medicationStats.leastMoving.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:2,className:"text-center text-muted-foreground py-4",children:"No slow moving items"})})]})]})})]})]})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"MOH Summary Report"]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 p-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-primary",children:d.totalPatients}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Patients"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.under5}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Under 5 Years"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.over5}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Over 5 Years"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.totalVisits}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Visits"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.labTests}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Lab Tests"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-accent",children:d.dispensedDrugs}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drugs Dispensed"})]})]})]})]}),n.jsxs(Ha,{value:"registry",className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-border bg-blue-50 dark:bg-blue-950",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(bi,{className:"w-5 h-5 text-blue-600"}),"Patients Under 5 Years"]}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:d.under5})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[n.jsx("span",{className:"font-medium",children:"Male (Under 5)"}),n.jsx("span",{className:"text-xl font-bold text-blue-600",children:d.under5Male})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[n.jsx("span",{className:"font-medium",children:"Female (Under 5)"}),n.jsx("span",{className:"text-xl font-bold text-pink-600",children:d.under5Female})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-primary/10 rounded-lg",children:[n.jsx("span",{className:"font-medium",children:"Total Under 5"}),n.jsx("span",{className:"text-xl font-bold text-primary",children:d.under5})]})]})})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-border bg-green-50 dark:bg-green-950",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(bi,{className:"w-5 h-5 text-green-600"}),"Patients Over 5 Years"]}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:d.over5})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[n.jsx("span",{className:"font-medium",children:"Male (Over 5)"}),n.jsx("span",{className:"text-xl font-bold text-blue-600",children:d.over5Male})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[n.jsx("span",{className:"font-medium",children:"Female (Over 5)"}),n.jsx("span",{className:"text-xl font-bold text-pink-600",children:d.over5Female})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-primary/10 rounded-lg",children:[n.jsx("span",{className:"font-medium",children:"Total Over 5"}),n.jsx("span",{className:"text-xl font-bold text-primary",children:d.over5})]})]})})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overall Patient Registry Summary"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.totalMale}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Male"})]}),n.jsxs("div",{className:"text-center p-4 bg-pink-50 dark:bg-pink-950 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-pink-600",children:d.totalFemale}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Female"})]}),n.jsxs("div",{className:"text-center p-4 bg-primary/10 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-primary",children:d.totalPatients}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Patients"})]}),n.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.totalVisits}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Visits"})]})]})]})]}),n.jsx(Ha,{value:"revenue",className:"space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Xd,{className:"w-5 h-5 text-green-600"}),"Revenue Report"]}),n.jsx("p",{className:"text-muted-foreground",children:"Revenue reporting will be implemented based on billing and payment data."}),n.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm",children:"This section will display:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm text-muted-foreground",children:[n.jsx("li",{children:"Total revenue by date range"}),n.jsx("li",{children:"Revenue by service type"}),n.jsx("li",{children:"Revenue by department/clinic"}),n.jsx("li",{children:"Payment methods breakdown"}),n.jsx("li",{children:"Outstanding balances"})]})]})]})}),n.jsx(Ha,{value:"inventory",className:"space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(ya,{className:"w-5 h-5 text-accent"}),"Inventory Report"]}),n.jsx("p",{className:"text-muted-foreground",children:"Pharmacy inventory reporting based on stock levels and movements."}),n.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm",children:"This section will display:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm text-muted-foreground",children:[n.jsx("li",{children:"Current stock levels by medication"}),n.jsx("li",{children:"Low stock alerts"}),n.jsx("li",{children:"Expired or near-expiry items"}),n.jsx("li",{children:"Stock movement history"}),n.jsx("li",{children:"Reorder recommendations"})]})]})]})}),n.jsx(Ha,{value:"prescriptions",className:"space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(hn,{className:"w-5 h-5 text-primary"}),"Prescription Report by Doctors"]})}),n.jsxs("div",{className:"p-6",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Prescription analytics by prescribing doctor."}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm",children:"This section will display:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm text-muted-foreground",children:[n.jsx("li",{children:"Total prescriptions by doctor"}),n.jsx("li",{children:"Most prescribed medications per doctor"}),n.jsx("li",{children:"Prescription trends over time"}),n.jsx("li",{children:"Controlled substances tracking"}),n.jsx("li",{children:"Prescription compliance rates"})]})]})]})]})})]})]})})};var Vj=1,cW=.9,dW=.8,uW=.17,b0=.1,w0=.999,hW=.9999,fW=.99,mW=/[\\\/_+.#"@\[\(\{&]/,pW=/[\\\/_+.#"@\[\(\{&]/g,gW=/[\s-]/,d8=/[\s-]/g;function ly(e,t,r,s,a,i,l){if(i===t.length)return a===e.length?Vj:fW;var o=`${a},${i}`;if(l[o]!==void 0)return l[o];for(var c=s.charAt(i),d=r.indexOf(c,a),u=0,m,x,f,y;d>=0;)m=ly(e,t,r,s,d+1,i+1,l),m>u&&(d===a?m*=Vj:mW.test(e.charAt(d-1))?(m*=dW,f=e.slice(a,d-1).match(pW),f&&a>0&&(m*=Math.pow(w0,f.length))):gW.test(e.charAt(d-1))?(m*=cW,y=e.slice(a,d-1).match(d8),y&&a>0&&(m*=Math.pow(w0,y.length))):(m*=uW,a>0&&(m*=Math.pow(w0,d-a))),e.charAt(d)!==t.charAt(i)&&(m*=hW)),(m<b0&&r.charAt(d-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&r.charAt(d-1)!==s.charAt(i))&&(x=ly(e,t,r,s,d+1,i+2,l),x*b0>m&&(m=x*b0)),m>u&&(u=m),d=r.indexOf(c,d+1);return l[o]=u,u}function Hj(e){return e.toLowerCase().replace(d8," ")}function xW(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ly(e,t,Hj(e),Hj(t),0,0,{})}var Uh='[cmdk-group=""]',N0='[cmdk-group-items=""]',vW='[cmdk-group-heading=""]',u8='[cmdk-item=""]',Wj=`${u8}:not([aria-disabled="true"])`,cy="cmdk-item-select",Fd="data-value",yW=(e,t,r)=>xW(e,t,r),h8=p.createContext(void 0),fm=()=>p.useContext(h8),f8=p.createContext(void 0),ub=()=>p.useContext(f8),m8=p.createContext(void 0),p8=p.forwardRef((e,t)=>{let r=Od(()=>{var C,F;return{search:"",value:(F=(C=e.value)!=null?C:e.defaultValue)!=null?F:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Od(()=>new Set),a=Od(()=>new Map),i=Od(()=>new Map),l=Od(()=>new Set),o=g8(e),{label:c,children:d,value:u,onValueChange:m,filter:x,shouldFilter:f,loop:y,disablePointerSelection:v=!1,vimBindings:S=!0,...b}=e,j=ms(),w=ms(),k=ms(),R=p.useRef(null),W=EW();id(()=>{if(u!==void 0){let C=u.trim();r.current.value=C,O.emit()}},[u]),id(()=>{W(6,ee)},[]);let O=p.useMemo(()=>({subscribe:C=>(l.current.add(C),()=>l.current.delete(C)),snapshot:()=>r.current,setState:(C,F,L)=>{var $,K,I,X;if(!Object.is(r.current[C],F)){if(r.current[C]=F,C==="search")M(),J(),W(1,A);else if(C==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ne=document.getElementById(k);ne?ne.focus():($=document.getElementById(j))==null||$.focus()}if(W(7,()=>{var ne;r.current.selectedItemId=(ne=E())==null?void 0:ne.id,O.emit()}),L||W(5,ee),((K=o.current)==null?void 0:K.value)!==void 0){let ne=F??"";(X=(I=o.current).onValueChange)==null||X.call(I,ne);return}}O.emit()}},emit:()=>{l.current.forEach(C=>C())}}),[]),q=p.useMemo(()=>({value:(C,F,L)=>{var $;F!==(($=i.current.get(C))==null?void 0:$.value)&&(i.current.set(C,{value:F,keywords:L}),r.current.filtered.items.set(C,D(F,L)),W(2,()=>{J(),O.emit()}))},item:(C,F)=>(s.current.add(C),F&&(a.current.has(F)?a.current.get(F).add(C):a.current.set(F,new Set([C]))),W(3,()=>{M(),J(),r.current.value||A(),O.emit()}),()=>{i.current.delete(C),s.current.delete(C),r.current.filtered.items.delete(C);let L=E();W(4,()=>{M(),(L==null?void 0:L.getAttribute("id"))===C&&A(),O.emit()})}),group:C=>(a.current.has(C)||a.current.set(C,new Set),()=>{i.current.delete(C),a.current.delete(C)}),filter:()=>o.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:j,inputId:k,labelId:w,listInnerRef:R}),[]);function D(C,F){var L,$;let K=($=(L=o.current)==null?void 0:L.filter)!=null?$:yW;return C?K(C,r.current.search,F):0}function J(){if(!r.current.search||o.current.shouldFilter===!1)return;let C=r.current.filtered.items,F=[];r.current.filtered.groups.forEach($=>{let K=a.current.get($),I=0;K.forEach(X=>{let ne=C.get(X);I=Math.max(ne,I)}),F.push([$,I])});let L=R.current;ae().sort(($,K)=>{var I,X;let ne=$.getAttribute("id"),ue=K.getAttribute("id");return((I=C.get(ue))!=null?I:0)-((X=C.get(ne))!=null?X:0)}).forEach($=>{let K=$.closest(N0);K?K.appendChild($.parentElement===K?$:$.closest(`${N0} > *`)):L.appendChild($.parentElement===L?$:$.closest(`${N0} > *`))}),F.sort(($,K)=>K[1]-$[1]).forEach($=>{var K;let I=(K=R.current)==null?void 0:K.querySelector(`${Uh}[${Fd}="${encodeURIComponent($[0])}"]`);I==null||I.parentElement.appendChild(I)})}function A(){let C=ae().find(L=>L.getAttribute("aria-disabled")!=="true"),F=C==null?void 0:C.getAttribute(Fd);O.setState("value",F||void 0)}function M(){var C,F,L,$;if(!r.current.search||o.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let K=0;for(let I of s.current){let X=(F=(C=i.current.get(I))==null?void 0:C.value)!=null?F:"",ne=($=(L=i.current.get(I))==null?void 0:L.keywords)!=null?$:[],ue=D(X,ne);r.current.filtered.items.set(I,ue),ue>0&&K++}for(let[I,X]of a.current)for(let ne of X)if(r.current.filtered.items.get(ne)>0){r.current.filtered.groups.add(I);break}r.current.filtered.count=K}function ee(){var C,F,L;let $=E();$&&(((C=$.parentElement)==null?void 0:C.firstChild)===$&&((L=(F=$.closest(Uh))==null?void 0:F.querySelector(vW))==null||L.scrollIntoView({block:"nearest"})),$.scrollIntoView({block:"nearest"}))}function E(){var C;return(C=R.current)==null?void 0:C.querySelector(`${u8}[aria-selected="true"]`)}function ae(){var C;return Array.from(((C=R.current)==null?void 0:C.querySelectorAll(Wj))||[])}function Y(C){let F=ae()[C];F&&O.setState("value",F.getAttribute(Fd))}function de(C){var F;let L=E(),$=ae(),K=$.findIndex(X=>X===L),I=$[K+C];(F=o.current)!=null&&F.loop&&(I=K+C<0?$[$.length-1]:K+C===$.length?$[0]:$[K+C]),I&&O.setState("value",I.getAttribute(Fd))}function T(C){let F=E(),L=F==null?void 0:F.closest(Uh),$;for(;L&&!$;)L=C>0?PW(L,Uh):AW(L,Uh),$=L==null?void 0:L.querySelector(Wj);$?O.setState("value",$.getAttribute(Fd)):de(C)}let V=()=>Y(ae().length-1),re=C=>{C.preventDefault(),C.metaKey?V():C.altKey?T(1):de(1)},he=C=>{C.preventDefault(),C.metaKey?Y(0):C.altKey?T(-1):de(-1)};return p.createElement(bt.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:C=>{var F;(F=b.onKeyDown)==null||F.call(b,C);let L=C.nativeEvent.isComposing||C.keyCode===229;if(!(C.defaultPrevented||L))switch(C.key){case"n":case"j":{S&&C.ctrlKey&&re(C);break}case"ArrowDown":{re(C);break}case"p":case"k":{S&&C.ctrlKey&&he(C);break}case"ArrowUp":{he(C);break}case"Home":{C.preventDefault(),Y(0);break}case"End":{C.preventDefault(),V();break}case"Enter":{C.preventDefault();let $=E();if($){let K=new Event(cy);$.dispatchEvent(K)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:q.inputId,id:q.labelId,style:TW},c),Dx(e,C=>p.createElement(f8.Provider,{value:O},p.createElement(h8.Provider,{value:q},C))))}),bW=p.forwardRef((e,t)=>{var r,s;let a=ms(),i=p.useRef(null),l=p.useContext(m8),o=fm(),c=g8(e),d=(s=(r=c.current)==null?void 0:r.forceMount)!=null?s:l==null?void 0:l.forceMount;id(()=>{if(!d)return o.item(a,l==null?void 0:l.id)},[d]);let u=x8(a,i,[e.value,e.children,i],e.keywords),m=ub(),x=Zl(W=>W.value&&W.value===u.current),f=Zl(W=>d||o.filter()===!1?!0:W.search?W.filtered.items.get(a)>0:!0);p.useEffect(()=>{let W=i.current;if(!(!W||e.disabled))return W.addEventListener(cy,y),()=>W.removeEventListener(cy,y)},[f,e.onSelect,e.disabled]);function y(){var W,O;v(),(O=(W=c.current).onSelect)==null||O.call(W,u.current)}function v(){m.setState("value",u.current,!0)}if(!f)return null;let{disabled:S,value:b,onSelect:j,forceMount:w,keywords:k,...R}=e;return p.createElement(bt.div,{ref:Fo(i,t),...R,id:a,"cmdk-item":"",role:"option","aria-disabled":!!S,"aria-selected":!!x,"data-disabled":!!S,"data-selected":!!x,onPointerMove:S||o.getDisablePointerSelection()?void 0:v,onClick:S?void 0:y},e.children)}),wW=p.forwardRef((e,t)=>{let{heading:r,children:s,forceMount:a,...i}=e,l=ms(),o=p.useRef(null),c=p.useRef(null),d=ms(),u=fm(),m=Zl(f=>a||u.filter()===!1?!0:f.search?f.filtered.groups.has(l):!0);id(()=>u.group(l),[]),x8(l,o,[e.value,e.heading,c]);let x=p.useMemo(()=>({id:l,forceMount:a}),[a]);return p.createElement(bt.div,{ref:Fo(o,t),...i,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),Dx(e,f=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},p.createElement(m8.Provider,{value:x},f))))}),NW=p.forwardRef((e,t)=>{let{alwaysRender:r,...s}=e,a=p.useRef(null),i=Zl(l=>!l.search);return!r&&!i?null:p.createElement(bt.div,{ref:Fo(a,t),...s,"cmdk-separator":"",role:"separator"})}),jW=p.forwardRef((e,t)=>{let{onValueChange:r,...s}=e,a=e.value!=null,i=ub(),l=Zl(d=>d.search),o=Zl(d=>d.selectedItemId),c=fm();return p.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),p.createElement(bt.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:a?e.value:l,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),SW=p.forwardRef((e,t)=>{let{children:r,label:s="Suggestions",...a}=e,i=p.useRef(null),l=p.useRef(null),o=Zl(d=>d.selectedItemId),c=fm();return p.useEffect(()=>{if(l.current&&i.current){let d=l.current,u=i.current,m,x=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let f=d.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return x.observe(d),()=>{cancelAnimationFrame(m),x.unobserve(d)}}},[]),p.createElement(bt.div,{ref:Fo(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":s,id:c.listId},Dx(e,d=>p.createElement("div",{ref:Fo(l,c.listInnerRef),"cmdk-list-sizer":""},d)))}),_W=p.forwardRef((e,t)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:i,container:l,...o}=e;return p.createElement(CP,{open:r,onOpenChange:s},p.createElement(kP,{container:l},p.createElement(R2,{"cmdk-overlay":"",className:a}),p.createElement(I2,{"aria-label":e.label,"cmdk-dialog":"",className:i},p.createElement(p8,{ref:t,...o}))))}),CW=p.forwardRef((e,t)=>Zl(r=>r.filtered.count===0)?p.createElement(bt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),kW=p.forwardRef((e,t)=>{let{progress:r,children:s,label:a="Loading...",...i}=e;return p.createElement(bt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Dx(e,l=>p.createElement("div",{"aria-hidden":!0},l)))}),sa=Object.assign(p8,{List:SW,Item:bW,Input:jW,Group:wW,Separator:NW,Dialog:_W,Empty:CW,Loading:kW});function PW(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function AW(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function g8(e){let t=p.useRef(e);return id(()=>{t.current=e}),t}var id=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Od(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Zl(e){let t=ub(),r=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,r,r)}function x8(e,t,r,s=[]){let a=p.useRef(),i=fm();return id(()=>{var l;let o=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=s.map(d=>d.trim());i.value(e,o,c),(l=t.current)==null||l.setAttribute(Fd,o),a.current=o}),a}var EW=()=>{let[e,t]=p.useState(),r=Od(()=>new Map);return id(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,a)=>{r.current.set(s,a),t({})}};function LW(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Dx({asChild:e,children:t},r){return e&&p.isValidElement(t)?p.cloneElement(LW(t),{ref:t.ref},r(t.props.children)):r(t)}var TW={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const v8=p.forwardRef(({className:e,...t},r)=>n.jsx(sa,{ref:r,className:ht("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));v8.displayName=sa.displayName;const y8=p.forwardRef(({className:e,...t},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(In,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(sa.Input,{ref:r,className:ht("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));y8.displayName=sa.Input.displayName;const DW=p.forwardRef(({className:e,...t},r)=>n.jsx(sa.List,{ref:r,className:ht("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));DW.displayName=sa.List.displayName;const b8=p.forwardRef((e,t)=>n.jsx(sa.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));b8.displayName=sa.Empty.displayName;const w8=p.forwardRef(({className:e,...t},r)=>n.jsx(sa.Group,{ref:r,className:ht("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));w8.displayName=sa.Group.displayName;const RW=p.forwardRef(({className:e,...t},r)=>n.jsx(sa.Separator,{ref:r,className:ht("-mx-1 h-px bg-border",e),...t}));RW.displayName=sa.Separator.displayName;const N8=p.forwardRef(({className:e,...t},r)=>n.jsx(sa.Item,{ref:r,className:ht("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));N8.displayName=sa.Item.displayName;var Rx="Popover",[j8,F3]=Ea(Rx,[ic]),mm=ic(),[IW,cc]=j8(Rx),S8=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!1}=e,o=mm(t),c=p.useRef(null),[d,u]=p.useState(!1),[m,x]=Oo({prop:s,defaultProp:a??!1,onChange:i,caller:Rx});return n.jsx(k2,{...o,children:n.jsx(IW,{scope:t,contentId:ms(),triggerRef:c,open:m,onOpenChange:x,onOpenToggle:p.useCallback(()=>x(f=>!f),[x]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:l,children:r})})};S8.displayName=Rx;var _8="PopoverAnchor",MW=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=cc(_8,r),i=mm(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return p.useEffect(()=>(l(),()=>o()),[l,o]),n.jsx(rm,{...i,...s,ref:t})});MW.displayName=_8;var C8="PopoverTrigger",k8=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=cc(C8,r),i=mm(r),l=or(t,a.triggerRef),o=n.jsx(bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":T8(a.open),...s,ref:l,onClick:Je(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:n.jsx(rm,{asChild:!0,...i,children:o})});k8.displayName=C8;var hb="PopoverPortal",[FW,OW]=j8(hb,{forceMount:void 0}),P8=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,i=cc(hb,t);return n.jsx(FW,{scope:t,forceMount:r,children:n.jsx(ss,{present:r||i.open,children:n.jsx(Hu,{asChild:!0,container:a,children:s})})})};P8.displayName=hb;var Ou="PopoverContent",A8=p.forwardRef((e,t)=>{const r=OW(Ou,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,i=cc(Ou,e.__scopePopover);return n.jsx(ss,{present:s||i.open,children:i.modal?n.jsx(UW,{...a,ref:t}):n.jsx($W,{...a,ref:t})})});A8.displayName=Ou;var BW=Yl("PopoverContent.RemoveScroll"),UW=p.forwardRef((e,t)=>{const r=cc(Ou,e.__scopePopover),s=p.useRef(null),a=or(t,s),i=p.useRef(!1);return p.useEffect(()=>{const l=s.current;if(l)return mx(l)},[]),n.jsx(sm,{as:BW,allowPinchZoom:!0,children:n.jsx(E8,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(e.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Je(e.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Je(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),$W=p.forwardRef((e,t)=>{const r=cc(Ou,e.__scopePopover),s=p.useRef(!1),a=p.useRef(!1);return n.jsx(E8,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(s.current||(o=r.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),E8=p.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,x=cc(Ou,r),f=mm(r);return hx(),n.jsx(nm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(dd,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>x.onOpenChange(!1),children:n.jsx(ax,{"data-state":T8(x.open),role:"dialog",id:x.contentId,...f,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),L8="PopoverClose",zW=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=cc(L8,r);return n.jsx(bt.button,{type:"button",...s,ref:t,onClick:Je(e.onClick,()=>a.onOpenChange(!1))})});zW.displayName=L8;var qW="PopoverArrow",VW=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=mm(r);return n.jsx(ix,{...a,...s,ref:t})});VW.displayName=qW;function T8(e){return e?"open":"closed"}var HW=S8,WW=k8,GW=P8,D8=A8;const YW=HW,KW=WW,R8=p.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(GW,{children:n.jsx(D8,{ref:a,align:t,sideOffset:r,className:ht("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));R8.displayName=D8.displayName;const QW=["Hematology","Chemistry","Microbiology","Urinalysis","Serology","Parasitology","Other"],XW=()=>{var L;const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(!1),[o,c]=p.useState(null),[d,u]=p.useState(""),[m,x]=p.useState(""),[f,y]=p.useState(""),[v,S]=p.useState(""),[b,j]=p.useState(""),[w,k]=p.useState(""),[R,W]=p.useState([]),[O,q]=p.useState(!1),[D,J]=p.useState([{name:"",unit:"",normalRangeMin:void 0,normalRangeMax:void 0,normalRangeText:""}]);p.useEffect(()=>{A(),M()},[e==null?void 0:e.clinic]);const A=async()=>{if(e!=null&&e.clinic)try{const $=await fetch("/api/lab-tests",{credentials:"include"});if(!$.ok){const ne=await $.text();throw console.error("API response error:",ne),new Error(`Failed to fetch lab tests: ${$.status}`)}const K=$.headers.get("content-type");if(!K||!K.includes("application/json")){const ne=await $.text();throw console.error("Non-JSON response received:",ne),new Error("Server returned non-JSON response")}const I=await $.json(),X=Array.isArray(I)?I.map(ne=>({id:ne.id,testName:ne.test_name||ne.testName,testCode:ne.test_code||ne.testCode,category:ne.category,components:ne.components||[],clinic:ne.clinic_id||ne.clinic,createdBy:ne.created_by||ne.createdBy,createdAt:ne.createdAt,updatedAt:ne.updatedAt})):[];r(X)}catch($){console.error("Error fetching tests:",$),ye.error("Failed to fetch lab tests")}finally{a(!1)}},M=async()=>{if(e!=null&&e.clinic)try{const $=await fetch("/api/clinical/services/"+e.clinic,{credentials:"include"});if(!$.ok)throw new Error("Failed to fetch services");const K=await $.json();W(K)}catch($){console.error("Error fetching services:",$)}},ee=()=>{x(""),y(""),S(""),j(""),k(""),J([{name:"",unit:"",normalRangeMin:void 0,normalRangeMax:void 0,normalRangeText:""}]),c(null)},E=$=>{var K,I;c($),x($.testName),y($.testCode),S($.category),j(((K=$.service_id)==null?void 0:K.toString())||""),k(((I=$.price)==null?void 0:I.toString())||""),J($.components.length>0?$.components:[{name:"",unit:"",normalRangeMin:void 0,normalRangeMax:void 0,normalRangeText:""}]),l(!0)},ae=$=>{j($);const K=R.find(I=>I.id.toString()===$);K&&k(K.price.toString()),q(!1)},Y=()=>{J([...D,{name:"",unit:"",normalRangeMin:void 0,normalRangeMax:void 0,normalRangeText:""}])},de=$=>{D.length>1&&J(D.filter((K,I)=>I!==$))},T=($,K,I)=>{const X=[...D];X[$]={...X[$],[K]:I},J(X)},V=async $=>{if($.preventDefault(),!m||!f||!v){ye.error("Please fill in all required fields");return}const K=D.filter(I=>I.name&&I.name.trim()!=="");if(K.length===0){ye.error("Please add at least one component");return}try{const I={test_name:m,test_code:f.toUpperCase(),category:v,clinic_id:e==null?void 0:e.clinic,price:parseFloat(w)||0,service_id:b?parseInt(b):null,...o?{}:{created_by:e==null?void 0:e.displayName}},X=o?`/api/lab-tests/${o.id}/with-components`:"/api/lab-tests/with-components",ne=o?"PUT":"POST",ue=K.map(Re=>({component_name:Re.name||"",unit:Re.unit||"",reference_range:Re.normalRangeText||(Re.normalRangeMin!==void 0&&Re.normalRangeMax!==void 0?`${Re.normalRangeMin}-${Re.normalRangeMax}`:""),sort_order:0})).filter(Re=>Re.component_name.trim()!==""),xe=o?{test:{test_name:m,test_code:f.toUpperCase(),category:v,price:parseFloat(w)||0,service_id:b?parseInt(b):null},components:ue}:{test:I,components:ue};console.log("Request body:",JSON.stringify(xe,null,2));const ke=await fetch(X,{method:ne,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(xe)});if(!ke.ok){const Re=await ke.text();console.error("Save error response:",Re);let We="Failed to save lab test";try{const Z=JSON.parse(Re);We=Z.message||Z.error||We}catch{}throw new Error(We)}ye.success(o?"Lab test updated successfully":"Lab test added successfully"),ee(),l(!1),A()}catch(I){console.error("Error saving test:",I),ye.error(`Failed to save lab test: ${I.message}`)}},re=async $=>{if(confirm("Are you sure you want to delete this test?"))try{const K=await fetch(`/api/lab-tests/${$}/with-components`,{method:"DELETE",credentials:"include"});if(!K.ok){const I=await K.text();console.error("Delete error response:",I);let X="Failed to delete lab test";try{const ne=JSON.parse(I);X=ne.message||ne.error||X}catch{}throw new Error(X)}ye.success("Lab test deleted"),A()}catch(K){console.error("Error deleting test:",K),ye.error(`Failed to delete lab test: ${K.message}`)}},he=async()=>{if(!(e!=null&&e.clinic)){ye.error("User clinic not found");return}try{const $=await fetch("/api/lab-tests/seed",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({clinic_id:e.clinic})});if(!$.ok){const I=await $.text();console.error("Seed error response:",I);let X="Failed to seed lab tests";try{const ne=JSON.parse(I);X=ne.message||ne.error||X}catch{}throw new Error(X)}const K=await $.json();ye.success(`Successfully seeded ${K.count||"sample"} lab tests`),A()}catch($){console.error("Error seeding lab tests:",$),ye.error(`Failed to seed lab tests: ${$.message}`)}},C=t.filter($=>d===""||$.testName.toLowerCase().includes(d.toLowerCase())||$.testCode.toLowerCase().includes(d.toLowerCase())||$.category.toLowerCase().includes(d.toLowerCase())),F=()=>{const I=[["Test Code","Test Name","Category","Components Count"],...C.map(xe=>[xe.testCode,xe.testName,xe.category,xe.components.length.toString()])].map(xe=>xe.map(ke=>`"${ke}"`).join(",")).join(`
`),X=new Blob([I],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),ue=URL.createObjectURL(X);ne.setAttribute("href",ue),ne.setAttribute("download",`lab_tests_${new Date().toISOString().split("T")[0]}.csv`),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),ye.success(`Exported ${C.length} lab tests to CSV`)};return n.jsx(Xn,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Lab Tests Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Configure laboratory tests with components and normal ranges"})]})}),n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search tests by name, code, or category...",value:d,onChange:$=>u($.target.value),className:"pl-10 h-9"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_e,{variant:"outline",onClick:F,disabled:C.length===0,className:"h-9",children:[n.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),n.jsxs(_e,{onClick:he,variant:"outline",className:"h-9",children:[n.jsx(EI,{className:"w-4 h-4 mr-2"}),"Seed Lab Tests"]}),n.jsxs(wr,{open:i,onOpenChange:$=>{l($),$||ee()},children:[n.jsx(I1,{asChild:!0,children:n.jsxs(_e,{className:"h-9",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add Lab Test"]})}),n.jsxs(xr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Nr,{children:n.jsx(vr,{children:o?"Edit Lab Test":"Add New Lab Test"})}),n.jsxs("form",{onSubmit:V,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"testName",children:"Test Name *"}),n.jsx(Oe,{id:"testName",value:m,onChange:$=>x($.target.value),placeholder:"e.g., Complete Blood Count"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"testCode",children:"Test Code *"}),n.jsx(Oe,{id:"testCode",value:f,onChange:$=>y($.target.value.toUpperCase()),placeholder:"e.g., CBC"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"category",children:"Category *"}),n.jsxs(Mn,{value:v,onValueChange:S,children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select category"})}),n.jsx(Sn,{children:QW.map($=>n.jsx(ot,{value:$,children:$},$))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"service",children:"Service"}),n.jsxs(YW,{open:O,onOpenChange:q,children:[n.jsx(KW,{asChild:!0,children:n.jsxs(_e,{variant:"outline",role:"combobox","aria-expanded":O,className:"w-full justify-between",children:[b?(L=R.find($=>$.id.toString()===b))==null?void 0:L.service_name:"Select service (optional)...",n.jsx(kI,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),n.jsx(R8,{className:"w-[--radix-popover-trigger-width] max-w-none p-0",children:n.jsxs(v8,{children:[n.jsx(y8,{placeholder:"Search services..."}),n.jsx(b8,{children:"No service found."}),n.jsx(w8,{className:"max-h-64 overflow-auto",children:R.map($=>n.jsxs(N8,{value:$.service_name,onSelect:()=>ae($.id.toString()),children:[n.jsx(ra,{className:ht("mr-2 h-4 w-4",b===$.id.toString()?"opacity-100":"opacity-0")}),$.service_name]},$.id))})]})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"price",children:"Price"}),n.jsx(Oe,{id:"price",type:"number",step:"0.01",min:"0",value:w,onChange:$=>k($.target.value),placeholder:"0.00"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ce,{className:"text-base font-semibold",children:"Test Components / Parameters"}),n.jsxs(_e,{type:"button",variant:"outline",size:"sm",onClick:Y,children:[n.jsx(kr,{className:"w-4 h-4 mr-1"}),"Add Component"]})]}),n.jsx("div",{className:"space-y-3",children:D.map(($,K)=>n.jsx(Ur,{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx(Ce,{className:"text-xs",children:"Component Name *"}),n.jsx(Oe,{value:$.name,onChange:I=>T(K,"name",I.target.value),placeholder:"e.g., Hemoglobin"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ce,{className:"text-xs",children:"Unit"}),n.jsx(Oe,{value:$.unit,onChange:I=>T(K,"unit",I.target.value),placeholder:"e.g., g/dL"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ce,{className:"text-xs",children:"Min Range"}),n.jsx(Oe,{type:"number",step:"0.01",value:$.normalRangeMin??"",onChange:I=>T(K,"normalRangeMin",I.target.value?parseFloat(I.target.value):void 0),placeholder:"Min"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ce,{className:"text-xs",children:"Max Range"}),n.jsx(Oe,{type:"number",step:"0.01",value:$.normalRangeMax??"",onChange:I=>T(K,"normalRangeMax",I.target.value?parseFloat(I.target.value):void 0),placeholder:"Max"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx(Ce,{className:"text-xs",children:"Or Text Range"}),n.jsx(Oe,{value:$.normalRangeText??"",onChange:I=>T(K,"normalRangeText",I.target.value),placeholder:"e.g., Negative"})]}),D.length>1&&n.jsx(_e,{type:"button",variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>de(K),children:n.jsx(Nn,{className:"w-4 h-4"})})]})]})},K))})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>{l(!1),ee()},children:"Cancel"}),n.jsx(_e,{type:"submit",children:o?"Update Test":"Save Test"})]})]})]})]})]})]}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm",children:s?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading lab tests..."})]}):C.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"mb-4",children:n.jsx(g2,{className:"w-8 h-8 text-muted-foreground mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:d?"No lab tests found":"No lab tests available"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:d?"Try adjusting your search terms or clear the search to see all tests.":"Get started by adding your first lab test."}),!d&&n.jsxs(_e,{onClick:()=>l(!0),className:"mt-2",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add First Lab Test"]})]}):n.jsx("div",{className:"overflow-x-auto max-h-[480px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Test Code"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Test Name"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Category"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Components"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:C.map($=>n.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-mono font-semibold text-primary text-sm",children:$.testCode})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-semibold text-foreground text-sm",children:$.testName})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:$.category})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[$.components.length," component",$.components.length!==1?"s":"",$.components.length>0&&n.jsx("div",{className:"text-xs mt-1 max-w-xs truncate",children:$.components.map(K=>K.name).join(", ")})]})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("div",{className:"flex justify-end gap-1",children:[n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>E($),className:"h-8 w-8 p-0",children:n.jsx(ji,{className:"w-4 h-4"})}),n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>re($.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:n.jsx(Lu,{className:"w-4 h-4"})})]})})]},$.id))})]})})})]})})};class JW{constructor(){ar(this,"baseUrl","/api/clinical")}async getServices(t){try{const r=await fetch(`${this.baseUrl}/services/${t}`);if(!r.ok)throw new Error("Failed to fetch services");return await r.json()}catch(r){throw console.error("Error fetching services:",r),r}}async createService(t){try{const r=await fetch(`${this.baseUrl}/services`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create service");return await r.json()}catch(r){throw console.error("Error creating service:",r),r}}async updateService(t,r){try{const s=await fetch(`${this.baseUrl}/services/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error("Failed to update service");return await s.json()}catch(s){throw console.error("Error updating service:",s),s}}async deleteService(t){try{if(!(await fetch(`${this.baseUrl}/services/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete service")}catch(r){throw console.error("Error deleting service:",r),r}}}const $h=new JW,dy=["Consultation","Procedure","Surgery","Diagnostic","Therapy","Emergency","Other"],ZW=e=>{const t=e.toLowerCase().trim(),r=dy.find(s=>s.toLowerCase()===t);return r||(t.includes("consult")?"Consultation":t.includes("surgery")||t.includes("surgical")||t.includes("operation")?"Surgery":t.includes("procedure")||t.includes("treatment")||t.includes("ward")||t.includes("room")||t.includes("bed")||t.includes("admission")||t.includes("stitch")||t.includes("dress")||t.includes("wound")?"Procedure":t.includes("diagnostic")||t.includes("test")||t.includes("scan")||t.includes("imaging")||t.includes("x-ray")||t.includes("ultrasound")||t.includes("lab")||t.includes("blood")?"Diagnostic":t.includes("therapy")||t.includes("rehab")||t.includes("physiotherapy")||t.includes("counseling")?"Therapy":t.includes("emergency")||t.includes("urgent")||t.includes("er")||t.includes("trauma")?"Emergency":"Other")},e3=["General Medicine","Pediatrics","Surgery","Obstetrics & Gynecology","Orthopedics","Cardiology","Dermatology","Psychiatry","Radiology","Laboratory","Emergency","Other"],t3=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(!1),[o,c]=p.useState(null),[d,u]=p.useState(""),[m,x]=p.useState(!1),[f,y]=p.useState(null),[v,S]=p.useState(!1),[b,j]=p.useState(""),[w,k]=p.useState(""),[R,W]=p.useState(""),[O,q]=p.useState("");p.useEffect(()=>{D()},[e==null?void 0:e.clinic]);const D=async()=>{if(e!=null&&e.clinic)try{a(!0);const re=await $h.getServices(e.clinic);r(re)}catch(re){console.error("Error fetching services:",re),ye.error("Failed to fetch services")}finally{a(!1)}},J=()=>{j(""),k(""),W(""),q(""),c(null)},A=async re=>{if(re.preventDefault(),!b.trim()||!w||!O){ye.error("Please fill in all required fields");return}const he=parseFloat(O);if(isNaN(he)||he<0){ye.error("Please enter a valid price");return}try{const C={service_name:b.trim(),category:w,description:R,price:he,created_by:(e==null?void 0:e.displayName)||"Unknown"};o?(await $h.updateService(o.id,{...C,updated_by:(e==null?void 0:e.displayName)||"Unknown"}),ye.success("Service updated successfully")):(await $h.createService(C),ye.success("Service created successfully")),l(!1),J(),D()}catch(C){console.error("Error saving service:",C),ye.error("Failed to save service")}},M=re=>{c(re),j(re.service_name),k(re.category),W(re.description||""),q(re.price.toString()),l(!0)},ee=async re=>{if(confirm("Are you sure you want to delete this service?"))try{await $h.deleteService(re),ye.success("Service deleted successfully"),D()}catch(he){console.error("Error deleting service:",he),ye.error("Failed to delete service")}},E=()=>{l(!1),J()},ae=t.filter(re=>d===""||re.service_name.toLowerCase().includes(d.toLowerCase())||re.category.toLowerCase().includes(d.toLowerCase())||(re.description||"").toLowerCase().includes(d.toLowerCase())),Y=()=>{const C=[["Service Name","Category","Description","Price"],...ae.map(K=>[K.service_name,K.category,K.description||"",`$${parseFloat(K.price.toString()).toFixed(2)}`])].map(K=>K.map(I=>`"${I}"`).join(",")).join(`
`),F=new Blob([C],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),$=URL.createObjectURL(F);L.setAttribute("href",$),L.setAttribute("download",`services_${new Date().toISOString().split("T")[0]}.csv`),L.style.visibility="hidden",document.body.appendChild(L),L.click(),document.body.removeChild(L),ye.success(`Exported ${ae.length} services to CSV`)},de=()=>{const F=[["Service Name","Category","Department","Price"],...[["General Consultation","Consultation","General Medicine","50.00"],["Blood Test - CBC","Diagnostic","Laboratory","25.00"],["X-Ray Chest","Diagnostic","Radiology","80.00"]]].map(I=>I.map(X=>`"${X}"`).join(",")).join(`
`),L=new Blob([F],{type:"text/csv;charset=utf-8;"}),$=document.createElement("a"),K=URL.createObjectURL(L);$.setAttribute("href",K),$.setAttribute("download","services_template.csv"),$.style.visibility="hidden",document.body.appendChild($),$.click(),document.body.removeChild($),ye.success("Template downloaded successfully")},T=re=>{var C;const he=(C=re.target.files)==null?void 0:C[0];he&&he.type==="text/csv"?y(he):(ye.error("Please select a valid CSV file"),re.target.value="")},V=async()=>{if(!(!f||!(e!=null&&e.clinic))){S(!0);try{const he=(await f.text()).split(`
`).filter(K=>K.trim());if(he.length<2){ye.error("CSV file must contain at least a header row and one data row");return}const C=he.slice(1),F=[],L=[];for(let K=0;K<C.length;K++){const I=C[K].trim();if(!I)continue;const X=I.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g);if(!X||X.length<4){L.push(`Row ${K+2}: Missing required columns (skipped)`);continue}const ne=X[0].replace(/"/g,"").trim(),ue=X[1].replace(/"/g,"").trim(),xe=X[2].replace(/"/g,"").trim(),ke=X[3].replace(/"/g,"").trim(),Re=ke?parseFloat(ke.replace(/,/g,"")):0;if(!ne||!ue||isNaN(Re)||Re<0){L.push(`Row ${K+2}: Invalid data (skipped)`);continue}const We=ZW(ue);F.push({service_name:ne,category:We||ue,description:xe||"",price:Re,is_active:!0})}if(F.length===0){ye.error("Import failed - no valid services found. Check console for details."),console.error("Import errors:",L);return}L.length>0&&console.warn(`Import completed with ${L.length} rows skipped:`,L);let $=0;for(const K of F)try{await $h.createService(K),$++}catch(I){console.error("Error importing service:",K.service_name,I)}L.length>0?ye.success(`Successfully imported ${$} services (${L.length} rows skipped due to invalid data)`):ye.success(`Successfully imported ${$} services`),x(!1),y(null),D()}catch(re){console.error("Error importing CSV:",re),ye.error("Failed to import CSV file")}finally{S(!1)}}};return s?n.jsx(Xn,{children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]})})}):n.jsx(Xn,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Services Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage hospital services, categories, departments, and pricing"})]})}),n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search services by name, category, or department...",value:d,onChange:re=>u(re.target.value),className:"pl-10 h-9"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_e,{variant:"outline",onClick:Y,disabled:ae.length===0,className:"h-9",children:[n.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),n.jsxs(wr,{open:m,onOpenChange:x,children:[n.jsx(I1,{asChild:!0,children:n.jsxs(_e,{variant:"outline",className:"h-9",children:[n.jsx(iu,{className:"w-4 h-4 mr-2"}),"Import CSV"]})}),n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(iu,{className:"w-5 h-5"}),"Import Services from CSV"]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("p",{className:"mb-3",children:"Upload a CSV file to import multiple services at once."}),n.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[n.jsx("p",{className:"font-medium mb-2",children:"CSV Format Requirements:"}),n.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Header row: Service Name, Category, Department, Price"}),n.jsxs("li",{children:["Category must be one of: ",dy.join(", ")]}),n.jsxs("li",{children:["Department must be one of: ",e3.slice(0,3).join(", "),", etc."]}),n.jsx("li",{children:"Price must be a valid number (e.g., 50.00)"})]})]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(_e,{variant:"outline",onClick:de,className:"flex-1",children:[n.jsx(hn,{className:"w-4 h-4 mr-2"}),"Download Template"]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"csvFile",children:"Upload CSV File"}),n.jsx(Oe,{id:"csvFile",type:"file",accept:".csv",onChange:T,className:"cursor-pointer"}),f&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",f.name," (",(f.size/1024).toFixed(1)," KB)"]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:()=>{x(!1),y(null)},children:"Cancel"}),n.jsx(_e,{onClick:V,disabled:!f||v,children:v?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(iu,{className:"w-4 h-4 mr-2"}),"Import Services"]})})]})]})]})]}),n.jsxs(wr,{open:i,onOpenChange:l,children:[n.jsx(I1,{asChild:!0,children:n.jsxs(_e,{onClick:()=>l(!0),className:"h-9",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add Service"]})}),n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(C1,{className:"w-5 h-5"}),o?"Edit Service":"Add New Service"]})}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"serviceName",children:"Service Name *"}),n.jsx(Oe,{id:"serviceName",value:b,onChange:re=>j(re.target.value),placeholder:"e.g., General Consultation",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"category",children:"Category *"}),n.jsxs(Mn,{value:w,onValueChange:k,required:!0,children:[n.jsx(jn,{children:n.jsx(Fn,{placeholder:"Select category"})}),n.jsx(Sn,{children:dy.map(re=>n.jsx(ot,{value:re,children:re},re))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"description",children:"Description"}),n.jsx(Oe,{id:"description",type:"text",placeholder:"Service description (optional)",value:R,onChange:re=>W(re.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"price",children:"Price *"}),n.jsx(Oe,{id:"price",type:"number",step:"0.01",min:"0",value:O,onChange:re=>q(re.target.value),placeholder:"0.00",required:!0})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(_e,{type:"button",variant:"outline",onClick:E,children:"Cancel"}),n.jsx(_e,{type:"submit",children:o?"Update Service":"Create Service"})]})]})]})]})]})]}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm",children:s?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading services..."})]}):ae.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"mb-4",children:n.jsx(C1,{className:"w-8 h-8 text-muted-foreground mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:d?"No services found":"No services available"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:d?"Try adjusting your search terms or clear the search to see all services.":"Get started by adding your first service."}),!d&&n.jsxs(_e,{onClick:()=>l(!0),className:"mt-2",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add First Service"]})]}):n.jsx("div",{className:"overflow-x-auto max-h-[480px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Service Name"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Category"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Description"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Price"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:ae.map(re=>n.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-semibold text-foreground text-sm",children:re.service_name})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:re.category})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:re.description||"No description"})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:"font-mono font-semibold text-primary text-sm",children:["$",parseFloat(re.price.toString()).toFixed(2)]})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("div",{className:"flex justify-end gap-1",children:[n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>M(re),className:"h-8 w-8 p-0",children:n.jsx(ji,{className:"w-4 h-4"})}),n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>ee(re.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:n.jsx(Lu,{className:"w-4 h-4"})})]})})]},re.id))})]})})})]})})};class r3{constructor(){ar(this,"baseUrl","/api/clinics")}async getAll(){try{const t=await fetch(`${this.baseUrl}?noFallback=true`);if(!t.ok)throw new Error("Failed to fetch clinics");return await t.json()}catch(t){throw console.error("Error fetching clinics:",t),t}}async create(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create clinic");return await r.json()}catch(r){throw console.error("Error creating clinic:",r),r}}async update(t,r){try{const s=await fetch(`${this.baseUrl}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error("Failed to update clinic");return await s.json()}catch(s){throw console.error("Error updating clinic:",s),s}}async delete(t){try{if(!(await fetch(`${this.baseUrl}/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete clinic")}catch(r){throw console.error("Error deleting clinic:",r),r}}}class n3{constructor(){ar(this,"baseUrl","/api/services")}async getAll(){try{const t=await fetch(this.baseUrl);if(!t.ok)throw new Error("Failed to fetch services");return(await t.json()).map(s=>({id:s.id,name:s.name||s.service_name,category:s.category}))}catch(t){throw console.error("Error fetching services:",t),t}}}const s3=()=>{qn();const e=new r3,t=new n3,[r,s]=p.useState([]),[a,i]=p.useState([]),[l,o]=p.useState(!0),[c,d]=p.useState(""),[u,m]=p.useState(!1),[x,f]=p.useState(null),[y,v]=p.useState(!1),[S,b]=p.useState("table"),[j,w]=p.useState({name:"",description:"",department:"",service:"",isActive:!0}),k=["General Medicine","Gynecology","Pediatric","Cardiology","Orthopedic","Dermatology","Ophthalmology","ENT (Ear, Nose, Throat)","Psychiatry","Neurology","Emergency","Dental","Laboratory","Pharmacy","Radiology"];p.useEffect(()=>{R(),W()},[]);const R=async()=>{try{o(!0);const A=await e.getAll();s(A)}catch(A){console.error("Error fetching clinics:",A),ye.error("Failed to fetch clinics")}finally{o(!1)}},W=async()=>{try{const A=await t.getAll();i(A)}catch(A){console.error("Error fetching services:",A),ye.error("Failed to fetch services")}},O=async A=>{var M;if(A.preventDefault(),!j.name.trim()||!j.department){ye.error("Please fill in all required fields");return}v(!0);try{const ee={name:j.name.trim(),description:((M=j.description)==null?void 0:M.trim())||"",department:j.department,service:j.service,is_active:j.isActive};x?(await e.update(x.id,ee),ye.success("Clinic updated successfully")):(await e.create(ee),ye.success("Clinic created successfully")),m(!1),f(null),w({name:"",description:"",department:"",service:"",isActive:!0}),R()}catch(ee){console.error("Error saving clinic:",ee),ye.error("Failed to save clinic")}finally{v(!1)}},q=A=>{f(A),w({name:A.name,description:A.description,department:A.department,service:A.service||"",isActive:A.isActive}),m(!0)},D=async A=>{if(confirm(`Are you sure you want to delete "${A.name}"?`))try{await e.delete(A.id),ye.success("Clinic deleted successfully"),R()}catch(M){console.error("Error deleting clinic:",M),ye.error("Failed to delete clinic")}},J=r.filter(A=>A.name.toLowerCase().includes(c.toLowerCase())||A.department.toLowerCase().includes(c.toLowerCase()));return n.jsx(Xn,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Clinics Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage hospital clinics and their associated services"})]})}),n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search clinics by name or department...",value:c,onChange:A=>d(A.target.value),className:"pl-10 h-9"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex items-center border rounded-lg",children:[n.jsx(_e,{variant:S==="table"?"default":"ghost",size:"sm",onClick:()=>b("table"),className:"rounded-r-none h-9",children:n.jsx(RI,{className:"w-4 h-4"})}),n.jsx(_e,{variant:S==="cards"?"default":"ghost",size:"sm",onClick:()=>b("cards"),className:"rounded-l-none h-9",children:n.jsx(TI,{className:"w-4 h-4"})})]}),n.jsxs(_e,{onClick:()=>m(!0),className:"h-9",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add Clinic"]})]})]}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden shadow-sm",children:l?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading clinics..."})]}):J.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"mb-4",children:n.jsx(Pv,{className:"w-8 h-8 text-muted-foreground mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:c?"No clinics found":"No clinics available"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:c?"Try adjusting your search terms or clear the search to see all clinics.":"Get started by adding your first clinic."}),!c&&n.jsxs(_e,{onClick:()=>m(!0),className:"mt-2",children:[n.jsx(kr,{className:"w-4 h-4 mr-2"}),"Add First Clinic"]})]}):S==="table"?n.jsx("div",{className:"overflow-x-auto max-h-[480px] overflow-y-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-background border-b border-border sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Clinic Name"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Department"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Description"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Services"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm text-foreground",children:"Status"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-sm text-foreground",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-border",children:J.map(A=>n.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-semibold text-foreground text-sm flex items-center gap-2",children:[n.jsx(Pv,{className:"w-4 h-4 text-primary"}),A.name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:A.department})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:A.description||"No description"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"flex flex-wrap gap-1 max-w-xs",children:A.service?(()=>{const M=a.find(ee=>ee.id===A.service);return M?n.jsx(lr,{variant:"outline",className:"text-xs",children:M.name}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"Unknown"})})():n.jsx("span",{className:"text-sm text-muted-foreground",children:"None"})})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(lr,{variant:A.isActive?"default":"secondary",children:A.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("div",{className:"flex justify-end gap-1",children:[n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>q(A),className:"h-8 w-8 p-0",children:n.jsx(ji,{className:"w-4 h-4"})}),n.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>D(A),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:n.jsx(Lu,{className:"w-4 h-4"})})]})})]},A.id))})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(A=>n.jsxs(Ur,{className:"hover:shadow-md transition-shadow",children:[n.jsxs(en,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Pv,{className:"w-5 h-5 text-primary"}),n.jsx(tn,{className:"text-lg",children:A.name})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_e,{size:"sm",variant:"outline",onClick:()=>q(A),className:"h-8 w-8 p-0",children:n.jsx(ji,{className:"w-3 h-3"})}),n.jsx(_e,{size:"sm",variant:"outline",onClick:()=>D(A),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:n.jsx(Lu,{className:"w-3 h-3"})})]})]}),n.jsx($l,{className:"text-sm",children:A.department})]}),n.jsxs(Gr,{className:"space-y-3",children:[A.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:A.description}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Status"}),n.jsx(lr,{variant:A.isActive?"default":"secondary",children:A.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("span",{className:"text-sm font-medium",children:"Service"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:A.service?(()=>{const M=a.find(ee=>ee.id===A.service);return M?n.jsx(lr,{variant:"outline",className:"text-xs",children:M.name}):n.jsx("span",{className:"text-xs text-muted-foreground",children:"Unknown"})})():n.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})})]})]})]})]},A.id))})}),n.jsx(wr,{open:u,onOpenChange:m,children:n.jsxs(xr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(qa,{className:"w-5 h-5"}),x?"Edit Clinic":"Add New Clinic"]})}),n.jsxs("form",{onSubmit:O,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"name",children:"Clinic Name *"}),n.jsx(Oe,{id:"name",value:j.name,onChange:A=>w({...j,name:A.target.value}),placeholder:"e.g., Cardiology Clinic",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"department",children:"Department *"}),n.jsxs("select",{id:"department",value:j.department,onChange:A=>w({...j,department:A.target.value}),className:"w-full h-10 px-3 py-2 border border-input bg-background rounded-md text-sm",required:!0,children:[n.jsx("option",{value:"",children:"Select department..."}),k.map(A=>n.jsx("option",{value:A,children:A},A))]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"description",children:"Description"}),n.jsx(yi,{id:"description",value:j.description,onChange:A=>w({...j,description:A.target.value}),placeholder:"Brief description of the clinic...",rows:3})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{htmlFor:"service",children:"Associated Service"}),n.jsxs(Mn,{value:j.service||"none",onValueChange:A=>w({...j,service:A==="none"?"":A}),children:[n.jsx(jn,{className:"w-full",children:n.jsx(Fn,{placeholder:"Select a service (optional)"})}),n.jsxs(Sn,{children:[n.jsx("div",{className:"p-2",children:n.jsx(Oe,{placeholder:"Search services...",className:"h-8 mb-2",onChange:A=>{const M=A.target.value.toLowerCase();document.querySelectorAll("[data-service-item]").forEach(E=>{var Y;const ae=((Y=E.textContent)==null?void 0:Y.toLowerCase())||"";E.style.display=ae.includes(M)?"":"none"})}})}),n.jsx(ot,{value:"none",children:"None (optional)"}),a.map(A=>n.jsx(ot,{value:A.id,"data-service-item":!0,children:A.name},A.id)),a.length===0&&n.jsx("div",{className:"p-2 text-xs text-muted-foreground text-center",children:"No services available. Create services first."})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(xl,{id:"isActive",checked:j.isActive,onCheckedChange:A=>w({...j,isActive:!!A})}),n.jsx(Ce,{htmlFor:"isActive",children:"Active"})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>{m(!1),f(null),w({name:"",description:"",department:"",service:"",isActive:!0})},className:"flex-1",disabled:y,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsx(_e,{type:"submit",className:"flex-1",disabled:y||!j.name.trim()||!j.department,children:y?n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(S1,{className:"w-4 h-4 mr-2"}),x?"Update Clinic":"Create Clinic"]})})]})]})]})})]})})},a3=p.createContext(null),i3=()=>{const e=p.useContext(a3);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},o3=()=>{i3();const[e,t]=p.useState(!1),[r,s]=p.useState("disconnected"),[a,i]=p.useState("192.168.1.100"),[l,o]=p.useState("8080"),[c,d]=p.useState(!1),u=async()=>{if(!a.trim()||!l.trim()){ye.error("Please enter IP address and port");return}s("connecting"),setTimeout(()=>{t(!0),s("connected"),ye.success(`Connected to Mindray Analyzer at ${a}:${l}`)},2e3)},m=()=>{t(!1),s("disconnected");try{const y=localStorage.getItem("mindray-connection-settings");if(y){const v=JSON.parse(y);v.isConnected=!1,localStorage.setItem("mindray-connection-settings",JSON.stringify(v))}}catch(y){console.error("Error updating connection state:",y)}ye.info("Disconnected from Mindray Analyzer")},x=()=>{try{const y=localStorage.getItem("mindray-connection-settings");if(y){const{ipAddress:v,port:S,isConnected:b}=JSON.parse(y);v&&i(v),S&&o(S),b&&(t(!0),s("connected"))}}catch(y){console.error("Error loading connection settings:",y)}},f=async()=>{if(!a.trim()||!l.trim()){ye.error("Please enter IP address and port");return}d(!0);try{const y={ipAddress:a.trim(),port:l.trim(),isConnected:!0,savedAt:new Date().toISOString()};localStorage.setItem("mindray-connection-settings",JSON.stringify(y)),s("connecting"),setTimeout(()=>{t(!0),s("connected"),ye.success(`Settings saved and connected to Mindray Analyzer at ${a}:${l}`),d(!1)},2e3)}catch(y){console.error("Error saving connection settings:",y),ye.error("Failed to save connection settings"),d(!1)}};return p.useEffect(()=>{x()},[]),n.jsx(Xn,{children:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mindray Analyzer Integration"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Connect and import CBC results from Mindray analyzer"})]}),n.jsx(lr,{variant:e?"default":"secondary",className:`px-3 py-1 ${e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:e?n.jsxs(n.Fragment,{children:[n.jsx(CN,{className:"w-4 h-4 mr-1"}),"Connected"]}):n.jsxs(n.Fragment,{children:[n.jsx(_N,{className:"w-4 h-4 mr-1"}),"Disconnected"]})})]}),n.jsxs(Ur,{className:"max-w-2xl mx-auto",children:[n.jsx(en,{children:n.jsxs(tn,{className:"flex items-center gap-2",children:[n.jsx(Kl,{className:"w-5 h-5"}),"Mindray Analyzer Configuration"]})}),n.jsxs(Gr,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Mindray BC-5000"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Hematology Analyzer"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[r==="connecting"&&n.jsx(Ev,{className:"w-4 h-4 animate-spin text-blue-500"}),e?n.jsx(ek,{className:"w-5 h-5 text-green-500"}):n.jsx(tx,{className:"w-5 h-5 text-gray-400"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ce,{htmlFor:"ipAddress",children:"IP Address"}),n.jsx(Oe,{id:"ipAddress",value:a,onChange:y=>i(y.target.value),placeholder:"192.168.1.100",disabled:e})]}),n.jsxs("div",{children:[n.jsx(Ce,{htmlFor:"port",children:"Port"}),n.jsx(Oe,{id:"port",value:l,onChange:y=>o(y.target.value),placeholder:"8080",disabled:e})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ce,{children:"Connection Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${e?"bg-green-500":"bg-gray-300"}`}),n.jsx("span",{className:"text-sm",children:r==="connecting"?"Connecting...":e?`Connected to analyzer at ${a}:${l}`:"Not connected"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_e,{onClick:f,disabled:c||!a.trim()||!l.trim(),variant:"outline",className:"flex-1",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Ev,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Save Settings"]})}),e?n.jsxs(_e,{onClick:m,variant:"outline",className:"flex-1",children:[n.jsx(_N,{className:"w-4 h-4 mr-2"}),"Disconnect"]}):n.jsx(_e,{onClick:u,disabled:r==="connecting",className:"flex-1",children:r==="connecting"?n.jsxs(n.Fragment,{children:[n.jsx(Ev,{className:"w-4 h-4 mr-2 animate-spin"}),"Connecting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(CN,{className:"w-4 h-4 mr-2"}),"Connect"]})})]})]})]})]})})},l3=()=>{const{user:e}=qn(),[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(""),[o,c]=p.useState(!1),[d,u]=p.useState(!1),[m,x]=p.useState(!1),[f,y]=p.useState(null),[v,S]=p.useState(null),[b,j]=p.useState(!1),[w,k]=p.useState({displayName:"",email:"",role:"",clinic:(e==null?void 0:e.clinic)||""}),[R,W]=p.useState({displayName:"",role:"",clinic:""}),O=[{value:"admin",label:"Administrator"},{value:"reception",label:"Reception"},{value:"doctor",label:"Doctor"},{value:"lab",label:"Laboratory"},{value:"pharmacy",label:"Pharmacy"},{value:"reports",label:"Reports"}],q=["Universal Hospital"];p.useEffect(()=>{D()},[e==null?void 0:e.clinic]);const D=async()=>{if(e!=null&&e.clinic)try{const T=await fetch(`/api/users?clinic=${encodeURIComponent(e.clinic)}`,{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch users");const V=await T.json(),re={1:"Universal Hospital"},he=V.map(C=>({id:C.id,displayName:C.display_name||C.displayName||"",email:C.email||"",role:C.role||"",clinic:re[C.clinic_id]||C.clinic||"",isActive:C.is_active!==void 0?C.is_active:!0,createdAt:C.created_at||C.createdAt,lastLogin:C.last_login||C.lastLogin}));r(he.sort((C,F)=>C.displayName.localeCompare(F.displayName)))}catch(T){console.error("Error fetching users:",T),ye.error("Failed to load users")}finally{a(!1)}},J=async T=>{if(T.preventDefault(),!!e){j(!0);try{const V=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:w.email.toLowerCase().trim(),displayName:w.displayName.trim(),role:w.role,clinic:w.clinic,isActive:!0,status:"pending",createdBy:e.displayName})});if(!V.ok){const re=await V.json();throw new Error(re.message||"Failed to create user")}ye.success(`User ${w.displayName} created successfully. They can now log in to set their password.`),c(!1),k({displayName:"",email:"",role:"",clinic:(e==null?void 0:e.clinic)||""}),D()}catch(V){console.error("Error creating user:",V),ye.error(V.message||"Failed to create user")}finally{j(!1)}}},A=async T=>{if(T.preventDefault(),!!f){j(!0);try{const V=await fetch(`/api/users/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({displayName:(R.displayName||"").trim(),role:R.role,clinic:R.clinic,updatedBy:e==null?void 0:e.displayName})});if(!V.ok){const re=await V.json();throw new Error(re.message||"Failed to update user")}ye.success(`User ${R.displayName||"User"} updated successfully`),u(!1),y(null),D()}catch(V){console.error("Error updating user:",V),ye.error("Failed to update user")}finally{j(!1)}}},M=async(T,V)=>{try{const re=await fetch(`/api/users/${T}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({isActive:!V,updatedBy:e==null?void 0:e.displayName})});if(!re.ok){const he=await re.json();throw new Error(he.message||"Failed to update user status")}ye.success(`User ${V?"disabled":"enabled"} successfully`),D()}catch(re){console.error("Error toggling user status:",re),ye.error("Failed to update user status")}},ee=async()=>{if(v){j(!0);try{const T=await fetch(`/api/users/${v.id}`,{method:"DELETE",credentials:"include"});if(!T.ok){const V=await T.json();throw new Error(V.message||"Failed to delete user")}ye.success(`User ${v.displayName} deleted successfully`),x(!1),S(null),D()}catch(T){console.error("Error deleting user:",T),ye.error("Failed to delete user")}finally{j(!1)}}},E=T=>{S(T),x(!0)},ae=T=>{y(T),W({displayName:T.displayName||"",role:T.role||"",clinic:T.clinic||""}),u(!0)},Y=t.filter(T=>(T.displayName||"").toLowerCase().includes(i.toLowerCase())||(T.email||"").toLowerCase().includes(i.toLowerCase())||(T.role||"").toLowerCase().includes(i.toLowerCase())),de=T=>({admin:"bg-red-100 text-red-800",doctor:"bg-blue-100 text-blue-800",reception:"bg-green-100 text-green-800",lab:"bg-purple-100 text-purple-800",pharmacy:"bg-orange-100 text-orange-800",reports:"bg-gray-100 text-gray-800"})[T]||"bg-gray-100 text-gray-800";return n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[n.jsx(Hc,{className:"w-6 h-6"}),"Security Management"]}),n.jsxs("p",{className:"text-muted-foreground mt-1",children:["Manage users, roles, and account access  ",e==null?void 0:e.clinic]})]}),n.jsxs(_e,{onClick:()=>c(!0),className:"quick-action-btn",children:[n.jsx(Al,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Create User"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx("div",{className:"bg-card rounded-xl border border-border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(bi,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:t.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]})}),n.jsx("div",{className:"bg-card rounded-xl border border-border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:n.jsx(_a,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:t.filter(T=>T.isActive).length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"})]})]})}),n.jsx("div",{className:"bg-card rounded-xl border border-border p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:n.jsx(Xi,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:t.filter(T=>!T.isActive).length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Disabled Users"})]})]})})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative max-w-md",children:[n.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(Oe,{type:"text",placeholder:"Search users by name, email, or role...",value:i,onChange:T=>l(T.target.value),className:"pl-10 h-12"})]})}),n.jsx("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(mr,{className:"w-8 h-8 animate-spin text-primary"})}):Y.length===0?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:i?"No users match your search":"No users found"})}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Role"}),n.jsx("th",{children:"Clinic"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:Y.map(T=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:T.displayName}),n.jsx("td",{className:"text-muted-foreground",children:T.email}),n.jsx("td",{children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${de(T.role)}`,children:T.role})}),n.jsx("td",{className:"text-muted-foreground",children:T.clinic}),n.jsx("td",{children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isActive?"Active":"Disabled"})}),n.jsx("td",{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_e,{size:"sm",variant:"outline",onClick:()=>ae(T),className:"h-8 w-8 p-0",children:n.jsx(ji,{className:"w-4 h-4"})}),n.jsx(_e,{size:"sm",variant:T.isActive?"destructive":"default",onClick:()=>M(T.id,T.isActive||!1),className:"h-8 w-8 p-0",children:T.isActive?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})}),n.jsx(_e,{size:"sm",variant:"destructive",onClick:()=>E(T),className:"h-8 w-8 p-0",children:n.jsx(Lu,{className:"w-4 h-4"})})]})})]},T.id))})]})})}),n.jsx(wr,{open:o,onOpenChange:c,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Al,{className:"w-5 h-5"}),"Create New User"]})}),n.jsxs("form",{onSubmit:J,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"displayName",className:"form-label",children:"Full Name *"}),n.jsx(Oe,{id:"displayName",value:w.displayName,onChange:T=>k({...w,displayName:T.target.value}),placeholder:"Enter full name",required:!0,autoFocus:!0,className:"h-12"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"email",className:"form-label",children:"Email Address *"}),n.jsx(Oe,{id:"email",type:"email",value:w.email,onChange:T=>k({...w,email:T.target.value}),placeholder:"Enter email address",required:!0,className:"h-12"})]}),n.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Note:"})," The user will set their password when they first log in."]})}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"role",className:"form-label",children:"Role *"}),n.jsxs(Mn,{value:w.role,onValueChange:T=>k({...w,role:T}),children:[n.jsx(jn,{className:"h-12",children:n.jsx(Fn,{placeholder:"Select role"})}),n.jsx(Sn,{children:O.map(T=>n.jsx(ot,{value:T.value,children:T.label},T.value))})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"clinic",className:"form-label",children:"Branch *"}),n.jsxs(Mn,{value:w.clinic,onValueChange:T=>k({...w,clinic:T}),children:[n.jsx(jn,{className:"h-12",children:n.jsx(Fn,{placeholder:"Select branch"})}),n.jsx(Sn,{children:n.jsx(ot,{value:"Universal Hospital",children:"Universal Hospital"})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>c(!1),className:"flex-1",disabled:b,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:b||!w.displayName.trim()||!w.email.trim()||!w.role,children:[b?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]})]})}),n.jsx(wr,{open:d,onOpenChange:u,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"w-5 h-5"}),"Edit User"]})}),f&&n.jsxs("form",{onSubmit:A,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[n.jsxs("p",{className:"text-sm font-medium",children:["Email: ",f.email]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",f.isActive?"Active":"Disabled"]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"editDisplayName",className:"form-label",children:"Full Name *"}),n.jsx(Oe,{id:"editDisplayName",value:R.displayName,onChange:T=>W({...R,displayName:T.target.value}),placeholder:"Enter full name",required:!0,autoFocus:!0,className:"h-12"})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"editRole",className:"form-label",children:"Role *"}),n.jsxs(Mn,{value:R.role,onValueChange:T=>W({...R,role:T}),children:[n.jsx(jn,{className:"h-12",children:n.jsx(Fn,{placeholder:"Select role"})}),n.jsx(Sn,{children:O.map(T=>n.jsx(ot,{value:T.value,children:T.label},T.value))})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"editClinic",className:"form-label",children:"Clinic *"}),n.jsxs(Mn,{value:R.clinic,onValueChange:T=>W({...R,clinic:T}),children:[n.jsx(jn,{className:"h-12",children:n.jsx(Fn,{placeholder:"Select clinic"})}),n.jsx(Sn,{children:q.map(T=>n.jsx(ot,{value:T,children:T},T))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>u(!1),className:"flex-1",disabled:b,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:b||!(R.displayName||"").trim()||!R.role,children:[b?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Update User"]})]})]})]})}),n.jsx(wr,{open:m,onOpenChange:x,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(tx,{className:"w-5 h-5 text-destructive"}),"Delete User"]})}),v&&n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"bg-destructive/10 p-4 rounded-lg border border-destructive/20",children:[n.jsx("p",{className:"text-sm font-medium text-destructive mb-2",children:"Warning: This action cannot be undone!"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"You are about to permanently delete the user account for:"}),n.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md",children:[n.jsx("p",{className:"font-medium",children:v.displayName}),n.jsx("p",{className:"text-sm text-muted-foreground",children:v.email}),n.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[v.role,"  ",v.clinic]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>{x(!1),S(null)},className:"flex-1",disabled:b,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(_e,{type:"button",variant:"destructive",onClick:ee,className:"flex-1",disabled:b,children:[b?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(Lu,{className:"w-4 h-4 mr-2"}),"Delete User"]})]})]})]})})]})})},c3=()=>{var R;const{user:e}=qn();p.useState(!1);const[t,r]=p.useState(!1),[s,a]=p.useState(!1),[i,l]=p.useState(!1),[o,c]=p.useState(!1),[d,u]=p.useState(!1),[m,x]=p.useState(!1),[f,y]=p.useState({displayName:(e==null?void 0:e.displayName)||""}),[v,S]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),b=async W=>{if(W.preventDefault(),!!e){l(!0);try{const O=await fetch(`/api/users/${e.uid}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({displayName:f.displayName.trim()})});if(!O.ok){const q=await O.json();throw new Error(q.message||"Failed to update profile")}ye.success("Profile updated successfully"),r(!1)}catch(O){console.error("Error updating profile:",O),ye.error("Failed to update profile")}finally{l(!1)}}},j=async W=>{if(W.preventDefault(),!!e){if(v.newPassword!==v.confirmPassword){ye.error("New passwords do not match");return}if(v.newPassword.length<6){ye.error("Password must be at least 6 characters long");return}l(!0);try{const O=localStorage.getItem("token"),q=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},credentials:"include",body:JSON.stringify({currentPassword:v.currentPassword,newPassword:v.newPassword})});if(!q.ok){const D=await q.json();throw new Error(D.message||"Failed to change password")}ye.success("Password changed successfully"),a(!1),S({currentPassword:"",newPassword:"",confirmPassword:""})}catch(O){console.error("Error changing password:",O),ye.error(O.message||"Failed to change password")}finally{l(!1)}}},w=W=>({admin:"bg-red-100 text-red-800",doctor:"bg-blue-100 text-blue-800",reception:"bg-green-100 text-green-800",lab:"bg-purple-100 text-purple-800",pharmacy:"bg-orange-100 text-orange-800",reports:"bg-gray-100 text-gray-800"})[W]||"bg-gray-100 text-gray-800",k=W=>({admin:"Administrator",doctor:"Doctor",reception:"Reception",lab:"Laboratory",pharmacy:"Pharmacy",reports:"Reports"})[W]||W;return n.jsx(Xn,{children:n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"module-header",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[n.jsx(Is,{className:"w-6 h-6"}),"My Profile"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage your account information"})]}),n.jsxs(_e,{onClick:()=>r(!0),className:"quick-action-btn",children:[n.jsx(ji,{className:"w-5 h-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Edit Profile"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Is,{className:"w-5 h-5"}),"Personal Information"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-lg bg-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-2xl font-bold text-primary",children:((R=e==null?void 0:e.displayName)==null?void 0:R.charAt(0).toUpperCase())||"U"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold",children:e==null?void 0:e.displayName}),n.jsx("p",{className:"text-muted-foreground",children:e==null?void 0:e.email})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 pt-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(MI,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Email Address"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.email})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hc,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Role"}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w((e==null?void 0:e.role)||"admin")}`,children:k((e==null?void 0:e.role)||"admin")})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_I,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Clinic"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.clinic})]})]})]})]})]}),n.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[n.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Hc,{className:"w-5 h-5"}),"Account Security"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Password"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),n.jsxs(_e,{variant:"outline",size:"sm",onClick:()=>a(!0),children:[n.jsx(Av,{className:"w-4 h-4 mr-2"}),"Change"]})]})}),n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hc,{className:"w-4 h-4 text-green-600"}),n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Account Status"})]}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your account is active and secure"})]})]})]})]}),n.jsx(wr,{open:t,onOpenChange:r,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"w-5 h-5"}),"Edit Profile"]})}),n.jsxs("form",{onSubmit:b,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"displayName",className:"form-label",children:"Full Name *"}),n.jsx(Oe,{id:"displayName",value:f.displayName,onChange:W=>y({...f,displayName:W.target.value}),placeholder:"Enter your full name",required:!0,autoFocus:!0,className:"h-12"})]}),n.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Note:"})," Email, role, and clinic can only be changed by an administrator."]})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1",disabled:i,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:i||!f.displayName.trim(),children:[i?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(ra,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),n.jsx(wr,{open:s,onOpenChange:a,children:n.jsxs(xr,{className:"sm:max-w-md",children:[n.jsx(Nr,{children:n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Av,{className:"w-5 h-5"}),"Change Password"]})}),n.jsxs("form",{onSubmit:j,className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"currentPassword",className:"form-label",children:"Current Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"currentPassword",type:o?"text":"password",value:v.currentPassword,onChange:W=>S({...v,currentPassword:W.target.value}),placeholder:"Enter current password",required:!0,autoFocus:!0,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:o?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"newPassword",className:"form-label",children:"New Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"newPassword",type:d?"text":"password",value:v.newPassword,onChange:W=>S({...v,newPassword:W.target.value}),placeholder:"Enter new password",required:!0,minLength:6,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"confirmPassword",className:"form-label",children:"Confirm New Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"confirmPassword",type:m?"text":"password",value:v.confirmPassword,onChange:W=>S({...v,confirmPassword:W.target.value}),placeholder:"Confirm new password",required:!0,minLength:6,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:m?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(_e,{type:"button",variant:"outline",onClick:()=>{a(!1),S({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1",disabled:i,children:[n.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(_e,{type:"submit",className:"flex-1",disabled:i||!v.currentPassword||!v.newPassword||!v.confirmPassword,children:[i?n.jsx(mr,{className:"w-4 h-4 mr-2 animate-spin"}):n.jsx(Av,{className:"w-4 h-4 mr-2"}),"Change Password"]})]})]})]})})]})})},d3=()=>{const[e]=WD(),t=e.get("email")||"",r=Vu(),{userRepo:s}=VF(),[a,i]=p.useState(""),[l,o]=p.useState(""),[c,d]=p.useState(!1),[u,m]=p.useState(!1),[x,f]=p.useState(!1),y=async v=>{if(v.preventDefault(),!t){ye.error("Email address is required");return}if(a!==l){ye.error("Passwords do not match");return}if(a.length<6){ye.error("Password must be at least 6 characters long");return}f(!0);try{const S=await s.findByEmail(t);if(!S){ye.error("No account found with this email. Please contact your administrator to create an account.");return}if(S.get("status")!=="pending"){ye.error("This account is already active. Please use regular login.");return}await s.update(S.id,{password_hash:a,status:"active",password_set_at:new Date}),ye.success("Password set successfully! Welcome to Universal Hospital HMIS."),r("/dashboard")}catch(S){console.error("Error setting up password:",S),ye.error(S.message||"Failed to set up password. Please try again.")}finally{f(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs("div",{className:"bg-card rounded-xl border border-border p-8 shadow-lg",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center mx-auto mb-4",children:n.jsx(To,{className:"w-8 h-8 text-primary"})}),n.jsx("h1",{className:"text-2xl font-bold",children:"Welcome to Universal Hospital"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Set up your password to complete your account"})]}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hc,{className:"w-5 h-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Account Setup"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t})]})]})}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"password",className:"form-label",children:"Create Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"password",type:c?"text":"password",value:a,onChange:v=>i(v.target.value),placeholder:"Enter your password",required:!0,minLength:6,autoFocus:!0,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:c?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"form-field",children:[n.jsx(Ce,{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"confirmPassword",type:u?"text":"password",value:l,onChange:v=>o(v.target.value),placeholder:"Confirm your password",required:!0,minLength:6,className:"h-12 pr-10"}),n.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?n.jsx(Xi,{className:"w-4 h-4"}):n.jsx(_a,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Password Requirements:"}),n.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[n.jsx("li",{children:" At least 6 characters long"}),n.jsx("li",{children:" Use a combination of letters and numbers"}),n.jsx("li",{children:" Keep it secure and don't share with others"})]})]}),n.jsxs(_e,{type:"submit",className:"w-full h-12",disabled:x||!a||!l,children:[x?n.jsx(mr,{className:"w-5 h-5 mr-2 animate-spin"}):n.jsx(ra,{className:"w-5 h-5 mr-2"}),"Complete Setup"]})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"By setting up your password, you agree to keep your account secure"})})]})})})},u3=()=>{const e=ac();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),n.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),n.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},h3=new EF,Ds=({children:e,allowedRoles:t})=>{const{user:r,loading:s}=qn();return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(mr,{className:"w-8 h-8 animate-spin text-primary"})}):r?t&&!t.includes(r.role)?r.role==="reception"?n.jsx(of,{to:"/patients",replace:!0}):n.jsx(of,{to:"/dashboard",replace:!0}):n.jsx(n.Fragment,{children:e}):n.jsx(of,{to:"/login",replace:!0})},f3=({children:e})=>{const{user:t,loading:r}=qn();if(r)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(mr,{className:"w-8 h-8 animate-spin text-primary"})});if(t){const s=t.role==="reception"?"/patients":"/dashboard";return n.jsx(of,{to:s,replace:!0})}return n.jsx(n.Fragment,{children:e})},m3=()=>{const{user:e}=qn(),t=()=>e?e.role==="reception"?"/patients":"/dashboard":"/login";return n.jsxs(RD,{children:[n.jsx($n,{path:"/",element:n.jsx(of,{to:t(),replace:!0})}),n.jsx($n,{path:"/login",element:n.jsx(f3,{children:n.jsx(KF,{})})}),n.jsx($n,{path:"/setup-password",element:n.jsx(d3,{})}),n.jsx($n,{path:"/dashboard",element:n.jsx(Ds,{allowedRoles:["admin","reception","doctor","lab","pharmacy","reports"],children:n.jsx(a9,{})})}),n.jsx($n,{path:"/patients",element:n.jsx(Ds,{allowedRoles:["admin","reception","doctor"],children:n.jsx(p9,{})})}),n.jsx($n,{path:"/patients-chart",element:n.jsx(Ds,{allowedRoles:["admin","reception","doctor"],children:n.jsx(v9,{})})}),n.jsx($n,{path:"/clinical",element:n.jsx(Ds,{allowedRoles:["admin","doctor"],children:n.jsx(J9,{})})}),n.jsx($n,{path:"/patients-bill",element:n.jsx(Ds,{allowedRoles:["admin","reception","doctor"],children:n.jsx(dU,{})})}),n.jsx($n,{path:"/receipts",element:n.jsx(Ds,{allowedRoles:["admin","reception","doctor","pharmacy"],children:n.jsx(uU,{})})}),n.jsx($n,{path:"/laboratory",element:n.jsx(Ds,{allowedRoles:["admin","lab","doctor"],children:n.jsx(OU,{})})}),n.jsx($n,{path:"/pharmacy",element:n.jsx(Ds,{allowedRoles:["admin","pharmacy"],children:n.jsx(nz,{})})}),n.jsx($n,{path:"/reports",element:n.jsx(Ds,{allowedRoles:["admin","reports"],children:n.jsx(lW,{})})}),n.jsx($n,{path:"/setup/lab-tests",element:n.jsx(Ds,{allowedRoles:["admin"],children:n.jsx(XW,{})})}),n.jsx($n,{path:"/setup/services",element:n.jsx(Ds,{allowedRoles:["admin"],children:n.jsx(t3,{})})}),n.jsx($n,{path:"/setup/clinics",element:n.jsx(Ds,{allowedRoles:["admin"],children:n.jsx(s3,{})})}),n.jsx($n,{path:"/setup/mindray-integration",element:n.jsx(Ds,{allowedRoles:["admin"],children:n.jsx(o3,{})})}),n.jsx($n,{path:"/setup/security",element:n.jsx(Ds,{allowedRoles:["admin"],children:n.jsx(l3,{})})}),n.jsx($n,{path:"/profile",element:n.jsx(Ds,{children:n.jsx(c3,{})})}),n.jsx($n,{path:"*",element:n.jsx(u3,{})})]})},p3=()=>n.jsxs(iF,{children:[n.jsx(N7,{}),n.jsx(_C,{}),n.jsx(m3,{})]}),g3=()=>n.jsx(TF,{client:h3,children:n.jsx(qF,{children:n.jsx(RF,{children:n.jsx(p3,{})})})});pC(document.getElementById("root")).render(n.jsx(Ze.StrictMode,{children:n.jsxs(zD,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[n.jsx(g3,{}),n.jsx(_C,{})]})}));export{Dr as _,v3 as c,tS as g};
